/*! For license information please see main.62db15e7.chunk.js.LICENSE.txt */
(this["webpackJsonp@meddbriefer/debriefer"]=this["webpackJsonp@meddbriefer/debriefer"]||[]).push([[0],{49:function(e,t,n){},57:function(e,t,n){},61:function(e,t,n){"use strict";n.r(t);var r,i=n(2),a=n.n(i),s=n(43),o=n.n(s),c=(n(49),n(25)),d=n(11),l=n(26),u=(n(56),n(57),n(7)),p=n(31),b=(n(40),n(42),function(e,t){var n=function(e){var t=p.default.apps.filter((function(t){return t.options.appId===e}));return 1===t.length?t[0]:null}(e.appId);return n||p.default.initializeApp(e,t)});"pam"===Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_APP_ENV?(console.log("using pjordan config"),r=b({apiKey:"AIzaSyB9eVT-fu4TOjxHoPAXqsnz9tCcbTJkTOw",authDomain:"pamdev-ea800.firebaseapp.com",projectId:"pamdev-ea800",storageBucket:"pamdev-ea800.appspot.com",messagingSenderId:"366450927885",appId:"1:366450927885:web:caa5f022ef1de182a0e844",measurementId:"G-JC5XZEPYT1"},"pam")):"scott"===Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_APP_ENV?(console.log("using scott config"),r=b({apiKey:"AIzaSyBEhbIdVW2F2vvvfvpNb2SsCDP9Yoc__z8",authDomain:"scottdev-f6528.firebaseapp.com",projectId:"scottdev-f6528",storageBucket:"scottdev-f6528.appspot.com",messagingSenderId:"447730403122",appId:"1:447730403122:web:1727020dbac4ad4cf6f92b"})):(console.log("using production config"),r=b({apiKey:"AIzaSyBOgWAbXUGckpad2sk0IUo00hZsV4WxG0E",authDomain:"meddbriefer-68cd4.firebaseapp.com",projectId:"meddbriefer-68cd4",storageBucket:"meddbriefer-68cd4.appspot.com",messagingSenderId:"1087114796018",appId:"1:1087114796018:web:679fbab38dbf78af0ce96b",measurementId:"G-Q7QZKC9KHW"},"production"));var f,h,m,v=r,O=(v.auth(),v.firestore()),y=n(6),g=n.n(y),k=n(12),w=n(19),j=(n(34),"assessment"),A="assessment-option",x="assessment-with-options",E="decision",P="decision-option",C="intervention",I="phase",S="required-action",R="sub-phase",D=Object.freeze({PHASE:I,SUB_PHASE:R,ASSESS:j,AWO:x,ASSESS_OPTION:A,ASSESSO:A,CL_HEADING:"checklist-heading",CL_PROMPT:"checklist-prompt",DECISION:E,DECISION_OPTION:P,DIST_PROMPT:"distinguishing-prompt",NESTED_CHECKLIST:"nested-checklist",REQUIRED:S,REQURED:S,INTERV:C,PROMPT_SET:"prompt-set",PROMPT:"prompt",ANSWER:"answer"}),q=Object.freeze({ONE:"one",OOM:"one-or-more",NONE:"none"}),T=(Object.freeze({ONE:"One",OOM:"One or more",NONE:"None"}),Object.freeze({PHASE:"",SUB_PHASE:"",ANSWER:"answer-",ASSESS:"assess-",AWO:"assessment-with-options-",ASSESS_OPTION:"assess-option-",CL_PROMPT:"cl-prompt-",DECISION:"decision-",DECISION_OPTION:"decision-option-",INTERV:"intv-",PROMPT_SET:"prompt-set-",PROMPT:"prompt-",REQUIRED:"required-action-"}),Object.freeze({AW:"airway",BR:"breathing",BL:"bleeding",SH:"shock"}),Object.freeze({AW:"Airway",BR:"Breathing",BL:"Bleeding",SH:"Shock"}),[j,x,E,S]),N=[A,P],B=[j,x,E,S,C,I,R],F=(Object.freeze({NONE:"",MIN:"minimal",OPT:"optional",REQ:"required",CONTRA:"contraindicated",UNN:"unnecessary",IR:"irrelevant"}),n(9)),L=(n(17),n(37),n(38),n(16)),M=(D.DIST_PROMPT,q.ONE,D.DIST_PROMPT,q.OOM,D.PROMPT,q.ONE,D.PROMPT,q.ONE,D.PROMPT,D.PROMPT,q.ONE,D.PROMPT,q.ONE,D.PROMPT,q.ONE,D.PROMPT,q.ONE,D.PROMPT,q.ONE,D.PROMPT,q.ONE,D.PROMPT,q.ONE,D.PROMPT,q.ONE,D.PROMPT,q.ONE,D.PROMPT,q.ONE,D.PROMPT,q.ONE,D.PROMPT,q.ONE,D.PROMPT,q.ONE,D.PROMPT,q.ONE,D.PROMPT,q.ONE,D.PROMPT,q.ONE,D.PROMPT,q.ONE,D.PROMPT,q.ONE,D.PROMPT,q.ONE,D.PROMPT,q.ONE,D.PROMPT,q.ONE,D.PROMPT,q.ONE,f={depth:3,type:"intervention",id:"menu-item-nasotracheal-intubation",interventionID:"intv-nasotracheal-intubation"},Object(L.a)(f,"interventionID","intv-nasotracheal-intubation"),Object(L.a)(f,"interventionID","intv-nasotracheal-intubation"),Object(L.a)(f,"intvCategoryID","intv-cat-airway"),h={depth:4,type:"intervention",id:"menu-item-rapid-sequence-intubation",interventionID:"intv-rapid-sequence-intubation"},Object(L.a)(h,"interventionID","intv-rapid-sequence-intubation"),Object(L.a)(h,"interventionID","intv-rapid-sequence-intubation"),Object(L.a)(h,"intvCategoryID","intv-cat-airway"),function(e,t){return e.collection("published-scenarios").doc(t).get().then((function(e){return e.data()}))}),Y=function(){var e=Object(k.a)(g.a.mark((function e(t,n,r){var i;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.collection(n).where("id","==","".concat(r)).get();case 2:return i=e.sent,e.abrupt("return",i.empty);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),_=function(e,t){return e.collection("logs").doc(t).get().then((function(e){var t=e.data();return t.id=e.id,t}))},W=function(e,t){return e.collection("debriefing-feedback-logs").doc(t).get().then((function(e){var t=e.data();return t.id=e.id,t}))},z=n(62),H=n(1),V=function(){var e=Object(i.useState)([]),t=Object(u.a)(e,2),n=t[0],r=t[1],a=Object(i.useState)(!1),s=Object(u.a)(a,2),o=s[0],d=s[1];return Object(i.useEffect)((function(){var e;(e=O,e.collection("logs").get().then((function(e){return e.docs.map((function(e){var t=e.data();return{id:e.id,label:t.label,scenario:t.scenarioName,userName:t.userName,timestamp:t.timestamp}}))}))).then((function(e){r(e),d(!0)})).catch((function(e){return console.log("error fetching logs",e)}))}),[]),o?Object(H.jsxs)(z.a,{striped:!0,borderless:!0,size:"sm",hover:!0,children:[Object(H.jsx)("thead",{children:Object(H.jsxs)("tr",{children:[Object(H.jsx)("th",{children:"Label"}),Object(H.jsx)("th",{children:"Scenario"}),Object(H.jsx)("th",{children:"Username"}),Object(H.jsx)("th",{children:"Timestamp"})]})}),Object(H.jsx)("tbody",{children:n.map((function(e){return Object(H.jsxs)("tr",{children:[Object(H.jsx)("td",{children:e.label}),Object(H.jsx)("td",{children:e.scenario}),Object(H.jsx)("td",{children:e.userName}),Object(H.jsx)("td",{children:e.timestamp}),Object(H.jsxs)("td",{children:[Object(H.jsx)(c.Link,{to:"/logs/".concat(e.id),children:"Analyze"}),"\xa0\xa0\xa0\xa0",Object(H.jsx)(c.Link,{to:"/debriefing-feedback-logs/".concat(e.id),children:"Review"})]})]},e.id)}))})]}):Object(H.jsx)("h4",{children:"fetching log data"})},U=n(10),G={Good:"text-success",Caution:"text-warning",Problem:"text-danger","Not implemented":"text-muted"},K={Good:"sentiment_satisfied",Caution:"report_problem",Problem:"highlight_off","Not implemented":"sentiment_neutral"},Q={contraindicated:["Problem","You should not have done this action because it is contraindicated in this case +bos ?contraindicatedWhy ?why +eos"],irrelevant:["Problem","You should not have done this action because it is irrelevant in this case +bos ?why +eos"],unnecessary:["Problem","You should not have done this action because it is unnecessary in this case +bos ?why +eos"],missingMinimal:["Problem","You did not do this action +bos ?why +eos"],missingOptional:["Caution","You did not do this action +bos but it was optional in this case +bos ?why +eos"],missingRequired:["Problem","You did not do this action +bos ?why +eos"],missingRequiredAssessment:["Problem","You did not do this action +bos ?assessmentFB +eos"],notNecessary:["Caution","You should not have done this action because it was unnecessary +bos ?why +eos"],assessment:["Good",""],"assessment-option":["Good",""],"decision-option":["Good",""],"required-action":["Good",""],goodIntv:["Good","?intvStatusFB +eos "],"misOrdered-assessment":["Problem","Doing this action was correct but it was done out of the recommended order +bos @orderingFB +eos"],"misOrdered-assessment-option":["Problem","Doing this action was correct but it was done out of the recommended order +bos @orderingFB +eos"],"misOrdered-decision-option":["Problem","Doing this action was correct but it was done out of the recommeded order +bos @orderingFB"],"misOrdered-required-action":["Problem","Doing this action was correct but it was done out of the recommeded order +bos @orderingFB"],"misOrdered-goodIntv":["Problem","Doing this action was correct but it was done out of the recommeded order +bos @orderingFB"],"misOrdered-phase-assessment":["Problem","Doing this action was correct but this section was not completed in the recommended order +bos @orderingFB +eos"],"misOrdered-phase-assessment-option":["Good","Doing this action was correct but this section was not completed in the recommended order +bos @orderingFB +eos"],"misOrdered-phase-decision-option":["Problem","Doing this action was correct but this section was not completed in the recommended order +bos @orderingFB"],"misOrdered-phase-required-action":["Problem","Doing this action was correct but this section was not completed in the recommended order +bos @orderingFB"],"misOrdered-phase-goodintv":["Problem","Doing this action was correct but this section was not completed in the recommended order +bos @orderingFB"],intvCheckWNoIntvFound:["Caution","You didn't do this intervention so it doesn't make sense to check the status of it at this point."],unexpectedPatientIntvCheck:["Caution","This status check is not likely to reveal any useful information."],patientIntvCheck:["Good",""],patientVitalCheck:["Good",""],"assessment-option-incorrect":["Problem","Doing this action was correct but there is a problem with how you planned to do it +bos @incorrectAnswerFB +eos "],"decision-option-incorrect":["Problem","Doing this action was correct but there is a problem with how you planned to do it +bos @incorrectAnswerFB +eos "],"incorrect-answers":["Problem","Doing this action is correct but there is a problem with how you planned to do it +bos @incorrectAnswersFB +bos ?intvStatusFB +eos"],"minimal-incorrect-answers":["Problem","Doing this action was correct and would solve the problem but you did not follow protocol +bos ?minimalWhy +bos also there is a problem with how you planned to do this intervention +bos @incorrectAnswersFB +bos ?intvStatusFB +eos"],minimal:["Caution","Doing this action is correct and solves the problem but you did not follow protocol +bos @minimalWhy +bos ?intvStatusFB +eos "],"misOrdered-assessment-option-incorrect":["Problem","Doing this action was correct but it was done out of the recommended order +bos @orderingFB +bos Also there is a problem with how you planned to do it +bos @incorrectAnswerFB +eos "],"misOrdered-decision-option-incorrect":["Problem","Doing this action was correct but it was done out of the recommended order +bos @orderingFB +bos Also there is a problem with how you planned to do it +bos @incorrectAnswerFB +eos "],"misOrdered-incorrect-answers":["Problem","Doing this action is correct but it was done out of the recommended order +bos @orderingFB +bos also there is a problem with how you planned to do it +bos @incorrectAnswersFB +bos ?intvStatusFB +eos"],"misOrdered-minimal-incorrect-answers":["Problem","Doing this action is correct but it was done out of the recommended order +bos @orderingFB +bos And while this would solve the problem, you did not follow protocol +bos @minimalWhy +bos also there is a problem with how you planned to do it +bos @incorrectAnswersFB +bos ?intvStatusFB +eos"],"misOrdered-minimal":["Problem","Doing this action is correct but it was done out of the recommended order +bos @orderingFB +bos And while this would solve the problem, you did not follow protocol +bos @minimalWhy +bos ?intvStatusFB +eos"],"misOrdered-phase-assessment-option-incorrect":["Problem","Doing this action was correct but this section was not completed in the recommended order +bos @orderingFB +bos Also there is a problem with how you planned to do it +bos @incorrectAnswerFB +eos "],"misOrdered-phase-decision-option-incorrect":["Problem","Doing this action was correct but this section was not completed in the recommended order +bos @orderingFB +bos Also there is a problem with how you planned to do it +bos @incorrectAnswerFB +eos "],"misOrdered-phase-incorrect-answers":["Problem","Doing this action is correct but this section was not completed in the recommended order +bos @orderingFB +bos also there is a problem with how you planned to do it +bos @incorrectAnswersFB +bos ?intvStatusFB +eos"],"misOrdered-phase-minimal-incorrect-answers":["Problem","Doing this action is correct but this section was not completed in the recommended order +bos @orderingFB +bos And while this would solve the problem, you did not follow protocol +bos ?minimalWhy +bos also there is a problem with how you planned to do it +bos @incorrectAnswersFB +bos ?intvStatusFB +eos"],"misOrdered-phase-minimal":["Problem","Doing this action is correct but this section was not completed in the recommended order +bos @orderingFB +bos And while this would solve the problem, you did not follow protocol +bos ?minimalWhy +bos ?intvStatusFB +eos"],green:["Good",""],red:["Problem",""],yellow:["Caution",""],default:["Not implemented","This action was not expected.  There could be an issue with how this scenario is represented within the system."]},J={absent:["absent","missingMinimal","missingRequired","missingRequiredAssessment"],errors:["misOrdered-assessment","misOrdered-assessment-option","misOrdered-decision-option","misOrdered-required-action","misOrdered-goodIntv","assessment-option-incorrect","decision-option-incorrect","incorrect-answers","minimal-incorrect-answers","misOrdered-assessment-option-incorrect","misOrdered-decision-option-incorrect","misOrdered-incorrect-answers","misOrdered-minimal-incorrect-answers","misOrdered-minimal","misOrdered-phase-assessment-option-incorrect","misOrdered-phase-decision-option-incorrect","misOrdered-phase-incorrect-answers","misOrdered-phase-minimal-incorrect-answers"],good:["good","assessment","assessment-option","decision-option","required-action","goodIntv","patientIntvCheck","patientVitalCheck","irrelevant","unnecessary","contraindicated","notNecessary","intvCheckWNoIntvFound","unexpectedPatientIntvCheck","default","minimal","misOrdered-phase-minimal","misOrdered-phase-assessment","misOrdered-phase-assessment-option","misOrdered-phase-decision-option","misOrdered-phase-required-action","misOrdered-phase-goodIntv"]},X={absent:["missingMinimal","missingRequired","missingRequiredAssessment"],misordered:["misOrdered-assessment","misOrdered-assessment-option","misOrdered-decision-option","misOrdered-required-action","misOrdered-goodIntv","misOrdered-minimal"],misorderedErrors:["misOrdered-assessment-option-incorrect","misOrdered-decision-option-incorrect","misOrdered-incorrect-answers","misOrdered-minimal-incorrect-answers","misOrdered-phase-assessment-option-incorrect","misOrdered-phase-decision-option-incorrect","misOrdered-phase-incorrect-answers","misOrdered-phase-minimal-incorrect-answers"],errors:["assessment-option-incorrect","decision-option-incorrect","incorrect-answers","minimal-incorrect-answers"],good:["assessment","assessment-option","decision-option","required-action","goodIntv","patientIntvCheck","patientVitalCheck","irrelevant","unnecessary","contraindicated","notNecessary","intvCheckWNoIntvFound","unexpectedPatientIntvCheck","default","minimal","misOrdered-phase-minimal","misOrdered-phase-assessment","misOrdered-phase-assessment-option","misOrdered-phase-decision-option","misOrdered-phase-required-action","misOrdered-phase-goodIntv"]},Z=[{scenarioName:"M2CA",exceptions:[["required-action-obtain-OPQRST","This cannot be assessed when GCS < 15"],["assess-opqrst-info","This cannot be assessed when GCS < 15"]]}],$=(m={"scene-size-up":{id:"T1",before:["primary-survey"],beforeOp:"",after:[],afterOp:"",type:"policy"},"primary-survey":{id:"T2a",before:["secondary-assessment"],beforeOp:"",after:[],afterOp:"",type:"policy"},"intv-control-severe-bleeding-technique-direct-pressure":{id:"T2b",before:["secondary-assessment"],beforeOp:"",after:[],afterOp:"",type:"policy"},"intv-control-severe-bleeding-technique-2nd-tourniquet":{id:"T2c",before:["secondary-assessment"],beforeOp:"",after:[],afterOp:"",type:"policy"},"intv-control-severe-bleeding-technique-tourniquet":{id:"T2d",before:["secondary-assessment"],beforeOp:"",after:[],afterOp:"",type:"policy"},"ints-call-for-helicopter":{id:"T3",before:["secondary-assessment"],beforeOp:"",after:[],afterOp:"",type:"policy"},"required-action-obtains-vitals":{id:"T4",before:["secondary-assessment"],beforeOp:"",after:[],afterOp:"",type:"policy"},"required-action-attempt-obtain-sample":{id:"T5a",before:["secondary-assessment"],beforeOp:"",after:[],afterOp:"",type:"policy"},"required-action-obtain-OPQRST":{id:"T5b",before:["secondary-assessment"],beforeOp:"",after:[],afterOp:"",type:"policy"},"intv-transfer":{id:"T7",before:["secondary-assessment"],beforeOp:"",after:["airway","breathing","circulation"],afterOp:"",type:"policy"},"trauma-expose":{id:"T8",before:["chest"],beforeOp:"or",after:[],afterOp:"",type:"policy"},"general-impression":{id:"T9",before:["airway","breathing","circulation"],beforeOp:"and",after:[],afterOp:"",type:"policy"},"intv-spinal-immobilization-technique-manual-c-spine":{id:"T10a",before:["airway"],beforeOp:"",after:[],afterOp:"",type:"policy"},"intv-spinal-immobilization-technique-cervical-collar":{id:"T10b",before:["airway"],beforeOp:"",after:[],afterOp:"",type:"policy"},"intv-airway-patency-technique-suction-airway":{id:"T13",before:["secondary-assessment"],beforeOp:"",after:["airway"],afterOp:"",type:"policy"}},Object(L.a)(m,"intv-airway-patency-technique-suction-airway",{id:"T14",before:["intv-oropharyngeal-airway","intv-nasopharyngeal-airway"],beforeOp:"or",after:[],afterOp:"",type:"policy"}),Object(L.a)(m,"intv-oropharyngeal-airway",{id:"T15a",before:["intv-nasotracheal-intubation","intv-orotracheal-intubation","intv-sedation-assisted-intubation","intv-rapid-sequence-intubation"],beforeOp:"or",after:[],afterOp:"",type:"policy"}),Object(L.a)(m,"intv-nasopharyngeal-airway",{id:"T15b",before:["intv-nasotracheal-intubation","intv-orotracheal-intubation","intv-sedation-assisted-intubation","intv-rapid-sequence-intubation"],beforeOp:"or",after:[],afterOp:"",type:"policy"}),Object(L.a)(m,"intv-ventilation-technique-bag-valve-mask",{id:"T17",before:["secondary-assessment"],beforeOp:"",after:[],afterOp:"",type:"policy"}),m),ee={"assess-major-bleeding":{id:"c1",before:["airway","breathing"],beforeOp:"",after:[],afterOp:"",type:"policy"},"intv-transport":{id:"T2-c1",before:["into-establish-IV","intv-control-shock-technique-administer-iv-boluses"],beforeOp:"and",after:[],afterOp:"",type:"policy"},"secondary-assessment":{id:"T6-c1",before:["intv-transfer","ongoing-mgmt-plan"],beforeOp:"",after:[],afterOp:"",type:"policy"},"pulse-checks":{id:"T12-c1",before:["airway"],beforeOp:"or",after:[],afterOp:"",type:"policy"}},te={M2CA:["c1","T6-c1"],B4CA:[],B7CA:[],SC8CP:["T2-c1","T6-c1","T12-c1"]},ne={"intv-nasopharyngeal-airway":{intvStatusNeeded:!0,vitalsNeeded:[]},"intv-oropharyngeal-airway":{intvStatusNeeded:!0,vitalsNeeded:[]},"intv-orotracheal-intubation":{intvStatusNeeded:!0,vitalsNeeded:[]},"intv-ventilation-technique-bag-valve-mask":{intvStatusNeeded:!1,vitalsNeeded:["R","Spo2","BP","Skin"]},"intv-sedation-assisted-intubation":{intvStatusNeeded:!1,vitalsNeeded:["R","Spo2","BP","Skin"]},"intv-control-severe-bleeding-technique-direct-pressure":{intvStatusNeeded:!0,vitalsNeeded:[]},"intv-control-severe-bleeding-technique-tourniquet":{intvStatusNeeded:!0,vitalsNeeded:[]},"intv-control-severe-bleeding-technique-2nd-tourniquet":{intvStatusNeeded:!0,vitalsNeeded:[]}};var re=[],ie=[],ae=function(e,t,n,r){var i=se(e,t);if(i){var a=[i],s=[],o=[];if(r){var c;if(2===n&&(c=t.filter((function(t){return t.inPhase===e&&"header"!==t.type}))),1===n){c=t.filter((function(e){return e.phaseID===i.id&&"header"===e.type&&"assessmentSubHeader"===e.subtype}));var d,l=Object(U.a)(c);try{for(l.s();!(d=l.n()).done;){var u=d.value;s.includes(u.id)||(s.push(u.id),o.push(u))}}catch(p){l.e(p)}finally{l.f()}c=o}a=a.concat(c)}return a}return!1},se=function(e,t){var n,r="unk",i=[],a=t.filter((function(t){return"header"===t.type&&t.id===e})),s=a[0],o=Object(U.a)(a);try{for(o.s();!(n=o.n()).done;){var c=n.value;he(c.status,i)}}catch(d){o.e(d)}finally{o.f()}return i.length>0&&(r=1===i.length?i[0]:"errors"),s&&(s.status=r),s};function oe(e){if(["irrelevant","unnecessary"].includes(e.status))return{};var t={};return e.labelID?t.id=e.labelID:t.id=e.id,"header"===e.type&&(t.subtype=e.id),e.expertPhase&&(t.inPhase=e.expertPhase),["label","status","phaseOrderStatus","phase","subPhase","labelID","phaseID","probLabel","answerCorrect","answerDetails","timestamp","type"].forEach((function(n){e[n]&&(t[n]=e[n])})),X.good.includes(t.status)&&(t.status="good"),X.absent.includes(t.status)&&(t.status="absent"),t}var ce,de,le=function(e,t,n,r,i){re=[],ie=[];var a={},s={};e.forEach((function(e){"intervention"!==e.type&&"answer"!==e.type?re.push(oe(e)):ie.push(oe(e))})),t.forEach((function(e){var t=ie.filter((function(t){return t.probLabel===e.probLabel&&"header"!==t.type})),n=t.map((function(e){return e.status})),r=me(n),i={id:e.probLabel,probLabel:e.probLabel,status:r,phaseOrderStatus:"good",subtype:"interventionHeader",type:"header"};t&&(s[e.probLabel]=[i].concat(t))}));var o,c,d,l=n,p=r.filter((function(e){return!l.includes(e)}));l.forEach((function(e){var t=ae(e,re,2,!0);t&&(a[e]=t)})),p.forEach((function(e){var t=ae(e,re,1,!0);t&&(a[e]=t)}));var b=Object(w.a)(Object(w.a)({},a),s);i.forEach((function(t){"header"===(c=e.filter((function(e){return!!e.labelID&&e.labelID===t.arg1.id||e.id===t.arg1.id}))[0]).type?(d=b[c.labelID],o=d[0]):("intervention"===c.type&&(d=b[c.probLabel]),d||(d=b[c.workingPhase]),o=d.filter((function(e){return e.id===t.arg1.id}))[0]),o&&("phase"===t.type?(o.phaseOrderStatus="misOrdered",o.arg2?o.arg2=o.arg2.concat([t.arg2.id]):o.arg2=[t.arg2.id]):o.arg2?o.arg2=o.arg2.concat([t.arg2.id]):o.arg2=[t.arg2.id])})),function(e){for(var t,n=["good"],r=0,i=Object.entries(e);r<i.length;r++){var a=Object(u.a)(i[r],2),s=(a[0],a[1]);if("assessmentHeader"===s[0].subtype&&"good"===s[0].status){var o,c=Object(U.a)(s.slice(1));try{for(c.s();!(o=c.n()).done;){var d=o.value;d.phaseOrderStatus&&he(d.phaseOrderStatus,n)}}catch(l){c.e(l)}finally{c.f()}(t=1===n.length?n[0]:"errors")&&(s[0].status=t)}}}(a);var f=function(e,t){var n,r,i={},a=[],s=[],o=Object(w.a)(Object(w.a)({},e),t),c={id:"top",probLabel:"top",status:"",phaseOrderStatus:"good",type:"header"};a.push(c),ce.forEach((function(e){(r=o[e])&&(i[e]=r,he(r[0].status,s),a.push(r[0]))})),n=1===s.length?s[0]:"errors";return a[0].status=n,de.forEach((function(e){(r=o[e])&&(i[e]=r)})),i.top=a,i}(a,s);return console.log("top-level-analysis: ",f),[a,s,f]},ue={},pe=["id","feedbackAbsent","feedbackOutOfOrder","feedbackErrors"],be={M2CA:{Action:{id:"top",label:"Top most node -level 0",feedbackAbsent:"Nothing done. Start scenario again.",feedbackOutOfOrder:"",feedbackError:"All wrong. Please start scenario again.",subActions:[{id:"scene-size-up",label:"Child1 -level1",feedbackAbsent:"absent -Child1 level 1",feedbackOutOfOrder:"late -Child1 level 1",feedbackErrors:"wrong -Child1 level 1",subActions:[{id:"assess-scene-safety",label:"Child1 of Child1 -level 2",feedbackAbsent:"absent -Child1 of Child1 -level2",feedbackOutOfOrder:"late -Child1 of Child1 -level2",feedbackErrors:"wrong -Child1 of Child1 -level2",subActions:[],examine:"N",prompts:""},{id:"required-action-BSI",label:"Child2 of Child1 -level 2",feedbackAbsent:"absent -Child2 of Child1 -level 2",feedbackOutOfOrder:"late -Child2 of Child1 -level 2",feedbackErrors:"wrong -Child2 of Child1 -level 2",subActions:[],examine:"Y",prompts:"prompts -Child2 of Child1 -level2"}],examine:"Y",prompts:"prompts -Child1 level 1"},{id:"primary-survey",label:"Child 2 -level1",feedbackAbsent:"absent -Child 2 level1",feedbackOutOfOrder:"late -Child 2 level1",feedbackErrors:"wrong -Child 2 level1",subActions:[{id:"general-impression",label:"Child1 of Child2 -level2",feedbackAbsent:"absent -Child1 of Child2 -level2",feedbackOutOfOrder:"late -Child1 of Child2 -level2",feedbackErrors:"wrong -Child1 of Child2 -level2",subActions:[],examine:"N",prompts:""},{id:"airway",label:"Child2 of child2 -level2",feedbackAbsent:"absent -Child2 of Child2 -level2",feedbackOutOfOrder:"late -Child2 of Child2 -level2",feedbackErrors:"wrong -Child2 of Child2 -level2",subActions:[{id:"airway-is-open",label:"Child1 of (Child2 of Child2) -level3",feedbackAbsent:"absent -Child1 of (Child2 of Child2) -level3",feedbackOutOfOrder:"late -Child1 of (Child2 of Child2) -level3",feedbackErrors:"wrong -Child1 of (Child2 of Child2) -level3",subActions:[],examine:"N",prompts:""},{id:"airway-is-clear-substances",label:"Child2 of (Child2 of Child2) -level3",feedbackAbsent:"absent -Child2 of (Child2 of Child2) -level3",feedbackOutOfOrder:"late -Child2 of (Child2 of Child2) -level3",feedbackErrors:"wrong -Child2 of (Child2 of Child2) -level3",subActions:[],examine:"Y",prompts:"prompts -Child2 of (Child2 of Child2) -level3"}],examine:"N",prompts:""},{id:"breathing",label:"Child3 of Child2 -level2",feedbackAbsent:"absent -Child3 of Child2 -level2",feedbackOutOfOrder:"late -Child3 of Child2 -level2",feedbackErrors:"wrong -Child3 of Child2 -level2",subActions:[],examine:"N",prompts:""}],examine:"N",prompts:""},{id:"Manage a potential head and/or spinal injury",label:"Child 3 -level1",feedbackAbsent:"absent -Child 3 level1",feedbackOutOfOrder:"late -Child 3 level1",feedbackErrors:"wrong -Child 3 level1",subActions:[{id:"intv-spinal-immobilization-technique-cervical-collar",label:"Cervical Collar",feedbackAbsent:"absent - cervical collar",feedbackOutOfOrder:"late - cervical collar",feedbackErrors:"wrong - cervical collar",subActions:[],examine:"Y",prompts:"prompts - cervical collar"}],examine:"N",prompts:""},{id:"ongoing-mgmt-plan",label:"Child 4 -level1",feedbackAbsent:"absent -Child 4 level1",feedbackOutOfOrder:"late -Child 4 level1",feedbackErrors:"wrong -Child 4 level1",subActions:[{id:"reassess-vital-signs",label:"Child1 of Child4 -level 2",feedbackAbsent:"absent -Child1 of Child4 -level2",feedbackOutOfOrder:"late -Child1 of Child4 -level2",feedbackErrors:"wrong -Child1 of Child4 -level2",subActions:[],examine:"Y",prompts:"prompts -Child1 of Child4 -level2"},{id:"repeat-primary-survey",label:"Child2 of Child4 -level 2",feedbackAbsent:"absent -Child2 of Child4 -level 2",feedbackOutOfOrder:"late -Child2 of Child4 -level 2",feedbackErrors:"wrong -Child2 of Child4 -level 2",subActions:[],examine:"N",prompts:""}],examine:"Y",prompts:"prompts -Child4 level1"}],examine:"N",prompts:""}},SC8CP:{Action:{id:[],label:"fully assess and manage the patient in this scenario",type:"Required",feedbackAbsent:"Your log indicates you didn't complete any of these assessment or managment goal. Please restart the scenario and try again",feedbackOutOfOrder:"",feedbackError:"",examine:"N",prompts:"",subActions:[{id:["scene-size-up"],label:"Put on BSI and do a complete Scene Size-up before entering the scene",type:"Required",feedbackAbsent:"Your first steps should have been to don your protective wear, including eye protection, and to ensure the scene is safe. You cannot assist a patient if you are not safe yourself.  *Your scene size up gives you a big-picture view of what is going on before you even begin examining the patient and includes determining the mechanism of injury and number of patients, requesting additional help if necessary, and considering stabilization of the spine.  *In this case, you would have learned that this is a near drowning incident, which should have prompted you to think about potential head or spinal injury, and the need for rescue breaths",feedbackOutOfOrder:"Your first steps should have been to don your protective wear, including eye protection, and to ensure the scene is safe. You cannot assist a patient if you are not safe yourself. Your scene size up also gives you a big-picture view of what is going on before you even begin examining the patient. This includes determining the mechanism of injury and number of patients, requesting additional help if necessary, and considering stabilization of spine.",feedbackErrors:"",examine:"",prompts:"",subActions:[{id:["required-action-BSI"],label:"Apply BSI",type:"Required",feedbackAbsent:"Your first steps should have been to don your protective wear, including eye protection, and to ensure the scene is safe. You cannot assist a patient if you are not safe yourself.",feedbackOutOfOrder:"",feedbackErrors:"",examine:"",prompts:"",subActions:[]},{id:["assess-scene-safety"],label:"Determine the scene/situation is safe",type:"Required",feedbackAbsent:"Your first steps should have been to don your protective wear, including eye protection, and to ensure the scene is safe. You cannot assist a patient if you are not safe yourself.",feedbackOutOfOrder:"",feedbackErrors:"",examine:"",prompts:"",subActions:[]},{id:["assess-injury-mechanism"],label:"Determine the mechanism of injury (MOI) or nature of illness (NOI)",type:"Required",feedbackAbsent:"Knowing what caused the patient's injury or illness can allow you to start developing a plan of action before you even assess your patient. *By determining the mechanism of injury, you would have learned that this is a near drowning incident, which should have prompted you to think about potential head or spinal injury, and the need for rescue breaths and/or CPR.",feedbackOutOfOrder:"",feedbackErrors:"",examine:"",prompts:"",subActions:[]},{id:["assess-num-patients"],label:"Determine the number of patients",type:"Required",feedbackAbsent:"Usually you will have one patient, but if there is more than one you will need to plan accordingly.",feedbackOutOfOrder:"",feedbackErrors:"",examine:"",prompts:"",subActions:[]},{id:["required-action-requests-additional-help"],label:"Request additional help if necessary",type:"Required",feedbackAbsent:"Consider the need for extra help based on number of patients, mechanism of injury, and your patient's status. *Although police and fire personnel were already on scene, you should have considered the need for additional ALS support.",feedbackOutOfOrder:"",feedbackErrors:"",examine:"",prompts:"",subActions:[]},{id:["required-action-considers-stabilize-spine"],label:"Consider stabilization of spine",type:"Required",feedbackAbsent:"All trauma patients are at risk for spinal injury, including drowning or near drowning patients, which could be caused by a diving accident. Take this into consideration before initial contact with the patient to prevent unintentional injury.",feedbackOutOfOrder:"",feedbackErrors:"",examine:"",prompts:"",subActions:[]}]},{id:["primary-survey"],label:"Perform a Primary Survey and manage all identified life threats",type:"Required",feedbackAbsent:"The primary survey is an assessment of mental status, life-threats, and the patient's ABCs. It is where you will identify and address the patient's most serious injuries. *In this case, the Primary Survey would have revealed an unconscious patient with respiratory failure and a weak and slow pulse.",feedbackOutOfOrder:"You should have started your Primary Survey after the Scene Size-up and completed it before starting the Secondary Survey. Only interrupt your assessment to control these life-threats: (1) compromised airway, (2) tension pneumothorax, (3) severe hemorrhage, and (4) cardiac arrest. Problems identifed during the primary survey can be life threatening, and if they are not adequately addressed, your patient may deteriorate as you continue on with your examination.",feedbackErrors:"",examine:"",prompts:"",subActions:[{id:["general-impression"],label:"Conduct an Initial Assessment",type:"Required",feedbackAbsent:"You should have performed an Initial Assessment: gathered a general impression, identified any apparent life threats, and determined your patient's level of consciousness.  Your Initial Assessment  would have revealed a patient who is unconscious.",feedbackOutOfOrder:"While you may be tempted to jump straight into your ABCs, apparent life threats (ie. uncontrolled bleeding) should be addressed first, as they can cause a patient to deteriorate quickly. Also, be sure to assess the patient's mental status, as an unconscious patient will need a pulse check first, to ensure he or she does not require CPR.",feedbackErrors:"",examine:"",prompts:"",subActions:[{id:["assess-patient-condition"],label:"State or request a general impression",type:"Required",feedbackAbsent:"Your general impression allows you to start developing a plan of action before you even assess your patient. *In this case, your general impression would have been of a child who nearly drowned.",feedbackOutOfOrder:"",feedbackErrors:"",examine:"",prompts:"",subActions:[]},{id:["assess-loc"],label:"Assess the patient's level of consciousness",type:"Required",feedbackAbsent:"The patient's level of consciousness alters how you progress through your assessment. *This patient was unresponsive with sluggish pupils.  This should have prompted you to consider him a critical patient, check his pulse prior to airway and breathing, and plan for urgent transfer to a nearby trauma center.",feedbackOutOfOrder:"",feedbackErrors:"",examine:"",prompts:"",subActions:[]},{id:["assess-life-threats"],label:"Determine the chief complaint/apparent life-threats",type:"Required",feedbackAbsent:"If you had determined apparent life threats, you would have noticed that the patient was unresponsive, indicating a critical patient.",feedbackOutOfOrder:"",feedbackErrors:"",examine:"",prompts:"",subActions:[]}]},{id:["intv-cat-spinal-motion-restriction"],label:"Manage a potential head or spinal injury",type:"Required",feedbackAbsent:"",feedbackOutOfOrder:"Managing the cervical spine is one of the first things you should do for any trauma patient, as you must ensure you do not cause any further injury during the remainder of your assessment and management.",feedbackErrors:"",examine:"",prompts:"",subActions:[{id:["intv-spinal-immobilization-technique-manual-c-spine"],label:"Apply (or direct a partner to apply) manual c-spine stabilization",type:"Required",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"",examine:"",prompts:"",subActions:[]},{id:["intv-spinal-immobilization-technique-cervical-collar"],label:"Apply an appropriately sized cervical collar",type:"Required",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"",examine:"",prompts:"",subActions:[]}]},{id:["airway"],label:"Assess the patient's airway",type:"Required",feedbackAbsent:"Be sure to assess the airway for patency and intact physical structures. *You would have found this patient's airway to be partially obstructed with vomit and water, indicating the need for suctioning.",feedbackOutOfOrder:"If your patient is conscious, you should examine the airway before breathing and circulation. If a patient is unconscious, you should assess the pulse first to evaluate for possible cardiac arrest, then go through your ABCs.",feedbackErrors:"",examine:"",prompts:"",subActions:[{id:["intv-open-airway-method-modified-jaw-thrust"],label:"Open the patient's airway with a jaw thrust maneuver",type:"Required",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"",examine:"",prompts:"",subActions:[]},{id:["airway-is-open"],label:"Check if the airway is patent",type:"Required",feedbackAbsent:"The first step of your airway assessment is to see if the patient's airway is open. If the patient is speaking normally, it is open. Signs like stridor or gasping may indicate an airway obstruction. *This patient's airway was partially obstructed with vomit and water, which should have been suctioned.",feedbackOutOfOrder:"",feedbackErrors:"",examine:"",prompts:"",subActions:[]},{id:["airway-has-intact-physical-structures"],label:"Check if the airway has intact physical structures",type:"Required",feedbackAbsent:"Be sure to look for injuries such as gun-shot wounds or facial fractures, as these may affect what basic or advanced airways you can use.",feedbackOutOfOrder:"",feedbackErrors:"",examine:"",prompts:"",subActions:[]}]},{id:["intv-cat-airway"],label:"Manage the patient\u2019s compromised airway",type:"Required",feedbackAbsent:"",feedbackOutOfOrder:"You should identify any airway obstructions, including blood, vomiting, and secretions while checking the patency of your patient's airway. Any obstruction should be addressed at that time.",feedbackErrors:"",examine:"",prompts:"",subActions:[{id:["intv-airway-patency-technique-suction-airway"],label:"Suction the patient's mouth using a Yankauer (rigid)  or Long multi-use catheter",type:"Required",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"",examine:"",prompts:"",subActions:[]},{id:["intv-oropharyngeal-airway","ntv-nasopharyngeal-airway "],label:"Insert a basic airway adjunct",type:"Required",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"",examine:"",prompts:"",subActions:[]},{id:["intv-orotracheal-intubation"],label:"Perform orotracheal intubation using an appropriately sized tube, inserted at the correct depth",type:"Required",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"",examine:"",prompts:"",subActions:[]}]},{id:["breathing"],label:"Assess the patient's breathing",type:"Required",feedbackAbsent:"After assessing the patient's airway, assess their breathing by listening for breath sounds and observing their respiratory rate, rhythm, and effort. *You would have found bradypnea and heard gurgling.  This should have prompted you to apply BVM ventilation or other ventilatory support.",feedbackOutOfOrder:"",feedbackErrors:"",examine:"",prompts:"",subActions:[{id:["breathing-rate-rhythm-quality"],label:"Rate, rhythm, and quality",type:"Required",feedbackAbsent:"A significantly elevated or depressed respiratory rate can suggest impending respiratory failure. *This patient's bradypnea suggests the need for ventilatory support, not just oxygenation.",feedbackOutOfOrder:"",feedbackErrors:"",examine:"",prompts:"",subActions:[]}]},{id:["Manage indadequate breathing"],label:"Manage inadequate breathing",type:"Required",feedbackAbsent:"",feedbackOutOfOrder:"Problems with ventilation and oxygenation are life threatening and should be addressed before you move on to your secondary survey. Repeat your exam and check vitals to ensure your interventions have worked as you expected. If not, your patient may deteriorate as you continue on with your examination.",feedbackErrors:"",examine:"",prompts:"",subActions:[{id:["intv-ventilation-technique-bag-valve-mask"],label:"Ventilate the patient at a rate of 20 BPM",type:"",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"",examine:"",prompts:"",subActions:[]},{id:["***"],label:"Titrate oxygen at a flow rate of 15 L/min to a target SpO2 > 90%",type:"",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"",examine:"",prompts:"",subActions:[]}]},{id:["circulation"],label:"Assess the patient's circulation",type:"Required",feedbackAbsent:"Evaluate the patient's pulse and skin to assess the patient for shock.  Be sure to also perform a gross blood sweep. *You would have noticed that your patient had weak slow pulses and dry cyanotic skin, indicating impending respiratory failure.",feedbackOutOfOrder:"All unconscious patients should have a pulse check before starting the ABCs. If the patient is pulseless, you will start high-quality CPR immediately.",feedbackErrors:"",examine:"",prompts:"",subActions:[{id:["pulse-checks"],label:"Pulse rate, rhythm, and quality",type:"Required",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"",examine:"",prompts:"",subActions:[]},{id:["checks-skin"],label:"Skin color, temperature, and condition",type:"Required",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"",examine:"",prompts:"",subActions:[]},{id:["assess-major-bleeding"],label:"Perform a gross blood sweep",type:"Required",feedbackAbsent:"A gross blood sweep will help you identify any life-threatening bleeding you may have missed earlier when forming your general impression.",feedbackOutOfOrder:"",feedbackErrors:"",examine:"",prompts:"",subActions:[]}]},{id:["transport-decision"],label:"Make appropriate initial transport decisions",type:"Required",feedbackAbsent:"Your ABCs and evaluation for life threats and level of consciousness will dictate where you transfer your patient. *This patient was critically ill so you should have decided to transport him to the level 1 pediatric  trauma center.",feedbackOutOfOrder:"Transport decisions should be made before beginning your secondary survey based on the information you have gathered thus far. This is especially important if you are calling for an air ambulance to account for the time it takes for them to arrive.",feedbackErrors:"",examine:"",prompts:"",subActions:[{id:["decision-is-load-and-go"],label:"Determine that this is a critical patient",type:"Required",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"",examine:"",prompts:"",subActions:[]},{id:["ntv-transport"],label:"Decide to transport the patient to a Level 1 pediatric trauma center",type:"Required",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"",examine:"",prompts:"",subActions:[]},{id:["intv-transport"],label:"Decide to transport the patient by air ambulance",type:"Required",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"",examine:"",prompts:"",subActions:[]}]},{id:["ints-call-for-helicopter"],label:"Call for an air ambulance (if chosen transport method)",type:"Required",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"",examine:"",prompts:"",subActions:[]},{id:["trauma-expose"],label:"Trauma expose the patient",type:"Required",feedbackAbsent:"Without exposing your patient, your head-to-toe exam may be hindered and you could miss an important exam finding.",feedbackOutOfOrder:"It is important to trauma expose your patient to ensure that your secondary survey can be performed efficiently.",feedbackErrors:"",examine:"",prompts:"",subActions:[]}]},{id:["history-taking"],label:"Obtain or direct a partner to obtain a patient history",type:"Required",feedbackAbsent:"",feedbackOutOfOrder:"You should have obtained a set of vitals or directed a partner to do so before beginning your Secondary Survey. A patient's vital signs may prompt you to repeat parts of your Primary Assessment before moving onto the Secondary Survey.",feedbackErrors:"",examine:"",prompts:"",subActions:[{id:["required-action-obtains-vitals"],label:"Baseline vital signs",type:"Required",feedbackAbsent:"Baseline vitals are critical; they will help you assess, manage, and continue to monitor your patient. *You would have found that this patient was bradycardic, bradypnic, hypoxic, and hypotensive, alerting you to a critical patient who needed prompt intervention.",feedbackOutOfOrder:"",feedbackErrors:"",examine:"",prompts:"",subActions:[]},{id:["required-action-attempt-obtain-sample"],label:"SAMPLE (if possible)",type:"Required",feedbackAbsent:"Take an efficient but thorough history from the baby sitter: symptoms, allergies, medications, past medical history, last oral intake, events preceding. *You would have learned that the child was left unattended on a floating mattress in the pool for 5 minutes, found underwater, and then pulled out of the pool.",feedbackOutOfOrder:"",feedbackErrors:"",examine:"",prompts:"",subActions:[]},{id:["required-action-obtain-OPQRST"],label:"OPQRST (if possible)",type:"Required",feedbackAbsent:"Assess the patient's pain: onset, provocation/palliation, quality, region/radiation, severity, and time. If the patient cannot tell you his or herself, you should ask a family member or other bystander for whatever information they may have.",feedbackOutOfOrder:"",feedbackErrors:"",examine:"",prompts:"",subActions:[]}]},{id:["secondary-assessment"],label:"Perform a Secondary Survey (rapid trauma assessment)",type:"Required",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"",examine:"",prompts:"",subActions:[{id:["head"],label:"examine the patient's head",type:"Required",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"",examine:"",prompts:"",subActions:[{id:["inspects-and-palpates-skull"],label:"Inspect and palpate the scalp and skull",type:"Required",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"",examine:"",prompts:"",subActions:[]},{id:["assessment-inspects-facial-bones"],label:"Inspect and palpate the facial bones",type:"Required",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"",examine:"",prompts:"",subActions:[]},{id:["inspects-eyes"],label:'Inspect the eyes for PERRLA and bruising ("raccoon eyes")',type:"Required",feedbackAbsent:"Checking for PERRLA would have revealed that  the patient's pupils were equal but sluggish, suggesting possible intracranial injury and a critically ill patient who needed rapid transfer to a trauma center. *Additionally, bruising around the eyes may be caused by basilar skull fracture.",feedbackOutOfOrder:"",feedbackErrors:"",examine:"",prompts:"",subActions:[]},{id:["inspects-ears"],label:'Inspect the ears for blood, other fluids, and bruising ("battle signs")',type:"Required",feedbackAbsent:"Bleeding from the ear may be indicative of a basilar skull fracture. Bruising behind the ear suggests a basilar skull fracture (Battle's sign).",feedbackOutOfOrder:"",feedbackErrors:"",examine:"",prompts:"",subActions:[]},{id:["inspects-nose"],label:"Inspect the nose for blood and other fluids",type:"Required",feedbackAbsent:"Clear drainage may be CSF from a basilar skull fracture.",feedbackOutOfOrder:"",feedbackErrors:"",examine:"",prompts:"",subActions:[]},{id:["inspects-mouth"],label:"Inspect the mouth for blood, other secretions, and obstructions",type:"Required",feedbackAbsent:"During your primary survey, you should have noticed water and vomit in the patient's mouth; you should have suctioned the patient's airway.  If you had done this, at this stage the patient's airway would be clear of secretions. If you had not suctioned the airway, there would still be vomit and water in the mouth.",feedbackOutOfOrder:"",feedbackErrors:"",examine:"",prompts:"",subActions:[]}]},{id:["neck"],label:"examine the patient's neck",type:"Required",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"",examine:"",prompts:"",subActions:[{id:["inspects-palpates-neck"],label:"inspect and palpate the patient's neck for tracheal deviation, JVD, step-offs and other injury",type:"Required",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"",examine:"",prompts:"",subActions:[]}]},{id:["chest"],label:"examine the patient's chest",type:"Required",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"",examine:"",prompts:"",subActions:[{id:["assessment-shoulders"],label:"Inspect and palpate shoulders",type:"Required",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"",examine:"",prompts:"",subActions:[]},{id:["assessment-clavicles"],label:"Inspect and palpates clavicles",type:"Required",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"",examine:"",prompts:"",subActions:[]},{id:["inspects-palpates-anterior-thorax"],label:"Inspect and palpate anterior thorax for injury, crepitation, and paradoxial motion or flail segments",type:"Required",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"",examine:"",prompts:"",subActions:[]}]},{id:["abdomen-pelvis"],label:"examine the patient's abdomen",type:"Required",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"",examine:"",prompts:"",subActions:[{id:["inspects-palpates-abdomen"],label:"Inspect and palpate the abdomen for injury,  distension and rigidity",type:"Required",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"",examine:"",prompts:"",subActions:[]}]},{id:["assess-pelvis"],label:"examine the patient's pelvis",type:"Required",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"",examine:"",prompts:"",subActions:[{id:["assessment-checks-pelvis"],label:"Inspect and compress the pelvis",type:"Required",feedbackAbsent:"Be sure to do a thorough exam of the pevis as the pelvis can be a source of life-threatening bleeding.",feedbackOutOfOrder:"",feedbackErrors:"",examine:"",prompts:"",subActions:[]},{id:["inspects-genitalia-perineum"],label:"Inspect the genitalia/perineum for blood, other fluids, and priapism (male)",type:"Required",feedbackAbsent:"In a male patient priaprism can indicate injury to either the spinal cord or the genitals themselves.",feedbackOutOfOrder:"",feedbackErrors:"",examine:"",prompts:"",subActions:[]}]},{id:["extremities"],label:"examine the patient's upper and lower extremities",type:"Required",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"",examine:"",prompts:"",subActions:[{id:["inspects-palpates-right-arm","inspects-palpates-left-arm","inspects-palpates-right-leg","inspects-palpates-left-leg"],label:"Inspect and palpate each extremity for injury, pulse, motor, and sensory function",type:"Required",feedbackAbsent:"If you had checked this patient's extremity pulses, you would have noticed weak extremity pulses, due to inadequate cardiac output.",feedbackOutOfOrder:"",feedbackErrors:"",examine:"",prompts:"",subActions:[]}]},{id:["posterior"],label:"examine the patient's posterior thorax, lumbar, and buttocks",type:"Required",feedbackAbsent:"You will need a partner to help you roll the patient safely in order to do a thorough exam of the posterior thorax, lumbar, and buttocks.",feedbackOutOfOrder:"",feedbackErrors:"",examine:"",prompts:"",subActions:[{id:["inspects-palpates-posterior"],label:"inspect and palpate the posterior for injury, crepitation and step-offs",type:"Required",feedbackAbsent:"Crepitation suggests underlying injury. A palpable step-off suggests a fracture.",feedbackOutOfOrder:"",feedbackErrors:"",examine:"",prompts:"",subActions:[]}]}]},{id:["ongoing-mgmt-plan"],label:"Continue to reassess and manage the patient until arriving at the care facility",type:"Required",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"",examine:"",prompts:"",subActions:[{id:["perform ongoing management"],label:"Perform ongoing management",type:"Required",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"",examine:"",prompts:"",subActions:[{id:["intv-transfer"],label:"Make appropriate transfer decisions, that is, transfer the patient to the air ambulance with a LBB on a stretcher",type:"Required",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"",examine:"",prompts:"",subActions:[]},{id:["intv-control-shock-technique-keep-patient-warm"],label:"Keep the patient warm using heat packs and/or blankets",type:"Required",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"",examine:"",prompts:"",subActions:[]},{id:["intv-contact-receiving-facility"],label:"Inform the air crew about the patient's condition to assist with providing the receiving facility with a patient report and ETA",type:"Required",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"",examine:"",prompts:"",subActions:[]},{id:["into-establish-IV"],label:"Establish at least one appropriately sized IV en route",type:"Required",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"",examine:"",prompts:"",subActions:[]}]},{id:["Reassess the patient"],label:"Reassess the patient",type:"Required",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"",examine:"",prompts:"",subActions:[{id:["reassess-vital-signs"],label:"Recheck vital signs every 5 minutes",type:"Required",feedbackAbsent:"Vitals should be reassessed after every intervention and every clinical change, and a critically ill patient should be reassessed more frequently to ensure he or she is still stable. *If you had reassessed the patient's vitals after intubating the patient, you would have seen an improvement in all of his vital signs.",feedbackOutOfOrder:"",feedbackErrors:"",examine:"",prompts:"",subActions:[]},{id:["repeat-primary-survey"],label:"Repeat the Primary Survey",type:"Required",feedbackAbsent:"It is important to reassess your patient after every intervention and every clinical change, which includes the primary survey. For example a patient with a neck injury whose breathing was initially non-labored may develop stridor as the airway becomes swollen.",feedbackOutOfOrder:"",feedbackErrors:"",examine:"",prompts:"",subActions:[]},{id:["repeat-secondary-survey"],label:"Repeat the Secondary Survey",type:"Required",feedbackAbsent:"It is important to reassess your patient after every intervention and every clinical change, which includes your secondary survey. For example, a patient may lose their pulses if you initally failed to notice and treat a source of hemorrhage.",feedbackOutOfOrder:"",feedbackErrors:"",examine:"",prompts:"",subActions:[]}]}]}]}}};function fe(e){e.forEach((function(e){if(0===e.subActions.length){var t={};pe.forEach((function(n){e[n]&&(t[n]=e[n])})),ue[e.id]=t}}))}var he=function(e,t){t.includes(e)||t.push(e)},me=function(e){var t=[],n=[];e.forEach((function(e){he(e,t)}));for(var r=0,i=Object.entries(J);r<i.length;r++){var a=Object(u.a)(i[r],2),s=a[0];0!==a[1].filter((function(e){return t.includes(e)})).length&&he(s,n)}return 1===n.length?n[0]:"errors"},ve=function(e){for(var t=[],n=0,r=Object.entries(Q);n<r.length;n++){var i=Object(u.a)(r[n],2),a=i[0];i[1][0]===e&&t.push(a)}return t},Oe=function(e,t){var n="";if("header"===e.type?(n=Q[e.displayColor])||(n=Q[e.status]):n=Q[e.status]?Q[e.status]:Q.default,n)return n[t]},ye=function(e){return G[Oe(e,0)]},ge=function(e){if(e){var t,n=e.split(" "),r=n.length;n.forEach((function(e,t){var i=e.trim();"."===i[e.length-1]&&t<r-1&&(i+="\xa0\xa0"),n[t]=i}));var i,a=Object(U.a)(n);try{for(a.s();!(i=a.n()).done;){var s=i.value;t=t?t+" "+s:s}}catch(o){a.e(o)}finally{a.f()}return t}return""};function ke(e,t){var n,r;switch(t){case"assessmentFB":(r=ue[e.id])&&(n=r.feedbackAbsent);break;case"incorrectAnswersFB":(r=ue[e.id])&&(n=r.feedbackError);break;default:e[t]&&(n=ge(e[t]))}return n}var we,je,Ae,xe,Ee,Pe,Ce,Ie,Se,Re,De,qe,Te=function(e){e.intvStatus&&e.intvStatus.length>0&&(e.intvStatusFB=function(e){var t,n,r=[],i=[],a=Object(U.a)(e.intvStatus);try{for(a.s();!(n=a.n()).done;){var s=n.value;s.foundCk?r.push(s.label):i.push(s.label)}}catch(o){a.e(o)}finally{a.f()}return i.length>0&&(t="Remember to check the effect of this action by asking for: "+i+".",r.length>0&&(t=t+" That is in addition to what you did ask for: "+r+".")),t}(e));var t,n,r=ge(Oe(e,1)).trim().split(" ");r.forEach((function(n,i){var a=n.charAt(0),s=n.substring(1);switch(r[i]=r[i].trim(),a){case"@":t=ke(e,s),r[i]=t||"[missing: "+s+"]";break;case"?":(t=ke(e,s))?r[i]=t:(r[i]="","+bos"===r[i-1]&&(r[i-1]="","."!==r[i-2][r[i-2].length-1]&&(r[i-2]=r[i-2]+".\xa0")),"+eos"===r[i+1]&&(r[i+1]=""))}})),r.forEach((function(e,t){var n="";switch(e.charAt(0)){case"+":switch(e.substring(1)){case"eos":"."===(n=r[t-1].trim())[n.length-1]&&(n=n.slice(0,-1)),r[t-1]=n+".\xa0",r[t]="";break;case"bos":"."===(n=r[t-1].trim())[n.length-1]&&(n=n.slice(0,-1)),r[t-1]=n+".\xa0",r[t]="";var i=r[t+1].trim();r[t+1]=i.charAt(0).toUpperCase()+i.slice(1)}}}));var i,a=Object(U.a)(r);try{for(a.s();!(i=a.n()).done;){var s=i.value;n?""!==s&&(n=n+"\xa0"+s):""!==s&&(n=s)}}catch(o){a.e(o)}finally{a.f()}return n},Ne={},Be=function(e,t,n){return e.filter((function(e){return e[t]===n}))},Fe=function(e,t,n){return Be(Be(e,"timestamp",n),"id",t)},Le=n(34),Me=function(e,t,n,r,i,a){console.log("In savingDebriefingLog");var s=O.collection("debriefing-feedback-logs").doc(e.id),o={userName:e.userName,ObserverFileCreater:e.userName,label:e.label,ObserverFileName:e.label,commenter:"",scenarioID:e.scenarioID,scenarioName:e.scenarioName,schemaVersion:e.schemaVersion,timestamp:Date().toLocaleString(),topSummary:i,hierAssessResults:n,hierProblemResults:r,constraintsViolated:a},c=[],d={},l=!1;t.forEach((function(e,t){for(var n=0,r=Object.entries(e);n<r.length;n++){var i=Object(u.a)(r[n],2),a=i[0],s=i[1];void 0===s&&(console.log("filtered out from events; index: ",t," key: ",a," value: ",s),l=!0)}})),l?(t.forEach((function(e,t){d=Le.pickBy(e,(function(e,t){return!(void 0===e)})),c.push(d)})),o.events=c):o.events=t,s.set(o)},Ye=function(e){return"criticalActionHeader"===e.status?"":-1===e.timestamp?"\xa0\xa0":(t=e.timestamp,new Date(1e3*t).toISOString().substr(14,5));var t},_e=function(e,t){return e.reduce((function(e,n){return Object(w.a)(Object(w.a)({},e),{},Object(L.a)({},n[t],(e[n[t]]||[]).concat(n)))}),{})},We=function(e,t){return e.checkListMetaData.filter((function(e){return e.type===t}))},ze=ve("Problem"),He=ve("Caution"),Ve={},Ue={},Ge={};function Ke(e){Ie=e,function(e){var t=te[e];Ne=$;for(var n=0,r=Object.entries(ee);n<r.length;n++){var i=Object(u.a)(r[n],2),a=i[0],s=i[1];t.includes(s.id)&&(Ne[a]=s)}}(e.name),function(e){ce=[],de=[];var t,n=be[e.name].Action,r=Object(U.a)(n.subActions);try{for(r.s();!(t=r.n()).done;){var i=t.value;ce.push(i.id),fe(i.subActions);var a,s=Object(U.a)(i.subActions);try{for(s.s();!(a=s.n()).done;){var o=a.value,c=o.subActions;0!==c.length&&(de.push(o.id),fe(c))}}catch(d){s.e(d)}finally{s.f()}}}catch(d){r.e(d)}finally{r.f()}console.log("c2FB",ue)}(e),function(e){if(e.interventionPromptAnswers){e.interventionPromptAnswers.forEach((function(e){Ue[e.id]=e.label}))}}(e),function(e){if(e.interventionPrompts){e.interventionPrompts.forEach((function(e){Ge[e.id]=e.label}))}}(e),Re=Qe(e),De=Je(e),Pe=We(e,D.PHASE).map((function(e){return e.id})).concat(["Unknown"]),Ee=We(e,D.SUB_PHASE).map((function(e){return e.id})),qe=function(e){var t=We(e,D.PHASE),n=We(e,D.SUB_PHASE),r=e.checkListMetaData.filter((function(e){return T.includes(e.type)})),i=e.checkListMetaData.filter((function(e){return N.includes(e.type)})),a=_e(i,"parentID");r.forEach((function(e){e.id in a&&(e.options=a[e.id])}));var s=_e(r.filter((function(e){return void 0===e.subPhase})),"phase"),o=_e(r.filter((function(e){return!!e.subPhase})),"subPhase");n.forEach((function(e){e.items=o[e.id]}));var c=_e(n,"phase");return t.forEach((function(e){e.id in s?e.items=s[e.id]:e.subPhases=c[e.id]})),t}(e),Ce=Xe(qe),qe.forEach((function(e){void 0===e.subPhases?Ve[e.id]=e.label:e.subPhases.forEach((function(t){Ve[t.id]=e.label}))})),Ve.Unknown="Unknown",we={},je={},xe=[]}var Qe=function(e){var t,n=_e(e.checkListMetaData.filter((function(e){return B.includes(e.type)})),"id");return t=e.interventions?_e(e.interventions,"id"):_e(e.intvMetaData.filter((function(e){return B.includes(e.type)})),"id"),Object.assign(n,t)},Je=function(e){var t,n=_e(e.checkListMetaData.filter((function(e){return B.includes(e.type)})),"label");return t=e.interventions?_e(e.interventions,"label"):_e(e.intvMetaData.filter((function(e){return B.includes(e.type)})),"label"),Object.assign(n,t)},Xe=function(e){var t=[];return e.forEach((function(e){if(e.subPhases){var n=e.subPhases.map((function(e){return e.id}));t=t.concat(n)}else t=t.concat(e.id)})),t},Ze=function(e,t){var n=[];return e.forEach((function(e){e.timestamp<t&&(e.foundCk=!0),n.push(e)})),n},$e=function(e,t){var n=[],r=[],i=[],a=[],s=[],o={},c="",d="",l=0,u=0,p=!0,b=["assessment","required-action","decision-option","assessment-option"];return e.forEach((function(e,f){var h={comment:"",numericalID:f,status:"",intvStatus:[],contraindicatedWhy:"",minimalWhy:"",why:"",answerCorrect:!0,answerDetails:{},expertPhase:"",workingPhase:"",suggestedPhase:"",protocol:"",protocolRelationship:"",probLabel:"",solutionIds:[],assessments:"",required:!1,actionDescription:"",assessmentFB:"",incorrectAnswersFB:"",orderingFB:"",processingState:"good"};["id","label","finding","phase","subPhase","vitalType","vital","value","type","prompt","promptID","intervention","timestamp","probLabel"].forEach((function(t){e[t]&&(h[t]=e[t])})),e.label&&(h.actionDescription=e.label),e.type&&(h.status=e.type),e.subPhase?h.workingPhase=e.subPhase:e.phase&&(h.workingPhase=e.phase),h.expertPhase=h.workingPhase,c===h.workingPhase&&d===h.phase||(""!==c&&b.includes(h.type)?(p=!0,a[u]=s,u!==l&&(a[l]=a[l].concat(s)),u++,h.phase!==d&&(d=h.phase,l=u,h.phase!==h.workingPhase&&(a[l]=[],i[l]=d,u++))):""===c&&b.includes(h.type)?(d=h.phase)!==h.workingPhase&&(d=h.phase,i[l]=d,u++):""===c?(d="Unknown",h.workingPhase=d,h.phase=d,h.subPhase=""):p=!1,p?(c=h.workingPhase,s=[],i[u]=c,a[u]=[]):p=!0);var m=h.type;["assessment","required-action","intervention","answer","obtain-vital-sign","decision-option","assessment-option"].includes(m)||(h.processingState="bad");var v=[];if("answer"===m){var O=mt(e.promptID,!0),y=vt(e.id,!0);if(O){var g=ht(e.promptID,e.id,!0),k={correctAnswer:O,givenAnswer:y,correct:!g};n.includes(h.intervention)?(v=s.pop(),n.pop(),h.answerCorrect=v.answerCorrect,h.answerDetails=v.answerDetails,h.actionDescription=v.actionDescription+", "+y,g?(h.answerCorrect=!1,""===v.incorrectAnswersFB?h.incorrectAnswersFB="You should have responded: "+O:h.incorrectAnswersFB=v.incorrectAnswersFB+", and "+O):(h.incorrectAnswersFB=v.incorrectAnswersFB,h.answerCorrect=v.answerCorrect)):(g?(h.answerCorrect=!1,h.incorrectAnswersFB="You should have responded: "+O):h.incorrectAnswersFB="",n.push(h.intervention)),h.answerDetails[e.promptID]=k}else h.processingState="bad"}if("intervention"===m&&(v=s.slice(-1)[0])&&"answer"===v.type&&(v.intervention===h.id?(v=s.pop(),n.pop(),n.pop(),h.answerCorrect=v.answerCorrect,h.answerDetails=v.answerDetails,h.incorrectAnswersFB=v.incorrectAnswersFB,h.actionDescription=h.actionDescription+".\xa0\xa0"+v.actionDescription):(v=s.pop(),n.pop(),n.pop())),"good"===h.processingState){if("obtain-vital-sign"===h.type){var w=h.vital,j="";j="intervention-status"===h.vitalType?r.includes(w)?"intv":"noIntv":"vital";var A=o[w];switch(j){case"intv":h.status="patientIntvCheck",A&&A.timestamp<h.timestamp&&(A.foundCk=!0,o[w]=A);break;case"noIntv":h.status="intvCheckWNoIntvFound";break;case"vital":h.status="patientVitalCheck",A&&(A=Ze(A,h.timestamp),o[w]=A);break;default:h.status="unexpectedPatientIntvCheck"}}if("intervention"===h.type&&t.forEach((function(e,t){var n,r,i=["why","probLabel","protocolRelationship","probLabel"];null===(n=e.allActions)||void 0===n||n.forEach((function(t,n){if(t.id===h.id){var r,a=h.id;if((r=ne[h.label])||(r=ne[h.id]),r){var s={intervention:a,timestamp:h.timestamp,foundCk:!1};r.intvStatusNeeded&&(o[a]=Object.assign({},s)),r.vitalsNeeded.forEach((function(e){o[e]?o[e].push(Object.assign({},s)):o[e]=[Object.assign({},s)]}))}t.assessments&&(h.assessmentsNeeded=t.assessments),t.phase&&(h.when=t.phase,h.suggestedPhase=t.phase),e.protocols&&(h.protocol=e.protocols),h.answerCorrect?h.status="goodIntv":h.status="incorrect-answers",i.forEach((function(e){t[e]&&(h[e]=t[e])})),t["id-label"]&&(h.label=t["id-label"])}})),null===(r=e.allContras)||void 0===r||r.forEach((function(t,n){t.id===h.id&&(h.status=e.protocolRelationship,i.forEach((function(e){t[e]&&(h[e]=t[e])})),e.probLabel&&(h.probLabel=e.probLabel))}))})),"decision-option"===h.type)ht(e.promptID,e.id,!1)&&(h.status="decision-option-incorrect",h.answerCorrect=!1,h.incorrectAnswerFB="You should have responded "+mt(e.promptID,!1));if("assessment-option"===h.type)ht(e.promptID,e.id,!1)&&(h.status="assessment-option-incorrect",h.answerCorrect=!1,h.incorrectAnswerFB="You should have responded "+mt(e.promptID,!1));"intervention"===h.type?(n.push(h.id+"+"+h.probLabel),r.push(h.id)):n.push(h.id),s.push(h)}})),a[u]=s,u!==l&&(a[l]=a[l].concat(s)),[a,i,n,o]};var et=function(e,t){var n=[],r=[],i=[],a=[],s=[],o={},c="",d="",l=0,p=0,b=!0,f=["assessment","required-action","decision-option","assessment-option"];return e.forEach((function(e,h){var m={comment:"",numericalID:h,status:"",intvStatus:[],contraindicatedWhy:"",minimalWhy:"",why:"",answerCorrect:!0,answerDetails:{},expertPhase:"",workingPhase:"",suggestedPhase:"",protocol:"",protocolRelationship:"",probLabel:"",solutionIds:[],assessments:"",required:!1,actionDescription:"",assessmentFB:"",incorrectAnswersFB:"",orderingFB:"",processingState:"good"};["id","interventionID","label","finding","phase","subPhase","vitalType","vital","value","type","prompt","promptID","intervention","timestamp","probLabel"].forEach((function(t){e[t]&&(m[t]=e[t])})),"intervention"===e.type&&(e.interventionID&&(m.id=e.interventionID),m.label=m.id.label),m.label&&(m.actionDescription=m.label),e.type&&(m.status=e.type),e.subPhase?m.workingPhase=e.subPhase:e.phase&&(m.workingPhase=e.phase),m.expertPhase=m.workingPhase,c===m.workingPhase&&d===m.phase||(""!==c&&f.includes(m.type)?(b=!0,a[p]=s,p!==l&&(a[l]=a[l].concat(s)),p++,m.phase!==d&&(d=m.phase,l=p,m.phase!==m.workingPhase&&(a[l]=[],i[l]=d,p++))):""===c&&f.includes(m.type)?(d=m.phase)!==m.workingPhase&&(d=m.phase,i[l]=d,p++):""===c?(d="Unknown",m.workingPhase=d,m.phase=d,m.subPhase=""):b=!1,b?(c=m.workingPhase,s=[],i[p]=c,a[p]=[]):b=!0);var v=m.type;if(["assessment","required-action","intervention","obtain-vital-sign","decision-option","assessment-option"].includes(v)||(m.processingState="bad"),"good"===m.processingState){if("obtain-vital-sign"===m.type){var O=m.vital,y="";y="intervention-status"===m.vitalType?r.includes(O)?"intv":"noIntv":"vital";var g=o[O];switch(y){case"intv":m.status="patientIntvCheck",g&&g.timestamp<m.timestamp&&(g.foundCk=!0,o[O]=g);break;case"noIntv":m.status="intvCheckWNoIntvFound";break;case"vital":m.status="patientVitalCheck",g&&(g=Ze(g,m.timestamp),o[O]=g);break;default:m.status="unexpectedPatientIntvCheck"}}if("intervention"===m.type&&(m.label=rt(m.id).label,m.actionDescription=m.label,n.push(m.id),r.push(m.id),t.forEach((function(e,t){var n,r,i=["why","probLabel","protocolRelationship","probLabel"];null===(n=e.allActions)||void 0===n||n.forEach((function(t,n){if(t.id===m.id){var r,a=m.id;if((r=ne[m.label])||(r=ne[m.id]),r){var s={intervention:a,timestamp:m.timestamp,foundCk:!1};r.intvStatusNeeded&&(o[a]=Object.assign({},s)),r.vitalsNeeded.forEach((function(e){o[e]?o[e].push(Object.assign({},s)):o[e]=[Object.assign({},s)]}))}t.assessments&&(m.assessmentsNeeded=t.assessments),t.phase&&(m.when=t.phase,m.suggestedPhase=t.phase),e.protocols&&(m.protocol=e.protocols),m.answerCorrect?m.status="goodIntv":m.status="incorrect-answers",i.forEach((function(e){t[e]&&(m[e]=t[e])})),t["id-label"]&&(m.label=t["id-label"])}})),null===(r=e.allContras)||void 0===r||r.forEach((function(t,n){t.id===m.id&&(m.status=t.protocolRelationship,i.forEach((function(e){t[e]&&(m[e]=t[e])})),e.probLabel&&(m.probLabel=e.probLabel))}))})),function(e,t){if("intervention"===e.type&&e.answers)for(var n,r=0,i=Object.entries(e.answers);r<i.length;r++){var a=Object(u.a)(i[r],2),s=a[0],o=a[1],c="TBD",d=vt(o,!0);n={correctAnswer:c,givenAnswer:d,correct:!1},t.answerDetails[s]=n,t.actionDescription=t.actionDescription+", "+d,t.answerCorrect=!1,t.incorrectAnswersFB=t.incorrectAnswersFB+", and "+c}}(e,m),"intervention"===m.status&&(m.status="irrelevant")),"decision-option"===m.type)ht(e.promptID,e.id,!1)&&(m.status="decision-option-incorrect",m.answerCorrect=!1,m.incorrectAnswerFB="You should have responded "+mt(e.promptID,!1));if("assessment-option"===m.type)ht(e.promptID,e.id,!1)&&(m.status="assessment-option-incorrect",m.answerCorrect=!1,m.incorrectAnswerFB="You should have responded "+mt(e.promptID,!1));"intervention"===m.type?(n.push(m.id+"+"+m.probLabel),r.push(m.id)):n.push(m.id),s.push(m)}})),a[p]=s,p!==l&&(a[l]=a[l].concat(s)),[a,i,n,o]},tt=function(e,t,n,r){for(var i=void 0,a=void 0,s=0;s<e.length&&(n.id!==e[s]||(i=t[s],"start"!==r));s++);return i&&(a=-1===i.numericalID?"start"===r?i.numericalIDStart:i.numericalIDEnd:i.numericalID),a},nt={id:"Unknown",label:"Unknown"},rt=function(e){if("Unknown"===e)return nt;var t=Re[e];return t||(t=De[e]),t?t[0]:void 0},it=function(e,t,n){for(var r=0;r<n.length;r++){var i=t[r],a=n[r];if(i.length>0&&!bt(a)){var s,o=Object(U.a)(i);try{for(o.s();!(s=o.n()).done;){var c=s.value;if(c.numericalID===e)return c}}catch(d){o.e(d)}finally{o.f()}}}},at=function(e,t,n,r){var i=it(e,n,r);i?i.arg2?i.arg2=i.arg2.concat([t.id]):i.arg2=[t.id]:console.log("no object found for numericalID = ",e)},st=function(e,t,n){var r;return r=["phase","sub-phase"].includes(e.type)?"phase":"item",xe.push({constraintID:n,arg1:e,op:"before",arg2:t,type:r}),r},ot=function(e,t,n,r){return r&&(e+=t?" and ":", "),e+=n.toLowerCase()},ct=function(e,t,n,r,i,a,s,o,c){var d,l=tt(a,s,e,"end"),u=tt(a,s,e,"start"),p=e.label,b="",f="",h="";if(t.length>0){var m,v=0,O=0,y=Object(U.a)(t);try{for(y.s();!(m=y.n()).done;){var g=m.value,k=!1,w=rt(g);if(w){++v===t.length&&(k=!0);var j=w.label,A=tt(a,s,w,"start"),x=tt(a,s,w,"end");switch(r){case"before":if(l&&A)if(l<A){if("or"===n)return}else O++,""===f&&(f=ot(f=u===l?"You should have done ":"You should have completed ",k,p,!1)),A===x?(""===h&&(h+=" before you did "),h=ot(h,k,j,O>1)):(""===h&&(h+=" before starting "),h=ot(h,k,j,O>1)),at(u,w,o,c),d=st(e,w,i);break;case"after":if(u&&x)if(u>x){if("or"===n)return}else O++,u===l?(""===f&&(f="You should have done "),f=ot(f,k,j,O>1)):(""===f&&(f="You should have completed "),f=ot(f,k,j,O>1)),""===h&&(h=ot(h+=A===x?" before you did ":" before starting ",k,p,!1)),at(A,e,o,c),d=st(w,e,i)}}}}catch(E){y.e(E)}finally{y.f()}""!==(b=f+h)&&function(e,t,n,r,i){var a=it(e,r,i);if(a){var s;""!==a.orderingFB?a.orderingFB=a.orderingFB+".\xa0\xa0"+t:a.orderingFB=t;var o="";"phase"===n&&(o="misOrdered-phase-"),"item"===n&&(o="misOrdered-"),a.status.includes(o)||(s=o+a.status,a.status=s)}else console.log("no object found for numericalID = ",e)}(u,b,d,o,c)}},dt=function(e,t){var n=function(e,t){for(var n=[],r=[],i=[],a=0;a<t.length;a++){var s=e[a],o=t[a],c=s[0].numericalID,d=s[s.length-1].numericalID;if((Pe.includes(o)||Ee.includes(o))&&(r.push({id:o,numericalID:-1,numericalIDStart:c,numericalIDEnd:d}),n.push(o),i.includes(o)||i.push(o)),s.length>0&&!bt(o)){var l=s.map((function(e){return e.id}));r=r.concat(s),i=i.concat(l),n=n.concat(l)}}return[n,i,r]}(e,t),r=n[0],i=n[1],a=n[2];return i.forEach((function(n){var i=rt(n);if(i){var s=function(e){var t=e.id,n=e.label,r=Ne[t];return r||(r=Ne[n]),r}(i);s&&function(e,t,n,r,i,a){var s=t.before,o=t.beforeOp;ct(e,s,o,"before",t.id,i,a,n,r),s=t.after,o=t.afterOp,ct(e,s,o,"after",t.id,i,a,n,r)}(i,s,e,t,r,a)}})),[e,t]},lt=function(e,t,n,r){var i;i=n.when;var a=e.lastIndexOf(i),s=t[a];s||(s=[]),s.splice(r-1,0,n),t[a]=s},ut=function(e,t){var n=function(e,t){var n,r,i=pt(e),a=Object(F.a)(i).reverse(),s=Object(U.a)(a);try{var o=function(){var e=r.value;if(n=t.find((function(t){return t===e.id})))return"break"};for(s.s();!(r=s.n()).done&&"break"!==o(););}catch(c){s.e(c)}finally{s.f()}return n}(e,t);return t.lastIndexOf(n)},pt=function(e){return qe.find((function(t){return t.id===e})).subPhases},bt=function(e){var t=qe.find((function(t){return t.id===e}));return!(!t||!t.subPhases)},ft=function(e,t){var n=t;return"red"===e&&(n="red"),"yellow"===e&&"red"!==n&&(n="yellow"),n},ht=function(e,t,n){var r=void 0;return void 0===(r=n?Ie.associations[e]:Ie.checkListCorrectness[e])?(console.log("didn't find answers for ",e),!1):Array.isArray(r)?!r.find((function(e){return e===t})):!(r===t)},mt=function(e,t){var n,r;t?(n=Ie.associations[e],r=Ie.intvMetaData):(n=Ie.checkListCorrectness[e],r=Ie.checkListMetaData);var i=!1;return Array.isArray(n)?n.forEach((function(e,t){r.forEach((function(t,n){t.id!==e||(!1===i?i=t.label:i+=", ")}))})):r.forEach((function(e,t){e.id===n&&(i=e.label)})),i},vt=function(e,t){var n="";switch(Se){case"pre 5/1/22":(t?Ie.intvMetaData:Ie.checkListMetaData).forEach((function(t,r){t.id===e&&(n=t.label)}));break;case"post 5/1/22":n=Ue[e]}return n||!1};var Ot=function(e,t,n,r,i){return e.forEach((function(e){var a=function(e,t){e.bestFittingSol=[];var n=-1,r=-1,i=-1,a=-1,s=e.solutions;return s.forEach((function(s,o){var c;s.found=[],s.notFound=[],s.actions.forEach((function(n,r){t.includes(n.id+"+"+e.probLabel)?s.found.push(n.id):s.notFound.push(n)}));var d=s.actions.length,l=s.found.length;1===(c=0===l?0:l/d)&&l>a?(a=l,n=o,r=o):c>=i&&l>a&&(a=l,n=o,i=c)})),-1===r&&(r=n),s[r]}(e,t);e.bestFittingSol=a;var s=a.notFound;s.forEach((function(o,c){t.push(o.id+"+"+e.probLabel);var d={comment:"",numericalID:n,status:"",intvStatus:[],required:!0,when:"",suggestedPhase:"",expertPhase:"",probLabel:"",minimalWhy:"",assessmentsNeeded:"",protocol:"",protocolRelationship:"",actionDescription:"",type:"intervention",timestamp:-1};["id","phase","why","protocolRelationship"].forEach((function(e){o[e]&&(d[e]=o[e])}));["minimalWhy","protocols","strictActionOrdering"].forEach((function(e){a[e]&&(d[e]=a[e])}));var l,u;["probLabel"].forEach((function(t){e[t]&&(d[t]=e[t])})),e.assessments&&(d.assessmentsNeeded=e.assessments),e.protocols&&(d.protocol=e.protocols),o["id-label"]&&(d.label=o["id-label"]),o["id-label"]&&(d.actionDescription=o["id-label"]),o.subPhase&&(l=o.subPhase),o.phase&&!l&&(l=o.phase),l&&(d.when=l,d.expertPhase=l,d.suggestedPhase=l),d.status="missing"+((u=d.protocolRelationship).charAt(0).toUpperCase()+u.slice(1)),["optional","unnecessary","irrelevant"].includes(d.protocolRelationship)||(!function(e,t,n,r,i){var a=-1;""===n.expertPhase&&(n.expertPhase=Pe[Pe.length-2]),a=Ee.includes(n.expertPhase)||!pt(n.expertPhase)?e.lastIndexOf(n.expertPhase):ut(n.expertPhase,e),n.when=e[a];var s=r.slice(0,i-1),o=r[i-1],c=Object(F.a)(s).reverse().find((function(e){return e.required})),d=r[i+1],l=r.slice(i+1).find((function(e){return e.required})),u=Object(F.a)(t[a]),p=-1,b=-1,f=-1,h=-1,m=!1;o&&(p=u.findIndex((function(e){return e.id===o.id}))),d&&(b=u.findIndex((function(e){return e.id===d.id}))),c&&(f=u.findIndex((function(e){return e.id===c.id}))),l&&(h=u.findIndex((function(e){return e.id===l.id}))),d&&(b=u.findIndex((function(e){return e.id===d.id}))),-1!==f&&(m=f+2,p>f&&(m=p+2)),m||-1===h||(m=h+1,b<h&&(m=b+1)),m||-1===p||(m=p+2),m||-1===b||(m=b+1),m||(m=u.length+2),lt(e,t,n,m)}(r,i,d,s,c),n++)}))})),[n,r,i]};function yt(e,t){var n=t.events;console.log("in analyzeEvents"),Ke(e);var r=Ie.problems,i=Ie.actions,a=function(e,t,n){var r,i=[],a=Object(U.a)(e);try{var s=function(){var e=r.value,a={};if(t&&n){Se="post 5/1/22";var s=e.solutions,o=t.filter((function(t){return t.problemID===e.id}));a.probLabel=e.label,a.id=e.id,a.lifeThreat=e.lifeThreat,a.vitals=e.vitals,a.allActions=[],a.allContras=[];var c=e.assessments;a.assessments=c.map((function(e){return e.assessmentID})),a.solutions=[];var d,l=Object(U.a)(s);try{var u=function(){var e=d.value,t=o.filter((function(t){return t.id===e}))[0],r=Object.assign({},t);r.actions=[],r.otherActions=[];var i,s=t.actions;i=n.filter((function(e){return s.includes(e.id)}));var c,l=Object(U.a)(i);try{for(l.s();!(c=l.n()).done;){var u=c.value,p=Object.assign({},u);p.id=p.interventionID;var b=Re[p.id];switch(p.probLabel=a.probLabel,p["id-label"]=b?b[0].label:p.id,p.protocolRelationship){case"contraindicated":case"irrelevant":case"unnecessary":r.otherActions.push(p),he(p,a.allContras);break;case"required":case"minimal":case"optional":r.actions.push(p),he(p,a.allActions)}}}catch(f){l.e(f)}finally{l.f()}a.solutions.push(r)};for(l.s();!(d=l.n()).done;)u()}catch(f){l.e(f)}finally{l.f()}}else{Se="pre 5/1/22";var p=e.solutions[0],b=Object.assign({});a.probLabel=e.problem,a.lifeThreat=e.lifeThreat,a.allActions=[],a.allContras=[],b.actions=p.actions,b.minimalWhy=p.minimalWhy,b.protocols=p.protocols,a.assessments=e.assessments,a.solutions=[],b.otherActions=p.contraindications,b.actions.forEach((function(e){he(e,a.allActions),e.probLabel=a.probLabel,e.minimal&&(e.protocolRelationship="minimal"),e.optional&&(e.protocolRelationship="optional"),e.minimal||e.optional||(e.protocolRelationship="required")})),b.otherActions.forEach((function(e){he(e,a.allContras),e.protocolRelationship="contraindicated"})),a.solutions.push(b),a.allProblemProtocols=e.protocol}i.push(a)};for(a.s();!(r=a.n()).done;)s()}catch(o){a.e(o)}finally{a.f()}return i}(r,Ie.solutions,i),s=[],o=function(e,t){var n;switch(Se){case"pre 5/1/22":n=$e(e,t);break;case"post 5/1/22":n=et(e,t);break;default:n=$e(e,t)}return n}(n,a),c=o[0],d=o[1],l=o[2],p=o[3],b=dt(c,d),f=function(e,t){var n;return Ce.forEach((function(r,i){if(!t.includes(r)){var a=0;(n=0===i?Ce[0]:Ce[i-1])!==r&&(a=t.lastIndexOf(n),a+=1),t.splice(a,0,r),e.splice(a,0,[])}})),[e,t]}(c=b[0],d=b[1]);c=f[0],d=f[1];var h=function(e,t,n,r,i){var a,s=function(e){var t=[];return e.forEach((function(e){""!==e.assessments&&(t=t.concat(e.assessments))})),t}(e),o=t.length,c=Ie.checkListMetaData.filter((function(e){return[D.ASSESS,D.REQUIRED].includes(e.type)})),d=[],l=Object(U.a)(Z);try{for(l.s();!(a=l.n()).done;){var u=a.value;if(u.scenarioName===Ie.name){d=u.exceptions;break}}}catch(p){l.e(p)}finally{l.f()}return d.forEach((function(e,t){c=c.filter((function(t){return t.id!==e[0]})),n.includes(e[0])&&i.forEach((function(t,n){t.forEach((function(t,n){t.id===e[0]&&(t.why=e[1],t.status="notNecessary")}))}))})),c.forEach((function(e,t){if(!n.includes(e.id)){n.push(e.id);var a={comment:"",numericalID:o,status:"missingRequiredAssessment",intvStatus:[],expertPhase:"",workingPhase:"",contraindicatedWhy:"",minimalWhy:"",why:"",probLabel:"",protocol:"",actionDescription:"",assessmentFB:"",timestamp:-1};["id","label","finding","phase","subPhase","type","prompt"].forEach((function(t){e[t]&&(a[t]=e[t])})),e.subPhase?a.workingPhase=e.subPhase:e.phase&&(a.workingPhase=e.phase),a.when=a.workingPhase,a.expertPhase=a.workingPhase,a.label&&(a.actionDescription=a.label),s.includes(e.id)&&(a.assessmentFB="Thus you missed finding: "+Ie.assessmentFindings[e.id]),"required-action"===a.type&&(a.status="missingRequiredAssessment"),lt(r,i,a,t),o++}})),[n,r,i,o]}(a,n,l,d,c);l=h[0],d=h[1],c=h[2];var m=h[3],v=Ot(a,l,m,d,c);m=v[0],d=v[1],c=v[2],s=function(e,t){for(var n,r=0,i=Object.entries(t);r<i.length;r++){var a=Object(u.a)(i[r],2),s=a[0],o=a[1];if(Array.isArray(o)){var c,d=Object(U.a)(o);try{for(d.s();!(c=d.n()).done;){var l=c.value,p={label:s,foundCk:l.foundCk};n=Fe(e,l.intervention,l.timestamp);var b,f=Object(U.a)(n);try{for(f.s();!(b=f.n()).done;){var h=b.value;h.intvStatus.includes(p)||h.intvStatus.push(p)}}catch(m){f.e(m)}finally{f.f()}}}catch(m){d.e(m)}finally{d.f()}}else!function(){var t={label:"intervention status",foundCk:o.foundCk};(n=Fe(e,s,o.timestamp)).forEach((function(e){e.intvStatus.includes(t)||e.intvStatus.push(t)}))}()}return e}(s=function(e,t){for(var n=[],r=1,i=1,a="green",s="green",o=[],c=[],d=[],l={id:"assessmentHeader",status:"",phaseOrderStatus:"good",type:"header",numericalID:1,displayColor:"",why:"",label:"",labelID:"",protocol:""},u={id:"assessmentSubHeader",status:"",phaseOrderStatus:"good",type:"header",numericalID:1,displayColor:"",why:"",label:"",labelID:"",phaseID:"",protocol:""},p="",b=!1,f=0;f<e.length;f++){var h=t[f],m=e[f],v=!0;if(Pe.includes(m)&&bt(m)&&(v=!1),h.length>0&&v){var O=t[f];s="green";var y,g=Object(U.a)(O);try{for(g.s();!(y=g.n()).done;){var k=y.value;"intervention"!==k.type&&o.push(k.status),ze.includes(k.status)&&(s="red"),He.includes(k.status)&&"red"!==s&&(s="yellow"),k.numericalID=r++}}catch(T){g.e(T)}finally{g.f()}var w=Object.assign({},u),j=e[f],A=rt(j);w.label=A.label,w.labelID=A.id,w.status=me(o),w.displayColor=s;var x=Ve[j],E=rt(x);if(w.phaseID=E.id,""===p&&(p=E,a=ft(s,a)),f===e.length-1){var P=Object.assign({},l);x!==p.label&&(P.label=p.label,P.labelID=p.id,P.status=me(c),P.displayColor=a,P.numericalID=i++/1e3,n.push(P),n.push.apply(n,Object(F.a)(d)),d=[]),(P=Object.assign({},w)).label=E.label,P.labelID=E.id,P.id="assessmentHeader",P.numericalID=i++/1e3,n.push(P),x===w.label?(n.push.apply(n,Object(F.a)(d)),n.push.apply(n,Object(F.a)(O))):(w.numericalID=i++/1e3,n.push.apply(n,Object(F.a)(d)),n.push(w),n.push.apply(n,Object(F.a)(O))),b=!0}if(!b)if(x!==p.label){var C,I,S=Object.assign({},l);S.label=p.label,S.labelID=p.id,S.status=me(c),c=[],S.displayColor=a,S.numericalID=i++/1e3,n.push(S),n.push.apply(n,Object(F.a)(d)),(C=c).push.apply(C,Object(F.a)(o)),o=[],x===w.label?d=Object(F.a)(O):(w.numericalID=i++/1e3,(I=d=[w]).push.apply(I,Object(F.a)(O))),p=E,a=ft(s,"green")}else{var R,D,q;a=ft(s,a),(R=c).push.apply(R,Object(F.a)(o)),o=[],x===w.label?(D=d).push.apply(D,Object(F.a)(O)):(w.numericalID=i++/1e3,d.push(w),(q=d).push.apply(q,Object(F.a)(O)))}}}return n}(d,c),p);var O=[];s.forEach((function(e,t){O.push(e)}));var y=[],g=[],k=0,w=-1;O.forEach((function(e,t){if("intervention"===e.type&&e.status&&e.status.includes("goodintv","incorrect-answers","minimal","misOrdered-goodintv","misOrdered-incorrect-answers","misOrdered-incorrect-answers","minimal","misOrdered-minimal","misOrdered-minimal-incorrect-answers","misOrdered-phase-incorrect-answers","misOrdered-phase-minimal-incorrect-answers","misOrdered-phase-minimal")){g.includes(e.probLabel)?w=g.indexOf(e.probLabel):(g[w=k]=e.probLabel,k++);var n=y[w];n||(n=[]),n.push(e),y[w]=n}}));var j=s.map((function(e){return e.id})),A=a.map((function(e){return e.probLabel}));g.forEach((function(e,t){var n=A.indexOf(e),r=a[n],i=r.actions.filter((function(e){return"required"===e.protocolRelationship})).map((function(e){return e.id})),o=r.actions.filter((function(e){return"minimal"===e.protocolRelationship})).map((function(e){return e.id}));if(o){var c,d=y[t].map((function(e){return e.id})),l=!0,u=!0,p=Object(U.a)(i);try{for(p.s();!(c=p.n()).done;){var b=c.value;if(!d.includes(b)){l=!1;break}}}catch(g){p.e(g)}finally{p.f()}var f,h=Object(U.a)(o);try{for(h.s();!(f=h.n()).done;){var m=f.value;if(!d.includes(m)){u=!1;break}}}catch(g){h.e(g)}finally{h.f()}var v=[];if(!l&&u){o.forEach((function(e,t){var n=j.indexOf(e),i=s[n];switch(i.minimalWhy=r.minimalWhy,i.status){case"incorrect-answers":i.status="minimal-incorrect-answers";break;case"goodintv":i.status="minimal";break;case"misOrdered-goodintv":i.status="misOrdered-minimal";break;case"misOrdered-incorrect-answers":i.status="misOrdered-minimal-incorrect-answers";break;case"misOrdered-phase-goodintv":i.status="misOrdered-phase-minimal";break;case"misOrdered-phase-incorrect-answers":i.status="misOrdered-phase-minimal-incorrect-answers"}v.push(i.numericalID),s[n]=i}));var O={};v.forEach((function(e,t){(O=function(e,t){var n,r={},i={},a=Object(U.a)(t);try{for(a.s();!(n=a.n()).done;){var s=n.value;if("problemHeader"===s.id)r=s;else if(s.numericalID===e){i=r;break}}}catch(g){a.e(g)}finally{a.f()}return i}(e,s))&&"green"===O.displayColor&&(O.displayColor="yellow")}))}}r.actions=[]}));var x=le(O,a,Ce,Pe,xe);return we=x[0],je=x[1],Ae=x[2],console.log("Phase Assessment Status Results",we),console.log("Intervention Status Results",je),console.log("Constraint Violation Results",xe),Me(t,O,we,je,Ae,xe),O}var gt=n(67),kt=n(63),wt=n(64),jt=n(65),At=n(66),xt=function(e){var t=e.title,n=e.leftNav,r=void 0===n?null:n,a=e.rightNav,s=void 0===a?null:a,o=Object(i.useContext)(l.AuthContext),c=o.isAuthenticated,d=o.userName,u=o.signOutUser;return Object(H.jsxs)(kt.a,{color:"dark",dark:!0,children:[Object(H.jsx)(wt.a,{href:"#",children:"MedDBriefer"}),!!r&&Object(H.jsx)(jt.a,{children:r}),!!t&&Object(H.jsx)(At.a,{tag:"h3",children:t}),Object(H.jsxs)(jt.a,{children:[c&&Object(H.jsxs)(H.Fragment,{children:[Object(H.jsxs)(At.a,{children:["Welcome, ",d," \xa0"]}),Object(H.jsx)(gt.a,{color:"danger",onClick:u,children:"Sign Out"})]}),!!s&&s]})]})},Et=function(e){var t=e.log,n=e.actions,r=e.scenario,a=e.context,s=Object(i.useState)(!1),o=Object(u.a)(s,2),c=o[0],d=o[1],l=Object(i.useState)(void 0),p=Object(u.a)(l,2),b=p[0],f=p[1];function h(e){return Object(H.jsx)(H.Fragment,{children:"obtain-vital-sign"===e.type?v(e):O(e)})}function m(e){var t=r.intvMetaData.find((function(t){return e.vital===t.id}));return Object(H.jsx)(H.Fragment,{children:t.label})}function v(e){return Object(H.jsx)(H.Fragment,{children:"intervention-status"===e.vitalType?Object(H.jsxs)(H.Fragment,{children:["Requested intervention status for: ",m(e),", ",Object(H.jsxs)("p",{children:["Found: ",Object(H.jsx)("i",{children:e.value})]})]}):Object(H.jsxs)(H.Fragment,{children:["Requested vital: ",e.vital,", ",Object(H.jsxs)("p",{children:["Found: ",Object(H.jsx)("i",{children:e.value})]})]})})}function O(e){return Object(H.jsx)(H.Fragment,{children:e.subPhase&&"intervention"!==e.type?Object(H.jsxs)(H.Fragment,{children:[Object(H.jsxs)("b",{children:[e.subPhase,":"]})," ",e.actionDescription,".  ",w(e)]}):Object(H.jsx)(H.Fragment,{children:y(e)})})}function y(e){return Object(H.jsx)(H.Fragment,{children:"intervention"===e.type?Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)("b",{children:"Intervention:"})," ",e.actionDescription,". ",w(e)," "]}):Object(H.jsxs)(H.Fragment,{children:[e.actionDescription,".  ",w(e)]})})}function w(e){return Object(H.jsx)(H.Fragment,{children:e.finding?Object(H.jsxs)("p",{children:["\xa0\xa0\xa0\xa0\xa0Findings: ",Object(H.jsx)("i",{children:e.finding})]}):Object(H.jsx)(H.Fragment,{})})}function j(e){var t=e.target.defaultValue,n=e.target.value,r=e.target.id;if(t!==n){var i=b.find((function(e){return e.id===r})),a=Object.assign({},i,{comment:n});x(a)}}var A=function(e){return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)("td",{children:e.numericalID}),Object(H.jsx)("td",{children:Ye(e)}),Object(H.jsxs)("td",{className:ye(e),children:[Object(H.jsx)("span",{className:"material-icons-outlined",children:(t=e,K[Oe(t,0)])}),h(e)]}),Object(H.jsx)("td",{children:Te(e)}),c&&Object(H.jsx)("td",{children:Object(H.jsx)("textarea",{rows:"2",cols:"50",defaultValue:e.comment,onBlur:j,id:"".concat(e.id)})})]});var t},x=function(e){var t=b.findIndex((function(t){return t.id===e.id}));f([].concat(Object(F.a)(b.slice(0,t)),[e],Object(F.a)(b.slice(t+1))))};function E(){return(E=Object(k.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d("review"===a),f(n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(i.useEffect)((function(){!function(){E.apply(this,arguments)}()}),[]),void 0===b?Object(H.jsx)("h3",{children:"processing"}):Object(H.jsxs)(H.Fragment,{children:["review"===a?Object(H.jsx)(H.Fragment,{children:Object(H.jsx)(xt,{title:"Review of: ".concat(t.label),leftNav:Object(H.jsx)(gt.a,{color:"primary",onClick:function(){Me(t,b)},children:"Save Debriefing Log"}),rightNav:Object(H.jsx)(gt.a,{color:"primary",onClick:function(){d(!c)},children:"Toggle Comments"})})}):Object(H.jsx)(H.Fragment,{children:Object(H.jsx)(xt,{title:"Analysis for: ".concat(t.label)})}),Object(H.jsx)("form",{children:Object(H.jsx)("div",{style:{overflowY:"auto",maxHeight:"700px"},children:Object(H.jsxs)(z.a,{borderless:!0,size:"sm",children:[Object(H.jsx)("thead",{children:Object(H.jsxs)("tr",{children:[Object(H.jsx)("th",{className:"table-header",children:" ID "}),Object(H.jsx)("th",{className:"table-header",children:" Timestamp "}),Object(H.jsx)("th",{className:"table-header",children:" Action Description "}),Object(H.jsx)("th",{className:"table-header",children:" Feedback "}),c&&Object(H.jsx)("th",{className:"table-header",children:" Comments "})]})}),Object(H.jsx)("tbody",{className:"scrolling",children:b.map((function(e,t){return Object(H.jsx)("tr",{children:"header"===e.type?(n=e,Object(H.jsx)(H.Fragment,{children:"assessmentHeader"===n.id||"assessmentSubHeader"===n.id?Object(H.jsx)("td",{colSpan:"4",className:ye(n),children:Object(H.jsx)("b",{children:n.label})}):Object(H.jsx)("td",{colSpan:"10",className:"black",children:Object(H.jsx)("div",{children:Object(H.jsxs)("em",{children:["\xa0\xa0\xa0Intervention Group: ",n.probLabel]})})})})):A(e)},t);var n}))})]})})})]})};var Pt=function(){var e=Object(d.m)().logID,t=Object(i.useState)(void 0),n=Object(u.a)(t,2),r=n[0],a=n[1],s=Object(i.useState)(void 0),o=Object(u.a)(s,2),c=o[0],l=o[1],p=Object(i.useState)(void 0),b=Object(u.a)(p,2),f=b[0],h=b[1],m=Object(i.useState)(!1),v=Object(u.a)(m,2),y=v[0],w=v[1],j=Object(i.useState)(!1),A=Object(u.a)(j,2),x=A[0],E=A[1];function P(){window.confirm("Are you sure you want to overwrite the existing analysis?  Any prior comments previously added will be lost.")&&C(f,r)}function C(e,t){return I.apply(this,arguments)}function I(){return(I=Object(k.a)(g.a.mark((function e(t,n){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:yt(t,n);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(){return(S=Object(k.a)(g.a.mark((function t(){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Y(O,"debriefing-feedback-logs",e);case 2:if(t.sent){t.next=7;break}C(f,r),w(!0),t.next=8;break;case 7:P();case 8:return w(!0),t.abrupt("return",!0);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(i.useEffect)((function(){_(O,e).then((function(e){a(e)})).catch((function(e){return alert("error fetching observer log",e)}))}),[]),Object(i.useEffect)((function(){r&&M(O,r.scenarioID,"V2").then((function(e){console.log("retrieve scenario:",e),h(e)}))}),[r]),Object(i.useEffect)((function(){f&&function(){S.apply(this,arguments)}()}),[f]),Object(i.useEffect)((function(){y&&W(O,e).then((function(e){l(e)})).catch((function(e){return alert("error fetching debriefing log",e)}))}),[y]),Object(i.useEffect)((function(){c&&E(!0)}),[c]),x?Object(H.jsx)(Et,{log:c,actions:c.events,scenario:f,context:"initial-analysis"}):Object(H.jsx)("h3",{children:"Loading"})},Ct=function(){var e=Object(d.m)().logID,t=Object(i.useState)(null),n=Object(u.a)(t,2),r=n[0],a=n[1],s=Object(i.useState)(null),o=Object(u.a)(s,2),c=o[0],l=o[1],p=Object(i.useState)(!1),b=Object(u.a)(p,2),f=b[0],h=b[1];return Object(i.useEffect)((function(){_(O,e).then((function(e){a(e)}))}),[e]),Object(i.useEffect)((function(){r&&M(O,r.scenarioID).then((function(e){l(e),console.log("scenario",e)}))}),[r]),Object(i.useEffect)((function(){c&&h(!0)}),[c]),f?Object(H.jsx)(Pt,{log:e}):Object(H.jsx)("h3",{children:"Loading"})};var It=function(){var e=Object(d.m)().logID,t=Object(i.useState)(void 0),n=Object(u.a)(t,2),r=n[0],a=n[1],s=Object(i.useState)(void 0),o=Object(u.a)(s,2),c=o[0],l=o[1],p=Object(i.useState)(void 0),b=Object(u.a)(p,2),f=b[0],h=b[1],m=Object(i.useState)(!1),v=Object(u.a)(m,2),y=v[0],w=v[1],j=Object(i.useState)(!1),A=Object(u.a)(j,2),x=A[0],E=A[1];function P(){return(P=Object(k.a)(g.a.mark((function t(){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Y(O,"debriefing-feedback-logs",e);case 2:if(t.sent){t.next=4;break}yt(f,r);case 4:return w(!0),t.abrupt("return",!0);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(i.useEffect)((function(){_(O,e).then((function(e){a(e)})).catch((function(e){return alert("error fetching observer log",e)}))}),[e]),Object(i.useEffect)((function(){r&&M(O,r.scenarioID,"V2").then((function(e){console.log("scenario:",e),h(e)}))}),[r]),Object(i.useEffect)((function(){f&&function(){P.apply(this,arguments)}()}),[f]),Object(i.useEffect)((function(){y&&W(O,e).then((function(e){l(e)})).catch((function(e){return alert("error fetching debriefing log",e)}))}),[y]),Object(i.useEffect)((function(){c&&E(!0)}),[c]),x?Object(H.jsx)(Et,{log:c,actions:c.events,scenario:f,context:"review"}):Object(H.jsx)("h3",{children:"Loading"})},St=function(e){return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)(xt,{title:"MedDBriefer Authentication"}),e.children]})},Rt=function(e){return Object(H.jsx)(l.AuthProvider,{children:Object(H.jsx)(c.HashRouter,{children:Object(H.jsxs)(d.g,{children:[Object(H.jsx)(l.PrivateRoute,{exact:!0,path:"/logs/:logID",authFlowLayout:St,component:Ct}),Object(H.jsx)(l.PrivateRoute,{exact:!0,path:"/debriefing-feedback-logs/:logID",authFlowLayout:St,component:It}),Object(H.jsx)(l.PrivateRoute,{exact:!0,match:"/",authFlowLayout:St,component:V})]})})})},Dt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,68)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),r(e),i(e),a(e),s(e)}))};o.a.render(Object(H.jsx)(a.a.StrictMode,{children:Object(H.jsx)(Rt,{})}),document.getElementById("root")),Dt()}},[[61,1,2]]]);
//# sourceMappingURL=main.62db15e7.chunk.js.map
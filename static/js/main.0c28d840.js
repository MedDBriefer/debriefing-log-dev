/*! For license information please see main.0c28d840.js.LICENSE.txt */
!function(){var e={5270:function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},e.exports.__esModule=!0,e.exports.default=e.exports},4180:function(e){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},1232:function(e,t,n){var r=n(5270);e.exports=function(e){if(Array.isArray(e))return r(e)},e.exports.__esModule=!0,e.exports.default=e.exports},8111:function(e){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports},2954:function(e){function t(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}e.exports=function(e){return function(){var n=this,r=arguments;return new Promise((function(i,a){var o=e.apply(n,r);function s(e){t(o,i,a,s,u,"next",e)}function u(e){t(o,i,a,s,u,"throw",e)}s(void 0)}))}},e.exports.__esModule=!0,e.exports.default=e.exports},85:function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},3061:function(e,t,n){var r=n(742),i=n(1549);function a(t,n,o){return i()?(e.exports=a=Reflect.construct,e.exports.__esModule=!0,e.exports.default=e.exports):(e.exports=a=function(e,t,n){var i=[null];i.push.apply(i,t);var a=new(Function.bind.apply(e,i));return n&&r(a,n.prototype),a},e.exports.__esModule=!0,e.exports.default=e.exports),a.apply(null,arguments)}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports},5198:function(e){function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},3041:function(e,t,n){var r=n(6487);e.exports=function(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=r(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw o}}}},e.exports.__esModule=!0,e.exports.default=e.exports},4564:function(e,t,n){var r=n(2588),i=n(1549),a=n(6983);e.exports=function(e){var t=i();return function(){var n,i=r(e);if(t){var o=r(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return a(this,n)}},e.exports.__esModule=!0,e.exports.default=e.exports},1260:function(e){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},3772:function(e,t,n){var r=n(6458);function i(){return"undefined"!==typeof Reflect&&Reflect.get?(e.exports=i=Reflect.get,e.exports.__esModule=!0,e.exports.default=e.exports):(e.exports=i=function(e,t,n){var i=r(e,t);if(i){var a=Object.getOwnPropertyDescriptor(i,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}},e.exports.__esModule=!0,e.exports.default=e.exports),i.apply(this,arguments)}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},2588:function(e){function t(n){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},270:function(e,t,n){var r=n(742);e.exports=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},1477:function(e){e.exports=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")},e.exports.__esModule=!0,e.exports.default=e.exports},1549:function(e){e.exports=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}},e.exports.__esModule=!0,e.exports.default=e.exports},1557:function(e){e.exports=function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},981:function(e){e.exports=function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(u){s=!0,i=u}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}},e.exports.__esModule=!0,e.exports.default=e.exports},7365:function(e){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},1359:function(e){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},417:function(e,t,n){var r=n(1260);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e},e.exports.__esModule=!0,e.exports.default=e.exports},6983:function(e,t,n){var r=n(8921).default,i=n(8111);e.exports=function(e,t){if(t&&("object"===r(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return i(e)},e.exports.__esModule=!0,e.exports.default=e.exports},6132:function(e,t,n){var r=n(8921).default;function i(){"use strict";e.exports=i=function(){return t},e.exports.__esModule=!0,e.exports.default=e.exports;var t={},n=Object.prototype,a=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",u=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(O){l=function(e,t,n){return e[t]=n}}function f(e,t,n,r){var i=t&&t.prototype instanceof p?t:p,a=Object.create(i.prototype),o=new A(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return S()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=I(o,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=h(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===d)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,o),a}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(O){return{type:"throw",arg:O}}}t.wrap=f;var d={};function p(){}function v(){}function m(){}var y={};l(y,s,(function(){return this}));var g=Object.getPrototypeOf,b=g&&g(g(T([])));b&&b!==n&&a.call(b,s)&&(y=b);var k=m.prototype=p.prototype=Object.create(y);function w(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(i,o,s,u){var c=h(e[i],e,o);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==r(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,s,u)}),(function(e){n("throw",e,s,u)})):t.resolve(f).then((function(e){l.value=e,s(l)}),(function(e){return n("throw",e,s,u)}))}u(c.arg)}var i;this._invoke=function(e,r){function a(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(a,a):a()}}function I(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,I(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=h(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,d;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function T(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:S}}function S(){return{value:void 0,done:!0}}return v.prototype=m,l(k,"constructor",m),l(m,"constructor",v),v.displayName=l(m,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,c,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},w(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new x(f(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},w(k),l(k,c,"Generator"),l(k,s,(function(){return this})),l(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=T,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;E(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},t}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},742:function(e){function t(n,r){return e.exports=t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n,r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},1068:function(e,t,n){var r=n(4180),i=n(981),a=n(6487),o=n(7365);e.exports=function(e,t){return r(e)||i(e,t)||a(e,t)||o()},e.exports.__esModule=!0,e.exports.default=e.exports},6458:function(e,t,n){var r=n(2588);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=r(e)););return e},e.exports.__esModule=!0,e.exports.default=e.exports},5109:function(e,t,n){var r=n(4180),i=n(1557),a=n(6487),o=n(7365);e.exports=function(e){return r(e)||i(e)||a(e)||o()},e.exports.__esModule=!0,e.exports.default=e.exports},5182:function(e,t,n){var r=n(1232),i=n(1557),a=n(6487),o=n(1359);e.exports=function(e){return r(e)||i(e)||a(e)||o()},e.exports.__esModule=!0,e.exports.default=e.exports},8921:function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},6487:function(e,t,n){var r=n(5270);e.exports=function(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},8240:function(e,t,n){var r=n(2588),i=n(742),a=n(1477),o=n(3061);function s(t){var n="function"===typeof Map?new Map:void 0;return e.exports=s=function(e){if(null===e||!a(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return o(e,arguments,r(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),i(t,e)},e.exports.__esModule=!0,e.exports.default=e.exports,s(t)}e.exports=s,e.exports.__esModule=!0,e.exports.default=e.exports},19:function(e,t,n){var r,i,a=n(3061).default,o=n(5109).default,s=n(3772).default,u=n(2588).default,c=n(417).default,l=n(1260).default,f=n(6132).default,h=n(5182).default,d=n(2954).default,p=n(3041).default,v=n(1068).default,m=n(8111).default,y=n(270).default,g=n(4564).default,b=n(8240).default,k=n(85).default,w=n(5198).default;self,e.exports=(r=n(969),i=n(4618),function(){var e={132:function(e,t,n){var r=n(921).default;function i(){"use strict";e.exports=i=function(){return t},e.exports.__esModule=!0,e.exports.default=e.exports;var t={},n=Object.prototype,a=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",u=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function f(e,t,n,r){var i=t&&t.prototype instanceof p?t:p,a=Object.create(i.prototype),o=new A(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return{value:void 0,done:!0}}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=I(o,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=h(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===d)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,o),a}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=f;var d={};function p(){}function v(){}function m(){}var y={};l(y,s,(function(){return this}));var g=Object.getPrototypeOf,b=g&&g(g(T([])));b&&b!==n&&a.call(b,s)&&(y=b);var k=m.prototype=p.prototype=Object.create(y);function w(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(i,o,s,u){var c=h(e[i],e,o);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==r(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,s,u)}),(function(e){n("throw",e,s,u)})):t.resolve(f).then((function(e){l.value=e,s(l)}),(function(e){return n("throw",e,s,u)}))}u(c.arg)}var i;this._invoke=function(e,r){function a(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(a,a):a()}}function I(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,I(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=h(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,d;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function T(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:S}}function S(){return{value:void 0,done:!0}}return v.prototype=m,l(k,"constructor",m),l(m,"constructor",v),v.displayName=l(m,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,c,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},w(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new x(f(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},w(k),l(k,c,"Generator"),l(k,s,(function(){return this})),l(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=T,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;E(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},t}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},921:function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},162:function(e,t,n){e.exports=n(132)()},779:function(e,t){var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var a=typeof n;if("string"===a||"number"===a)e.push(n);else if(Array.isArray(n)){if(n.length){var o=i.apply(null,n);o&&e.push(o)}}else if("object"===a)if(n.toString===Object.prototype.toString)for(var s in n)r.call(n,s)&&n[s]&&e.push(s);else e.push(n.toString())}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},985:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(609),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,".zH0ATq9xk8Ocy59iwuNB1A\\=\\=,.BK8ZunOOj2-Ddam9ICxbng\\=\\=,.q4ilOBYFey-xHSP4K0REWA\\=\\=,.mUfr9TUnz8yJe41RIRlttQ\\=\\=,.ke3k75UR4dBgTMb6giE66Q\\=\\=,.uyeG4-dQxFimMxWq\\+Fit2w\\=\\={width:100%;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}@media(min-width: 576px){.uyeG4-dQxFimMxWq\\+Fit2w\\=\\=,.zH0ATq9xk8Ocy59iwuNB1A\\=\\={max-width:540px}}@media(min-width: 768px){.ke3k75UR4dBgTMb6giE66Q\\=\\=,.uyeG4-dQxFimMxWq\\+Fit2w\\=\\=,.zH0ATq9xk8Ocy59iwuNB1A\\=\\={max-width:720px}}@media(min-width: 992px){.mUfr9TUnz8yJe41RIRlttQ\\=\\=,.ke3k75UR4dBgTMb6giE66Q\\=\\=,.uyeG4-dQxFimMxWq\\+Fit2w\\=\\=,.zH0ATq9xk8Ocy59iwuNB1A\\=\\={max-width:960px}}@media(min-width: 1200px){.q4ilOBYFey-xHSP4K0REWA\\=\\=,.mUfr9TUnz8yJe41RIRlttQ\\=\\=,.ke3k75UR4dBgTMb6giE66Q\\=\\=,.uyeG4-dQxFimMxWq\\+Fit2w\\=\\=,.zH0ATq9xk8Ocy59iwuNB1A\\=\\={max-width:1140px}}.mU-9cBIi0-EXo5ESixuFEg\\=\\={display:flex;flex-wrap:wrap;margin-right:-15px;margin-left:-15px}.EfJF4aZ6QSdtizcGN1NtUQ\\=\\={margin-right:0;margin-left:0}.EfJF4aZ6QSdtizcGN1NtUQ\\=\\=>.ZipjHnzKjAMLD7S4P-AIeA\\=\\=,.EfJF4aZ6QSdtizcGN1NtUQ\\=\\=>[class*=col-]{padding-right:0;padding-left:0}.U9pRm4BQiJBKv9MF4kAOKg\\=\\=,.ADYG\\+5p47kIEEH\\+yaXfy\\+g\\=\\=,.Db7w4RNONNwOnXowhIc8ng\\=\\=,.KJqaUhm8U0JsiYrD0Dxblw\\=\\=,._7mb0qz1gMBy5z3XE0MeR-A\\=\\=,.NtjNTxvO1eYDpJhzFSeJdw\\=\\=,._1Am5jpu2gSLbN3MT90ZpMA\\=\\=,.DXWl7vZG6Q1KwkWGUtJJow\\=\\=,.ZfbQVYuXDPgq2Cbch0k9UQ\\=\\=,.Jse2AIcAqQ-L735eOc6uYw\\=\\=,.qOSStLd0Hyd1qwpBfZxanA\\=\\=,._5avH3rVLZIii2JnGlH0m5Q\\=\\=,.mNn2fcJWYjkLtm-z6\\+bUVg\\=\\=,.lIzKgcg1REtDI9W1yCgcFw\\=\\=,.jnUU00B2-e9Wk5Nl\\+60mRQ\\=\\=,.mFyyeCKxpl8rS-wFzA1g3Q\\=\\=,.nMyj2gB5dgB1xHYwFVKq4A\\=\\=,.HWrIN7KCnt6SMcNMOEF-4A\\=\\=,.r6GfaPfTE4kyvZyJwdSBMQ\\=\\=,.rCheKtb6rNIH-zaXJpP6ug\\=\\=,._4TecnWoAdQL52Hg5pH6YaA\\=\\=,.mOssnXALpF8Hv5w9NvNA3A\\=\\=,.Tb3cUMCgwjG7rE1A9qO8NQ\\=\\=,._4bJUxD5N-qoDPvcpKja5rg\\=\\=,.aeLEVJFdHekIqk7vG2\\+LIA\\=\\=,.gcFAuaAKhVU\\+ZBDUs1B8NA\\=\\=,.GCfQVWfgvTZkudPSiKZapQ\\=\\=,.yL\\+-V3goVEWF4G56\\+fVSpw\\=\\=,.SAndS2rmgn1LM\\+xmrxMo3A\\=\\=,._3PoNYmEqLWaXkJqkWZuvpQ\\=\\=,.SSiAlLFwrQ-y2DsVPMR0\\+g\\=\\=,._0lyCk8Uqg\\+qv7dLIZnRIWw\\=\\=,.X61LVxdi46rBO\\+LqBAhW2w\\=\\=,.VutkSlfeGDl2CwGQeHEpiQ\\=\\=,.d2kC-cPROhgE2OS-VS9PWQ\\=\\=,.GAJHJb613QL1SKCvoX0rsA\\=\\=,.BvzDSniNJ-7POTt9dEWr7Q\\=\\=,.sxPnszhNCUxZNdkijnQv0w\\=\\=,.a\\+\\+6cr2IATxiR7HKXNyO-Q\\=\\=,.pC930OZ5M9ghgdsDRkSXpg\\=\\=,.sLgPvZpzYdERNGMmZDwBzg\\=\\=,.I1TjO4uXfBOZEQOj7LcH0Q\\=\\=,._0J2p1-4a4eeXHwfVNDXvyA\\=\\=,.ETgzICBgGqZZFbad3zd1iQ\\=\\=,._04z29a\\+pKI3n6S-JAvn7vw\\=\\=,.PzbxnJWUR8XrC6Xnte7ZYQ\\=\\=,.pv2I-4hHHe69Bxg9\\+0ZZsQ\\=\\=,._9RXcLzg\\+pZo3Cwrz83yRSw\\=\\=,.lPJUQqA3bLFaLX8D3BSPMg\\=\\=,.PJi-RjGoDTE3MS3r\\+VtOoQ\\=\\=,._81Sa1FQ1MemO7HT-Mj3VyQ\\=\\=,.SxQkADEuBayutwrCVJP-KQ\\=\\=,.fjhYf6QMOHJa0Tl6AEkczA\\=\\=,.EYU2Y32cbOUClbxlN10kCg\\=\\=,.jAlxb6sBoFTdSfqoBr3HFw\\=\\=,._37Ydx7aBIOywekZNlGZUxw\\=\\=,.ZipjHnzKjAMLD7S4P-AIeA\\=\\=,.uNq-eqcqSUkVVXsPzLt97A\\=\\=,.tFr78IcjpHYvtsP2UGZ6-w\\=\\=,.iy3Vywm2uTIwh0tDGAvf1w\\=\\=,.N\\+ugCnCSYMF3TpbGoOBERg\\=\\=,.JAJ6xO7RZVdaB\\+2XIVCOxQ\\=\\=,.ShEKWNabwH8Jiq0aPAfN8Q\\=\\=,.tOFwG0RlEsJUJhNSe-Sblw\\=\\=,.WN6ttuUog3lg8jvvQ4cHnw\\=\\=,.My8y6StUKr1a4IefPihaIg\\=\\=,.LkQvrAMt0HB3hleLf6FujQ\\=\\=,._73LK2iWnPaC1uWqHN6l--Q\\=\\=,._2IzytlEVczYfyYudEqtbLA\\=\\=,.pXwA5ZATshjIVHaCFAoC5w\\=\\={position:relative;width:100%;padding-right:15px;padding-left:15px}.ZipjHnzKjAMLD7S4P-AIeA\\=\\={flex-basis:0;flex-grow:1;max-width:100%}._4jF-pZrYRU6Av-QsmuTIoQ\\=\\=>*{flex:0 0 100%;max-width:100%}.R72GQKP0n3w9xwNdzveibw\\=\\=>*{flex:0 0 50%;max-width:50%}.nXnDuLdkdE3JhvyD\\+yjoAA\\=\\=>*{flex:0 0 33.3333333333%;max-width:33.3333333333%}.RTOc8Zo7QfihVsI1pKkGcw\\=\\=>*{flex:0 0 25%;max-width:25%}.d0dcZAFUFoUwaLUBiJqTAw\\=\\=>*{flex:0 0 20%;max-width:20%}.kBZdc341EMhrLP6KTcr0wg\\=\\=>*{flex:0 0 16.6666666667%;max-width:16.6666666667%}.uNq-eqcqSUkVVXsPzLt97A\\=\\={flex:0 0 auto;width:auto;max-width:100%}.pXwA5ZATshjIVHaCFAoC5w\\=\\={flex:0 0 8.33333333%;max-width:8.33333333%}._2IzytlEVczYfyYudEqtbLA\\=\\={flex:0 0 16.66666667%;max-width:16.66666667%}._73LK2iWnPaC1uWqHN6l--Q\\=\\={flex:0 0 25%;max-width:25%}.LkQvrAMt0HB3hleLf6FujQ\\=\\={flex:0 0 33.33333333%;max-width:33.33333333%}.My8y6StUKr1a4IefPihaIg\\=\\={flex:0 0 41.66666667%;max-width:41.66666667%}.WN6ttuUog3lg8jvvQ4cHnw\\=\\={flex:0 0 50%;max-width:50%}.tOFwG0RlEsJUJhNSe-Sblw\\=\\={flex:0 0 58.33333333%;max-width:58.33333333%}.ShEKWNabwH8Jiq0aPAfN8Q\\=\\={flex:0 0 66.66666667%;max-width:66.66666667%}.JAJ6xO7RZVdaB\\+2XIVCOxQ\\=\\={flex:0 0 75%;max-width:75%}.N\\+ugCnCSYMF3TpbGoOBERg\\=\\={flex:0 0 83.33333333%;max-width:83.33333333%}.iy3Vywm2uTIwh0tDGAvf1w\\=\\={flex:0 0 91.66666667%;max-width:91.66666667%}.tFr78IcjpHYvtsP2UGZ6-w\\=\\={flex:0 0 100%;max-width:100%}.WKuFcyCXuPYICOGEhhMwLQ\\=\\={order:-1}.N-RzRr40jscXtETJP8KuJw\\=\\={order:13}.TSm0mNR8CEFobhinPZKclw\\=\\={order:0}.FUsxhXGjb10TSa3Q1OeIEA\\=\\={order:1}.CcnXiq3YdJ5Mc8tmYXDKjQ\\=\\={order:2}.VvTHV9Sp3WOOrEG\\+bbBHIg\\=\\={order:3}.fGmd9zdgeH9y9bTqgSASYg\\=\\={order:4}.KsyNGTvTtJyuS8itLTAWQA\\=\\={order:5}.tA3iMlJoORtzTiQUFLUj-Q\\=\\={order:6}.oMG0KfzsuOB6kuESdlFOnQ\\=\\={order:7}._4p-DrXY6JwvSB8\\+yO30oYA\\=\\={order:8}.tTXJyFXsikqQBEdLXwXHMg\\=\\={order:9}.M75j9GZQVmcTUgT6Tzm9xQ\\=\\={order:10}._58Qd5Zc0U9qFM\\+zZyERTpg\\=\\={order:11}.Ckj4TxOlaor\\+iIdASsSlVA\\=\\={order:12}.lEqPtcY-25RvziMU2YkUtg\\=\\={margin-left:8.33333333%}.WiA6vQ\\+1GQbP9nzPwB-EPg\\=\\={margin-left:16.66666667%}.PAg1cAhlXQ8D6eJKHhYpSQ\\=\\={margin-left:25%}.HW4nEQZ05OWVt1kGJqAJ-g\\=\\={margin-left:33.33333333%}.Wlhs\\+rTCYoX51TIHe3bidw\\=\\={margin-left:41.66666667%}._6\\+gTrepIdhGPt6coZ-uwrw\\=\\={margin-left:50%}.HBg9tKrTBK9lRdIUZhA5dQ\\=\\={margin-left:58.33333333%}.CL4TAeMKNzNmBDUywFY1FA\\=\\={margin-left:66.66666667%}.BTKFSb6Ztdi4dCMUWyU1GA\\=\\={margin-left:75%}.czIBE83sUNj0t0nn8RwAMA\\=\\={margin-left:83.33333333%}.MZ\\+IxDjTPO4KR76LMblytg\\=\\={margin-left:91.66666667%}@media(min-width: 576px){._0J2p1-4a4eeXHwfVNDXvyA\\=\\={flex-basis:0;flex-grow:1;max-width:100%}.FurzvDUR-yfZR2Z4zpmIyA\\=\\=>*{flex:0 0 100%;max-width:100%}.lejzo3ztsD9B3TYp6-pvrA\\=\\=>*{flex:0 0 50%;max-width:50%}.mk4VwKQccIrL8Q8ar\\+oxlQ\\=\\=>*{flex:0 0 33.3333333333%;max-width:33.3333333333%}._3VNRmc7hfJjVcGZFUW6drA\\=\\=>*{flex:0 0 25%;max-width:25%}.SCq4uKZoNIrxa09ICZTlHA\\=\\=>*{flex:0 0 20%;max-width:20%}.o1aMqSJ6XI9e6oOLaieK2A\\=\\=>*{flex:0 0 16.6666666667%;max-width:16.6666666667%}.ETgzICBgGqZZFbad3zd1iQ\\=\\={flex:0 0 auto;width:auto;max-width:100%}._37Ydx7aBIOywekZNlGZUxw\\=\\={flex:0 0 8.33333333%;max-width:8.33333333%}.jAlxb6sBoFTdSfqoBr3HFw\\=\\={flex:0 0 16.66666667%;max-width:16.66666667%}.EYU2Y32cbOUClbxlN10kCg\\=\\={flex:0 0 25%;max-width:25%}.fjhYf6QMOHJa0Tl6AEkczA\\=\\={flex:0 0 33.33333333%;max-width:33.33333333%}.SxQkADEuBayutwrCVJP-KQ\\=\\={flex:0 0 41.66666667%;max-width:41.66666667%}._81Sa1FQ1MemO7HT-Mj3VyQ\\=\\={flex:0 0 50%;max-width:50%}.PJi-RjGoDTE3MS3r\\+VtOoQ\\=\\={flex:0 0 58.33333333%;max-width:58.33333333%}.lPJUQqA3bLFaLX8D3BSPMg\\=\\={flex:0 0 66.66666667%;max-width:66.66666667%}._9RXcLzg\\+pZo3Cwrz83yRSw\\=\\={flex:0 0 75%;max-width:75%}.pv2I-4hHHe69Bxg9\\+0ZZsQ\\=\\={flex:0 0 83.33333333%;max-width:83.33333333%}.PzbxnJWUR8XrC6Xnte7ZYQ\\=\\={flex:0 0 91.66666667%;max-width:91.66666667%}._04z29a\\+pKI3n6S-JAvn7vw\\=\\={flex:0 0 100%;max-width:100%}.LI0wpjZDUZJ7oMqYcDe5xw\\=\\={order:-1}.ql\\+O5GiYVdEYYaKVZNJDBA\\=\\={order:13}.Uqf4DXjM4gcvwgCUPIxA6Q\\=\\={order:0}.MB0jUrmzOfv0uP\\+UzgdkbQ\\=\\={order:1}.tBqR6yZ\\+QO7fKr\\+Kxe1j1A\\=\\={order:2}.TNZ7zbUt2UIZDe8AXOyoGQ\\=\\={order:3}.xw8mj28PS8bKzBrOT93bGg\\=\\={order:4}.X2UAoPDs-BPMBH-f3qUyow\\=\\={order:5}.nGW1viwjAvrYu9acBLRuOw\\=\\={order:6}.EnIre1kxZZGzNik3lxTooA\\=\\={order:7}.ckwdSst6vmCf7XKvmYY5MA\\=\\={order:8}.umpD8t224q279uPZhAJNBA\\=\\={order:9}.vbjIU6e0jNJsVRpxrANGzw\\=\\={order:10}.sL0yP3AXUICEIxKqGii1IA\\=\\={order:11}.qnB1DngbM-Hd-rDEiN5Bbg\\=\\={order:12}.EeaIgznKZRMJkq6Fg0Kk4A\\=\\={margin-left:0}.ME4b2v7Z-kqJ-32B0PH7qQ\\=\\={margin-left:8.33333333%}.lNQJI5cLpysYZsVDuqxNiA\\=\\={margin-left:16.66666667%}.yWCRH\\+rhQGo0YxPppCieYA\\=\\={margin-left:25%}.kMIT3obV6QyoBp84jtm7TA\\=\\={margin-left:33.33333333%}.vsScYeqJ1-C\\+Wgs06RaNEA\\=\\={margin-left:41.66666667%}.zFefln1X4wrPIb0EyWu92A\\=\\={margin-left:50%}._5wz\\+7bgY0wJh3H1hQozsaw\\=\\={margin-left:58.33333333%}.\\-937NutyXcyxhjCZdq161g\\=\\={margin-left:66.66666667%}.cRoN9Ic6bhJvDdsUkX1-LA\\=\\={margin-left:75%}.pjkIJScP4whIlflo9KwtnQ\\=\\={margin-left:83.33333333%}.EM7l5T7-itZbasUPca48oQ\\=\\={margin-left:91.66666667%}}@media(min-width: 768px){.SAndS2rmgn1LM\\+xmrxMo3A\\=\\={flex-basis:0;flex-grow:1;max-width:100%}.jLYjZI8-mArtFP5HzW5tSw\\=\\=>*{flex:0 0 100%;max-width:100%}.oqmKYRbM5MgIxv7KKNlE6A\\=\\=>*{flex:0 0 50%;max-width:50%}.GD\\+1sydl\\+uDcrvDYtRiO-g\\=\\=>*{flex:0 0 33.3333333333%;max-width:33.3333333333%}.zbHrHrFJEP\\+9XR3zy87jiA\\=\\=>*{flex:0 0 25%;max-width:25%}.THAJKoXiPadCIQffoSQ0CA\\=\\=>*{flex:0 0 20%;max-width:20%}.VjxUnsPzh-Y9W9Vl2nEWmA\\=\\=>*{flex:0 0 16.6666666667%;max-width:16.6666666667%}._3PoNYmEqLWaXkJqkWZuvpQ\\=\\={flex:0 0 auto;width:auto;max-width:100%}.I1TjO4uXfBOZEQOj7LcH0Q\\=\\={flex:0 0 8.33333333%;max-width:8.33333333%}.sLgPvZpzYdERNGMmZDwBzg\\=\\={flex:0 0 16.66666667%;max-width:16.66666667%}.pC930OZ5M9ghgdsDRkSXpg\\=\\={flex:0 0 25%;max-width:25%}.a\\+\\+6cr2IATxiR7HKXNyO-Q\\=\\={flex:0 0 33.33333333%;max-width:33.33333333%}.sxPnszhNCUxZNdkijnQv0w\\=\\={flex:0 0 41.66666667%;max-width:41.66666667%}.BvzDSniNJ-7POTt9dEWr7Q\\=\\={flex:0 0 50%;max-width:50%}.GAJHJb613QL1SKCvoX0rsA\\=\\={flex:0 0 58.33333333%;max-width:58.33333333%}.d2kC-cPROhgE2OS-VS9PWQ\\=\\={flex:0 0 66.66666667%;max-width:66.66666667%}.VutkSlfeGDl2CwGQeHEpiQ\\=\\={flex:0 0 75%;max-width:75%}.X61LVxdi46rBO\\+LqBAhW2w\\=\\={flex:0 0 83.33333333%;max-width:83.33333333%}._0lyCk8Uqg\\+qv7dLIZnRIWw\\=\\={flex:0 0 91.66666667%;max-width:91.66666667%}.SSiAlLFwrQ-y2DsVPMR0\\+g\\=\\={flex:0 0 100%;max-width:100%}.zyF8dGNWtizHs6wxaDa0lw\\=\\={order:-1}.MUdV-NNGrxqJGY9dojwMGA\\=\\={order:13}.ZhO8FQI8n7DahzSRioaYHQ\\=\\={order:0}.RiDaqGCgOmhxrLgRmGza1A\\=\\={order:1}.N5sXAl4p0DdGb84UDPcOLg\\=\\={order:2}.aYoBbxdjrTjeywDe7Z-j9Q\\=\\={order:3}.Oiz24HvFwgTic5u62UY1Ng\\=\\={order:4}.zTSOk8jqXdsKd\\+URq2KYdg\\=\\={order:5}.CFm-rRaI1fHd1K3H7Vrw4w\\=\\={order:6}.cqEO0mSnWB41u6Goz11F-Q\\=\\={order:7}._1urxupvb6xqjqETtMWwOvQ\\=\\={order:8}.qxXEOgoQtVzA2\\+679geL7Q\\=\\={order:9}.nvBR59QQIXuAmTMuTnHfMg\\=\\={order:10}.d22KpQSBrwSOSI52Zu7\\+Cg\\=\\={order:11}._7glQlcqYGSwKk6sFOIBhvg\\=\\={order:12}.\\-0zZhhxyf2z0gn7wMTKxnw\\=\\={margin-left:0}._4gYJIaemAbMABe5AnrwhbA\\=\\={margin-left:8.33333333%}.cv93WXmw4oWc26NOshkGeg\\=\\={margin-left:16.66666667%}._0y6dwF5qRuZS1wZKagPa6Q\\=\\={margin-left:25%}.tnayob3\\+VHiegJLKcVDvTw\\=\\={margin-left:33.33333333%}.tht9wCiMTOaXuRO4d7m0JA\\=\\={margin-left:41.66666667%}.tgsoM1RUfxtag9E7kL5snQ\\=\\={margin-left:50%}.VULn0vuOgoC1F7mOP\\+CGmA\\=\\={margin-left:58.33333333%}.EsA8OW5ujDZsPztQj6FPtg\\=\\={margin-left:66.66666667%}.nQC9vUWkrfNCVyj2qOVCkQ\\=\\={margin-left:75%}.w7bN9NO2UZiqkuqP7M6J8w\\=\\={margin-left:83.33333333%}._4bxCDyoME4ZoHM77fUGO-A\\=\\={margin-left:91.66666667%}}@media(min-width: 992px){.jnUU00B2-e9Wk5Nl\\+60mRQ\\=\\={flex-basis:0;flex-grow:1;max-width:100%}._6wXj2dZ8v1eEey2fp9boow\\=\\=>*{flex:0 0 100%;max-width:100%}._7lbPfmPU0yUL2kQqDer73Q\\=\\=>*{flex:0 0 50%;max-width:50%}.kdIcM3Qs9GhNVo-lKHz6Ow\\=\\=>*{flex:0 0 33.3333333333%;max-width:33.3333333333%}.zxxD3emDYe-YOQP5ID8I-A\\=\\=>*{flex:0 0 25%;max-width:25%}.IU8kip4-12hORu5P47EBUg\\=\\=>*{flex:0 0 20%;max-width:20%}.NULIhDCknUwrL6QwT-RD6Q\\=\\=>*{flex:0 0 16.6666666667%;max-width:16.6666666667%}.mFyyeCKxpl8rS-wFzA1g3Q\\=\\={flex:0 0 auto;width:auto;max-width:100%}.yL\\+-V3goVEWF4G56\\+fVSpw\\=\\={flex:0 0 8.33333333%;max-width:8.33333333%}.GCfQVWfgvTZkudPSiKZapQ\\=\\={flex:0 0 16.66666667%;max-width:16.66666667%}.gcFAuaAKhVU\\+ZBDUs1B8NA\\=\\={flex:0 0 25%;max-width:25%}.aeLEVJFdHekIqk7vG2\\+LIA\\=\\={flex:0 0 33.33333333%;max-width:33.33333333%}._4bJUxD5N-qoDPvcpKja5rg\\=\\={flex:0 0 41.66666667%;max-width:41.66666667%}.Tb3cUMCgwjG7rE1A9qO8NQ\\=\\={flex:0 0 50%;max-width:50%}.mOssnXALpF8Hv5w9NvNA3A\\=\\={flex:0 0 58.33333333%;max-width:58.33333333%}._4TecnWoAdQL52Hg5pH6YaA\\=\\={flex:0 0 66.66666667%;max-width:66.66666667%}.rCheKtb6rNIH-zaXJpP6ug\\=\\={flex:0 0 75%;max-width:75%}.r6GfaPfTE4kyvZyJwdSBMQ\\=\\={flex:0 0 83.33333333%;max-width:83.33333333%}.HWrIN7KCnt6SMcNMOEF-4A\\=\\={flex:0 0 91.66666667%;max-width:91.66666667%}.nMyj2gB5dgB1xHYwFVKq4A\\=\\={flex:0 0 100%;max-width:100%}.MXJ0m-mhbkBaNtZtWy2JuQ\\=\\={order:-1}.jLnBd10eoFPeZmp1uVsKjw\\=\\={order:13}.ekqULi75ViAs\\+nUXnLlKzA\\=\\={order:0}.frH4RdUlpw3C5E0-eBCC6A\\=\\={order:1}.fC3JIGKv-rCrMihlBJ2pIQ\\=\\={order:2}.AVwvm5XOJmClHPQ\\+T2GRIw\\=\\={order:3}.zNzTgYDRRis8BjwNdKCq8A\\=\\={order:4}.IpSRnhqjon0dk5Z\\+EYJ5XQ\\=\\={order:5}.DAwPWuKsniz1dhiKKVpbrg\\=\\={order:6}.iQSbThHNdH2Tdn9wXiP\\+Tg\\=\\={order:7}.srZXqZcmQumDLUA6WNruLg\\=\\={order:8}.F0o1BdjoJpd\\+Zqa1QpFJWw\\=\\={order:9}._3isOFHnYRdAK7\\+04uBB3NA\\=\\={order:10}.iPjGEB-lnyQzeSJ3W1cNWg\\=\\={order:11}.VMnmhFS2a5bwMEaw0kcIOQ\\=\\={order:12}.xOzLsSID\\+fZxbcnzliRVCw\\=\\={margin-left:0}.sJCIu3mJ9uv0tj\\+a0ooLBw\\=\\={margin-left:8.33333333%}._9vzEt2RDRJ1BsDIVrrV5\\+g\\=\\={margin-left:16.66666667%}.dwN5tW6AJKsHPPj93SSzpA\\=\\={margin-left:25%}.js58c7TZ886lHWyNOJS42Q\\=\\={margin-left:33.33333333%}.R1EW5gv61NZXyTM7Rri6mw\\=\\={margin-left:41.66666667%}.pCNW1qOEx2K20iT4PI6oww\\=\\={margin-left:50%}.Y9zBz8LGYj2dQenR5z\\+svg\\=\\={margin-left:58.33333333%}._895tgbys\\+843keWZG4wDJg\\=\\={margin-left:66.66666667%}.hSRItx7Gn3c6jAAJYPv1NQ\\=\\={margin-left:75%}._7Yc8TJHtf7DPKZFJlgFqMw\\=\\={margin-left:83.33333333%}.lfuiWt3GO05NiZbjJ6sIQg\\=\\={margin-left:91.66666667%}}@media(min-width: 1200px){.U9pRm4BQiJBKv9MF4kAOKg\\=\\={flex-basis:0;flex-grow:1;max-width:100%}.u4QyHeij\\+r9piU9qea-G4g\\=\\=>*{flex:0 0 100%;max-width:100%}.l-pFvz9e7SHKwB2zT9NztA\\=\\=>*{flex:0 0 50%;max-width:50%}.sEEWRjZuR2O4pKb93mFMBg\\=\\=>*{flex:0 0 33.3333333333%;max-width:33.3333333333%}.\\+RCPajoCDt8j9Hsp13RMkg\\=\\=>*{flex:0 0 25%;max-width:25%}.\\+GrLhtYim3pqY2a9m6PIdw\\=\\=>*{flex:0 0 20%;max-width:20%}.B6bQBuJRtB9P0N1vLcfnLg\\=\\=>*{flex:0 0 16.6666666667%;max-width:16.6666666667%}.ADYG\\+5p47kIEEH\\+yaXfy\\+g\\=\\={flex:0 0 auto;width:auto;max-width:100%}.lIzKgcg1REtDI9W1yCgcFw\\=\\={flex:0 0 8.33333333%;max-width:8.33333333%}.mNn2fcJWYjkLtm-z6\\+bUVg\\=\\={flex:0 0 16.66666667%;max-width:16.66666667%}._5avH3rVLZIii2JnGlH0m5Q\\=\\={flex:0 0 25%;max-width:25%}.qOSStLd0Hyd1qwpBfZxanA\\=\\={flex:0 0 33.33333333%;max-width:33.33333333%}.Jse2AIcAqQ-L735eOc6uYw\\=\\={flex:0 0 41.66666667%;max-width:41.66666667%}.ZfbQVYuXDPgq2Cbch0k9UQ\\=\\={flex:0 0 50%;max-width:50%}.DXWl7vZG6Q1KwkWGUtJJow\\=\\={flex:0 0 58.33333333%;max-width:58.33333333%}._1Am5jpu2gSLbN3MT90ZpMA\\=\\={flex:0 0 66.66666667%;max-width:66.66666667%}.NtjNTxvO1eYDpJhzFSeJdw\\=\\={flex:0 0 75%;max-width:75%}._7mb0qz1gMBy5z3XE0MeR-A\\=\\={flex:0 0 83.33333333%;max-width:83.33333333%}.KJqaUhm8U0JsiYrD0Dxblw\\=\\={flex:0 0 91.66666667%;max-width:91.66666667%}.Db7w4RNONNwOnXowhIc8ng\\=\\={flex:0 0 100%;max-width:100%}.YwWqx3jNUeTiCy6ab1NvwQ\\=\\={order:-1}.pADA0Zr-7yvueKNn8hNSUg\\=\\={order:13}.MGTsNCvcCF7a5bntzZ-dFg\\=\\={order:0}.imRpazHdrADOA4JO4\\+1hfQ\\=\\={order:1}.MhWYoHzuOsN8oMfHZvlNKQ\\=\\={order:2}.yuKbQ2BqW4\\+2ngt8Q3MNSA\\=\\={order:3}.Z1Cs3h19uaOxne6ZhkT1mg\\=\\={order:4}._4l1OZXmmOjYt43ZMhIVXrg\\=\\={order:5}._0j2Qa3MZEDnGc9d8ACwQlw\\=\\={order:6}.QTp7gdQhj\\+ZPtkZfCkYPGQ\\=\\={order:7}.KqbdWIRkmyRLoeqp6g4zBw\\=\\={order:8}.WA\\+x7GU7FgtM7Lb6RbkCBw\\=\\={order:9}.H96AFgnR3\\+750AlDEhvACQ\\=\\={order:10}.VMJYIpjlQIRxILOyCwjRlw\\=\\={order:11}.THCBM5DJ0MGEuKjhUwgpRA\\=\\={order:12}.RElUj6kBIA3KUbeP-Ey7jg\\=\\={margin-left:0}.m0vkzLSuYKPoNqhazIJGtA\\=\\={margin-left:8.33333333%}.jHQ9y5Wyqmu\\+7d2lebgLEA\\=\\={margin-left:16.66666667%}.HCSI03\\+-In5d0I5ASg4MPg\\=\\={margin-left:25%}.\\+pLIehF4BhymLPMD3DEv5Q\\=\\={margin-left:33.33333333%}.JBEZ-AVXBGmxAkROkg-HpA\\=\\={margin-left:41.66666667%}.tU1kY5iHxgC5X9KOD6DCnw\\=\\={margin-left:50%}.I7tPhu6MopGW0TMNeJSQXA\\=\\={margin-left:58.33333333%}.\\+80lB3s5RxYsPY\\+-F8Zvaw\\=\\={margin-left:66.66666667%}._2yxroUmDuUWS6bqhFE6E4g\\=\\={margin-left:75%}._2N2FYyk09ksCkW70LYcgcg\\=\\={margin-left:83.33333333%}.Oswg-phWUCLywjKIi66TNA\\=\\={margin-left:91.66666667%}}.rxb-u7L8A-K7OqGYZW3mEg\\=\\={display:block;width:100%;height:calc(1.5em + 0.75rem + 2px);padding:.375rem .75rem;font-size:1rem;font-weight:400;line-height:1.5;color:#495057;background-color:#fff;background-clip:padding-box;border:1px solid #ced4da;border-radius:.25rem;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}@media(prefers-reduced-motion: reduce){.rxb-u7L8A-K7OqGYZW3mEg\\=\\={transition:none}}.rxb-u7L8A-K7OqGYZW3mEg\\=\\=::-ms-expand{background-color:rgba(0,0,0,0);border:0}.rxb-u7L8A-K7OqGYZW3mEg\\=\\=:focus{color:#495057;background-color:#fff;border-color:#80bdff;outline:0;box-shadow:0 0 0 .2rem rgba(0,123,255,.25)}.rxb-u7L8A-K7OqGYZW3mEg\\=\\=::placeholder{color:#6c757d;opacity:1}.rxb-u7L8A-K7OqGYZW3mEg\\=\\=:disabled,.rxb-u7L8A-K7OqGYZW3mEg\\=\\=[readonly]{background-color:#e9ecef;opacity:1}input[type=date].rxb-u7L8A-K7OqGYZW3mEg\\=\\=,input[type=time].rxb-u7L8A-K7OqGYZW3mEg\\=\\=,input[type=datetime-local].rxb-u7L8A-K7OqGYZW3mEg\\=\\=,input[type=month].rxb-u7L8A-K7OqGYZW3mEg\\=\\={appearance:none}select.rxb-u7L8A-K7OqGYZW3mEg\\=\\=:-moz-focusring{color:rgba(0,0,0,0);text-shadow:0 0 0 #495057}select.rxb-u7L8A-K7OqGYZW3mEg\\=\\=:focus::-ms-value{color:#495057;background-color:#fff}.ItAE4BISMwOknrbg0zTW6A\\=\\=,.FQ2oMW0oMyvNjnw28P6SSA\\=\\={display:block;width:100%}.L44tdlGXEblIDOcHaUwOdg\\=\\={padding-top:calc(0.375rem + 1px);padding-bottom:calc(0.375rem + 1px);margin-bottom:0;font-size:inherit;line-height:1.5}._9h55f\\+rR1p9NXt8AOqDFKg\\=\\={padding-top:calc(0.5rem + 1px);padding-bottom:calc(0.5rem + 1px);font-size:1.25rem;line-height:1.5}._2U3Vlw7d5ETuC9xdyFRr8w\\=\\={padding-top:calc(0.25rem + 1px);padding-bottom:calc(0.25rem + 1px);font-size:0.875rem;line-height:1.5}.wh-T\\+fF5UyFigyoA5tghrw\\=\\={display:block;width:100%;padding:.375rem 0;margin-bottom:0;font-size:1rem;line-height:1.5;color:#212529;background-color:rgba(0,0,0,0);border:solid rgba(0,0,0,0);border-width:1px 0}.wh-T\\+fF5UyFigyoA5tghrw\\=\\=.ZRdFRRmmdJsAOwBY\\+RWMtg\\=\\=,.wh-T\\+fF5UyFigyoA5tghrw\\=\\=.sIVGOcqPE2FeSC9GjjXWRw\\=\\={padding-right:0;padding-left:0}.ZRdFRRmmdJsAOwBY\\+RWMtg\\=\\={height:calc(1.5em + 0.5rem + 2px);padding:.25rem .5rem;font-size:0.875rem;line-height:1.5;border-radius:.2rem}.sIVGOcqPE2FeSC9GjjXWRw\\=\\={height:calc(1.5em + 1rem + 2px);padding:.5rem 1rem;font-size:1.25rem;line-height:1.5;border-radius:.3rem}select.rxb-u7L8A-K7OqGYZW3mEg\\=\\=[size],select.rxb-u7L8A-K7OqGYZW3mEg\\=\\=[multiple]{height:auto}textarea.rxb-u7L8A-K7OqGYZW3mEg\\=\\={height:auto}.\\+o0szHLHnQSOFsifiUvdJw\\=\\={margin-bottom:1rem}._1A9mluCA-srn7qq4AWMtAg\\=\\={display:block;margin-top:.25rem}.GN9T3HyWyk9cpPD8-6uyDQ\\=\\={display:flex;flex-wrap:wrap;margin-right:-5px;margin-left:-5px}.GN9T3HyWyk9cpPD8-6uyDQ\\=\\=>.ZipjHnzKjAMLD7S4P-AIeA\\=\\=,.GN9T3HyWyk9cpPD8-6uyDQ\\=\\=>[class*=col-]{padding-right:5px;padding-left:5px}.tF3rjXkFRbBtfcpC6cW2sg\\=\\={position:relative;display:block;padding-left:1.25rem}.\\+wxdJMEiONNcuJirfptaKg\\=\\={position:absolute;margin-top:.3rem;margin-left:-1.25rem}.\\+wxdJMEiONNcuJirfptaKg\\=\\=[disabled]~.HgyDHyHFbSZ00SBAYkBcqw\\=\\=,.\\+wxdJMEiONNcuJirfptaKg\\=\\=:disabled~.HgyDHyHFbSZ00SBAYkBcqw\\=\\={color:#6c757d}.HgyDHyHFbSZ00SBAYkBcqw\\=\\={margin-bottom:0}.AotIqR-zGtBkUw8C-V5CYQ\\=\\={display:inline-flex;align-items:center;padding-left:0;margin-right:.75rem}.AotIqR-zGtBkUw8C-V5CYQ\\=\\= .\\+wxdJMEiONNcuJirfptaKg\\=\\={position:static;margin-top:0;margin-right:.3125rem;margin-left:0}.oQ-TB6lObxU2S\\+fa\\+BBRrQ\\=\\={display:none;width:100%;margin-top:.25rem;font-size:80%;color:#28a745}._0lwTqF-2CN1XZSfX-c66dg\\=\\={position:absolute;top:100%;left:0;z-index:5;display:none;max-width:100%;padding:.25rem .5rem;margin-top:.1rem;font-size:0.875rem;line-height:1.5;color:#fff;background-color:rgba(40,167,69,.9);border-radius:.25rem}.GN9T3HyWyk9cpPD8-6uyDQ\\=\\=>.ZipjHnzKjAMLD7S4P-AIeA\\=\\=>._0lwTqF-2CN1XZSfX-c66dg\\=\\=,.GN9T3HyWyk9cpPD8-6uyDQ\\=\\=>[class*=col-]>._0lwTqF-2CN1XZSfX-c66dg\\=\\={left:5px}.oT3PsQO1Im41bPXPrim8DQ\\=\\= :valid~.oQ-TB6lObxU2S\\+fa\\+BBRrQ\\=\\=,.oT3PsQO1Im41bPXPrim8DQ\\=\\= :valid~._0lwTqF-2CN1XZSfX-c66dg\\=\\=,.ajliVsAF8sWm2B73BP\\+iJA\\=\\=~.oQ-TB6lObxU2S\\+fa\\+BBRrQ\\=\\=,.ajliVsAF8sWm2B73BP\\+iJA\\=\\=~._0lwTqF-2CN1XZSfX-c66dg\\=\\={display:block}.oT3PsQO1Im41bPXPrim8DQ\\=\\= .rxb-u7L8A-K7OqGYZW3mEg\\=\\=:valid,.rxb-u7L8A-K7OqGYZW3mEg\\=\\=.ajliVsAF8sWm2B73BP\\+iJA\\=\\={border-color:#28a745;padding-right:calc(1.5em + 0.75rem) !important;background-image:url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='8' height='8' viewBox='0 0 8 8'%3e%3cpath fill='%2328a745' d='M2.3 6.73L.6 4.53c-.4-1.04.46-1.4 1.1-.8l1.1 1.4 3.4-3.8c.6-.63 1.6-.27 1.2.7l-4 4.6c-.43.5-.8.4-1.1.1z'/%3e%3c/svg%3e\");background-repeat:no-repeat;background-position:right calc(0.375em + 0.1875rem) center;background-size:calc(0.75em + 0.375rem) calc(0.75em + 0.375rem)}.oT3PsQO1Im41bPXPrim8DQ\\=\\= .rxb-u7L8A-K7OqGYZW3mEg\\=\\=:valid:focus,.rxb-u7L8A-K7OqGYZW3mEg\\=\\=.ajliVsAF8sWm2B73BP\\+iJA\\=\\=:focus{border-color:#28a745;box-shadow:0 0 0 .2rem rgba(40,167,69,.25)}.oT3PsQO1Im41bPXPrim8DQ\\=\\= select.rxb-u7L8A-K7OqGYZW3mEg\\=\\=:valid,select.rxb-u7L8A-K7OqGYZW3mEg\\=\\=.ajliVsAF8sWm2B73BP\\+iJA\\=\\={padding-right:3rem !important;background-position:right 1.5rem center}.oT3PsQO1Im41bPXPrim8DQ\\=\\= textarea.rxb-u7L8A-K7OqGYZW3mEg\\=\\=:valid,textarea.rxb-u7L8A-K7OqGYZW3mEg\\=\\=.ajliVsAF8sWm2B73BP\\+iJA\\=\\={padding-right:calc(1.5em + 0.75rem);background-position:top calc(0.375em + 0.1875rem) right calc(0.375em + 0.1875rem)}.oT3PsQO1Im41bPXPrim8DQ\\=\\= .ZuKAot8IvK4eAXR7cQ\\+3zA\\=\\=:valid,.ZuKAot8IvK4eAXR7cQ\\+3zA\\=\\=.ajliVsAF8sWm2B73BP\\+iJA\\=\\={border-color:#28a745;padding-right:calc(0.75em + 2.3125rem) !important;background:url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='4' height='5' viewBox='0 0 4 5'%3e%3cpath fill='%23343a40' d='M2 0L0 2h4zm0 5L0 3h4z'/%3e%3c/svg%3e\") right .75rem center/8px 10px no-repeat,#fff url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='8' height='8' viewBox='0 0 8 8'%3e%3cpath fill='%2328a745' d='M2.3 6.73L.6 4.53c-.4-1.04.46-1.4 1.1-.8l1.1 1.4 3.4-3.8c.6-.63 1.6-.27 1.2.7l-4 4.6c-.43.5-.8.4-1.1.1z'/%3e%3c/svg%3e\") center right 1.75rem/calc(0.75em + 0.375rem) calc(0.75em + 0.375rem) no-repeat}.oT3PsQO1Im41bPXPrim8DQ\\=\\= .ZuKAot8IvK4eAXR7cQ\\+3zA\\=\\=:valid:focus,.ZuKAot8IvK4eAXR7cQ\\+3zA\\=\\=.ajliVsAF8sWm2B73BP\\+iJA\\=\\=:focus{border-color:#28a745;box-shadow:0 0 0 .2rem rgba(40,167,69,.25)}.oT3PsQO1Im41bPXPrim8DQ\\=\\= .\\+wxdJMEiONNcuJirfptaKg\\=\\=:valid~.HgyDHyHFbSZ00SBAYkBcqw\\=\\=,.\\+wxdJMEiONNcuJirfptaKg\\=\\=.ajliVsAF8sWm2B73BP\\+iJA\\=\\=~.HgyDHyHFbSZ00SBAYkBcqw\\=\\={color:#28a745}.oT3PsQO1Im41bPXPrim8DQ\\=\\= .\\+wxdJMEiONNcuJirfptaKg\\=\\=:valid~.oQ-TB6lObxU2S\\+fa\\+BBRrQ\\=\\=,.oT3PsQO1Im41bPXPrim8DQ\\=\\= .\\+wxdJMEiONNcuJirfptaKg\\=\\=:valid~._0lwTqF-2CN1XZSfX-c66dg\\=\\=,.\\+wxdJMEiONNcuJirfptaKg\\=\\=.ajliVsAF8sWm2B73BP\\+iJA\\=\\=~.oQ-TB6lObxU2S\\+fa\\+BBRrQ\\=\\=,.\\+wxdJMEiONNcuJirfptaKg\\=\\=.ajliVsAF8sWm2B73BP\\+iJA\\=\\=~._0lwTqF-2CN1XZSfX-c66dg\\=\\={display:block}.oT3PsQO1Im41bPXPrim8DQ\\=\\= .TTjFeu5yhte\\+p5CUD9uvcg\\=\\=:valid~.b\\+PoZPET9E6\\+CPNs\\+UKGZw\\=\\=,.TTjFeu5yhte\\+p5CUD9uvcg\\=\\=.ajliVsAF8sWm2B73BP\\+iJA\\=\\=~.b\\+PoZPET9E6\\+CPNs\\+UKGZw\\=\\={color:#28a745}.oT3PsQO1Im41bPXPrim8DQ\\=\\= .TTjFeu5yhte\\+p5CUD9uvcg\\=\\=:valid~.b\\+PoZPET9E6\\+CPNs\\+UKGZw\\=\\=::before,.TTjFeu5yhte\\+p5CUD9uvcg\\=\\=.ajliVsAF8sWm2B73BP\\+iJA\\=\\=~.b\\+PoZPET9E6\\+CPNs\\+UKGZw\\=\\=::before{border-color:#28a745}.oT3PsQO1Im41bPXPrim8DQ\\=\\= .TTjFeu5yhte\\+p5CUD9uvcg\\=\\=:valid:checked~.b\\+PoZPET9E6\\+CPNs\\+UKGZw\\=\\=::before,.TTjFeu5yhte\\+p5CUD9uvcg\\=\\=.ajliVsAF8sWm2B73BP\\+iJA\\=\\=:checked~.b\\+PoZPET9E6\\+CPNs\\+UKGZw\\=\\=::before{border-color:#34ce57;background-color:#34ce57}.oT3PsQO1Im41bPXPrim8DQ\\=\\= .TTjFeu5yhte\\+p5CUD9uvcg\\=\\=:valid:focus~.b\\+PoZPET9E6\\+CPNs\\+UKGZw\\=\\=::before,.TTjFeu5yhte\\+p5CUD9uvcg\\=\\=.ajliVsAF8sWm2B73BP\\+iJA\\=\\=:focus~.b\\+PoZPET9E6\\+CPNs\\+UKGZw\\=\\=::before{box-shadow:0 0 0 .2rem rgba(40,167,69,.25)}.oT3PsQO1Im41bPXPrim8DQ\\=\\= .TTjFeu5yhte\\+p5CUD9uvcg\\=\\=:valid:focus:not(:checked)~.b\\+PoZPET9E6\\+CPNs\\+UKGZw\\=\\=::before,.TTjFeu5yhte\\+p5CUD9uvcg\\=\\=.ajliVsAF8sWm2B73BP\\+iJA\\=\\=:focus:not(:checked)~.b\\+PoZPET9E6\\+CPNs\\+UKGZw\\=\\=::before{border-color:#28a745}.oT3PsQO1Im41bPXPrim8DQ\\=\\= .H5LpTHh6\\+g956FJIUi4mPA\\=\\=:valid~.GhoPRWJkNpP3HCEW5ayyjA\\=\\=,.H5LpTHh6\\+g956FJIUi4mPA\\=\\=.ajliVsAF8sWm2B73BP\\+iJA\\=\\=~.GhoPRWJkNpP3HCEW5ayyjA\\=\\={border-color:#28a745}.oT3PsQO1Im41bPXPrim8DQ\\=\\= .H5LpTHh6\\+g956FJIUi4mPA\\=\\=:valid:focus~.GhoPRWJkNpP3HCEW5ayyjA\\=\\=,.H5LpTHh6\\+g956FJIUi4mPA\\=\\=.ajliVsAF8sWm2B73BP\\+iJA\\=\\=:focus~.GhoPRWJkNpP3HCEW5ayyjA\\=\\={border-color:#28a745;box-shadow:0 0 0 .2rem rgba(40,167,69,.25)}._3L3JuseiUgFLMEJfoT-ZnQ\\=\\={display:none;width:100%;margin-top:.25rem;font-size:80%;color:#dc3545}.LlnsAlWVkYbU3Fg7FPceeA\\=\\={position:absolute;top:100%;left:0;z-index:5;display:none;max-width:100%;padding:.25rem .5rem;margin-top:.1rem;font-size:0.875rem;line-height:1.5;color:#fff;background-color:rgba(220,53,69,.9);border-radius:.25rem}.GN9T3HyWyk9cpPD8-6uyDQ\\=\\=>.ZipjHnzKjAMLD7S4P-AIeA\\=\\=>.LlnsAlWVkYbU3Fg7FPceeA\\=\\=,.GN9T3HyWyk9cpPD8-6uyDQ\\=\\=>[class*=col-]>.LlnsAlWVkYbU3Fg7FPceeA\\=\\={left:5px}.oT3PsQO1Im41bPXPrim8DQ\\=\\= :invalid~._3L3JuseiUgFLMEJfoT-ZnQ\\=\\=,.oT3PsQO1Im41bPXPrim8DQ\\=\\= :invalid~.LlnsAlWVkYbU3Fg7FPceeA\\=\\=,.hNeMhnkgc117eUaEbh4zoA\\=\\=~._3L3JuseiUgFLMEJfoT-ZnQ\\=\\=,.hNeMhnkgc117eUaEbh4zoA\\=\\=~.LlnsAlWVkYbU3Fg7FPceeA\\=\\={display:block}.oT3PsQO1Im41bPXPrim8DQ\\=\\= .rxb-u7L8A-K7OqGYZW3mEg\\=\\=:invalid,.rxb-u7L8A-K7OqGYZW3mEg\\=\\=.hNeMhnkgc117eUaEbh4zoA\\=\\={border-color:#dc3545;padding-right:calc(1.5em + 0.75rem) !important;background-image:url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='none' stroke='%23dc3545' viewBox='0 0 12 12'%3e%3ccircle cx='6' cy='6' r='4.5'/%3e%3cpath stroke-linejoin='round' d='M5.8 3.6h.4L6 6.5z'/%3e%3ccircle cx='6' cy='8.2' r='.6' fill='%23dc3545' stroke='none'/%3e%3c/svg%3e\");background-repeat:no-repeat;background-position:right calc(0.375em + 0.1875rem) center;background-size:calc(0.75em + 0.375rem) calc(0.75em + 0.375rem)}.oT3PsQO1Im41bPXPrim8DQ\\=\\= .rxb-u7L8A-K7OqGYZW3mEg\\=\\=:invalid:focus,.rxb-u7L8A-K7OqGYZW3mEg\\=\\=.hNeMhnkgc117eUaEbh4zoA\\=\\=:focus{border-color:#dc3545;box-shadow:0 0 0 .2rem rgba(220,53,69,.25)}.oT3PsQO1Im41bPXPrim8DQ\\=\\= select.rxb-u7L8A-K7OqGYZW3mEg\\=\\=:invalid,select.rxb-u7L8A-K7OqGYZW3mEg\\=\\=.hNeMhnkgc117eUaEbh4zoA\\=\\={padding-right:3rem !important;background-position:right 1.5rem center}.oT3PsQO1Im41bPXPrim8DQ\\=\\= textarea.rxb-u7L8A-K7OqGYZW3mEg\\=\\=:invalid,textarea.rxb-u7L8A-K7OqGYZW3mEg\\=\\=.hNeMhnkgc117eUaEbh4zoA\\=\\={padding-right:calc(1.5em + 0.75rem);background-position:top calc(0.375em + 0.1875rem) right calc(0.375em + 0.1875rem)}.oT3PsQO1Im41bPXPrim8DQ\\=\\= .ZuKAot8IvK4eAXR7cQ\\+3zA\\=\\=:invalid,.ZuKAot8IvK4eAXR7cQ\\+3zA\\=\\=.hNeMhnkgc117eUaEbh4zoA\\=\\={border-color:#dc3545;padding-right:calc(0.75em + 2.3125rem) !important;background:url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='4' height='5' viewBox='0 0 4 5'%3e%3cpath fill='%23343a40' d='M2 0L0 2h4zm0 5L0 3h4z'/%3e%3c/svg%3e\") right .75rem center/8px 10px no-repeat,#fff url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='none' stroke='%23dc3545' viewBox='0 0 12 12'%3e%3ccircle cx='6' cy='6' r='4.5'/%3e%3cpath stroke-linejoin='round' d='M5.8 3.6h.4L6 6.5z'/%3e%3ccircle cx='6' cy='8.2' r='.6' fill='%23dc3545' stroke='none'/%3e%3c/svg%3e\") center right 1.75rem/calc(0.75em + 0.375rem) calc(0.75em + 0.375rem) no-repeat}.oT3PsQO1Im41bPXPrim8DQ\\=\\= .ZuKAot8IvK4eAXR7cQ\\+3zA\\=\\=:invalid:focus,.ZuKAot8IvK4eAXR7cQ\\+3zA\\=\\=.hNeMhnkgc117eUaEbh4zoA\\=\\=:focus{border-color:#dc3545;box-shadow:0 0 0 .2rem rgba(220,53,69,.25)}.oT3PsQO1Im41bPXPrim8DQ\\=\\= .\\+wxdJMEiONNcuJirfptaKg\\=\\=:invalid~.HgyDHyHFbSZ00SBAYkBcqw\\=\\=,.\\+wxdJMEiONNcuJirfptaKg\\=\\=.hNeMhnkgc117eUaEbh4zoA\\=\\=~.HgyDHyHFbSZ00SBAYkBcqw\\=\\={color:#dc3545}.oT3PsQO1Im41bPXPrim8DQ\\=\\= .\\+wxdJMEiONNcuJirfptaKg\\=\\=:invalid~._3L3JuseiUgFLMEJfoT-ZnQ\\=\\=,.oT3PsQO1Im41bPXPrim8DQ\\=\\= .\\+wxdJMEiONNcuJirfptaKg\\=\\=:invalid~.LlnsAlWVkYbU3Fg7FPceeA\\=\\=,.\\+wxdJMEiONNcuJirfptaKg\\=\\=.hNeMhnkgc117eUaEbh4zoA\\=\\=~._3L3JuseiUgFLMEJfoT-ZnQ\\=\\=,.\\+wxdJMEiONNcuJirfptaKg\\=\\=.hNeMhnkgc117eUaEbh4zoA\\=\\=~.LlnsAlWVkYbU3Fg7FPceeA\\=\\={display:block}.oT3PsQO1Im41bPXPrim8DQ\\=\\= .TTjFeu5yhte\\+p5CUD9uvcg\\=\\=:invalid~.b\\+PoZPET9E6\\+CPNs\\+UKGZw\\=\\=,.TTjFeu5yhte\\+p5CUD9uvcg\\=\\=.hNeMhnkgc117eUaEbh4zoA\\=\\=~.b\\+PoZPET9E6\\+CPNs\\+UKGZw\\=\\={color:#dc3545}.oT3PsQO1Im41bPXPrim8DQ\\=\\= .TTjFeu5yhte\\+p5CUD9uvcg\\=\\=:invalid~.b\\+PoZPET9E6\\+CPNs\\+UKGZw\\=\\=::before,.TTjFeu5yhte\\+p5CUD9uvcg\\=\\=.hNeMhnkgc117eUaEbh4zoA\\=\\=~.b\\+PoZPET9E6\\+CPNs\\+UKGZw\\=\\=::before{border-color:#dc3545}.oT3PsQO1Im41bPXPrim8DQ\\=\\= .TTjFeu5yhte\\+p5CUD9uvcg\\=\\=:invalid:checked~.b\\+PoZPET9E6\\+CPNs\\+UKGZw\\=\\=::before,.TTjFeu5yhte\\+p5CUD9uvcg\\=\\=.hNeMhnkgc117eUaEbh4zoA\\=\\=:checked~.b\\+PoZPET9E6\\+CPNs\\+UKGZw\\=\\=::before{border-color:#e4606d;background-color:#e4606d}.oT3PsQO1Im41bPXPrim8DQ\\=\\= .TTjFeu5yhte\\+p5CUD9uvcg\\=\\=:invalid:focus~.b\\+PoZPET9E6\\+CPNs\\+UKGZw\\=\\=::before,.TTjFeu5yhte\\+p5CUD9uvcg\\=\\=.hNeMhnkgc117eUaEbh4zoA\\=\\=:focus~.b\\+PoZPET9E6\\+CPNs\\+UKGZw\\=\\=::before{box-shadow:0 0 0 .2rem rgba(220,53,69,.25)}.oT3PsQO1Im41bPXPrim8DQ\\=\\= .TTjFeu5yhte\\+p5CUD9uvcg\\=\\=:invalid:focus:not(:checked)~.b\\+PoZPET9E6\\+CPNs\\+UKGZw\\=\\=::before,.TTjFeu5yhte\\+p5CUD9uvcg\\=\\=.hNeMhnkgc117eUaEbh4zoA\\=\\=:focus:not(:checked)~.b\\+PoZPET9E6\\+CPNs\\+UKGZw\\=\\=::before{border-color:#dc3545}.oT3PsQO1Im41bPXPrim8DQ\\=\\= .H5LpTHh6\\+g956FJIUi4mPA\\=\\=:invalid~.GhoPRWJkNpP3HCEW5ayyjA\\=\\=,.H5LpTHh6\\+g956FJIUi4mPA\\=\\=.hNeMhnkgc117eUaEbh4zoA\\=\\=~.GhoPRWJkNpP3HCEW5ayyjA\\=\\={border-color:#dc3545}.oT3PsQO1Im41bPXPrim8DQ\\=\\= .H5LpTHh6\\+g956FJIUi4mPA\\=\\=:invalid:focus~.GhoPRWJkNpP3HCEW5ayyjA\\=\\=,.H5LpTHh6\\+g956FJIUi4mPA\\=\\=.hNeMhnkgc117eUaEbh4zoA\\=\\=:focus~.GhoPRWJkNpP3HCEW5ayyjA\\=\\={border-color:#dc3545;box-shadow:0 0 0 .2rem rgba(220,53,69,.25)}.f5\\+\\+B2i9PaJzqmEeNPVf0Q\\=\\={display:flex;flex-flow:row wrap;align-items:center}.f5\\+\\+B2i9PaJzqmEeNPVf0Q\\=\\= .tF3rjXkFRbBtfcpC6cW2sg\\=\\={width:100%}@media(min-width: 576px){.f5\\+\\+B2i9PaJzqmEeNPVf0Q\\=\\= label{display:flex;align-items:center;justify-content:center;margin-bottom:0}.f5\\+\\+B2i9PaJzqmEeNPVf0Q\\=\\= .\\+o0szHLHnQSOFsifiUvdJw\\=\\={display:flex;flex:0 0 auto;flex-flow:row wrap;align-items:center;margin-bottom:0}.f5\\+\\+B2i9PaJzqmEeNPVf0Q\\=\\= .rxb-u7L8A-K7OqGYZW3mEg\\=\\={display:inline-block;width:auto;vertical-align:middle}.f5\\+\\+B2i9PaJzqmEeNPVf0Q\\=\\= .wh-T\\+fF5UyFigyoA5tghrw\\=\\={display:inline-block}.f5\\+\\+B2i9PaJzqmEeNPVf0Q\\=\\= .XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=,.f5\\+\\+B2i9PaJzqmEeNPVf0Q\\=\\= .ZuKAot8IvK4eAXR7cQ\\+3zA\\=\\={width:auto}.f5\\+\\+B2i9PaJzqmEeNPVf0Q\\=\\= .tF3rjXkFRbBtfcpC6cW2sg\\=\\={display:flex;align-items:center;justify-content:center;width:auto;padding-left:0}.f5\\+\\+B2i9PaJzqmEeNPVf0Q\\=\\= .\\+wxdJMEiONNcuJirfptaKg\\=\\={position:relative;flex-shrink:0;margin-top:0;margin-right:.25rem;margin-left:0}.f5\\+\\+B2i9PaJzqmEeNPVf0Q\\=\\= .f2aVZSjfPLXxX0hroVfxsw\\=\\={align-items:center;justify-content:center}.f5\\+\\+B2i9PaJzqmEeNPVf0Q\\=\\= .b\\+PoZPET9E6\\+CPNs\\+UKGZw\\=\\={margin-bottom:0}}._7DhMpfk4OxfouraFzxZobA\\=\\={display:inline-block;font-weight:400;color:#212529;text-align:center;vertical-align:middle;user-select:none;background-color:rgba(0,0,0,0);border:1px solid rgba(0,0,0,0);padding:.375rem .75rem;font-size:1rem;line-height:1.5;border-radius:.25rem;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}@media(prefers-reduced-motion: reduce){._7DhMpfk4OxfouraFzxZobA\\=\\={transition:none}}._7DhMpfk4OxfouraFzxZobA\\=\\=:hover{color:#212529;text-decoration:none}._7DhMpfk4OxfouraFzxZobA\\=\\=:focus,._7DhMpfk4OxfouraFzxZobA\\=\\=.uqv5w\\+4O2NvycwwYLiZHiA\\=\\={outline:0;box-shadow:0 0 0 .2rem rgba(0,123,255,.25)}._7DhMpfk4OxfouraFzxZobA\\=\\=.SnxkU79OvQ6Qoh01xCyRhg\\=\\=,._7DhMpfk4OxfouraFzxZobA\\=\\=:disabled{opacity:.65}._7DhMpfk4OxfouraFzxZobA\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=){cursor:pointer}a._7DhMpfk4OxfouraFzxZobA\\=\\=.SnxkU79OvQ6Qoh01xCyRhg\\=\\=,fieldset:disabled a._7DhMpfk4OxfouraFzxZobA\\=\\={pointer-events:none}.tPk7d3Wa5J5-DN5k4W6xUA\\=\\={color:#fff;background-color:#007bff;border-color:#007bff}.tPk7d3Wa5J5-DN5k4W6xUA\\=\\=:hover{color:#fff;background-color:#0069d9;border-color:#0062cc}.tPk7d3Wa5J5-DN5k4W6xUA\\=\\=:focus,.tPk7d3Wa5J5-DN5k4W6xUA\\=\\=.uqv5w\\+4O2NvycwwYLiZHiA\\=\\={color:#fff;background-color:#0069d9;border-color:#0062cc;box-shadow:0 0 0 .2rem rgba(38,143,255,.5)}.tPk7d3Wa5J5-DN5k4W6xUA\\=\\=.SnxkU79OvQ6Qoh01xCyRhg\\=\\=,.tPk7d3Wa5J5-DN5k4W6xUA\\=\\=:disabled{color:#fff;background-color:#007bff;border-color:#007bff}.tPk7d3Wa5J5-DN5k4W6xUA\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=):active,.tPk7d3Wa5J5-DN5k4W6xUA\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=).alM3BwVgAI-A6mAZVmsIsA\\=\\=,.InkBQhrykVDp8OlXdbXOTA\\=\\=>.tPk7d3Wa5J5-DN5k4W6xUA\\=\\=.qNFyvqcuyPtURI6K5WGoLw\\=\\={color:#fff;background-color:#0062cc;border-color:#005cbf}.tPk7d3Wa5J5-DN5k4W6xUA\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=):active:focus,.tPk7d3Wa5J5-DN5k4W6xUA\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=).alM3BwVgAI-A6mAZVmsIsA\\=\\=:focus,.InkBQhrykVDp8OlXdbXOTA\\=\\=>.tPk7d3Wa5J5-DN5k4W6xUA\\=\\=.qNFyvqcuyPtURI6K5WGoLw\\=\\=:focus{box-shadow:0 0 0 .2rem rgba(38,143,255,.5)}.v8-NuLXZ7PwaK3vfW-hNcQ\\=\\={color:#fff;background-color:#6c757d;border-color:#6c757d}.v8-NuLXZ7PwaK3vfW-hNcQ\\=\\=:hover{color:#fff;background-color:#5a6268;border-color:#545b62}.v8-NuLXZ7PwaK3vfW-hNcQ\\=\\=:focus,.v8-NuLXZ7PwaK3vfW-hNcQ\\=\\=.uqv5w\\+4O2NvycwwYLiZHiA\\=\\={color:#fff;background-color:#5a6268;border-color:#545b62;box-shadow:0 0 0 .2rem rgba(130,138,145,.5)}.v8-NuLXZ7PwaK3vfW-hNcQ\\=\\=.SnxkU79OvQ6Qoh01xCyRhg\\=\\=,.v8-NuLXZ7PwaK3vfW-hNcQ\\=\\=:disabled{color:#fff;background-color:#6c757d;border-color:#6c757d}.v8-NuLXZ7PwaK3vfW-hNcQ\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=):active,.v8-NuLXZ7PwaK3vfW-hNcQ\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=).alM3BwVgAI-A6mAZVmsIsA\\=\\=,.InkBQhrykVDp8OlXdbXOTA\\=\\=>.v8-NuLXZ7PwaK3vfW-hNcQ\\=\\=.qNFyvqcuyPtURI6K5WGoLw\\=\\={color:#fff;background-color:#545b62;border-color:#4e555b}.v8-NuLXZ7PwaK3vfW-hNcQ\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=):active:focus,.v8-NuLXZ7PwaK3vfW-hNcQ\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=).alM3BwVgAI-A6mAZVmsIsA\\=\\=:focus,.InkBQhrykVDp8OlXdbXOTA\\=\\=>.v8-NuLXZ7PwaK3vfW-hNcQ\\=\\=.qNFyvqcuyPtURI6K5WGoLw\\=\\=:focus{box-shadow:0 0 0 .2rem rgba(130,138,145,.5)}.EPNGsPeCovJGoxMetqFJQQ\\=\\={color:#fff;background-color:#28a745;border-color:#28a745}.EPNGsPeCovJGoxMetqFJQQ\\=\\=:hover{color:#fff;background-color:#218838;border-color:#1e7e34}.EPNGsPeCovJGoxMetqFJQQ\\=\\=:focus,.EPNGsPeCovJGoxMetqFJQQ\\=\\=.uqv5w\\+4O2NvycwwYLiZHiA\\=\\={color:#fff;background-color:#218838;border-color:#1e7e34;box-shadow:0 0 0 .2rem rgba(72,180,97,.5)}.EPNGsPeCovJGoxMetqFJQQ\\=\\=.SnxkU79OvQ6Qoh01xCyRhg\\=\\=,.EPNGsPeCovJGoxMetqFJQQ\\=\\=:disabled{color:#fff;background-color:#28a745;border-color:#28a745}.EPNGsPeCovJGoxMetqFJQQ\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=):active,.EPNGsPeCovJGoxMetqFJQQ\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=).alM3BwVgAI-A6mAZVmsIsA\\=\\=,.InkBQhrykVDp8OlXdbXOTA\\=\\=>.EPNGsPeCovJGoxMetqFJQQ\\=\\=.qNFyvqcuyPtURI6K5WGoLw\\=\\={color:#fff;background-color:#1e7e34;border-color:#1c7430}.EPNGsPeCovJGoxMetqFJQQ\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=):active:focus,.EPNGsPeCovJGoxMetqFJQQ\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=).alM3BwVgAI-A6mAZVmsIsA\\=\\=:focus,.InkBQhrykVDp8OlXdbXOTA\\=\\=>.EPNGsPeCovJGoxMetqFJQQ\\=\\=.qNFyvqcuyPtURI6K5WGoLw\\=\\=:focus{box-shadow:0 0 0 .2rem rgba(72,180,97,.5)}.aF\\+xAcqI1C\\+9nTUZ6-aedg\\=\\={color:#fff;background-color:#17a2b8;border-color:#17a2b8}.aF\\+xAcqI1C\\+9nTUZ6-aedg\\=\\=:hover{color:#fff;background-color:#138496;border-color:#117a8b}.aF\\+xAcqI1C\\+9nTUZ6-aedg\\=\\=:focus,.aF\\+xAcqI1C\\+9nTUZ6-aedg\\=\\=.uqv5w\\+4O2NvycwwYLiZHiA\\=\\={color:#fff;background-color:#138496;border-color:#117a8b;box-shadow:0 0 0 .2rem rgba(58,176,195,.5)}.aF\\+xAcqI1C\\+9nTUZ6-aedg\\=\\=.SnxkU79OvQ6Qoh01xCyRhg\\=\\=,.aF\\+xAcqI1C\\+9nTUZ6-aedg\\=\\=:disabled{color:#fff;background-color:#17a2b8;border-color:#17a2b8}.aF\\+xAcqI1C\\+9nTUZ6-aedg\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=):active,.aF\\+xAcqI1C\\+9nTUZ6-aedg\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=).alM3BwVgAI-A6mAZVmsIsA\\=\\=,.InkBQhrykVDp8OlXdbXOTA\\=\\=>.aF\\+xAcqI1C\\+9nTUZ6-aedg\\=\\=.qNFyvqcuyPtURI6K5WGoLw\\=\\={color:#fff;background-color:#117a8b;border-color:#10707f}.aF\\+xAcqI1C\\+9nTUZ6-aedg\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=):active:focus,.aF\\+xAcqI1C\\+9nTUZ6-aedg\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=).alM3BwVgAI-A6mAZVmsIsA\\=\\=:focus,.InkBQhrykVDp8OlXdbXOTA\\=\\=>.aF\\+xAcqI1C\\+9nTUZ6-aedg\\=\\=.qNFyvqcuyPtURI6K5WGoLw\\=\\=:focus{box-shadow:0 0 0 .2rem rgba(58,176,195,.5)}.Zx2kVQEYuquPXRqSIpsEFw\\=\\={color:#212529;background-color:#ffc107;border-color:#ffc107}.Zx2kVQEYuquPXRqSIpsEFw\\=\\=:hover{color:#212529;background-color:#e0a800;border-color:#d39e00}.Zx2kVQEYuquPXRqSIpsEFw\\=\\=:focus,.Zx2kVQEYuquPXRqSIpsEFw\\=\\=.uqv5w\\+4O2NvycwwYLiZHiA\\=\\={color:#212529;background-color:#e0a800;border-color:#d39e00;box-shadow:0 0 0 .2rem rgba(222,170,12,.5)}.Zx2kVQEYuquPXRqSIpsEFw\\=\\=.SnxkU79OvQ6Qoh01xCyRhg\\=\\=,.Zx2kVQEYuquPXRqSIpsEFw\\=\\=:disabled{color:#212529;background-color:#ffc107;border-color:#ffc107}.Zx2kVQEYuquPXRqSIpsEFw\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=):active,.Zx2kVQEYuquPXRqSIpsEFw\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=).alM3BwVgAI-A6mAZVmsIsA\\=\\=,.InkBQhrykVDp8OlXdbXOTA\\=\\=>.Zx2kVQEYuquPXRqSIpsEFw\\=\\=.qNFyvqcuyPtURI6K5WGoLw\\=\\={color:#212529;background-color:#d39e00;border-color:#c69500}.Zx2kVQEYuquPXRqSIpsEFw\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=):active:focus,.Zx2kVQEYuquPXRqSIpsEFw\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=).alM3BwVgAI-A6mAZVmsIsA\\=\\=:focus,.InkBQhrykVDp8OlXdbXOTA\\=\\=>.Zx2kVQEYuquPXRqSIpsEFw\\=\\=.qNFyvqcuyPtURI6K5WGoLw\\=\\=:focus{box-shadow:0 0 0 .2rem rgba(222,170,12,.5)}.Q8F2TgYeYq2mCTJxv85RXA\\=\\={color:#fff;background-color:#dc3545;border-color:#dc3545}.Q8F2TgYeYq2mCTJxv85RXA\\=\\=:hover{color:#fff;background-color:#c82333;border-color:#bd2130}.Q8F2TgYeYq2mCTJxv85RXA\\=\\=:focus,.Q8F2TgYeYq2mCTJxv85RXA\\=\\=.uqv5w\\+4O2NvycwwYLiZHiA\\=\\={color:#fff;background-color:#c82333;border-color:#bd2130;box-shadow:0 0 0 .2rem rgba(225,83,97,.5)}.Q8F2TgYeYq2mCTJxv85RXA\\=\\=.SnxkU79OvQ6Qoh01xCyRhg\\=\\=,.Q8F2TgYeYq2mCTJxv85RXA\\=\\=:disabled{color:#fff;background-color:#dc3545;border-color:#dc3545}.Q8F2TgYeYq2mCTJxv85RXA\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=):active,.Q8F2TgYeYq2mCTJxv85RXA\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=).alM3BwVgAI-A6mAZVmsIsA\\=\\=,.InkBQhrykVDp8OlXdbXOTA\\=\\=>.Q8F2TgYeYq2mCTJxv85RXA\\=\\=.qNFyvqcuyPtURI6K5WGoLw\\=\\={color:#fff;background-color:#bd2130;border-color:#b21f2d}.Q8F2TgYeYq2mCTJxv85RXA\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=):active:focus,.Q8F2TgYeYq2mCTJxv85RXA\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=).alM3BwVgAI-A6mAZVmsIsA\\=\\=:focus,.InkBQhrykVDp8OlXdbXOTA\\=\\=>.Q8F2TgYeYq2mCTJxv85RXA\\=\\=.qNFyvqcuyPtURI6K5WGoLw\\=\\=:focus{box-shadow:0 0 0 .2rem rgba(225,83,97,.5)}.yiFLb\\+WfiFN-0ldzJLypNQ\\=\\={color:#212529;background-color:#f8f9fa;border-color:#f8f9fa}.yiFLb\\+WfiFN-0ldzJLypNQ\\=\\=:hover{color:#212529;background-color:#e2e6ea;border-color:#dae0e5}.yiFLb\\+WfiFN-0ldzJLypNQ\\=\\=:focus,.yiFLb\\+WfiFN-0ldzJLypNQ\\=\\=.uqv5w\\+4O2NvycwwYLiZHiA\\=\\={color:#212529;background-color:#e2e6ea;border-color:#dae0e5;box-shadow:0 0 0 .2rem rgba(216,217,219,.5)}.yiFLb\\+WfiFN-0ldzJLypNQ\\=\\=.SnxkU79OvQ6Qoh01xCyRhg\\=\\=,.yiFLb\\+WfiFN-0ldzJLypNQ\\=\\=:disabled{color:#212529;background-color:#f8f9fa;border-color:#f8f9fa}.yiFLb\\+WfiFN-0ldzJLypNQ\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=):active,.yiFLb\\+WfiFN-0ldzJLypNQ\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=).alM3BwVgAI-A6mAZVmsIsA\\=\\=,.InkBQhrykVDp8OlXdbXOTA\\=\\=>.yiFLb\\+WfiFN-0ldzJLypNQ\\=\\=.qNFyvqcuyPtURI6K5WGoLw\\=\\={color:#212529;background-color:#dae0e5;border-color:#d3d9df}.yiFLb\\+WfiFN-0ldzJLypNQ\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=):active:focus,.yiFLb\\+WfiFN-0ldzJLypNQ\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=).alM3BwVgAI-A6mAZVmsIsA\\=\\=:focus,.InkBQhrykVDp8OlXdbXOTA\\=\\=>.yiFLb\\+WfiFN-0ldzJLypNQ\\=\\=.qNFyvqcuyPtURI6K5WGoLw\\=\\=:focus{box-shadow:0 0 0 .2rem rgba(216,217,219,.5)}.O42tOC04CFqDBZRWGBCOeA\\=\\={color:#fff;background-color:#343a40;border-color:#343a40}.O42tOC04CFqDBZRWGBCOeA\\=\\=:hover{color:#fff;background-color:#23272b;border-color:#1d2124}.O42tOC04CFqDBZRWGBCOeA\\=\\=:focus,.O42tOC04CFqDBZRWGBCOeA\\=\\=.uqv5w\\+4O2NvycwwYLiZHiA\\=\\={color:#fff;background-color:#23272b;border-color:#1d2124;box-shadow:0 0 0 .2rem rgba(82,88,93,.5)}.O42tOC04CFqDBZRWGBCOeA\\=\\=.SnxkU79OvQ6Qoh01xCyRhg\\=\\=,.O42tOC04CFqDBZRWGBCOeA\\=\\=:disabled{color:#fff;background-color:#343a40;border-color:#343a40}.O42tOC04CFqDBZRWGBCOeA\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=):active,.O42tOC04CFqDBZRWGBCOeA\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=).alM3BwVgAI-A6mAZVmsIsA\\=\\=,.InkBQhrykVDp8OlXdbXOTA\\=\\=>.O42tOC04CFqDBZRWGBCOeA\\=\\=.qNFyvqcuyPtURI6K5WGoLw\\=\\={color:#fff;background-color:#1d2124;border-color:#171a1d}.O42tOC04CFqDBZRWGBCOeA\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=):active:focus,.O42tOC04CFqDBZRWGBCOeA\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=).alM3BwVgAI-A6mAZVmsIsA\\=\\=:focus,.InkBQhrykVDp8OlXdbXOTA\\=\\=>.O42tOC04CFqDBZRWGBCOeA\\=\\=.qNFyvqcuyPtURI6K5WGoLw\\=\\=:focus{box-shadow:0 0 0 .2rem rgba(82,88,93,.5)}.q-4DlIgrmjx3kf1py-1abg\\=\\={color:#007bff;border-color:#007bff}.q-4DlIgrmjx3kf1py-1abg\\=\\=:hover{color:#fff;background-color:#007bff;border-color:#007bff}.q-4DlIgrmjx3kf1py-1abg\\=\\=:focus,.q-4DlIgrmjx3kf1py-1abg\\=\\=.uqv5w\\+4O2NvycwwYLiZHiA\\=\\={box-shadow:0 0 0 .2rem rgba(0,123,255,.5)}.q-4DlIgrmjx3kf1py-1abg\\=\\=.SnxkU79OvQ6Qoh01xCyRhg\\=\\=,.q-4DlIgrmjx3kf1py-1abg\\=\\=:disabled{color:#007bff;background-color:rgba(0,0,0,0)}.q-4DlIgrmjx3kf1py-1abg\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=):active,.q-4DlIgrmjx3kf1py-1abg\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=).alM3BwVgAI-A6mAZVmsIsA\\=\\=,.InkBQhrykVDp8OlXdbXOTA\\=\\=>.q-4DlIgrmjx3kf1py-1abg\\=\\=.qNFyvqcuyPtURI6K5WGoLw\\=\\={color:#fff;background-color:#007bff;border-color:#007bff}.q-4DlIgrmjx3kf1py-1abg\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=):active:focus,.q-4DlIgrmjx3kf1py-1abg\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=).alM3BwVgAI-A6mAZVmsIsA\\=\\=:focus,.InkBQhrykVDp8OlXdbXOTA\\=\\=>.q-4DlIgrmjx3kf1py-1abg\\=\\=.qNFyvqcuyPtURI6K5WGoLw\\=\\=:focus{box-shadow:0 0 0 .2rem rgba(0,123,255,.5)}._05T6SZ7OWl7vRSOO7xrYiw\\=\\={color:#6c757d;border-color:#6c757d}._05T6SZ7OWl7vRSOO7xrYiw\\=\\=:hover{color:#fff;background-color:#6c757d;border-color:#6c757d}._05T6SZ7OWl7vRSOO7xrYiw\\=\\=:focus,._05T6SZ7OWl7vRSOO7xrYiw\\=\\=.uqv5w\\+4O2NvycwwYLiZHiA\\=\\={box-shadow:0 0 0 .2rem rgba(108,117,125,.5)}._05T6SZ7OWl7vRSOO7xrYiw\\=\\=.SnxkU79OvQ6Qoh01xCyRhg\\=\\=,._05T6SZ7OWl7vRSOO7xrYiw\\=\\=:disabled{color:#6c757d;background-color:rgba(0,0,0,0)}._05T6SZ7OWl7vRSOO7xrYiw\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=):active,._05T6SZ7OWl7vRSOO7xrYiw\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=).alM3BwVgAI-A6mAZVmsIsA\\=\\=,.InkBQhrykVDp8OlXdbXOTA\\=\\=>._05T6SZ7OWl7vRSOO7xrYiw\\=\\=.qNFyvqcuyPtURI6K5WGoLw\\=\\={color:#fff;background-color:#6c757d;border-color:#6c757d}._05T6SZ7OWl7vRSOO7xrYiw\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=):active:focus,._05T6SZ7OWl7vRSOO7xrYiw\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=).alM3BwVgAI-A6mAZVmsIsA\\=\\=:focus,.InkBQhrykVDp8OlXdbXOTA\\=\\=>._05T6SZ7OWl7vRSOO7xrYiw\\=\\=.qNFyvqcuyPtURI6K5WGoLw\\=\\=:focus{box-shadow:0 0 0 .2rem rgba(108,117,125,.5)}.qv1D8bEG4LzZnYjnq2b5ew\\=\\={color:#28a745;border-color:#28a745}.qv1D8bEG4LzZnYjnq2b5ew\\=\\=:hover{color:#fff;background-color:#28a745;border-color:#28a745}.qv1D8bEG4LzZnYjnq2b5ew\\=\\=:focus,.qv1D8bEG4LzZnYjnq2b5ew\\=\\=.uqv5w\\+4O2NvycwwYLiZHiA\\=\\={box-shadow:0 0 0 .2rem rgba(40,167,69,.5)}.qv1D8bEG4LzZnYjnq2b5ew\\=\\=.SnxkU79OvQ6Qoh01xCyRhg\\=\\=,.qv1D8bEG4LzZnYjnq2b5ew\\=\\=:disabled{color:#28a745;background-color:rgba(0,0,0,0)}.qv1D8bEG4LzZnYjnq2b5ew\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=):active,.qv1D8bEG4LzZnYjnq2b5ew\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=).alM3BwVgAI-A6mAZVmsIsA\\=\\=,.InkBQhrykVDp8OlXdbXOTA\\=\\=>.qv1D8bEG4LzZnYjnq2b5ew\\=\\=.qNFyvqcuyPtURI6K5WGoLw\\=\\={color:#fff;background-color:#28a745;border-color:#28a745}.qv1D8bEG4LzZnYjnq2b5ew\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=):active:focus,.qv1D8bEG4LzZnYjnq2b5ew\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=).alM3BwVgAI-A6mAZVmsIsA\\=\\=:focus,.InkBQhrykVDp8OlXdbXOTA\\=\\=>.qv1D8bEG4LzZnYjnq2b5ew\\=\\=.qNFyvqcuyPtURI6K5WGoLw\\=\\=:focus{box-shadow:0 0 0 .2rem rgba(40,167,69,.5)}._3k\\+u5-\\+dHHCwNNaF\\+gdr7w\\=\\={color:#17a2b8;border-color:#17a2b8}._3k\\+u5-\\+dHHCwNNaF\\+gdr7w\\=\\=:hover{color:#fff;background-color:#17a2b8;border-color:#17a2b8}._3k\\+u5-\\+dHHCwNNaF\\+gdr7w\\=\\=:focus,._3k\\+u5-\\+dHHCwNNaF\\+gdr7w\\=\\=.uqv5w\\+4O2NvycwwYLiZHiA\\=\\={box-shadow:0 0 0 .2rem rgba(23,162,184,.5)}._3k\\+u5-\\+dHHCwNNaF\\+gdr7w\\=\\=.SnxkU79OvQ6Qoh01xCyRhg\\=\\=,._3k\\+u5-\\+dHHCwNNaF\\+gdr7w\\=\\=:disabled{color:#17a2b8;background-color:rgba(0,0,0,0)}._3k\\+u5-\\+dHHCwNNaF\\+gdr7w\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=):active,._3k\\+u5-\\+dHHCwNNaF\\+gdr7w\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=).alM3BwVgAI-A6mAZVmsIsA\\=\\=,.InkBQhrykVDp8OlXdbXOTA\\=\\=>._3k\\+u5-\\+dHHCwNNaF\\+gdr7w\\=\\=.qNFyvqcuyPtURI6K5WGoLw\\=\\={color:#fff;background-color:#17a2b8;border-color:#17a2b8}._3k\\+u5-\\+dHHCwNNaF\\+gdr7w\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=):active:focus,._3k\\+u5-\\+dHHCwNNaF\\+gdr7w\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=).alM3BwVgAI-A6mAZVmsIsA\\=\\=:focus,.InkBQhrykVDp8OlXdbXOTA\\=\\=>._3k\\+u5-\\+dHHCwNNaF\\+gdr7w\\=\\=.qNFyvqcuyPtURI6K5WGoLw\\=\\=:focus{box-shadow:0 0 0 .2rem rgba(23,162,184,.5)}.KCGFP69cNeODQ0PHCegveA\\=\\={color:#ffc107;border-color:#ffc107}.KCGFP69cNeODQ0PHCegveA\\=\\=:hover{color:#212529;background-color:#ffc107;border-color:#ffc107}.KCGFP69cNeODQ0PHCegveA\\=\\=:focus,.KCGFP69cNeODQ0PHCegveA\\=\\=.uqv5w\\+4O2NvycwwYLiZHiA\\=\\={box-shadow:0 0 0 .2rem rgba(255,193,7,.5)}.KCGFP69cNeODQ0PHCegveA\\=\\=.SnxkU79OvQ6Qoh01xCyRhg\\=\\=,.KCGFP69cNeODQ0PHCegveA\\=\\=:disabled{color:#ffc107;background-color:rgba(0,0,0,0)}.KCGFP69cNeODQ0PHCegveA\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=):active,.KCGFP69cNeODQ0PHCegveA\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=).alM3BwVgAI-A6mAZVmsIsA\\=\\=,.InkBQhrykVDp8OlXdbXOTA\\=\\=>.KCGFP69cNeODQ0PHCegveA\\=\\=.qNFyvqcuyPtURI6K5WGoLw\\=\\={color:#212529;background-color:#ffc107;border-color:#ffc107}.KCGFP69cNeODQ0PHCegveA\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=):active:focus,.KCGFP69cNeODQ0PHCegveA\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=).alM3BwVgAI-A6mAZVmsIsA\\=\\=:focus,.InkBQhrykVDp8OlXdbXOTA\\=\\=>.KCGFP69cNeODQ0PHCegveA\\=\\=.qNFyvqcuyPtURI6K5WGoLw\\=\\=:focus{box-shadow:0 0 0 .2rem rgba(255,193,7,.5)}.yQ-JWLaAqJss7VCiTW4UGQ\\=\\={color:#dc3545;border-color:#dc3545}.yQ-JWLaAqJss7VCiTW4UGQ\\=\\=:hover{color:#fff;background-color:#dc3545;border-color:#dc3545}.yQ-JWLaAqJss7VCiTW4UGQ\\=\\=:focus,.yQ-JWLaAqJss7VCiTW4UGQ\\=\\=.uqv5w\\+4O2NvycwwYLiZHiA\\=\\={box-shadow:0 0 0 .2rem rgba(220,53,69,.5)}.yQ-JWLaAqJss7VCiTW4UGQ\\=\\=.SnxkU79OvQ6Qoh01xCyRhg\\=\\=,.yQ-JWLaAqJss7VCiTW4UGQ\\=\\=:disabled{color:#dc3545;background-color:rgba(0,0,0,0)}.yQ-JWLaAqJss7VCiTW4UGQ\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=):active,.yQ-JWLaAqJss7VCiTW4UGQ\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=).alM3BwVgAI-A6mAZVmsIsA\\=\\=,.InkBQhrykVDp8OlXdbXOTA\\=\\=>.yQ-JWLaAqJss7VCiTW4UGQ\\=\\=.qNFyvqcuyPtURI6K5WGoLw\\=\\={color:#fff;background-color:#dc3545;border-color:#dc3545}.yQ-JWLaAqJss7VCiTW4UGQ\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=):active:focus,.yQ-JWLaAqJss7VCiTW4UGQ\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=).alM3BwVgAI-A6mAZVmsIsA\\=\\=:focus,.InkBQhrykVDp8OlXdbXOTA\\=\\=>.yQ-JWLaAqJss7VCiTW4UGQ\\=\\=.qNFyvqcuyPtURI6K5WGoLw\\=\\=:focus{box-shadow:0 0 0 .2rem rgba(220,53,69,.5)}.Js-WmbBYwSirASj7wEuy\\+g\\=\\={color:#f8f9fa;border-color:#f8f9fa}.Js-WmbBYwSirASj7wEuy\\+g\\=\\=:hover{color:#212529;background-color:#f8f9fa;border-color:#f8f9fa}.Js-WmbBYwSirASj7wEuy\\+g\\=\\=:focus,.Js-WmbBYwSirASj7wEuy\\+g\\=\\=.uqv5w\\+4O2NvycwwYLiZHiA\\=\\={box-shadow:0 0 0 .2rem rgba(248,249,250,.5)}.Js-WmbBYwSirASj7wEuy\\+g\\=\\=.SnxkU79OvQ6Qoh01xCyRhg\\=\\=,.Js-WmbBYwSirASj7wEuy\\+g\\=\\=:disabled{color:#f8f9fa;background-color:rgba(0,0,0,0)}.Js-WmbBYwSirASj7wEuy\\+g\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=):active,.Js-WmbBYwSirASj7wEuy\\+g\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=).alM3BwVgAI-A6mAZVmsIsA\\=\\=,.InkBQhrykVDp8OlXdbXOTA\\=\\=>.Js-WmbBYwSirASj7wEuy\\+g\\=\\=.qNFyvqcuyPtURI6K5WGoLw\\=\\={color:#212529;background-color:#f8f9fa;border-color:#f8f9fa}.Js-WmbBYwSirASj7wEuy\\+g\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=):active:focus,.Js-WmbBYwSirASj7wEuy\\+g\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=).alM3BwVgAI-A6mAZVmsIsA\\=\\=:focus,.InkBQhrykVDp8OlXdbXOTA\\=\\=>.Js-WmbBYwSirASj7wEuy\\+g\\=\\=.qNFyvqcuyPtURI6K5WGoLw\\=\\=:focus{box-shadow:0 0 0 .2rem rgba(248,249,250,.5)}.JwHCAjljftUQwvI1i5XAAQ\\=\\={color:#343a40;border-color:#343a40}.JwHCAjljftUQwvI1i5XAAQ\\=\\=:hover{color:#fff;background-color:#343a40;border-color:#343a40}.JwHCAjljftUQwvI1i5XAAQ\\=\\=:focus,.JwHCAjljftUQwvI1i5XAAQ\\=\\=.uqv5w\\+4O2NvycwwYLiZHiA\\=\\={box-shadow:0 0 0 .2rem rgba(52,58,64,.5)}.JwHCAjljftUQwvI1i5XAAQ\\=\\=.SnxkU79OvQ6Qoh01xCyRhg\\=\\=,.JwHCAjljftUQwvI1i5XAAQ\\=\\=:disabled{color:#343a40;background-color:rgba(0,0,0,0)}.JwHCAjljftUQwvI1i5XAAQ\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=):active,.JwHCAjljftUQwvI1i5XAAQ\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=).alM3BwVgAI-A6mAZVmsIsA\\=\\=,.InkBQhrykVDp8OlXdbXOTA\\=\\=>.JwHCAjljftUQwvI1i5XAAQ\\=\\=.qNFyvqcuyPtURI6K5WGoLw\\=\\={color:#fff;background-color:#343a40;border-color:#343a40}.JwHCAjljftUQwvI1i5XAAQ\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=):active:focus,.JwHCAjljftUQwvI1i5XAAQ\\=\\=:not(:disabled):not(.SnxkU79OvQ6Qoh01xCyRhg\\=\\=).alM3BwVgAI-A6mAZVmsIsA\\=\\=:focus,.InkBQhrykVDp8OlXdbXOTA\\=\\=>.JwHCAjljftUQwvI1i5XAAQ\\=\\=.qNFyvqcuyPtURI6K5WGoLw\\=\\=:focus{box-shadow:0 0 0 .2rem rgba(52,58,64,.5)}.uqHE7cPi\\+zWbQjDQFFuf2A\\=\\={font-weight:400;color:#007bff;text-decoration:none}.uqHE7cPi\\+zWbQjDQFFuf2A\\=\\=:hover{color:#0056b3;text-decoration:underline}.uqHE7cPi\\+zWbQjDQFFuf2A\\=\\=:focus,.uqHE7cPi\\+zWbQjDQFFuf2A\\=\\=.uqv5w\\+4O2NvycwwYLiZHiA\\=\\={text-decoration:underline}.uqHE7cPi\\+zWbQjDQFFuf2A\\=\\=:disabled,.uqHE7cPi\\+zWbQjDQFFuf2A\\=\\=.SnxkU79OvQ6Qoh01xCyRhg\\=\\={color:#6c757d;pointer-events:none}.Fajh0V-v4F6Q-PwZe1cZoQ\\=\\={padding:.5rem 1rem;font-size:1.25rem;line-height:1.5;border-radius:.3rem}.YY6aIAYg8S6JwUbr-E562Q\\=\\={padding:.25rem .5rem;font-size:0.875rem;line-height:1.5;border-radius:.2rem}.FcmMgdBtpHnxrQGHHnSPXg\\=\\={display:block;width:100%}.FcmMgdBtpHnxrQGHHnSPXg\\=\\=+.FcmMgdBtpHnxrQGHHnSPXg\\=\\={margin-top:.5rem}input[type=submit].FcmMgdBtpHnxrQGHHnSPXg\\=\\=,input[type=reset].FcmMgdBtpHnxrQGHHnSPXg\\=\\=,input[type=button].FcmMgdBtpHnxrQGHHnSPXg\\=\\={width:100%}.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\={position:relative;display:flex;flex-wrap:wrap;align-items:stretch;width:100%}.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=>.rxb-u7L8A-K7OqGYZW3mEg\\=\\=,.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=>.wh-T\\+fF5UyFigyoA5tghrw\\=\\=,.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=>.ZuKAot8IvK4eAXR7cQ\\+3zA\\=\\=,.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=>.dmo6hDMuxzHaXdzCjK\\+Pqg\\=\\={position:relative;flex:1 1 auto;width:1%;min-width:0;margin-bottom:0}.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=>.rxb-u7L8A-K7OqGYZW3mEg\\=\\=+.rxb-u7L8A-K7OqGYZW3mEg\\=\\=,.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=>.rxb-u7L8A-K7OqGYZW3mEg\\=\\=+.ZuKAot8IvK4eAXR7cQ\\+3zA\\=\\=,.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=>.rxb-u7L8A-K7OqGYZW3mEg\\=\\=+.dmo6hDMuxzHaXdzCjK\\+Pqg\\=\\=,.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=>.wh-T\\+fF5UyFigyoA5tghrw\\=\\=+.rxb-u7L8A-K7OqGYZW3mEg\\=\\=,.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=>.wh-T\\+fF5UyFigyoA5tghrw\\=\\=+.ZuKAot8IvK4eAXR7cQ\\+3zA\\=\\=,.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=>.wh-T\\+fF5UyFigyoA5tghrw\\=\\=+.dmo6hDMuxzHaXdzCjK\\+Pqg\\=\\=,.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=>.ZuKAot8IvK4eAXR7cQ\\+3zA\\=\\=+.rxb-u7L8A-K7OqGYZW3mEg\\=\\=,.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=>.ZuKAot8IvK4eAXR7cQ\\+3zA\\=\\=+.ZuKAot8IvK4eAXR7cQ\\+3zA\\=\\=,.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=>.ZuKAot8IvK4eAXR7cQ\\+3zA\\=\\=+.dmo6hDMuxzHaXdzCjK\\+Pqg\\=\\=,.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=>.dmo6hDMuxzHaXdzCjK\\+Pqg\\=\\=+.rxb-u7L8A-K7OqGYZW3mEg\\=\\=,.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=>.dmo6hDMuxzHaXdzCjK\\+Pqg\\=\\=+.ZuKAot8IvK4eAXR7cQ\\+3zA\\=\\=,.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=>.dmo6hDMuxzHaXdzCjK\\+Pqg\\=\\=+.dmo6hDMuxzHaXdzCjK\\+Pqg\\=\\={margin-left:-1px}.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=>.rxb-u7L8A-K7OqGYZW3mEg\\=\\=:focus,.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=>.ZuKAot8IvK4eAXR7cQ\\+3zA\\=\\=:focus,.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=>.dmo6hDMuxzHaXdzCjK\\+Pqg\\=\\= .H5LpTHh6\\+g956FJIUi4mPA\\=\\=:focus~.GhoPRWJkNpP3HCEW5ayyjA\\=\\={z-index:3}.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=>.dmo6hDMuxzHaXdzCjK\\+Pqg\\=\\= .H5LpTHh6\\+g956FJIUi4mPA\\=\\=:focus{z-index:4}.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=>.rxb-u7L8A-K7OqGYZW3mEg\\=\\=:not(:first-child),.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=>.ZuKAot8IvK4eAXR7cQ\\+3zA\\=\\=:not(:first-child){border-top-left-radius:0;border-bottom-left-radius:0}.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=>.dmo6hDMuxzHaXdzCjK\\+Pqg\\=\\={display:flex;align-items:center}.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=>.dmo6hDMuxzHaXdzCjK\\+Pqg\\=\\=:not(:last-child) .GhoPRWJkNpP3HCEW5ayyjA\\=\\=,.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=>.dmo6hDMuxzHaXdzCjK\\+Pqg\\=\\=:not(:last-child) .GhoPRWJkNpP3HCEW5ayyjA\\=\\=::after{border-top-right-radius:0;border-bottom-right-radius:0}.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=>.dmo6hDMuxzHaXdzCjK\\+Pqg\\=\\=:not(:first-child) .GhoPRWJkNpP3HCEW5ayyjA\\=\\={border-top-left-radius:0;border-bottom-left-radius:0}.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=:not(.gw-mW16UpBopunX8JWVJfA\\=\\=)>.rxb-u7L8A-K7OqGYZW3mEg\\=\\=:not(:last-child),.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=:not(.gw-mW16UpBopunX8JWVJfA\\=\\=)>.ZuKAot8IvK4eAXR7cQ\\+3zA\\=\\=:not(:last-child),.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=:not(.gw-mW16UpBopunX8JWVJfA\\=\\=)>.dmo6hDMuxzHaXdzCjK\\+Pqg\\=\\=:not(:last-child) .GhoPRWJkNpP3HCEW5ayyjA\\=\\=,.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=:not(.gw-mW16UpBopunX8JWVJfA\\=\\=)>.dmo6hDMuxzHaXdzCjK\\+Pqg\\=\\=:not(:last-child) .GhoPRWJkNpP3HCEW5ayyjA\\=\\=::after{border-top-right-radius:0;border-bottom-right-radius:0}.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=.gw-mW16UpBopunX8JWVJfA\\=\\=>.rxb-u7L8A-K7OqGYZW3mEg\\=\\=:nth-last-child(n+3),.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=.gw-mW16UpBopunX8JWVJfA\\=\\=>.ZuKAot8IvK4eAXR7cQ\\+3zA\\=\\=:nth-last-child(n+3),.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=.gw-mW16UpBopunX8JWVJfA\\=\\=>.dmo6hDMuxzHaXdzCjK\\+Pqg\\=\\=:nth-last-child(n+3) .GhoPRWJkNpP3HCEW5ayyjA\\=\\=,.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=.gw-mW16UpBopunX8JWVJfA\\=\\=>.dmo6hDMuxzHaXdzCjK\\+Pqg\\=\\=:nth-last-child(n+3) .GhoPRWJkNpP3HCEW5ayyjA\\=\\=::after{border-top-right-radius:0;border-bottom-right-radius:0}.kYr-KvAjw\\+7gonh4ikkDTQ\\=\\=,.Bkfnry-3z7YRjVHIVe8UKw\\=\\={display:flex}.kYr-KvAjw\\+7gonh4ikkDTQ\\=\\= ._7DhMpfk4OxfouraFzxZobA\\=\\=,.Bkfnry-3z7YRjVHIVe8UKw\\=\\= ._7DhMpfk4OxfouraFzxZobA\\=\\={position:relative;z-index:2}.kYr-KvAjw\\+7gonh4ikkDTQ\\=\\= ._7DhMpfk4OxfouraFzxZobA\\=\\=:focus,.Bkfnry-3z7YRjVHIVe8UKw\\=\\= ._7DhMpfk4OxfouraFzxZobA\\=\\=:focus{z-index:3}.kYr-KvAjw\\+7gonh4ikkDTQ\\=\\= ._7DhMpfk4OxfouraFzxZobA\\=\\=+._7DhMpfk4OxfouraFzxZobA\\=\\=,.kYr-KvAjw\\+7gonh4ikkDTQ\\=\\= ._7DhMpfk4OxfouraFzxZobA\\=\\=+.BN3hSiKNUdNLiOqTdEiApg\\=\\=,.kYr-KvAjw\\+7gonh4ikkDTQ\\=\\= .BN3hSiKNUdNLiOqTdEiApg\\=\\=+.BN3hSiKNUdNLiOqTdEiApg\\=\\=,.kYr-KvAjw\\+7gonh4ikkDTQ\\=\\= .BN3hSiKNUdNLiOqTdEiApg\\=\\=+._7DhMpfk4OxfouraFzxZobA\\=\\=,.Bkfnry-3z7YRjVHIVe8UKw\\=\\= ._7DhMpfk4OxfouraFzxZobA\\=\\=+._7DhMpfk4OxfouraFzxZobA\\=\\=,.Bkfnry-3z7YRjVHIVe8UKw\\=\\= ._7DhMpfk4OxfouraFzxZobA\\=\\=+.BN3hSiKNUdNLiOqTdEiApg\\=\\=,.Bkfnry-3z7YRjVHIVe8UKw\\=\\= .BN3hSiKNUdNLiOqTdEiApg\\=\\=+.BN3hSiKNUdNLiOqTdEiApg\\=\\=,.Bkfnry-3z7YRjVHIVe8UKw\\=\\= .BN3hSiKNUdNLiOqTdEiApg\\=\\=+._7DhMpfk4OxfouraFzxZobA\\=\\={margin-left:-1px}.kYr-KvAjw\\+7gonh4ikkDTQ\\=\\={margin-right:-1px}.Bkfnry-3z7YRjVHIVe8UKw\\=\\={margin-left:-1px}.BN3hSiKNUdNLiOqTdEiApg\\=\\={display:flex;align-items:center;padding:.375rem .75rem;margin-bottom:0;font-size:1rem;font-weight:400;line-height:1.5;color:#495057;text-align:center;white-space:nowrap;background-color:#e9ecef;border:1px solid #ced4da;border-radius:.25rem}.BN3hSiKNUdNLiOqTdEiApg\\=\\= input[type=radio],.BN3hSiKNUdNLiOqTdEiApg\\=\\= input[type=checkbox]{margin-top:0}.nW1Y7vcxx1R4tfBEEVtNUw\\=\\=>.rxb-u7L8A-K7OqGYZW3mEg\\=\\=:not(textarea),.nW1Y7vcxx1R4tfBEEVtNUw\\=\\=>.ZuKAot8IvK4eAXR7cQ\\+3zA\\=\\={height:calc(1.5em + 1rem + 2px)}.nW1Y7vcxx1R4tfBEEVtNUw\\=\\=>.rxb-u7L8A-K7OqGYZW3mEg\\=\\=,.nW1Y7vcxx1R4tfBEEVtNUw\\=\\=>.ZuKAot8IvK4eAXR7cQ\\+3zA\\=\\=,.nW1Y7vcxx1R4tfBEEVtNUw\\=\\=>.kYr-KvAjw\\+7gonh4ikkDTQ\\=\\=>.BN3hSiKNUdNLiOqTdEiApg\\=\\=,.nW1Y7vcxx1R4tfBEEVtNUw\\=\\=>.Bkfnry-3z7YRjVHIVe8UKw\\=\\=>.BN3hSiKNUdNLiOqTdEiApg\\=\\=,.nW1Y7vcxx1R4tfBEEVtNUw\\=\\=>.kYr-KvAjw\\+7gonh4ikkDTQ\\=\\=>._7DhMpfk4OxfouraFzxZobA\\=\\=,.nW1Y7vcxx1R4tfBEEVtNUw\\=\\=>.Bkfnry-3z7YRjVHIVe8UKw\\=\\=>._7DhMpfk4OxfouraFzxZobA\\=\\={padding:.5rem 1rem;font-size:1.25rem;line-height:1.5;border-radius:.3rem}._6y5KNXyyb3fvJ8qevfnNhQ\\=\\=>.rxb-u7L8A-K7OqGYZW3mEg\\=\\=:not(textarea),._6y5KNXyyb3fvJ8qevfnNhQ\\=\\=>.ZuKAot8IvK4eAXR7cQ\\+3zA\\=\\={height:calc(1.5em + 0.5rem + 2px)}._6y5KNXyyb3fvJ8qevfnNhQ\\=\\=>.rxb-u7L8A-K7OqGYZW3mEg\\=\\=,._6y5KNXyyb3fvJ8qevfnNhQ\\=\\=>.ZuKAot8IvK4eAXR7cQ\\+3zA\\=\\=,._6y5KNXyyb3fvJ8qevfnNhQ\\=\\=>.kYr-KvAjw\\+7gonh4ikkDTQ\\=\\=>.BN3hSiKNUdNLiOqTdEiApg\\=\\=,._6y5KNXyyb3fvJ8qevfnNhQ\\=\\=>.Bkfnry-3z7YRjVHIVe8UKw\\=\\=>.BN3hSiKNUdNLiOqTdEiApg\\=\\=,._6y5KNXyyb3fvJ8qevfnNhQ\\=\\=>.kYr-KvAjw\\+7gonh4ikkDTQ\\=\\=>._7DhMpfk4OxfouraFzxZobA\\=\\=,._6y5KNXyyb3fvJ8qevfnNhQ\\=\\=>.Bkfnry-3z7YRjVHIVe8UKw\\=\\=>._7DhMpfk4OxfouraFzxZobA\\=\\={padding:.25rem .5rem;font-size:0.875rem;line-height:1.5;border-radius:.2rem}.nW1Y7vcxx1R4tfBEEVtNUw\\=\\=>.ZuKAot8IvK4eAXR7cQ\\+3zA\\=\\=,._6y5KNXyyb3fvJ8qevfnNhQ\\=\\=>.ZuKAot8IvK4eAXR7cQ\\+3zA\\=\\={padding-right:1.75rem}.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=>.kYr-KvAjw\\+7gonh4ikkDTQ\\=\\=>._7DhMpfk4OxfouraFzxZobA\\=\\=,.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=>.kYr-KvAjw\\+7gonh4ikkDTQ\\=\\=>.BN3hSiKNUdNLiOqTdEiApg\\=\\=,.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=:not(.gw-mW16UpBopunX8JWVJfA\\=\\=)>.Bkfnry-3z7YRjVHIVe8UKw\\=\\=:not(:last-child)>._7DhMpfk4OxfouraFzxZobA\\=\\=,.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=:not(.gw-mW16UpBopunX8JWVJfA\\=\\=)>.Bkfnry-3z7YRjVHIVe8UKw\\=\\=:not(:last-child)>.BN3hSiKNUdNLiOqTdEiApg\\=\\=,.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=.gw-mW16UpBopunX8JWVJfA\\=\\=>.Bkfnry-3z7YRjVHIVe8UKw\\=\\=:nth-last-child(n+3)>._7DhMpfk4OxfouraFzxZobA\\=\\=,.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=.gw-mW16UpBopunX8JWVJfA\\=\\=>.Bkfnry-3z7YRjVHIVe8UKw\\=\\=:nth-last-child(n+3)>.BN3hSiKNUdNLiOqTdEiApg\\=\\=,.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=>.Bkfnry-3z7YRjVHIVe8UKw\\=\\=:last-child>._7DhMpfk4OxfouraFzxZobA\\=\\=:not(:last-child):not(.qNFyvqcuyPtURI6K5WGoLw\\=\\=),.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=>.Bkfnry-3z7YRjVHIVe8UKw\\=\\=:last-child>.BN3hSiKNUdNLiOqTdEiApg\\=\\=:not(:last-child){border-top-right-radius:0;border-bottom-right-radius:0}.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=>.Bkfnry-3z7YRjVHIVe8UKw\\=\\=>._7DhMpfk4OxfouraFzxZobA\\=\\=,.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=>.Bkfnry-3z7YRjVHIVe8UKw\\=\\=>.BN3hSiKNUdNLiOqTdEiApg\\=\\=,.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=>.kYr-KvAjw\\+7gonh4ikkDTQ\\=\\=:not(:first-child)>._7DhMpfk4OxfouraFzxZobA\\=\\=,.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=>.kYr-KvAjw\\+7gonh4ikkDTQ\\=\\=:not(:first-child)>.BN3hSiKNUdNLiOqTdEiApg\\=\\=,.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=>.kYr-KvAjw\\+7gonh4ikkDTQ\\=\\=:first-child>._7DhMpfk4OxfouraFzxZobA\\=\\=:not(:first-child),.XOv3kMqDSkg3Y\\+97ivNVxA\\=\\=>.kYr-KvAjw\\+7gonh4ikkDTQ\\=\\=:first-child>.BN3hSiKNUdNLiOqTdEiApg\\=\\=:not(:first-child){border-top-left-radius:0;border-bottom-left-radius:0}.yuj2uLs234H7Xz2K-P2TbA\\=\\={font-family:SFMono-Regular,Menlo,Monaco,Consolas,\"Liberation Mono\",\"Courier New\",monospace !important}.L7d7M850X3xmUNgyceHeJw\\=\\={text-align:justify !important}.PZSho4c4AKJI2rtC2IVj6w\\=\\={white-space:normal !important}.Jxn-0a3xL-9z7NUrjJXWcw\\=\\={white-space:nowrap !important}.Om-3pLcwRfYcXmuOSsMGtg\\=\\={overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.GpWt5UXD\\+IsVQ6UAiv4GXw\\=\\={text-align:left !important}.bk31fiJMnWC8ljHXfOg8uw\\=\\={text-align:right !important}._7aPdUS7Hp-TNDkl4teRH3A\\=\\={text-align:center !important}@media(min-width: 576px){.DYcH-Hr\\+av7fw5dNBeug6g\\=\\={text-align:left !important}.VhEr\\+3hopXIjjd2\\+p2u9ew\\=\\={text-align:right !important}.aay8\\+my4Qeao1AnGsDcTNQ\\=\\={text-align:center !important}}@media(min-width: 768px){.K51lUdrnXqdzsGhV6ISyMQ\\=\\={text-align:left !important}.YrUAQlZaSa7xmX2M3Mo0vA\\=\\={text-align:right !important}.G8RImYg8AgxW9bPx0mherQ\\=\\={text-align:center !important}}@media(min-width: 992px){._6xXDYvZp37J61XGBJrL4cA\\=\\={text-align:left !important}.Nj1BKIJRoQHZt1NE9ir2rg\\=\\={text-align:right !important}.dlwGFduUtEKf38Q0Sr6xhA\\=\\={text-align:center !important}}@media(min-width: 1200px){.KyApiAwpBv5eWHexM8reKQ\\=\\={text-align:left !important}.sdx\\+7vZ4csj4qmyPvRxlmA\\=\\={text-align:right !important}.YLX3CO-BUM0O\\+olzyJDqqQ\\=\\={text-align:center !important}}.vGm0FBnb2vrpMcwseJX1Sg\\=\\={text-transform:lowercase !important}.NH8koI0uB\\+W7oUMz6SDslw\\=\\={text-transform:uppercase !important}._0E6aiCk-AUTrAvijvcTMPQ\\=\\={text-transform:capitalize !important}._5JJWKvTCZBkIgsBJ6xEKHg\\=\\={font-weight:300 !important}.GZPWGjB9PBICJ5MOxhPnPQ\\=\\={font-weight:lighter !important}.FQXQD7M8ilfaEtB4r\\+mEaA\\=\\={font-weight:400 !important}.xA5Bo9d-kKW-aKLdqgZPTg\\=\\={font-weight:700 !important}.D16qkTGc9zvxs2ADjLjhdQ\\=\\={font-weight:bolder !important}.CqvXhEZd7zeQ5S0Zv7lC2w\\=\\={font-style:italic !important}.sESr--F\\+0poK9MmwZWNSRg\\=\\={color:#fff !important}.GNuz2eMKK6Cc\\+G3WQodHxQ\\=\\={color:#007bff !important}a.GNuz2eMKK6Cc\\+G3WQodHxQ\\=\\=:hover,a.GNuz2eMKK6Cc\\+G3WQodHxQ\\=\\=:focus{color:#0056b3 !important}.AZNK6fiRWvuZ\\+wr\\+z6BclQ\\=\\={color:#6c757d !important}a.AZNK6fiRWvuZ\\+wr\\+z6BclQ\\=\\=:hover,a.AZNK6fiRWvuZ\\+wr\\+z6BclQ\\=\\=:focus{color:#494f54 !important}.NDsKA2w\\+x-5gmLmzWexnNA\\=\\={color:#28a745 !important}a.NDsKA2w\\+x-5gmLmzWexnNA\\=\\=:hover,a.NDsKA2w\\+x-5gmLmzWexnNA\\=\\=:focus{color:#19692c !important}.R2tK5v05mMik6eCGYiTVlw\\=\\={color:#17a2b8 !important}a.R2tK5v05mMik6eCGYiTVlw\\=\\=:hover,a.R2tK5v05mMik6eCGYiTVlw\\=\\=:focus{color:#0f6674 !important}.ie0whLQiaM25kaZsHslAtw\\=\\={color:#ffc107 !important}a.ie0whLQiaM25kaZsHslAtw\\=\\=:hover,a.ie0whLQiaM25kaZsHslAtw\\=\\=:focus{color:#ba8b00 !important}.bX7UUq1o0-hYYUFRRKmuOQ\\=\\={color:#dc3545 !important}a.bX7UUq1o0-hYYUFRRKmuOQ\\=\\=:hover,a.bX7UUq1o0-hYYUFRRKmuOQ\\=\\=:focus{color:#a71d2a !important}.CyL9WzEIAfkagwiOM1IlUQ\\=\\={color:#f8f9fa !important}a.CyL9WzEIAfkagwiOM1IlUQ\\=\\=:hover,a.CyL9WzEIAfkagwiOM1IlUQ\\=\\=:focus{color:#cbd3da !important}.PLKo7Ilf3zacq0VBzB-Jxw\\=\\={color:#343a40 !important}a.PLKo7Ilf3zacq0VBzB-Jxw\\=\\=:hover,a.PLKo7Ilf3zacq0VBzB-Jxw\\=\\=:focus{color:#121416 !important}.ui7xy1Y2hEZvWSBKUIlU-Q\\=\\={color:#212529 !important}.aJI844EjQ8v31GqRrq-7tA\\=\\={color:#6c757d !important}.GNj55Y0RFs3SfvcjNYoM4w\\=\\={color:rgba(0,0,0,.5) !important}.vYVLqZRAa2cmQQXGo8SkvQ\\=\\={color:rgba(255,255,255,.5) !important}._1iLFqmUJ2s3bBbPxXesZ2Q\\=\\={font:0/0 a;color:rgba(0,0,0,0);text-shadow:none;background-color:rgba(0,0,0,0);border:0}.bQe-KiqF9GA7e4yc3pQSkw\\=\\={text-decoration:none !important}.eei0tK\\+VG2L4NMWIE\\+LhKg\\=\\={word-break:break-word !important;word-wrap:break-word !important}.uUZyBviaNlCvBh3i2RHZlA\\=\\={color:inherit !important}",""]),i.locals={container:"zH0ATq9xk8Ocy59iwuNB1A==","container-fluid":"BK8ZunOOj2-Ddam9ICxbng==","container-xl":"q4ilOBYFey-xHSP4K0REWA==","container-lg":"mUfr9TUnz8yJe41RIRlttQ==","container-md":"ke3k75UR4dBgTMb6giE66Q==","container-sm":"uyeG4-dQxFimMxWq+Fit2w==",row:"mU-9cBIi0-EXo5ESixuFEg==","no-gutters":"EfJF4aZ6QSdtizcGN1NtUQ==",col:"ZipjHnzKjAMLD7S4P-AIeA==","col-xl":"U9pRm4BQiJBKv9MF4kAOKg==","col-xl-auto":"ADYG+5p47kIEEH+yaXfy+g==","col-xl-12":"Db7w4RNONNwOnXowhIc8ng==","col-xl-11":"KJqaUhm8U0JsiYrD0Dxblw==","col-xl-10":"_7mb0qz1gMBy5z3XE0MeR-A==","col-xl-9":"NtjNTxvO1eYDpJhzFSeJdw==","col-xl-8":"_1Am5jpu2gSLbN3MT90ZpMA==","col-xl-7":"DXWl7vZG6Q1KwkWGUtJJow==","col-xl-6":"ZfbQVYuXDPgq2Cbch0k9UQ==","col-xl-5":"Jse2AIcAqQ-L735eOc6uYw==","col-xl-4":"qOSStLd0Hyd1qwpBfZxanA==","col-xl-3":"_5avH3rVLZIii2JnGlH0m5Q==","col-xl-2":"mNn2fcJWYjkLtm-z6+bUVg==","col-xl-1":"lIzKgcg1REtDI9W1yCgcFw==","col-lg":"jnUU00B2-e9Wk5Nl+60mRQ==","col-lg-auto":"mFyyeCKxpl8rS-wFzA1g3Q==","col-lg-12":"nMyj2gB5dgB1xHYwFVKq4A==","col-lg-11":"HWrIN7KCnt6SMcNMOEF-4A==","col-lg-10":"r6GfaPfTE4kyvZyJwdSBMQ==","col-lg-9":"rCheKtb6rNIH-zaXJpP6ug==","col-lg-8":"_4TecnWoAdQL52Hg5pH6YaA==","col-lg-7":"mOssnXALpF8Hv5w9NvNA3A==","col-lg-6":"Tb3cUMCgwjG7rE1A9qO8NQ==","col-lg-5":"_4bJUxD5N-qoDPvcpKja5rg==","col-lg-4":"aeLEVJFdHekIqk7vG2+LIA==","col-lg-3":"gcFAuaAKhVU+ZBDUs1B8NA==","col-lg-2":"GCfQVWfgvTZkudPSiKZapQ==","col-lg-1":"yL+-V3goVEWF4G56+fVSpw==","col-md":"SAndS2rmgn1LM+xmrxMo3A==","col-md-auto":"_3PoNYmEqLWaXkJqkWZuvpQ==","col-md-12":"SSiAlLFwrQ-y2DsVPMR0+g==","col-md-11":"_0lyCk8Uqg+qv7dLIZnRIWw==","col-md-10":"X61LVxdi46rBO+LqBAhW2w==","col-md-9":"VutkSlfeGDl2CwGQeHEpiQ==","col-md-8":"d2kC-cPROhgE2OS-VS9PWQ==","col-md-7":"GAJHJb613QL1SKCvoX0rsA==","col-md-6":"BvzDSniNJ-7POTt9dEWr7Q==","col-md-5":"sxPnszhNCUxZNdkijnQv0w==","col-md-4":"a++6cr2IATxiR7HKXNyO-Q==","col-md-3":"pC930OZ5M9ghgdsDRkSXpg==","col-md-2":"sLgPvZpzYdERNGMmZDwBzg==","col-md-1":"I1TjO4uXfBOZEQOj7LcH0Q==","col-sm":"_0J2p1-4a4eeXHwfVNDXvyA==","col-sm-auto":"ETgzICBgGqZZFbad3zd1iQ==","col-sm-12":"_04z29a+pKI3n6S-JAvn7vw==","col-sm-11":"PzbxnJWUR8XrC6Xnte7ZYQ==","col-sm-10":"pv2I-4hHHe69Bxg9+0ZZsQ==","col-sm-9":"_9RXcLzg+pZo3Cwrz83yRSw==","col-sm-8":"lPJUQqA3bLFaLX8D3BSPMg==","col-sm-7":"PJi-RjGoDTE3MS3r+VtOoQ==","col-sm-6":"_81Sa1FQ1MemO7HT-Mj3VyQ==","col-sm-5":"SxQkADEuBayutwrCVJP-KQ==","col-sm-4":"fjhYf6QMOHJa0Tl6AEkczA==","col-sm-3":"EYU2Y32cbOUClbxlN10kCg==","col-sm-2":"jAlxb6sBoFTdSfqoBr3HFw==","col-sm-1":"_37Ydx7aBIOywekZNlGZUxw==","col-auto":"uNq-eqcqSUkVVXsPzLt97A==","col-12":"tFr78IcjpHYvtsP2UGZ6-w==","col-11":"iy3Vywm2uTIwh0tDGAvf1w==","col-10":"N+ugCnCSYMF3TpbGoOBERg==","col-9":"JAJ6xO7RZVdaB+2XIVCOxQ==","col-8":"ShEKWNabwH8Jiq0aPAfN8Q==","col-7":"tOFwG0RlEsJUJhNSe-Sblw==","col-6":"WN6ttuUog3lg8jvvQ4cHnw==","col-5":"My8y6StUKr1a4IefPihaIg==","col-4":"LkQvrAMt0HB3hleLf6FujQ==","col-3":"_73LK2iWnPaC1uWqHN6l--Q==","col-2":"_2IzytlEVczYfyYudEqtbLA==","col-1":"pXwA5ZATshjIVHaCFAoC5w==","row-cols-1":"_4jF-pZrYRU6Av-QsmuTIoQ==","row-cols-2":"R72GQKP0n3w9xwNdzveibw==","row-cols-3":"nXnDuLdkdE3JhvyD+yjoAA==","row-cols-4":"RTOc8Zo7QfihVsI1pKkGcw==","row-cols-5":"d0dcZAFUFoUwaLUBiJqTAw==","row-cols-6":"kBZdc341EMhrLP6KTcr0wg==","order-first":"WKuFcyCXuPYICOGEhhMwLQ==","order-last":"N-RzRr40jscXtETJP8KuJw==","order-0":"TSm0mNR8CEFobhinPZKclw==","order-1":"FUsxhXGjb10TSa3Q1OeIEA==","order-2":"CcnXiq3YdJ5Mc8tmYXDKjQ==","order-3":"VvTHV9Sp3WOOrEG+bbBHIg==","order-4":"fGmd9zdgeH9y9bTqgSASYg==","order-5":"KsyNGTvTtJyuS8itLTAWQA==","order-6":"tA3iMlJoORtzTiQUFLUj-Q==","order-7":"oMG0KfzsuOB6kuESdlFOnQ==","order-8":"_4p-DrXY6JwvSB8+yO30oYA==","order-9":"tTXJyFXsikqQBEdLXwXHMg==","order-10":"M75j9GZQVmcTUgT6Tzm9xQ==","order-11":"_58Qd5Zc0U9qFM+zZyERTpg==","order-12":"Ckj4TxOlaor+iIdASsSlVA==","offset-1":"lEqPtcY-25RvziMU2YkUtg==","offset-2":"WiA6vQ+1GQbP9nzPwB-EPg==","offset-3":"PAg1cAhlXQ8D6eJKHhYpSQ==","offset-4":"HW4nEQZ05OWVt1kGJqAJ-g==","offset-5":"Wlhs+rTCYoX51TIHe3bidw==","offset-6":"_6+gTrepIdhGPt6coZ-uwrw==","offset-7":"HBg9tKrTBK9lRdIUZhA5dQ==","offset-8":"CL4TAeMKNzNmBDUywFY1FA==","offset-9":"BTKFSb6Ztdi4dCMUWyU1GA==","offset-10":"czIBE83sUNj0t0nn8RwAMA==","offset-11":"MZ+IxDjTPO4KR76LMblytg==","row-cols-sm-1":"FurzvDUR-yfZR2Z4zpmIyA==","row-cols-sm-2":"lejzo3ztsD9B3TYp6-pvrA==","row-cols-sm-3":"mk4VwKQccIrL8Q8ar+oxlQ==","row-cols-sm-4":"_3VNRmc7hfJjVcGZFUW6drA==","row-cols-sm-5":"SCq4uKZoNIrxa09ICZTlHA==","row-cols-sm-6":"o1aMqSJ6XI9e6oOLaieK2A==","order-sm-first":"LI0wpjZDUZJ7oMqYcDe5xw==","order-sm-last":"ql+O5GiYVdEYYaKVZNJDBA==","order-sm-0":"Uqf4DXjM4gcvwgCUPIxA6Q==","order-sm-1":"MB0jUrmzOfv0uP+UzgdkbQ==","order-sm-2":"tBqR6yZ+QO7fKr+Kxe1j1A==","order-sm-3":"TNZ7zbUt2UIZDe8AXOyoGQ==","order-sm-4":"xw8mj28PS8bKzBrOT93bGg==","order-sm-5":"X2UAoPDs-BPMBH-f3qUyow==","order-sm-6":"nGW1viwjAvrYu9acBLRuOw==","order-sm-7":"EnIre1kxZZGzNik3lxTooA==","order-sm-8":"ckwdSst6vmCf7XKvmYY5MA==","order-sm-9":"umpD8t224q279uPZhAJNBA==","order-sm-10":"vbjIU6e0jNJsVRpxrANGzw==","order-sm-11":"sL0yP3AXUICEIxKqGii1IA==","order-sm-12":"qnB1DngbM-Hd-rDEiN5Bbg==","offset-sm-0":"EeaIgznKZRMJkq6Fg0Kk4A==","offset-sm-1":"ME4b2v7Z-kqJ-32B0PH7qQ==","offset-sm-2":"lNQJI5cLpysYZsVDuqxNiA==","offset-sm-3":"yWCRH+rhQGo0YxPppCieYA==","offset-sm-4":"kMIT3obV6QyoBp84jtm7TA==","offset-sm-5":"vsScYeqJ1-C+Wgs06RaNEA==","offset-sm-6":"zFefln1X4wrPIb0EyWu92A==","offset-sm-7":"_5wz+7bgY0wJh3H1hQozsaw==","offset-sm-8":"-937NutyXcyxhjCZdq161g==","offset-sm-9":"cRoN9Ic6bhJvDdsUkX1-LA==","offset-sm-10":"pjkIJScP4whIlflo9KwtnQ==","offset-sm-11":"EM7l5T7-itZbasUPca48oQ==","row-cols-md-1":"jLYjZI8-mArtFP5HzW5tSw==","row-cols-md-2":"oqmKYRbM5MgIxv7KKNlE6A==","row-cols-md-3":"GD+1sydl+uDcrvDYtRiO-g==","row-cols-md-4":"zbHrHrFJEP+9XR3zy87jiA==","row-cols-md-5":"THAJKoXiPadCIQffoSQ0CA==","row-cols-md-6":"VjxUnsPzh-Y9W9Vl2nEWmA==","order-md-first":"zyF8dGNWtizHs6wxaDa0lw==","order-md-last":"MUdV-NNGrxqJGY9dojwMGA==","order-md-0":"ZhO8FQI8n7DahzSRioaYHQ==","order-md-1":"RiDaqGCgOmhxrLgRmGza1A==","order-md-2":"N5sXAl4p0DdGb84UDPcOLg==","order-md-3":"aYoBbxdjrTjeywDe7Z-j9Q==","order-md-4":"Oiz24HvFwgTic5u62UY1Ng==","order-md-5":"zTSOk8jqXdsKd+URq2KYdg==","order-md-6":"CFm-rRaI1fHd1K3H7Vrw4w==","order-md-7":"cqEO0mSnWB41u6Goz11F-Q==","order-md-8":"_1urxupvb6xqjqETtMWwOvQ==","order-md-9":"qxXEOgoQtVzA2+679geL7Q==","order-md-10":"nvBR59QQIXuAmTMuTnHfMg==","order-md-11":"d22KpQSBrwSOSI52Zu7+Cg==","order-md-12":"_7glQlcqYGSwKk6sFOIBhvg==","offset-md-0":"-0zZhhxyf2z0gn7wMTKxnw==","offset-md-1":"_4gYJIaemAbMABe5AnrwhbA==","offset-md-2":"cv93WXmw4oWc26NOshkGeg==","offset-md-3":"_0y6dwF5qRuZS1wZKagPa6Q==","offset-md-4":"tnayob3+VHiegJLKcVDvTw==","offset-md-5":"tht9wCiMTOaXuRO4d7m0JA==","offset-md-6":"tgsoM1RUfxtag9E7kL5snQ==","offset-md-7":"VULn0vuOgoC1F7mOP+CGmA==","offset-md-8":"EsA8OW5ujDZsPztQj6FPtg==","offset-md-9":"nQC9vUWkrfNCVyj2qOVCkQ==","offset-md-10":"w7bN9NO2UZiqkuqP7M6J8w==","offset-md-11":"_4bxCDyoME4ZoHM77fUGO-A==","row-cols-lg-1":"_6wXj2dZ8v1eEey2fp9boow==","row-cols-lg-2":"_7lbPfmPU0yUL2kQqDer73Q==","row-cols-lg-3":"kdIcM3Qs9GhNVo-lKHz6Ow==","row-cols-lg-4":"zxxD3emDYe-YOQP5ID8I-A==","row-cols-lg-5":"IU8kip4-12hORu5P47EBUg==","row-cols-lg-6":"NULIhDCknUwrL6QwT-RD6Q==","order-lg-first":"MXJ0m-mhbkBaNtZtWy2JuQ==","order-lg-last":"jLnBd10eoFPeZmp1uVsKjw==","order-lg-0":"ekqULi75ViAs+nUXnLlKzA==","order-lg-1":"frH4RdUlpw3C5E0-eBCC6A==","order-lg-2":"fC3JIGKv-rCrMihlBJ2pIQ==","order-lg-3":"AVwvm5XOJmClHPQ+T2GRIw==","order-lg-4":"zNzTgYDRRis8BjwNdKCq8A==","order-lg-5":"IpSRnhqjon0dk5Z+EYJ5XQ==","order-lg-6":"DAwPWuKsniz1dhiKKVpbrg==","order-lg-7":"iQSbThHNdH2Tdn9wXiP+Tg==","order-lg-8":"srZXqZcmQumDLUA6WNruLg==","order-lg-9":"F0o1BdjoJpd+Zqa1QpFJWw==","order-lg-10":"_3isOFHnYRdAK7+04uBB3NA==","order-lg-11":"iPjGEB-lnyQzeSJ3W1cNWg==","order-lg-12":"VMnmhFS2a5bwMEaw0kcIOQ==","offset-lg-0":"xOzLsSID+fZxbcnzliRVCw==","offset-lg-1":"sJCIu3mJ9uv0tj+a0ooLBw==","offset-lg-2":"_9vzEt2RDRJ1BsDIVrrV5+g==","offset-lg-3":"dwN5tW6AJKsHPPj93SSzpA==","offset-lg-4":"js58c7TZ886lHWyNOJS42Q==","offset-lg-5":"R1EW5gv61NZXyTM7Rri6mw==","offset-lg-6":"pCNW1qOEx2K20iT4PI6oww==","offset-lg-7":"Y9zBz8LGYj2dQenR5z+svg==","offset-lg-8":"_895tgbys+843keWZG4wDJg==","offset-lg-9":"hSRItx7Gn3c6jAAJYPv1NQ==","offset-lg-10":"_7Yc8TJHtf7DPKZFJlgFqMw==","offset-lg-11":"lfuiWt3GO05NiZbjJ6sIQg==","row-cols-xl-1":"u4QyHeij+r9piU9qea-G4g==","row-cols-xl-2":"l-pFvz9e7SHKwB2zT9NztA==","row-cols-xl-3":"sEEWRjZuR2O4pKb93mFMBg==","row-cols-xl-4":"+RCPajoCDt8j9Hsp13RMkg==","row-cols-xl-5":"+GrLhtYim3pqY2a9m6PIdw==","row-cols-xl-6":"B6bQBuJRtB9P0N1vLcfnLg==","order-xl-first":"YwWqx3jNUeTiCy6ab1NvwQ==","order-xl-last":"pADA0Zr-7yvueKNn8hNSUg==","order-xl-0":"MGTsNCvcCF7a5bntzZ-dFg==","order-xl-1":"imRpazHdrADOA4JO4+1hfQ==","order-xl-2":"MhWYoHzuOsN8oMfHZvlNKQ==","order-xl-3":"yuKbQ2BqW4+2ngt8Q3MNSA==","order-xl-4":"Z1Cs3h19uaOxne6ZhkT1mg==","order-xl-5":"_4l1OZXmmOjYt43ZMhIVXrg==","order-xl-6":"_0j2Qa3MZEDnGc9d8ACwQlw==","order-xl-7":"QTp7gdQhj+ZPtkZfCkYPGQ==","order-xl-8":"KqbdWIRkmyRLoeqp6g4zBw==","order-xl-9":"WA+x7GU7FgtM7Lb6RbkCBw==","order-xl-10":"H96AFgnR3+750AlDEhvACQ==","order-xl-11":"VMJYIpjlQIRxILOyCwjRlw==","order-xl-12":"THCBM5DJ0MGEuKjhUwgpRA==","offset-xl-0":"RElUj6kBIA3KUbeP-Ey7jg==","offset-xl-1":"m0vkzLSuYKPoNqhazIJGtA==","offset-xl-2":"jHQ9y5Wyqmu+7d2lebgLEA==","offset-xl-3":"HCSI03+-In5d0I5ASg4MPg==","offset-xl-4":"+pLIehF4BhymLPMD3DEv5Q==","offset-xl-5":"JBEZ-AVXBGmxAkROkg-HpA==","offset-xl-6":"tU1kY5iHxgC5X9KOD6DCnw==","offset-xl-7":"I7tPhu6MopGW0TMNeJSQXA==","offset-xl-8":"+80lB3s5RxYsPY+-F8Zvaw==","offset-xl-9":"_2yxroUmDuUWS6bqhFE6E4g==","offset-xl-10":"_2N2FYyk09ksCkW70LYcgcg==","offset-xl-11":"Oswg-phWUCLywjKIi66TNA==","form-control":"rxb-u7L8A-K7OqGYZW3mEg==","form-control-file":"ItAE4BISMwOknrbg0zTW6A==","form-control-range":"FQ2oMW0oMyvNjnw28P6SSA==","col-form-label":"L44tdlGXEblIDOcHaUwOdg==","col-form-label-lg":"_9h55f+rR1p9NXt8AOqDFKg==","col-form-label-sm":"_2U3Vlw7d5ETuC9xdyFRr8w==","form-control-plaintext":"wh-T+fF5UyFigyoA5tghrw==","form-control-sm":"ZRdFRRmmdJsAOwBY+RWMtg==","form-control-lg":"sIVGOcqPE2FeSC9GjjXWRw==","form-group":"+o0szHLHnQSOFsifiUvdJw==","form-text":"_1A9mluCA-srn7qq4AWMtAg==","form-row":"GN9T3HyWyk9cpPD8-6uyDQ==","form-check":"tF3rjXkFRbBtfcpC6cW2sg==","form-check-input":"+wxdJMEiONNcuJirfptaKg==","form-check-label":"HgyDHyHFbSZ00SBAYkBcqw==","form-check-inline":"AotIqR-zGtBkUw8C-V5CYQ==","valid-feedback":"oQ-TB6lObxU2S+fa+BBRrQ==","valid-tooltip":"_0lwTqF-2CN1XZSfX-c66dg==","was-validated":"oT3PsQO1Im41bPXPrim8DQ==","is-valid":"ajliVsAF8sWm2B73BP+iJA==","custom-select":"ZuKAot8IvK4eAXR7cQ+3zA==","custom-control-input":"TTjFeu5yhte+p5CUD9uvcg==","custom-control-label":"b+PoZPET9E6+CPNs+UKGZw==","custom-file-input":"H5LpTHh6+g956FJIUi4mPA==","custom-file-label":"GhoPRWJkNpP3HCEW5ayyjA==","invalid-feedback":"_3L3JuseiUgFLMEJfoT-ZnQ==","invalid-tooltip":"LlnsAlWVkYbU3Fg7FPceeA==","is-invalid":"hNeMhnkgc117eUaEbh4zoA==","form-inline":"f5++B2i9PaJzqmEeNPVf0Q==","input-group":"XOv3kMqDSkg3Y+97ivNVxA==","custom-control":"f2aVZSjfPLXxX0hroVfxsw==",btn:"_7DhMpfk4OxfouraFzxZobA==",focus:"uqv5w+4O2NvycwwYLiZHiA==",disabled:"SnxkU79OvQ6Qoh01xCyRhg==","btn-primary":"tPk7d3Wa5J5-DN5k4W6xUA==",active:"alM3BwVgAI-A6mAZVmsIsA==",show:"InkBQhrykVDp8OlXdbXOTA==","dropdown-toggle":"qNFyvqcuyPtURI6K5WGoLw==","btn-secondary":"v8-NuLXZ7PwaK3vfW-hNcQ==","btn-success":"EPNGsPeCovJGoxMetqFJQQ==","btn-info":"aF+xAcqI1C+9nTUZ6-aedg==","btn-warning":"Zx2kVQEYuquPXRqSIpsEFw==","btn-danger":"Q8F2TgYeYq2mCTJxv85RXA==","btn-light":"yiFLb+WfiFN-0ldzJLypNQ==","btn-dark":"O42tOC04CFqDBZRWGBCOeA==","btn-outline-primary":"q-4DlIgrmjx3kf1py-1abg==","btn-outline-secondary":"_05T6SZ7OWl7vRSOO7xrYiw==","btn-outline-success":"qv1D8bEG4LzZnYjnq2b5ew==","btn-outline-info":"_3k+u5-+dHHCwNNaF+gdr7w==","btn-outline-warning":"KCGFP69cNeODQ0PHCegveA==","btn-outline-danger":"yQ-JWLaAqJss7VCiTW4UGQ==","btn-outline-light":"Js-WmbBYwSirASj7wEuy+g==","btn-outline-dark":"JwHCAjljftUQwvI1i5XAAQ==","btn-link":"uqHE7cPi+zWbQjDQFFuf2A==","btn-lg":"Fajh0V-v4F6Q-PwZe1cZoQ==","btn-sm":"YY6aIAYg8S6JwUbr-E562Q==","btn-block":"FcmMgdBtpHnxrQGHHnSPXg==","custom-file":"dmo6hDMuxzHaXdzCjK+Pqg==","has-validation":"gw-mW16UpBopunX8JWVJfA==","input-group-prepend":"kYr-KvAjw+7gonh4ikkDTQ==","input-group-append":"Bkfnry-3z7YRjVHIVe8UKw==","input-group-text":"BN3hSiKNUdNLiOqTdEiApg==","input-group-lg":"nW1Y7vcxx1R4tfBEEVtNUw==","input-group-sm":"_6y5KNXyyb3fvJ8qevfnNhQ==","text-monospace":"yuj2uLs234H7Xz2K-P2TbA==","text-justify":"L7d7M850X3xmUNgyceHeJw==","text-wrap":"PZSho4c4AKJI2rtC2IVj6w==","text-nowrap":"Jxn-0a3xL-9z7NUrjJXWcw==","text-truncate":"Om-3pLcwRfYcXmuOSsMGtg==","text-left":"GpWt5UXD+IsVQ6UAiv4GXw==","text-right":"bk31fiJMnWC8ljHXfOg8uw==","text-center":"_7aPdUS7Hp-TNDkl4teRH3A==","text-sm-left":"DYcH-Hr+av7fw5dNBeug6g==","text-sm-right":"VhEr+3hopXIjjd2+p2u9ew==","text-sm-center":"aay8+my4Qeao1AnGsDcTNQ==","text-md-left":"K51lUdrnXqdzsGhV6ISyMQ==","text-md-right":"YrUAQlZaSa7xmX2M3Mo0vA==","text-md-center":"G8RImYg8AgxW9bPx0mherQ==","text-lg-left":"_6xXDYvZp37J61XGBJrL4cA==","text-lg-right":"Nj1BKIJRoQHZt1NE9ir2rg==","text-lg-center":"dlwGFduUtEKf38Q0Sr6xhA==","text-xl-left":"KyApiAwpBv5eWHexM8reKQ==","text-xl-right":"sdx+7vZ4csj4qmyPvRxlmA==","text-xl-center":"YLX3CO-BUM0O+olzyJDqqQ==","text-lowercase":"vGm0FBnb2vrpMcwseJX1Sg==","text-uppercase":"NH8koI0uB+W7oUMz6SDslw==","text-capitalize":"_0E6aiCk-AUTrAvijvcTMPQ==","font-weight-light":"_5JJWKvTCZBkIgsBJ6xEKHg==","font-weight-lighter":"GZPWGjB9PBICJ5MOxhPnPQ==","font-weight-normal":"FQXQD7M8ilfaEtB4r+mEaA==","font-weight-bold":"xA5Bo9d-kKW-aKLdqgZPTg==","font-weight-bolder":"D16qkTGc9zvxs2ADjLjhdQ==","font-italic":"CqvXhEZd7zeQ5S0Zv7lC2w==","text-white":"sESr--F+0poK9MmwZWNSRg==","text-primary":"GNuz2eMKK6Cc+G3WQodHxQ==","text-secondary":"AZNK6fiRWvuZ+wr+z6BclQ==","text-success":"NDsKA2w+x-5gmLmzWexnNA==","text-info":"R2tK5v05mMik6eCGYiTVlw==","text-warning":"ie0whLQiaM25kaZsHslAtw==","text-danger":"bX7UUq1o0-hYYUFRRKmuOQ==","text-light":"CyL9WzEIAfkagwiOM1IlUQ==","text-dark":"PLKo7Ilf3zacq0VBzB-Jxw==","text-body":"ui7xy1Y2hEZvWSBKUIlU-Q==","text-muted":"aJI844EjQ8v31GqRrq-7tA==","text-black-50":"GNj55Y0RFs3SfvcjNYoM4w==","text-white-50":"vYVLqZRAa2cmQQXGo8SkvQ==","text-hide":"_1iLFqmUJ2s3bBbPxXesZ2Q==","text-decoration-none":"bQe-KiqF9GA7e4yc3pQSkw==","text-break":"eei0tK+VG2L4NMWIE+LhKg==","text-reset":"uUZyBviaNlCvBh3i2RHZlA=="};var a=i},609:function(e){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=e(t);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,r){"string"==typeof e&&(e=[[null,e,""]]);var i={};if(r)for(var a=0;a<this.length;a++){var o=this[a][0];null!=o&&(i[o]=!0)}for(var s=0;s<e.length;s++){var u=[].concat(e[s]);r&&i[u[0]]||(n&&(u[2]?u[2]="".concat(n," and ").concat(u[2]):u[2]=n),t.push(u))}},t}},62:function(e,t,n){"use strict";var r,i=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),a=[];function o(e){for(var t=-1,n=0;n<a.length;n++)if(a[n].identifier===e){t=n;break}return t}function s(e,t){for(var n={},r=[],i=0;i<e.length;i++){var s=e[i],u=t.base?s[0]+t.base:s[0],c=n[u]||0,l="".concat(u," ").concat(c);n[u]=c+1;var f=o(l),h={css:s[1],media:s[2],sourceMap:s[3]};-1!==f?(a[f].references++,a[f].updater(h)):a.push({identifier:l,updater:v(h,t),references:1}),r.push(l)}return r}function u(e){var t=document.createElement("style"),r=e.attributes||{};if(void 0===r.nonce){var a=n.nc;a&&(r.nonce=a)}if(Object.keys(r).forEach((function(e){t.setAttribute(e,r[e])})),"function"==typeof e.insert)e.insert(t);else{var o=i(e.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}return t}var c,l=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")});function f(e,t,n,r){var i=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(e.styleSheet)e.styleSheet.cssText=l(t,i);else{var a=document.createTextNode(i),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(a,o[t]):e.appendChild(a)}}function h(e,t,n){var r=n.css,i=n.media,a=n.sourceMap;if(i?e.setAttribute("media",i):e.removeAttribute("media"),a&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var d=null,p=0;function v(e,t){var n,r,i;if(t.singleton){var a=p++;n=d||(d=u(t)),r=f.bind(null,n,a,!1),i=f.bind(null,n,a,!0)}else n=u(t),r=h.bind(null,n,t),i=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r));var n=s(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var r=0;r<n.length;r++){var i=o(n[r]);a[i].references--}for(var u=s(e,t),c=0;c<n.length;c++){var l=o(n[c]);0===a[l].references&&(a[l].updater(),a.splice(l,1))}n=u}}}},156:function(e){"use strict";e.exports=r},128:function(e){"use strict";e.exports=i}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={id:r,exports:{}};return e[r](a,a.exports,n),a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(r){if("object"==typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nc=void 0;var x={};return function(){"use strict";var e,t;n.r(x),n.d(x,{AuthContext:function(){return rx},AuthFlow:function(){return Ex},AuthProvider:function(){return dx},PrivateRoute:function(){return Cx},StaffRoute:function(){return Dx}});var r={};function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function E(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){_(a,r,i,o,s,"next",e)}function s(e){_(a,r,i,o,s,"throw",e)}o(void 0)}))}}n.r(r),n.d(r,{FirebaseError:function(){return B},SDK_VERSION:function(){return Ke},_DEFAULT_ENTRY_NAME:function(){return Pe},_addComponent:function(){return Me},_addOrOverwriteComponent:function(){return Fe},_apps:function(){return Re},_clearComponents:function(){return je},_components:function(){return Le},_getProvider:function(){return Ve},_registerComponent:function(){return Ue},_removeServiceInstance:function(){return qe},deleteApp:function(){return He},getApp:function(){return We},getApps:function(){return Ge},initializeApp:function(){return Qe},onLog:function(){return Xe},registerVersion:function(){return Je},setLogLevel:function(){return Ze}});var A=n(162),T=n.n(A),S=n(156),O=n.n(S),C=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},N={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,s=o?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=a>>2,f=(3&a)<<4|s>>4,h=(15&s)<<2|c>>6,d=63&c;u||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(C(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var s=e[n++],u=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&u)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==s||null==u)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==s){var l=o<<4&240|s>>2;if(r.push(l),64!==u){var f=s<<6&192|u;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},P=function(e){return function(e){var t=C(e);return N.encodeByteArray(t,!0)}(e).replace(/\./g,"")};function D(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=D(e[n],t[n]));return e}var R=function(){function e(){var t=this;k(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return w(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"==typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function L(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function M(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(L())}function F(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function U(){var e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function V(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function q(){var e=L();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function j(){return"object"==typeof indexedDB}var B=function(e){y(n,e);var t=g(n);function n(e,r,i){var a;return k(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(m(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(m(a),z.prototype.create),a}return w(n)}(b(Error)),z=function(){function e(t,n,r){k(this,e),this.service=t,this.serviceName=n,this.errors=r}return w(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(K,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new B(n,a,t)}}]),e}(),K=/\{\$([^}]+)}/g;function Q(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function W(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var s=e[o],u=t[o];if(G(s)&&G(u)){if(!W(s,u))return!1}else if(s!==u)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function G(e){return null!==e&&"object"==typeof e}function H(e){for(var t=[],n=function(){var e=v(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function Y(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=e.split("="),r=v(n,2),i=r[0],a=r[1];t[decodeURIComponent(i)]=decodeURIComponent(a)}})),t}function J(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function X(e,t){var n=new Z(e,t);return n.subscribe.bind(n)}var Z=function(){function e(t,n){var r=this;k(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return w(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in e&&"function"==typeof e[i])return!0}return!1}(e)?e:{next:e,error:t,complete:n}).next&&(r.next=$),void 0===r.error&&(r.error=$),void 0===r.complete&&(r.complete=$);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function $(){}function ee(e){return e&&e._delegate?e._delegate:e}var te,ne=function(){function e(t,n,r){k(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return w(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),re="[DEFAULT]",ie=function(){function e(t,n){k(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return w(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new R;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(e){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(e){if(r)return null;throw e}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:re})}catch(e){}var t,n=p(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=v(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var s=this.getOrInitializeService({instanceIdentifier:o});a.resolve(s)}catch(e){}}}catch(u){n.e(u)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"[DEFAULT]";this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=d(f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(h(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),h(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"[DEFAULT]";return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"[DEFAULT]";return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=p(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var s=v(i.value,2),u=s[0],c=s[1];r===this.normalizeInstanceIdentifier(u)&&c.resolve(a)}}catch(l){o.e(l)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=p(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(e){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===re?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(n){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"[DEFAULT]";return this.component?this.component.multipleInstances?e:re:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}(),ae=function(){function e(t){k(this,e),this.name=t,this.providers=new Map}return w(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new ie(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),oe=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(te||(te={}));var se,ue,ce={debug:te.DEBUG,verbose:te.VERBOSE,info:te.INFO,warn:te.WARN,error:te.ERROR,silent:te.SILENT},le=te.INFO,fe=(l(e={},te.DEBUG,"log"),l(e,te.VERBOSE,"log"),l(e,te.INFO,"info"),l(e,te.WARN,"warn"),l(e,te.ERROR,"error"),e),he=function(e,t){var n;if(!(t<e.logLevel)){var r=(new Date).toISOString(),i=fe[t];if(!i)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var a=arguments.length,o=new Array(a>2?a-2:0),s=2;s<a;s++)o[s-2]=arguments[s];(n=console)[i].apply(n,["[".concat(r,"]  ").concat(e.name,":")].concat(o))}},de=function(){function e(t){k(this,e),this.name=t,this._logLevel=le,this._logHandler=he,this._userLogHandler=null,oe.push(this)}return w(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in te))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"==typeof e?ce[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,te.DEBUG].concat(t)),this._logHandler.apply(this,[this,te.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,te.VERBOSE].concat(t)),this._logHandler.apply(this,[this,te.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,te.INFO].concat(t)),this._logHandler.apply(this,[this,te.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,te.WARN].concat(t)),this._logHandler.apply(this,[this,te.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,te.ERROR].concat(t)),this._logHandler.apply(this,[this,te.ERROR].concat(t))}}]),e}(),pe=new WeakMap,ve=new WeakMap,me=new WeakMap,ye=new WeakMap,ge=new WeakMap,be={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return ve.get(e);if("objectStoreNames"===t)return e.objectStoreNames||me.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return we(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function ke(e){return"function"==typeof e?(t=e)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(ue||(ue=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.apply(Ie(this),n),we(pe.get(this))}:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return we(t.apply(Ie(this),n))}:function(e){for(var n,r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];var o=(n=t).call.apply(n,[Ie(this),e].concat(i));return me.set(o,e.sort?e.sort():[e]),we(o)}:(e instanceof IDBTransaction&&function(e){if(!ve.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));ve.set(e,t)}}(e),n=e,(se||(se=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((function(e){return n instanceof e}))?new Proxy(e,be):e);var t,n}function we(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(we(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&pe.set(t,e)})).catch((function(){})),ge.set(t,e),t}(e);if(ye.has(e))return ye.get(e);var t=ke(e);return t!==e&&(ye.set(e,t),ge.set(t,e)),t}var xe,Ie=function(e){return ge.get(e)},_e=["get","getKey","getAll","getAllKeys","count"],Ee=["put","add","delete","clear"],Ae=new Map;function Te(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"==typeof t){if(Ae.get(t))return Ae.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=Ee.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||_e.includes(n))){var a=function(){var e=d(f().mark((function e(t){var a,o,s,u,c,l,h=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),s=o.store,u=h.length,c=new Array(u>1?u-1:0),l=1;l<u;l++)c[l-1]=h[l];return r&&(s=s.index(c.shift())),e.next=6,Promise.all([(a=s)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return Ae.set(t,a),a}}}be=c(c({},xe=be),{},{get:function(e,t,n){return Te(e,t)||xe.get(e,t,n)},has:function(e,t){return!!Te(e,t)||xe.has(e,t)}});var Se=function(){function e(t){k(this,e),this.container=t}return w(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}(),Oe="@firebase/app",Ce="0.7.25",Ne=new de("@firebase/app"),Pe="[DEFAULT]",De=(l(t={},Oe,"fire-core"),l(t,"@firebase/app-compat","fire-core-compat"),l(t,"@firebase/analytics","fire-analytics"),l(t,"@firebase/analytics-compat","fire-analytics-compat"),l(t,"@firebase/app-check","fire-app-check"),l(t,"@firebase/app-check-compat","fire-app-check-compat"),l(t,"@firebase/auth","fire-auth"),l(t,"@firebase/auth-compat","fire-auth-compat"),l(t,"@firebase/database","fire-rtdb"),l(t,"@firebase/database-compat","fire-rtdb-compat"),l(t,"@firebase/functions","fire-fn"),l(t,"@firebase/functions-compat","fire-fn-compat"),l(t,"@firebase/installations","fire-iid"),l(t,"@firebase/installations-compat","fire-iid-compat"),l(t,"@firebase/messaging","fire-fcm"),l(t,"@firebase/messaging-compat","fire-fcm-compat"),l(t,"@firebase/performance","fire-perf"),l(t,"@firebase/performance-compat","fire-perf-compat"),l(t,"@firebase/remote-config","fire-rc"),l(t,"@firebase/remote-config-compat","fire-rc-compat"),l(t,"@firebase/storage","fire-gcs"),l(t,"@firebase/storage-compat","fire-gcs-compat"),l(t,"@firebase/firestore","fire-fst"),l(t,"@firebase/firestore-compat","fire-fst-compat"),l(t,"fire-js","fire-js"),l(t,"firebase","fire-js-all"),t),Re=new Map,Le=new Map;function Me(e,t){try{e.container.addComponent(t)}catch(I){Ne.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),I)}}function Fe(e,t){e.container.addOrOverwriteComponent(t)}function Ue(e){var t=e.name;if(Le.has(t))return Ne.debug("There were multiple attempts to register component ".concat(t,".")),!1;Le.set(t,e);var n,r=p(Re.values());try{for(r.s();!(n=r.n()).done;)Me(n.value,e)}catch(i){r.e(i)}finally{r.f()}return!0}function Ve(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function qe(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Pe;Ve(e,t).clearInstance(n)}function je(){Le.clear()}var Be=new z("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."}),ze=function(){function e(t,n,r){var i=this;k(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ne("app",(function(){return i}),"PUBLIC"))}return w(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Be.create("app-deleted",{appName:this._name})}}]),e}(),Ke="9.8.2";function Qe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"object"!=typeof t&&(t={name:t});var n=Object.assign({name:Pe,automaticDataCollectionEnabled:!1},t),r=n.name;if("string"!=typeof r||!r)throw Be.create("bad-app-name",{appName:String(r)});var i=Re.get(r);if(i){if(W(e,i.options)&&W(n,i.config))return i;throw Be.create("duplicate-app",{appName:r})}var a,o=new ae(r),s=p(Le.values());try{for(s.s();!(a=s.n()).done;){var u=a.value;o.addComponent(u)}}catch(l){s.e(l)}finally{s.f()}var c=new ze(e,n,o);return Re.set(r,c),c}function We(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pe,t=Re.get(e);if(!t)throw Be.create("no-app",{appName:e});return t}function Ge(){return Array.from(Re.values())}function He(e){return Ye.apply(this,arguments)}function Ye(){return Ye=d(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,e.t0=Re.has(n),!e.t0){e.next=7;break}return Re.delete(n),e.next=6,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 6:t.isDeleted=!0;case 7:case"end":return e.stop()}}),e)}))),Ye.apply(this,arguments)}function Je(e,t,n){var r,i=null!==(r=De[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var s=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&s.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&s.push("and"),o&&s.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Ne.warn(s.join(" "))}Ue(new ne("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function Xe(e,t){if(null!==e&&"function"!=typeof e)throw Be.create("invalid-log-argument");!function(e,t){var n,r=p(oe);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=ce[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var s=a.map((function(e){if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(e){return null}})).filter((function(e){return e})).join(" ");n>=(null!=i?i:t.logLevel)&&e({level:te[n].toLowerCase(),message:s,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function Ze(e){var t;t=e,oe.forEach((function(e){e.setLogLevel(t)}))}var $e="firebase-heartbeat-store",et=null;function tt(){return et||(et=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,s=indexedDB.open(e,t),u=we(s);return i&&s.addEventListener("upgradeneeded",(function(e){i(we(s.result),e.oldVersion,e.newVersion,we(s.transaction))})),r&&s.addEventListener("blocked",(function(){return r()})),u.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),u}("firebase-heartbeat-database",1,{upgrade:function(e,t){0===t&&e.createObjectStore($e)}}).catch((function(e){throw Be.create("storage-open",{originalErrorMessage:e.message})}))),et}function nt(e,t){return rt.apply(this,arguments)}function rt(){return rt=d(f().mark((function e(t,n){var r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,tt();case 3:return r=e.sent.transaction($e,"readwrite"),i=r.objectStore($e),e.next=7,i.put(n,it(t));case 7:return e.abrupt("return",r.done);case 10:throw e.prev=10,e.t0=e.catch(0),Be.create("storage-set",{originalErrorMessage:e.t0.message});case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),rt.apply(this,arguments)}function it(e){return"".concat(e.name,"!").concat(e.options.appId)}var at=function(){function e(t){var n=this;k(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new st(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return w(e,[{key:"triggerHeartbeat",value:function(){var e=d(f().mark((function e(){var t,n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=ot(),e.t0=null===this._heartbeatsCache,!e.t0){e.next=6;break}return e.next=5,this._heartbeatsCachePromise;case 5:this._heartbeatsCache=e.sent;case 6:if(this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some((function(e){return e.date===n}))){e.next=8;break}return e.abrupt("return",(this._heartbeatsCache.heartbeats.push({date:n,agent:t}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)));case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getHeartbeatsHeader",value:function(){var e=d(f().mark((function e(){var t,n,r,i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=null===this._heartbeatsCache,!e.t0){e.next=4;break}return e.next=4,this._heartbeatsCachePromise;case 4:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=6;break}return e.abrupt("return","");case 6:if(t=ot(),n=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=p(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),ut(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),ut(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done&&"break"!==o(););}catch(s){a.e(s)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=P(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=14;break}return this._heartbeatsCache.heartbeats=i,e.next=12,this._storage.overwrite(this._heartbeatsCache);case 12:e.next=15;break;case 14:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),e}();function ot(){return(new Date).toISOString().substring(0,10)}var st=function(){function e(t){k(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return w(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!!j()&&new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}})).then((function(){return!0})).catch((function(){return!1})));case 1:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"read",value:function(){var e=d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.t1=e.sent,!e.t1){e.next=7;break}return e.next=6,function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,tt();case 3:return e.abrupt("return",e.sent.transaction($e).objectStore($e).get(it(t)));case 6:throw e.prev=6,e.t0=e.catch(0),Be.create("storage-get",{originalErrorMessage:e.t0.message});case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()(this.app);case 6:e.t1=e.sent;case 7:if(e.t0=e.t1,e.t0){e.next=10;break}e.t0={heartbeats:[]};case 10:return e.abrupt("return",e.t0);case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"overwrite",value:function(){var e=d(f().mark((function e(t){var n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(!e.sent){e.next=7;break}return e.next=5,this.read();case 5:return r=e.sent,e.abrupt("return",nt(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"add",value:function(){var e=d(f().mark((function e(t){var n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(!e.sent){e.next=7;break}return e.next=5,this.read();case 5:return r=e.sent,e.abrupt("return",nt(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(h(r.heartbeats),h(t.heartbeats))}));case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}();function ut(e){return P(JSON.stringify({version:2,heartbeats:e})).length}Ue(new ne("platform-logger",(function(e){return new Se(e)}),"PRIVATE")),Ue(new ne("heartbeat",(function(e){return new at(e)}),"PRIVATE")),Je(Oe,Ce,""),Je(Oe,Ce,"esm2017"),Je("fire-js","");var ct=function(){function e(t,n){var r=this;k(this,e),this._delegate=t,this.firebase=n,Me(t,new ne("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return w(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),He(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pe;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pe;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){Me(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){Fe(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),lt=new z("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),ft=function e(){var t=function(e){var t={},n={__esModule:!0,initializeApp:function(r){var i=Qe(r,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(Q(t,i.name))return t[i.name];var a=new e(i,n);return t[i.name]=a,a},app:i,registerVersion:Je,setLogLevel:Ze,onLog:Xe,apps:null,SDK_VERSION:Ke,INTERNAL:{registerComponent:function(t){var r=t.name,a=r.replace("-compat","");if(Ue(t)&&"PUBLIC"===t.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!=typeof e[a])throw lt.create("invalid-app-argument",{appName:r});return e[a]()};void 0!==t.serviceProps&&D(o,t.serviceProps),n[a]=o,e.prototype[a]=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return this._getService.bind(this,r).apply(this,t.multipleInstances?n:[])}}return"PUBLIC"===t.type?n[a]:null},removeApp:function(e){delete t[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:r}};function i(e){if(!Q(t,e=e||Pe))throw lt.create("no-app",{appName:e});return t[e]}return n.default=n,Object.defineProperty(n,"apps",{get:function(){return Object.keys(t).map((function(e){return t[e]}))}}),i.App=e,n}(ct);return t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){D(t,e)},createSubscribe:X,ErrorFactory:z,deepExtend:D}),t}(),ht=new de("@firebase/app-compat");if("object"==typeof self&&self.self===self&&void 0!==self.firebase){ht.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var dt=self.firebase.SDK_VERSION;dt&&dt.indexOf("LITE")>=0&&ht.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var pt=ft;function vt(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Je("@firebase/app-compat","0.1.26",void 0),pt.registerVersion("firebase","9.8.2","app-compat"),Object.create,Object.create;var mt=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},yt=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},gt=new z("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),bt=new de("@firebase/auth");function kt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];bt.logLevel<=te.ERROR&&bt.error.apply(bt,["Auth (".concat(Ke,"): ").concat(e)].concat(n))}function wt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Et.apply(void 0,[e].concat(n))}function xt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Et.apply(void 0,[e].concat(n))}function It(e,t,n){var r=Object.assign(Object.assign({},yt()),l({},t,n));return new z("auth","Firebase",r).create(t,{appName:e.name})}function _t(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&wt(e,"argument-error"),It(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.Did you pass a reference from a different Auth SDK?"))}function Et(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!=typeof e){var i,a=n[0],o=h(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(h(o)))}return gt.create.apply(gt,[e].concat(n))}function At(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(!e)throw Et.apply(void 0,[t].concat(r))}function Tt(e){var t="INTERNAL ASSERTION FAILED: "+e;throw kt(t),new Error(t)}function St(e,t){e||Tt(t)}var Ot=new Map;function Ct(e){St(e instanceof Function,"Expected a class definition");var t=Ot.get(e);return t?(St(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Ot.set(e,t),t)}function Nt(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Pt(){return"http:"===Dt()||"https:"===Dt()}function Dt(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var Rt=function(){function e(t,n){k(this,e),this.shortDelay=t,this.longDelay=n,St(n>t,"Short delay should be less than long delay!"),this.isMobile=M()||V()}return w(e,[{key:"get",value:function(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Pt()||U()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function Lt(e,t){St(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var Mt=function(){function e(){k(this,e)}return w(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Tt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Tt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Tt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),Ft={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Ut=new Rt(3e4,6e4);function Vt(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function qt(e,t,n,r){return jt.apply(this,arguments)}function jt(){return jt=d(f().mark((function e(t,n,r,i){var a,o=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",Bt(t,a,d(f().mark((function e(){var a,o,s,u;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),s=H(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=5,t._getAdditionalHeaders();case 5:return u=e.sent,e.abrupt("return",(u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),Mt.fetch()(Wt(t,t.config.apiHost,r,s),Object.assign({method:n,headers:u,referrerPolicy:"no-referrer"},a))));case 7:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),jt.apply(this,arguments)}function Bt(e,t,n){return zt.apply(this,arguments)}function zt(){return zt=d(f().mark((function e(t,n,r){var i,a,o,s,u,c,l,h,d,p;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},Ft),n),e.prev=2,a=new Gt(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(s=e.sent))){e.next=13;break}throw Ht(t,"account-exists-with-different-credential",s);case 13:if(!o.ok||"errorMessage"in s){e.next=15;break}return e.abrupt("return",s);case 15:if(u=o.ok?s.errorMessage:s.error.message,c=u.split(" : "),l=v(c,2),h=l[0],d=l[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==h){e.next=18;break}throw Ht(t,"credential-already-in-use",s);case 18:if("EMAIL_EXISTS"!==h){e.next=20;break}throw Ht(t,"email-already-in-use",s);case 20:if("USER_DISABLED"!==h){e.next=22;break}throw Ht(t,"user-disabled",s);case 22:if(p=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-"),!d){e.next=25;break}throw It(t,p,d);case 25:wt(t,p),e.next=33;break;case 28:if(e.prev=28,e.t0=e.catch(2),!(e.t0 instanceof B)){e.next=32;break}throw e.t0;case 32:wt(t,"network-request-failed");case 33:case"end":return e.stop()}}),e,null,[[2,28]])}))),zt.apply(this,arguments)}function Kt(e,t,n,r){return Qt.apply(this,arguments)}function Qt(){return Qt=d(f().mark((function e(t,n,r,i){var a,o,s=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>4&&void 0!==s[4]?s[4]:{},e.next=3,qt(t,n,r,i,a);case 3:return o=e.sent,e.abrupt("return",("mfaPendingCredential"in o&&wt(t,"multi-factor-auth-required",{_serverResponse:o}),o));case 5:case"end":return e.stop()}}),e)}))),Qt.apply(this,arguments)}function Wt(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Lt(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var Gt=function(){function e(t){var n=this;k(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(xt(n.auth,"network-request-failed"))}),Ut.get())}))}return w(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function Ht(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=xt(e,t,r);return i.customData._tokenResponse=n,i}function Yt(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(e){}}function Jt(e){return 1e3*Number(e)}function Xt(e){var t=e.split("."),n=v(t,3),r=n[0],i=n[1],a=n[2];if(void 0===r||void 0===i||void 0===a)return kt("JWT malformed, contained fewer than 3 sections"),null;try{var o=function(e){try{return N.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null}(i);return o?JSON.parse(o):(kt("Failed to decode base64 JWT payload"),null)}catch(e){return kt("Caught error parsing JWT payload as JSON",e),null}}function Zt(e,t){return $t.apply(this,arguments)}function $t(){return $t=d(f().mark((function e(t,n){var r=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),e.t1=e.t0 instanceof B&&function(e){var t=e.code;return"auth/user-disabled"===t||"auth/user-token-expired"===t}(e.t0)&&t.auth.currentUser===t,!e.t1){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),$t.apply(this,arguments)}var en=function(){function e(t){k(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return w(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(d(f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=8;break;case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return",void("auth/network-request-failed"===e.t0.code&&this.schedule(!0)));case 8:this.schedule();case 9:case"end":return e.stop()}}),e,this,[[0,5]])})));function t(){return e.apply(this,arguments)}return t}()}]),e}(),tn=function(){function e(t,n){k(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return w(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=Yt(this.lastLoginAt),this.creationTime=Yt(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function nn(e){return rn.apply(this,arguments)}function rn(){return rn=d(f().mark((function e(t){var n,r,i,a,o,s,u,c,l,p,v,m,y;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,Zt(t,function(){var e=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",qt(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(r,{idToken:i}));case 6:At(null==(a=e.sent)?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),s=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?o.providerUserInfo.map((function(e){var t=e.providerId,n=vt(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],c=t.providerData,l=s,u=[].concat(h(c.filter((function(e){return!l.some((function(t){return t.providerId===e.providerId}))}))),h(l)),p=t.isAnonymous,v=!(t.email&&o.passwordHash||(null==u?void 0:u.length)),m=!!p&&v,y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new tn(o.createdAt,o.lastLoginAt),isAnonymous:m},Object.assign(t,y);case 13:case"end":return e.stop()}}),e)}))),rn.apply(this,arguments)}var an=function(){function e(){k(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return w(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){At(e.idToken,"internal-error"),At(void 0!==e.idToken,"internal-error"),At(void 0!==e.refreshToken,"internal-error");var t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):function(e){var t=Xt(e);return At(t,"internal-error"),At(void 0!==t.exp,"internal-error"),At(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=d(f().mark((function e(t){var n,r=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],At(!this.accessToken||this.refreshToken,t,"user-token-expired"),!n&&this.accessToken&&!this.isExpired){e.next=13;break}if(!this.refreshToken){e.next=9;break}return e.next=6,this.refresh(t,this.refreshToken);case 6:e.t1=this.accessToken,e.next=10;break;case 9:e.t1=null;case 10:e.t0=e.t1,e.next=14;break;case 13:e.t0=this.accessToken;case 14:return e.abrupt("return",e.t0);case 15:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=d(f().mark((function e(t,n){var r,i,a,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,function(){var e=d(f().mark((function e(t,n){var r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Bt(t,{},d(f().mark((function e(){var r,i,a,o,s,u;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=H({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,s=Wt(t,a,"/v1/token","key=".concat(o)),e.next=7,t._getAdditionalHeaders();case 7:return u=e.sent,e.abrupt("return",(u["Content-Type"]="application/x-www-form-urlencoded",Mt.fetch()(s,{method:"POST",headers:u,body:r})));case 9:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return Tt("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(At("string"==typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(At("string"==typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(At("number"==typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function on(e,t){At("string"==typeof e||void 0===e,"internal-error",{appName:t})}var sn=function(){function e(t){k(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=vt(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new en(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?h(a.providerData):[],this.metadata=new tn(a.createdAt||void 0,a.lastLoginAt||void 0)}return w(e,[{key:"getIdToken",value:function(){var e=d(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Zt(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(At(n=e.sent,this.auth,"internal-error"),e.t0=this.accessToken!==n,!e.t0){e.next=10;break}return this.accessToken=n,e.next=9,this.auth._persistUserIfCurrent(this);case 9:this.auth._notifyListenersIfCurrent(this);case 10:return e.abrupt("return",n);case 11:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getIdTokenResult",value:function(e){return function(){var e=d(f().mark((function e(t){var n,r,i,a,o,s,u=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]&&u[1],r=ee(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,At((a=Xt(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"==typeof a.firebase?a.firebase:void 0,s=null==o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:Yt(Jt(a.auth_time)),issuedAtTime:Yt(Jt(a.iat)),expirationTime:Yt(Jt(a.exp)),signInProvider:s||null,signInSecondFactor:(null==o?void 0:o.sign_in_second_factor)||null});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this,e)}},{key:"reload",value:function(){return function(){var e=d(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ee(t),e.next=3,nn(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this)}},{key:"_assign",value:function(e){this!==e&&(At(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){At(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=d(f().mark((function e(t){var n,r,i=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),e.t0=n,!e.t0){e.next=7;break}return e.next=7,nn(this);case 7:return e.next=9,this.auth._persistUserIfCurrent(this);case 9:r&&this.auth._notifyListenersIfCurrent(this);case 10:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"delete",value:function(){var e=d(f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,Zt(this,function(){var e=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",qt(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,s,u,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(s=n.tenantId)&&void 0!==s?s:void 0,m=null!==(u=n._redirectEventId)&&void 0!==u?u:void 0,y=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,b=n.uid,k=n.emailVerified,w=n.isAnonymous,x=n.providerData,I=n.stsTokenManager;At(b&&I,t,"internal-error");var _=an.fromJSON(this.name,I);At("string"==typeof b,t,"internal-error"),on(f,t.name),on(h,t.name),At("boolean"==typeof k,t,"internal-error"),At("boolean"==typeof w,t,"internal-error"),on(d,t.name),on(p,t.name),on(v,t.name),on(m,t.name),on(y,t.name),on(g,t.name);var E=new e({uid:b,auth:t,email:h,emailVerified:k,displayName:f,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:_,createdAt:y,lastLoginAt:g});return x&&Array.isArray(x)&&(E.providerData=x.map((function(e){return Object.assign({},e)}))),m&&(E._redirectEventId=m),E}},{key:"_fromIdTokenResponse",value:function(){var t=d(f().mark((function t(n,r){var i,a,o,s=arguments;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=s.length>2&&void 0!==s[2]&&s[2],(a=new an).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,nn(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));function n(e,n){return t.apply(this,arguments)}return n}()}]),e}(),un=function(){function e(){k(this,e),this.type="NONE",this.storage={}}return w(e,[{key:"_isAvailable",value:function(){var e=d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"_set",value:function(){var e=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"_get",value:function(){var e=d(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_remove",value:function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();un.type="NONE";var cn=un;function ln(e,t,n){return"firebase:".concat(e,":").concat(t,":").concat(n)}var fn=function(){function e(t,n,r){k(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=ln(this.userKey,a.apiKey,o),this.fullPersistenceKey=ln("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return w(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=d(f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?sn._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=d(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:return this.persistence=t,e.abrupt("return",n?this.setCurrentUser(n):void 0);case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=d(f().mark((function t(n,r){var i,a,o,s,u,c,l,h,v,m,y,g=arguments;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=g.length>2&&void 0!==g[2]?g[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(Ct(cn),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||Ct(cn),s=ln(i,n.config.apiKey,n.name),u=null,c=p(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=28;break}return h=l.value,t.prev=14,t.next=17,h._get(s);case 17:if(!(v=t.sent)){t.next=22;break}return m=sn._fromJSON(n,v),h!==o&&(u=m),o=h,t.abrupt("break",28);case 22:t.next=26;break;case 24:t.prev=24,t.t0=t.catch(14);case 26:t.next=12;break;case 28:t.next=33;break;case 30:t.prev=30,t.t1=t.catch(10),c.e(t.t1);case 33:return t.prev=33,c.f(),t.finish(33);case 36:if(y=a.filter((function(e){return e._shouldAllowMigration})),!o._shouldAllowMigration||!y.length){t.next=48;break}if(o=y[0],t.t3=u,!t.t3){t.next=43;break}return t.next=43,o._set(s,u.toJSON());case 43:return t.next=45,Promise.all(r.map(function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(s);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 45:t.t2=new e(o,n,i),t.next=49;break;case 48:t.t2=new e(o,n,i);case 49:return t.abrupt("return",t.t2);case 50:case"end":return t.stop()}}),t,null,[[10,30,33,36],[14,24]])})));function n(e,n){return t.apply(this,arguments)}return n}()}]),e}();function hn(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(mn(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(dn(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(gn(t))return"Blackberry";if(bn(t))return"Webos";if(pn(t))return"Safari";if((t.includes("chrome/")||vn(t))&&!t.includes("edge/"))return"Chrome";if(yn(t))return"Android";var n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);return 2===(null==r?void 0:r.length)?r[1]:"Other"}function dn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L();return/firefox\//i.test(e)}function pn(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:L()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function vn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L();return/crios\//i.test(e)}function mn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L();return/iemobile/i.test(e)}function yn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L();return/android/i.test(e)}function gn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L();return/blackberry/i.test(e)}function bn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L();return/webos/i.test(e)}function kn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L();return/iphone|ipad|ipod/i.test(e)}function wn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L();return kn(e)||yn(e)||bn(e)||gn(e)||/windows phone/i.test(e)||mn(e)}function xn(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=hn(L());break;case"Worker":t="".concat(hn(L()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/JsCore/").concat(Ke,"/").concat(r)}var In=function(){function e(t){k(this,e),this.auth=t,this.queue=[]}return w(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(e){r(e)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=d(f().mark((function e(t){var n,r,i,a,o,s,u;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:n=[],e.prev=3,r=p(this.queue),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=14;break}return a=i.value,e.next=11,a(t);case 11:a.onAbort&&n.push(a.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),n.reverse(),o=p(n);try{for(o.s();!(s=o.n()).done;){u=s.value;try{u()}catch(t){}}}catch(c){o.e(c)}finally{o.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:e.t1.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));function t(t){return e.apply(this,arguments)}return t}()}]),e}(),_n=function(){function e(t,n,r){k(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new An(this),this.idTokenSubscription=new An(this),this.beforeStateQueue=new In(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=gt,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return w(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=Ct(t)),this._initializationPromise=this.queue(d(f().mark((function r(){var i,a;return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.t0=!n._deleted,!r.t0){r.next=6;break}return r.next=4,fn.create(n,e);case 4:n.persistenceManager=r.sent,r.t0=!n._deleted;case 6:if(!r.t0){r.next=19;break}if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t1=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,n._deleted||(n._isInitialized=!0);case 19:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=d(f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,!this.currentUser&&!t){e.next=19;break}if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=13;break}return this._currentUser._assign(t),e.next=10,this.currentUser.getIdToken();case 10:e.t1=void e.sent,e.next=16;break;case 13:return e.next=15,this._updateCurrentUser(t,!0);case 15:e.t1=void e.sent;case 16:e.t0=e.t1,e.next=20;break;case 19:e.t0=void 0;case 20:return e.abrupt("return",e.t0);case 21:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"initializeCurrentUser",value:function(){var e=d(f().mark((function e(t){var n,r,i,a,o,s,u;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=13;break}return e.next=7,this.getOrInitRedirectPersistenceManager();case 7:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,s=null==i?void 0:i._redirectEventId,e.next=11,this.tryRedirectSignIn(t);case 11:u=e.sent,o&&o!==s||!(null==u?void 0:u.user)||(i=u.user,a=!0);case 13:if(i){e.next=15;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 15:if(i._redirectEventId){e.next=26;break}if(!a){e.next=25;break}return e.prev=17,e.next=20,this.beforeStateQueue.runMiddleware(i);case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(17),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 25:return e.abrupt("return",i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null));case 26:return At(this._popupRedirectResolver,this,"argument-error"),e.next=29,this.getOrInitRedirectPersistenceManager();case 29:return e.abrupt("return",this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i));case 30:case"end":return e.stop()}}),e,this,[[17,22]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"tryRedirectSignIn",value:function(){var e=d(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,nn(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),"auth/network-request-failed"===e.t0.code){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"==typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"updateCurrentUser",value:function(){var e=d(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t?ee(t):null,e.abrupt("return",(n&&At(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))));case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_updateCurrentUser",value:function(){var e=d(f().mark((function e(t){var n,r=this,i=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],this._deleted){e.next=8;break}if(t&&At(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e.t0=n,e.t0){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"signOut",value:function(){var e=d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(e.t0=this.redirectPersistenceManager||this._popupRedirectResolver,!e.t0){e.next=6;break}return e.next=6,this._setRedirectUser(null);case 6:return e.abrupt("return",this._updateCurrentUser(null,!0));case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(d(f().mark((function n(){return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(Ct(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new z("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=d(f().mark((function e(t,n){var r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=d(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return At(n=t&&Ct(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,fn.create(this,[Ct(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_redirectUserForId",value:function(){var e=d(f().mark((function e(t){var n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this._isInitialized,!e.t0){e.next=4;break}return e.next=4,this.queue(d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 4:return e.abrupt("return",(null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)===t?this._currentUser:(null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)===t?this.redirectUser:null);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_persistUserIfCurrent",value:function(){var e=d(f().mark((function e(t){var n=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"==typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return At(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"==typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,!t){e.next=7;break}return e.next=5,this.assertedPersistence.setCurrentUser(t);case 5:e.next=9;break;case 7:return e.next=9,this.assertedPersistence.removeCurrentUser();case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return At(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=xn(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=d(f().mark((function e(){var t,n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={"X-Client-Version":this.clientVersion},this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return r=e.sent,e.abrupt("return",(r&&(n["X-Firebase-Client"]=r),n));case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),e}();function En(e){return ee(e)}var An=function(){function e(t){var n=this;k(this,e),this.auth=t,this.observer=null,this.addObserver=X((function(e){return n.observer=e}))}return w(e,[{key:"next",get:function(){return At(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function Tn(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Sn(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var On=function(){function e(t,n){k(this,e),this.providerId=t,this.signInMethod=n}return w(e,[{key:"toJSON",value:function(){return Tt("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return Tt("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return Tt("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return Tt("not implemented")}}]),e}();function Cn(e,t){return Nn.apply(this,arguments)}function Nn(){return Nn=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",qt(t,"POST","/v1/accounts:resetPassword",Vt(t,n)));case 1:case"end":return e.stop()}}),e)}))),Nn.apply(this,arguments)}function Pn(e,t){return Dn.apply(this,arguments)}function Dn(){return Dn=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",qt(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Dn.apply(this,arguments)}function Rn(e,t){return Ln.apply(this,arguments)}function Ln(){return Ln=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",qt(t,"POST","/v1/accounts:sendOobCode",Vt(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ln.apply(this,arguments)}var Mn=function(e){y(n,e);var t=g(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return k(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return w(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",function(){var e=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Kt(t,"POST","/v1/accounts:signInWithPassword",Vt(t,n)));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",function(){var e=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Kt(t,"POST","/v1/accounts:signInWithEmailLink",Vt(t,n)));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,{email:this._email,oobCode:this._password}));case 5:wt(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_linkToIdToken",value:function(){var e=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Pn(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",function(){var e=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Kt(t,"POST","/v1/accounts:signInWithEmailLink",Vt(t,n)));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:wt(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){return new n(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}},{key:"fromJSON",value:function(e){var t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(On);function Fn(e,t){return Un.apply(this,arguments)}function Un(){return Un=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Kt(t,"POST","/v1/accounts:signInWithIdp",Vt(t,n)));case 1:case"end":return e.stop()}}),e)}))),Un.apply(this,arguments)}var Vn=function(e){y(n,e);var t=g(n);function n(){var e;return k(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return w(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return Fn(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Fn(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Fn(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=H(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):wt("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"==typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=vt(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(On),qn={USER_NOT_FOUND:"user-not-found"},jn=function(e){y(n,e);var t=g(n);function n(e){var r;return k(this,n),(r=t.call(this,"phone","phone")).params=e,r}return w(n,[{key:"_getIdTokenResponse",value:function(e){return function(){var e=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Kt(t,"POST","/v1/accounts:signInWithPhoneNumber",Vt(t,n)));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(){var e=d(f().mark((function e(t,n){var r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Kt(t,"POST","/v1/accounts:signInWithPhoneNumber",Vt(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw Ht(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(){var e=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Kt(t,"POST","/v1/accounts:signInWithPhoneNumber",Vt(t,Object.assign(Object.assign({},n),{operation:"REAUTH"})),qn));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"==typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(On),Bn=function(){function e(t){var n,r,i,a,o,s;k(this,e);var u=Y(J(t)),c=null!==(n=u.apiKey)&&void 0!==n?n:null,l=null!==(r=u.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=u.mode)&&void 0!==i?i:null);At(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=u.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=u.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(s=u.tenantId)&&void 0!==s?s:null}return w(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=Y(J(e)).link,n=t?Y(J(t)).deep_link_id:null,r=Y(J(e)).deep_link_id;return(r?Y(J(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(t){return null}}}]),e}(),zn=function(){function e(){k(this,e),this.providerId=e.PROVIDER_ID}return w(e,null,[{key:"credential",value:function(e,t){return Mn._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=Bn.parseLink(t);return At(n,"argument-error"),Mn._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();zn.PROVIDER_ID="password",zn.EMAIL_PASSWORD_SIGN_IN_METHOD="password",zn.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var Kn=function(){function e(t){k(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return w(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),Qn=function(e){y(n,e);var t=g(n);function n(){var e;return k(this,n),(e=t.apply(this,arguments)).scopes=[],e}return w(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return h(this.scopes)}}]),n}(Kn),Wn=function(e){y(n,e);var t=g(n);function n(){return k(this,n),t.apply(this,arguments)}return w(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return At(e.idToken||e.accessToken,"argument-error"),Vn._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"==typeof e?JSON.parse(e):e;return At("providerId"in t&&"signInMethod"in t,"argument-error"),Vn._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,s=t.nonce,u=t.providerId;if(!(i||a||r||o))return null;if(!u)return null;try{return new n(u)._credential({idToken:r,accessToken:i,nonce:s,pendingToken:o})}catch(t){return null}}}]),n}(Qn),Gn=function(e){y(n,e);var t=g(n);function n(){return k(this,n),t.call(this,"facebook.com")}return w(n,null,[{key:"credential",value:function(e){return Vn._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(t){return null}}}]),n}(Qn);Gn.FACEBOOK_SIGN_IN_METHOD="facebook.com",Gn.PROVIDER_ID="facebook.com";var Hn=function(e){y(n,e);var t=g(n);function n(){var e;return k(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return w(n,null,[{key:"credential",value:function(e,t){return Vn._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(t){return null}}}]),n}(Qn);Hn.GOOGLE_SIGN_IN_METHOD="google.com",Hn.PROVIDER_ID="google.com";var Yn=function(e){y(n,e);var t=g(n);function n(){return k(this,n),t.call(this,"github.com")}return w(n,null,[{key:"credential",value:function(e){return Vn._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(t){return null}}}]),n}(Qn);Yn.GITHUB_SIGN_IN_METHOD="github.com",Yn.PROVIDER_ID="github.com";var Jn=function(e){y(n,e);var t=g(n);function n(e,r){var i;return k(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return w(n,[{key:"_getIdTokenResponse",value:function(e){return Fn(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Fn(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Fn(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"==typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(On),Xn=function(e){y(n,e);var t=g(n);function n(e){return k(this,n),At(e.startsWith("saml."),"argument-error"),t.call(this,e)}return w(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=Jn.fromJSON(e);return At(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return Jn._create(r,n)}catch(t){return null}}}]),n}(Kn),Zn=function(e){y(n,e);var t=g(n);function n(){return k(this,n),t.call(this,"twitter.com")}return w(n,null,[{key:"credential",value:function(e,t){return Vn._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(t){return null}}}]),n}(Qn);function $n(e,t){return er.apply(this,arguments)}function er(){return er=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Kt(t,"POST","/v1/accounts:signUp",Vt(t,n)));case 1:case"end":return e.stop()}}),e)}))),er.apply(this,arguments)}Zn.TWITTER_SIGN_IN_METHOD="twitter.com",Zn.PROVIDER_ID="twitter.com";var tr=function(){function e(t){k(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return w(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=d(f().mark((function t(n,r,i){var a,o,s,u=arguments;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=u.length>3&&void 0!==u[3]&&u[3],t.next=3,sn._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,s=nr(i),t.abrupt("return",new e({user:o,providerId:s,_tokenResponse:i,operationType:r}));case 6:case"end":return t.stop()}}),t)})));function n(e,n,r){return t.apply(this,arguments)}return n}()},{key:"_forOperation",value:function(){var t=d(f().mark((function t(n,r,i){var a;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=nr(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));function n(e,n,r){return t.apply(this,arguments)}return n}()}]),e}();function nr(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}var rr=function(e){y(n,e);var t=g(n);function n(e,r,i,a){var o,s;return k(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(m(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return w(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(B);function ir(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if("auth/multi-factor-auth-required"===n.code)throw rr._fromErrorAndOperation(e,n,t,r);throw n}))}function ar(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function or(e,t){return sr.apply(this,arguments)}function sr(){return sr=d(f().mark((function e(t,n){var r,i,a=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=Zt,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",tr._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),sr.apply(this,arguments)}function ur(e,t,n){return cr.apply(this,arguments)}function cr(){return cr=d(f().mark((function e(t,n,r){var i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nn(n);case 2:i=!1===t?"provider-already-linked":"no-such-provider",At(ar(n.providerData).has(r)===t,n.auth,i);case 4:case"end":return e.stop()}}),e)}))),cr.apply(this,arguments)}function lr(e,t){return fr.apply(this,arguments)}function fr(){return fr=d(f().mark((function e(t,n){var r,i,a,o,s,u,c=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=2,e.next=5,Zt(t,ir(i,a,n,t),r);case 5:return At((o=e.sent).idToken,i,"internal-error"),At(s=Xt(o.idToken),i,"internal-error"),u=s.sub,e.abrupt("return",(At(t.uid===u,i,"user-mismatch"),tr._forOperation(t,a,o)));case 13:throw e.prev=13,e.t0=e.catch(2),"auth/user-not-found"===(null==e.t0?void 0:e.t0.code)&&wt(i,"user-mismatch"),e.t0;case 16:case"end":return e.stop()}}),e,null,[[2,13]])}))),fr.apply(this,arguments)}function hr(e,t){return dr.apply(this,arguments)}function dr(){return dr=d(f().mark((function e(t,n){var r,i,a,o,s=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i="signIn",e.next=4,ir(t,i,n);case 4:return a=e.sent,e.next=7,tr._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,e.t0=r,e.t0){e.next=12;break}return e.next=12,t._updateCurrentUser(o.user);case 12:return e.abrupt("return",o);case 13:case"end":return e.stop()}}),e)}))),dr.apply(this,arguments)}function pr(e,t){return vr.apply(this,arguments)}function vr(){return vr=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",hr(En(t),n));case 1:case"end":return e.stop()}}),e)}))),vr.apply(this,arguments)}function mr(e,t){return yr.apply(this,arguments)}function yr(){return yr=d(f().mark((function e(t,n){var r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ee(t),e.next=3,ur(!1,r,n.providerId);case 3:return e.abrupt("return",or(r,n));case 4:case"end":return e.stop()}}),e)}))),yr.apply(this,arguments)}function gr(e,t){return br.apply(this,arguments)}function br(){return br=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",lr(ee(t),n));case 1:case"end":return e.stop()}}),e)}))),br.apply(this,arguments)}var kr=function(){function e(t,n){k(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return w(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?wr._fromServerResponse(e,t):wt(e,"internal-error")}}]),e}(),wr=function(e){y(n,e);var t=g(n);function n(e){var r;return k(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return w(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(kr);function xr(e,t,n){var r;At((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),At(void 0===n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(At(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(At(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function Ir(e,t){return _r.apply(this,arguments)}function _r(){return _r=d(f().mark((function e(t,n){var r,i,a,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ee(t),e.next=3,Cn(r,{oobCode:n});case 3:i=e.sent,a=i.requestType,e.t0=(At(a,r,"internal-error"),a),e.next="EMAIL_SIGNIN"===e.t0?8:"VERIFY_AND_CHANGE_EMAIL"===e.t0?9:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?11:12;break;case 8:return e.abrupt("break",13);case 9:return At(i.newEmail,r,"internal-error"),e.abrupt("break",13);case 11:At(i.mfaInfo,r,"internal-error");case 12:At(i.email,r,"internal-error");case 13:return o=null,e.abrupt("return",(i.mfaInfo&&(o=kr._fromServerResponse(En(r),i.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a}));case 15:case"end":return e.stop()}}),e)}))),_r.apply(this,arguments)}function Er(e,t,n){return Ar.apply(this,arguments)}function Ar(){return Ar=d(f().mark((function e(t,n,r){var i,a,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return e.t0=e.sent,e.t1=!0,a={idToken:e.t0,returnSecureToken:e.t1},n&&(a.email=n),r&&(a.password=r),e.next=9,Zt(t,Pn(i,a));case 9:return o=e.sent,e.next=12,t._updateTokensIfNecessary(o,!0);case 12:case"end":return e.stop()}}),e)}))),Ar.apply(this,arguments)}var Tr=w((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};k(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),Sr=function(e){y(n,e);var t=g(n);function n(e,r,i,a){var o;return k(this,n),(o=t.call(this,e,r,i)).username=a,o}return w(n)}(Tr),Or=function(e){y(n,e);var t=g(n);function n(e,r){return k(this,n),t.call(this,e,"facebook.com",r)}return w(n)}(Tr),Cr=function(e){y(n,e);var t=g(n);function n(e,r){return k(this,n),t.call(this,e,"github.com",r,"string"==typeof(null==r?void 0:r.login)?null==r?void 0:r.login:null)}return w(n)}(Sr),Nr=function(e){y(n,e);var t=g(n);function n(e,r){return k(this,n),t.call(this,e,"google.com",r)}return w(n)}(Tr),Pr=function(e){y(n,e);var t=g(n);function n(e,r,i){return k(this,n),t.call(this,e,"twitter.com",r,i)}return w(n)}(Sr);function Dr(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null==e?void 0:e.idToken)){var o=null===(n=null===(t=Xt(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new Tr(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new Or(a,i);case"github.com":return new Cr(a,i);case"google.com":return new Nr(a,i);case"twitter.com":return new Pr(a,i,e.screenName||null);case"custom":case"anonymous":return new Tr(a,null);default:return new Tr(a,r,i)}}(n)}var Rr=function(){function e(t,n){k(this,e),this.type=t,this.credential=n}return w(e,[{key:"toJSON",value:function(){return{multiFactorSession:l({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t){return new e("enroll",t)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null==t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),Lr=function(){function e(t,n,r){k(this,e),this.session=t,this.hints=n,this.signInResolver=r}return w(e,[{key:"resolveSignIn",value:function(){var e=d(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}],[{key:"_fromError",value:function(t,n){var r=En(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return kr._fromServerResponse(r,e)}));At(i.mfaPendingCredential,r,"internal-error");var o=Rr._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=d(f().mark((function e(t){var a,s,u;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,s=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?8:"reauthenticate"===e.t0?14:15;break;case 8:return e.next=10,tr._fromIdTokenResponse(r,n.operationType,s);case 10:return u=e.sent,e.next=13,r._updateCurrentUser(u.user);case 13:return e.abrupt("return",u);case 14:return e.abrupt("return",(At(n.user,r,"internal-error"),tr._forOperation(n.user,n.operationType,s)));case 15:wt(r,"internal-error");case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}(),Mr=function(){function e(t){var n=this;k(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return kr._fromServerResponse(t.auth,e)})))}))}return w(e,[{key:"getSession",value:function(){var e=d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Rr,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"enroll",value:function(){var e=d(f().mark((function e(t,n){var r,i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,Zt(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"unenroll",value:function(){var e=d(f().mark((function e(t){var n,r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"==typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.next=6,Zt(this.user,function(e,t){return qt(e,"POST","/v2/accounts/mfaEnrollment:withdraw",Vt(e,t))}(this.user.auth,{idToken:r,mfaEnrollmentId:n}));case 6:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=10,this.user._updateTokensIfNecessary(i);case 10:return e.prev=10,e.next=13,this.user.reload();case 13:e.next=19;break;case 15:if(e.prev=15,e.t0=e.catch(10),"auth/user-token-expired"===e.t0.code){e.next=19;break}throw e.t0;case 19:case"end":return e.stop()}}),e,this,[[10,15]])})));function t(t){return e.apply(this,arguments)}return t}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),Fr=new WeakMap,Ur="__sak",Vr=function(){function e(t,n){k(this,e),this.storageRetriever=t,this.type=n}return w(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(Ur,"1"),this.storage.removeItem(Ur),Promise.resolve(!0)):Promise.resolve(!1)}catch(r){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}(),qr=function(e){y(n,e);var t=g(n);function n(){var e;return k(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=L();return pn(e)||kn(e)}()&&function(){try{return!(!window||window===window.top)}catch(r){return!1}}(),e.fallbackToPolling=wn(),e._shouldAllowMigration=!0,e}return w(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);q()&&10===document.documentMode&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++)(0,i[r])(t?JSON.parse(t):t)}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=d(f().mark((function e(t,r){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(u(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"_get",value:function(){var e=d(f().mark((function e(t){var r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(u(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,e.abrupt("return",(this.localCache[t]=JSON.stringify(r),r));case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_remove",value:function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(u(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),n}(Vr);qr.type="LOCAL";var jr=qr,Br=function(e){y(n,e);var t=g(n);function n(){return k(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return w(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(Vr);Br.type="SESSION";var zr=Br,Kr=function(){function e(t){k(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return w(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=d(f().mark((function e(t){var n,r,i,a,o,s,u,c;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null==(s=this.handlersMap[a])?void 0:s.size){e.next=3;break}return e.abrupt("return");case 3:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),u=Array.from(s).map(function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=7,function(e){return Promise.all(e.map(function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=!0,e.next=4,t;case 4:return e.t1=e.sent,e.abrupt("return",{fulfilled:e.t0,value:e.t1});case 8:return e.prev=8,e.t2=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t2});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()))}(u);case 7:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function Qr(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Kr.receivers=[];var Wr=function(){function e(t){k(this,e),this.target=t,this.handlers=new Set}return w(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=d(f().mark((function e(t,n){var r,i,a,o,s=this,u=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>2&&void 0!==u[2]?u[2]:50,i="undefined"!=typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,u){var c=Qr("",20);i.port1.start();var l=setTimeout((function(){u(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){u(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),u(new Error("invalid_response"))}}},s.handlers.add(o),i.port1.addEventListener("message",o.onMessage),s.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&s.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}()}]),e}();function Gr(){return window}function Hr(){return void 0!==Gr().WorkerGlobalScope&&"function"==typeof Gr().importScripts}var Yr="firebaseLocalStorageDb",Jr="firebaseLocalStorage",Xr="fbase_key",Zr=function(){function e(t){k(this,e),this.request=t}return w(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function $r(e,t){return e.transaction([Jr],t?"readwrite":"readonly").objectStore(Jr)}function ei(){var e=indexedDB.open(Yr,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(Jr,{keyPath:Xr})}catch(e){n(e)}})),e.addEventListener("success",d(f().mark((function n(){var r;return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(r=e.result).objectStoreNames.contains(Jr)){n.next=5;break}t(r),n.next=13;break;case 5:return r.close(),n.next=8,function(){var e=indexedDB.deleteDatabase(Yr);return new Zr(e).toPromise()}();case 8:return n.t0=t,n.next=11,ei();case 11:n.t1=n.sent,(0,n.t0)(n.t1);case 13:case"end":return n.stop()}}),n)}))))}))}function ti(e,t,n){return ni.apply(this,arguments)}function ni(){return ni=d(f().mark((function e(t,n,r){var i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=$r(t,!0).put((l(i={},Xr,n),l(i,"value",r),i)),e.abrupt("return",new Zr(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),ni.apply(this,arguments)}function ri(e,t){var n=$r(e,!0).delete(t);return new Zr(n).toPromise()}var ii=function(){function e(){k(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return w(e,[{key:"_openDb",value:function(){var e=d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=5;break}return e.next=4,ei();case 4:this.db=e.sent;case 5:return e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"_withRetries",value:function(){var e=d(f().mark((function e(t){var n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=1,e.next=4,this._openDb();case 4:return r=e.sent,e.next=7,t(r);case 7:return e.abrupt("return",e.sent);case 10:if(e.prev=10,e.t0=e.catch(1),!(n++>3)){e.next=14;break}throw e.t0;case 14:this.db&&(this.db.close(),this.db=void 0);case 15:e.next=1;break;case 17:case"end":return e.stop()}}),e,this,[[1,10]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Hr()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"initializeReceiver",value:function(){var e=d(f().mark((function e(){var t=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=Kr._getInstance(Hr()?self:null),this.receiver._subscribe("keyChanged",function(){var e=d(f().mark((function e(n,r){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return e.t0=e.sent.includes(r.key),e.abrupt("return",{keyProcessed:e.t0});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"initializeSender",value:function(){var e=d(f().mark((function e(){var t,n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return e.abrupt("return",e.sent.active);case 8:return e.prev=8,e.t0=e.catch(2),e.abrupt("return",null);case 11:case"end":return e.stop()}}),e,null,[[2,8]])})))();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new Wr(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:(r=e.sent)&&(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"notifyServiceWorker",value:function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.sender||!this.activeServiceWorker||function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()!==this.activeServiceWorker){e.next=8;break}return e.prev=1,e.next=4,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,this,[[1,6]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_isAvailable",value:function(){var e=d(f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,ei();case 5:return t=e.sent,e.next=8,ti(t,Ur,"1");case 8:return e.next=10,ri(t,Ur);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"_withPendingWrite",value:function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_set",value:function(){var e=d(f().mark((function e(t,n){var r=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return ti(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"_get",value:function(){var e=d(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return function(){var e=d(f().mark((function e(t,n){var r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=$r(t,!1).get(n),e.next=3,new Zr(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(e,t)}));case 2:return n=e.sent,e.abrupt("return",(this.localCache[t]=n,n));case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_remove",value:function(){var e=d(f().mark((function e(t){var n=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return ri(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_poll",value:function(){var e=d(f().mark((function e(){var t,n,r,i,a,o,s,u,c,l,h;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=$r(e,!1).getAll();return new Zr(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=p(t);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.fbase_key,u=o.value,r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(u)&&(this.notifyListeners(s,u),n.push(s))}catch(f){i.e(f)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)h=l[c],this.localCache[h]&&!r.has(h)&&(this.notifyListeners(h,null),n.push(h));return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++)(0,i[r])(t)}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(d(f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();ii.type="LOCAL";var ai=ii;function oi(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=xt("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function si(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var ui=1e12,ci=function(){function e(t){k(this,e),this.auth=t,this.counter=ui,this._widgets=new Map}return w(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new li(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||ui;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||ui;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=d(f().mark((function e(t){var n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||ui,e.abrupt("return",(null===(n=this._widgets.get(r))||void 0===n||n.execute(),""));case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}(),li=function(){function e(t,n,r){var i=this;k(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"==typeof t?document.getElementById(t):t;At(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return w(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<50;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}();var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(n){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(n){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}(),fi=si("rcb"),hi=new Rt(3e4,6e4),di=function(){function e(){k(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Gr().grecaptcha}return w(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return At(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(Gr().grecaptcha):new Promise((function(r,i){var a=Gr().setTimeout((function(){i(xt(e,"network-request-failed"))}),hi.get());Gr()[fi]=function(){Gr().clearTimeout(a),delete Gr()[fi];var o=Gr().grecaptcha;if(o){var s=o.render;o.render=function(e,n){var r=s(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(xt(e,"internal-error"))},oi("https://www.google.com/recaptcha/api.js??".concat(H({onload:fi,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(xt(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){return!!Gr().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}(),pi=function(){function e(){k(this,e)}return w(e,[{key:"load",value:function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new ci(t));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"clearedOneInstance",value:function(){}}]),e}(),vi="recaptcha",mi={theme:"light",type:"image"},yi=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},mi),r=arguments.length>2?arguments[2]:void 0;k(this,e),this.parameters=n,this.type=vi,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=En(r),this.isInvisible="invisible"===this.parameters.size,At("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"==typeof t?document.getElementById(t):t;At(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new pi:new di,this.validateStartingState()}return w(e,[{key:"verify",value:function(){var e=d(f().mark((function e(){var t,n,r=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:return t=e.sent,n=this.getAssertedRecaptcha(),e.abrupt("return",n.getResponse(t)||new Promise((function(e){var i=function t(n){n&&(r.tokenChangeListeners.delete(t),e(n))};r.tokenChangeListeners.add(i),r.isInvisible&&n.execute(t)})));case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(r){return Promise.reject(r)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){At(!this.parameters.sitekey,this.auth,"argument-error"),At(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),At("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"==typeof e)e(n);else if("string"==typeof e){var r=Gr()[e];"function"==typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){At(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=d(f().mark((function e(){var t,n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:if(this.widgetId){e.next=6;break}t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters);case 6:return e.abrupt("return",this.widgetId);case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"init",value:function(){var e=d(f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return At(Pt()&&!Hr(),this.auth,"internal-error"),e.next=3,function(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qt(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.auth);case 8:At(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getAssertedRecaptcha",value:function(){return At(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}(),gi=function(){function e(t,n){k(this,e),this.verificationId=t,this.onConfirmation=n}return w(e,[{key:"confirm",value:function(e){var t=jn._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function bi(e,t,n){return ki.apply(this,arguments)}function ki(){return ki=d(f().mark((function e(t,n,r){var i,a,o,s,u,c,l,h,p;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,At("string"==typeof a,t,"argument-error"),At(r.type===vi,t,"argument-error"),!("session"in(o="string"==typeof n?{phoneNumber:n}:n))){e.next=19;break}if(s=o.session,!("phoneNumber"in o)){e.next=12;break}return At("enroll"===s.type,t,"internal-error"),e.next=10,function(e,t){return qt(e,"POST","/v2/accounts/mfaEnrollment:start",Vt(e,t))}(t,{idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 10:return u=e.sent,e.abrupt("return",u.phoneSessionInfo.sessionInfo);case 12:return At("signin"===s.type,t,"internal-error"),At(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=17,function(e,t){return qt(e,"POST","/v2/accounts/mfaSignIn:start",Vt(e,t))}(t,{mfaPendingCredential:s.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 17:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 19:return e.next=21,function(){var e=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",qt(t,"POST","/v1/accounts:sendVerificationCode",Vt(t,n)));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 21:return h=e.sent,p=h.sessionInfo,e.abrupt("return",p);case 24:return e.prev=24,r._reset(),e.finish(24);case 27:case"end":return e.stop()}}),e,null,[[3,,24,27]])}))),ki.apply(this,arguments)}var wi=function(){function e(t){k(this,e),this.providerId=e.PROVIDER_ID,this.auth=En(t)}return w(e,[{key:"verifyPhoneNumber",value:function(e,t){return bi(this.auth,e,ee(t))}}],[{key:"credential",value:function(e,t){return jn._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?jn._fromTokenResponse(n,r):null}}]),e}();function xi(e,t){return t?Ct(t):(At(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}wi.PROVIDER_ID="phone",wi.PHONE_SIGN_IN_METHOD="phone";var Ii=function(e){y(n,e);var t=g(n);function n(e){var r;return k(this,n),(r=t.call(this,"custom","custom")).params=e,r}return w(n,[{key:"_getIdTokenResponse",value:function(e){return Fn(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return Fn(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return Fn(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(On);function _i(e){return hr(e.auth,new Ii(e),e.bypassAuthState)}function Ei(e){var t=e.auth,n=e.user;return At(n,t,"internal-error"),lr(n,new Ii(e),e.bypassAuthState)}function Ai(e){return Ti.apply(this,arguments)}function Ti(){return Ti=d(f().mark((function e(t){var n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,r=t.user,e.abrupt("return",(At(r,n,"internal-error"),or(r,new Ii(t),t.bypassAuthState)));case 2:case"end":return e.stop()}}),e)}))),Ti.apply(this,arguments)}var Si=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];k(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return w(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=d(f().mark((function t(n,r){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=d(f().mark((function e(t){var n,r,i,a,o,s,u;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,s=t.type,!o){e.next=3;break}return e.abrupt("return",void this.reject(o));case 3:return u={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=4,e.t0=this,e.next=8,this.getIdpTask(s)(u);case 8:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=15;break;case 12:e.prev=12,e.t2=e.catch(4),this.reject(e.t2);case 15:case"end":return e.stop()}}),e,this,[[4,12]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return _i;case"linkViaPopup":case"linkViaRedirect":return Ai;case"reauthViaPopup":case"reauthViaRedirect":return Ei;default:wt(this.auth,"internal-error")}}},{key:"resolve",value:function(e){St(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){St(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),Oi=new Rt(2e3,1e4),Ci=function(e){y(n,e);var t=g(n);function n(e,r,i,a,o){var s;return k(this,n),(s=t.call(this,e,r,a,o)).provider=i,s.authWindow=null,s.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=m(s),s}return w(n,[{key:"executeNotNull",value:function(){var e=d(f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return t=e.sent,e.abrupt("return",(At(t,this.auth,"internal-error"),t));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"onExecution",value:function(){var e=d(f().mark((function e(){var t,n=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return St(1===this.filter.length,"Popup operations only handle one event"),t=Qr(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(xt(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(xt(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this,t=function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(xt(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,Oi.get())};t()}}]),n}(Si);Ci.currentPopupAction=null;var Ni=new Map,Pi=function(e){y(n,e);var t=g(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return k(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return w(n,[{key:"execute",value:function(){var e=d(f().mark((function e(){var t,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Ni.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,function(){var e=d(f().mark((function e(t,n){var r,i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Fi(n),i=Mi(t),e.next=3,i._isAvailable();case 3:if(e.sent){e.next=5;break}return e.abrupt("return",!1);case 5:return e.next=7,i._get(r);case 7:return e.t0=e.sent,a="true"===e.t0,e.next=11,i._remove(r);case 11:return e.abrupt("return",a);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,s(u(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:Ni.set(this.auth._key(),t);case 21:return e.abrupt("return",(this.bypassAuthState||Ni.set(this.auth._key(),(function(){return Promise.resolve(null)})),t()));case 22:case"end":return e.stop()}}),e,this,[[2,17]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"onAuthEvent",value:function(){var e=d(f().mark((function e(t){var r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=2;break}return e.abrupt("return",s(u(n.prototype),"onAuthEvent",this).call(this,t));case 2:if("unknown"===t.type){e.next=12;break}if(!t.eventId){e.next=10;break}return e.next=6,this.auth._redirectUserForId(t.eventId);case 6:if(!(r=e.sent)){e.next=9;break}return e.abrupt("return",(this.user=r,s(u(n.prototype),"onAuthEvent",this).call(this,t)));case 9:this.resolve(null);case 10:e.next=13;break;case 12:this.resolve(null);case 13:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"onExecution",value:function(){var e=d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"cleanUp",value:function(){}}]),n}(Si);function Di(e,t){return Ri.apply(this,arguments)}function Ri(){return Ri=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Mi(t)._set(Fi(n),"true"));case 1:case"end":return e.stop()}}),e)}))),Ri.apply(this,arguments)}function Li(e,t){Ni.set(e._key(),t)}function Mi(e){return Ct(e._redirectPersistence)}function Fi(e){return ln("pendingRedirect",e.config.apiKey,e.name)}function Ui(e,t){return Vi.apply(this,arguments)}function Vi(){return Vi=d(f().mark((function e(t,n){var r,i,a,o,s,u=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i=En(t),a=xi(i,n),o=new Pi(i,a,r),e.next=6,o.execute();case 6:if(s=e.sent,e.t0=s&&!r,!e.t0){e.next=14;break}return delete s.user._redirectEventId,e.next=12,i._persistUserIfCurrent(s.user);case 12:return e.next=14,i._setRedirectUser(null,n);case 14:return e.abrupt("return",s);case 15:case"end":return e.stop()}}),e)}))),Vi.apply(this,arguments)}function qi(e){return ji.apply(this,arguments)}function ji(){return ji=d(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Qr("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),ji.apply(this,arguments)}var Bi=function(){function e(t){k(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return w(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ki(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!Ki(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(xt(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(zi(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(zi(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function zi(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function Ki(e){var t=e.type,n=e.error;return"unknown"===t&&"auth/no-auth-event"===(null==n?void 0:n.code)}function Qi(e){return Wi.apply(this,arguments)}function Wi(){return Wi=d(f().mark((function e(t){var n,r=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",qt(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),Wi.apply(this,arguments)}var Gi=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Hi=/^https?/;function Yi(e){var t=Nt(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!Hi.test(r))return!1;if(Gi.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var Ji=new Rt(3e4,6e4);function Xi(){var e=Gr().___jsl;if(null==e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=h(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var Zi=null;function $i(e){return Zi=Zi||function(e){return new Promise((function(t,n){var r,i,a;function o(){Xi(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){Xi(),n(xt(e,"network-request-failed"))},timeout:Ji.get()})}if(null===(i=null===(r=Gr().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=Gr().gapi)||void 0===a?void 0:a.load)){var s=si("iframefcb");return Gr()[s]=function(){gapi.load?o():n(xt(e,"network-request-failed"))},oi("https://apis.google.com/js/api.js?onload=".concat(s)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw Zi=null,e}))}(e),Zi}var ea=new Rt(5e3,15e3),ta={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},na=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ra(e){var t=e.config;At(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?Lt(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:Ke},i=na.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(H(r).slice(1))}var ia={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},aa=function(){function e(t){k(this,e),this.window=t,this.associatedEvent=null}return w(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(r){}}}]),e}();function oa(e,t,n,r,i,a){At(e.config.authDomain,e,"auth-domain-config-required"),At(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Ke,eventId:i};if(t instanceof Kn){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var s=0,u=Object.entries(a||{});s<u.length;s++){var c=v(u[s],2),l=c[0],f=c[1];o[l]=f}}if(t instanceof Qn){var h=t.getScopes().filter((function(e){return""!==e}));h.length>0&&(o.scopes=h.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var d=o,p=0,m=Object.keys(d);p<m.length;p++){var y=m[p];void 0===d[y]&&delete d[y]}return"".concat(function(e){var t=e.config;return t.emulator?Lt(t,"emulator/auth/handler"):"https://".concat(t.authDomain,"/__/auth/handler")}(e),"?").concat(H(d).slice(1))}var sa="webStorageSupport",ua=function(e){y(n,e);var t=g(n);function n(e){var r;return k(this,n),(r=t.call(this,"phone")).credential=e,r}return w(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return qt(e,"POST","/v2/accounts/mfaEnrollment:finalize",Vt(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return qt(e,"POST","/v2/accounts/mfaSignIn:finalize",Vt(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(function(){function e(t){k(this,e),this.factorId=t}return w(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return Tt("unexpected MultiFactorSessionType")}}}]),e}()),ca=function(){function e(){k(this,e)}return w(e,null,[{key:"assertion",value:function(e){return ua._fromCredential(e)}}]),e}();ca.FACTOR_ID="phone";var la,fa="@firebase/auth",ha="0.20.2",da=function(){function e(t){k(this,e),this.auth=t,this.internalListeners=new Map}return w(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(!this.auth.currentUser){e.next=10;break}return e.next=6,this.auth.currentUser.getIdToken(t);case 6:e.t1=e.sent,e.t0={accessToken:e.t1},e.next=11;break;case 10:e.t0=null;case 11:return e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){At(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();function pa(){return window}la="Browser",Ue(new ne("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,s=a.authDomain;return function(e,t){At(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),At(!(null==s?void 0:s.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:s,clientPlatform:la,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:xn(la)},i=new _n(e,t,r);return function(e,t){var n=(null==t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ct);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null==t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),Ue(new ne("auth-internal",(function(e){return function(e){return new da(e)}(En(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),Je(fa,ha,void 0),Je(fa,ha,"esm2017");var va=function(e){y(n,e);var t=g(n);function n(){var e;return k(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return w(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),s(u(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),n}(Bi);function ma(e){return ya.apply(this,arguments)}function ya(){return ya=d(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ba()._get(ka(t));case 2:if(n=e.sent,e.t0=n,!e.t0){e.next=7;break}return e.next=7,ba()._remove(ka(t));case 7:return e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)}))),ya.apply(this,arguments)}function ga(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function ba(){return Ct(jr)}function ka(e){return ln("authEvent",e.config.apiKey,e.name)}function wa(e){if(!(null==e?void 0:e.includes("?")))return{};var t=e.split("?"),n=o(t);return n[0],Y(n.slice(1).join("?"))}function xa(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:xt("no-auth-event")}}function Ia(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function _a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L();return!("file:"!==Ia()&&"ionic:"!==Ia()&&"capacitor:"!==Ia()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function Ea(){try{var e=self.localStorage,t=Qr();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L();return q()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L();return/Edge\/\d+/.test(e)}(e)}()||j()}catch(e){return Aa()&&j()}return!1}function Aa(){return void 0!==n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function Ta(){return("http:"===Ia()||"https:"===Ia()||U()||_a())&&!(V()||F())&&Ea()&&!Aa()}function Sa(){return _a()&&"undefined"!=typeof document}var Oa={LOCAL:"local",NONE:"none",SESSION:"session"},Ca=At,Na="persistence";function Pa(e){return Da.apply(this,arguments)}function Da(){return Da=d(f().mark((function e(t){var n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=Ra(),r=ln(Na,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 4:case"end":return e.stop()}}),e)}))),Da.apply(this,arguments)}function Ra(){var e;try{return(null===(e="undefined"!=typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(e){return null}}var La=At,Ma=function(){function e(){k(this,e),this.browserResolver=Ct(function(){function e(){k(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=zr,this._completeRedirectFn=Ui,this._overrideRedirectResult=Li}return w(e,[{key:"_openPopup",value:function(){var e=d(f().mark((function e(t,n,r,i){var a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(St(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),s="",u=Object.assign(Object.assign({},ia),{width:r.toString(),height:i.toString(),top:a,left:o}),c=L().toLowerCase();n&&(s=vn(c)?"_blank":n),dn(c)&&(t=t||"http://localhost",u.scrollbars="yes");var l=Object.entries(u).reduce((function(e,t){var n=v(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(function(){var e;return kn(arguments.length>0&&void 0!==arguments[0]?arguments[0]:L())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==s)return function(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",s),new aa(null);var f=window.open(t||"",s,l);At(f,e,"popup-blocked");try{f.focus()}catch(e){}return new aa(f)}(t,oa(t,n,r,Nt(),i),Qr())));case 1:case"end":return e.stop()}}),e,this)})));function t(t,n,r,i){return e.apply(this,arguments)}return t}()},{key:"_openRedirect",value:function(){var e=d(f().mark((function e(t,n,r,i){var a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=oa(t,n,r,Nt(),i),Gr().location.href=a,e.abrupt("return",new Promise((function(){})));case 5:case"end":return e.stop()}}),e,this)})));function t(t,n,r,i){return e.apply(this,arguments)}return t}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(St(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=d(f().mark((function e(t){var n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,function(){var e=d(f().mark((function e(t){var n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$i(t);case 2:return n=e.sent,r=Gr().gapi,e.abrupt("return",(At(r,t,"internal-error"),n.open({where:document.body,url:ra(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ta,dontclear:!0},(function(e){return new Promise(function(){var n=d(f().mark((function n(r,i){var a,o,s;return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=function(){Gr().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=xt(t,"network-request-failed"),o=Gr().setTimeout((function(){i(a)}),ea.get()),e.ping(s).then(s,(function(){i(a)}));case 5:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())}))));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(t);case 2:return n=e.sent,r=new Bi(t),e.abrupt("return",(n.register("authEvent",(function(e){return At(null==e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r));case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(sa,{type:sa},(function(n){var r,i=null===(r=null==n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),wt(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(){var e=d(f().mark((function e(t){var n,r,i,a,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Qi(t);case 4:n=e.sent,r=n.authorizedDomains,i=p(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!Yi(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:wt(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])})));return function(t){return e.apply(this,arguments)}}()(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return wn()||pn()||kn()}}]),e}()),this.cordovaResolver=Ct(function(){function e(){k(this,e),this._redirectPersistence=zr,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Ui,this._overrideRedirectResult=Li}return w(e,[{key:"_initialize",value:function(){var e=d(f().mark((function e(t){var n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),r=this.eventManagers.get(n),e.abrupt("return",(r||(r=new va(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),r));case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_openPopup",value:function(e){wt(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=d(f().mark((function e(t,n,r,i){var a,o,s;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return function(e){var t,n,r,i,a,o,s,u,c,l,f=pa();At("function"==typeof(null===(t=null==f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),At(void 0!==(null===(n=null==f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),At("function"==typeof(null===(a=null===(i=null===(r=null==f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),At("function"==typeof(null===(u=null===(s=null===(o=null==f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===s?void 0:s.browsertab)||void 0===u?void 0:u.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),At("function"==typeof(null===(l=null===(c=null==f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),Ni.clear(),e.next=10,this._originValidation(t);case 10:return o=function(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:ga(),postBody:null,tenantId:e.tenantId,error:xt(e,"no-auth-event")}}(t,r,i),e.next=13,function(e,t){return ba()._set(ka(e),t)}(t,o);case 13:return e.next=15,function(){var e=d(f().mark((function e(t,n,r){var i,a,o,s,u;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=pa(),o=a.BuildInfo,St(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,function(){var e=d(f().mark((function e(t){var n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(e){if(St(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,e.abrupt("return",Array.from(new Uint8Array(r)).map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(n.sessionId);case 4:return s=e.sent,u={},e.abrupt("return",(kn()?u.ibi=o.packageName:yn()?u.apn=o.packageName:wt(t,"operation-not-supported-in-this-environment"),o.displayName&&(u.appDisplayName=o.displayName),u.sessionId=s,oa(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,u)));case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()(t,o,n);case 15:return s=e.sent,e.t0=function(){var e=d(f().mark((function e(t,n,r){var i,a,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=pa(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var s=null;function u(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"==typeof n&&n(),"function"==typeof(null==r?void 0:r.close)&&r.close()}function c(){s||(s=window.setTimeout((function(){i(xt(t,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(u),document.addEventListener("resume",c,!1),yn()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(u),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),s&&window.clearTimeout(s)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])})));return function(t,n,r){return e.apply(this,arguments)}}(),e.t1=t,e.t2=a,e.next=21,function(e){var t=pa().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}(s);case 21:return e.t3=e.sent,e.abrupt("return",(0,e.t0)(e.t1,e.t2,e.t3));case 23:case"end":return e.stop()}}),e,this)})));function t(t,n,r,i){return e.apply(this,arguments)}return t}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(){var e=d(f().mark((function e(t){var n,r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=pa(),r=n.BuildInfo,i={},kn()?i.iosBundleId=r.packageName:yn()?i.androidPackageName=r.packageName:wt(t,"operation-not-supported-in-this-environment"),e.next=4,Qi(t,i);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=pa(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(d(f().mark((function n(){return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,ma(e);case 2:t.onEvent(xa());case 3:case"end":return n.stop()}}),n)}))),500),s=function(){var n=d(f().mark((function n(r){var i,a;return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,ma(e);case 3:i=n.sent,a=null,i&&(null==r?void 0:r.url)&&(a=function(e,t){var n,r,i=function(e){var t=wa(e),n=t.link?decodeURIComponent(t.link):void 0,r=wa(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return wa(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=wa(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(e){return null}}(decodeURIComponent(a.firebaseError)):null,s=null===(r=null===(n=null==o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],u=s?xt(s):null;return u?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:u,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}(i,r.url)),t.onEvent(a||xa());case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();void 0!==r&&"function"==typeof r.subscribe&&r.subscribe(null,s);var u=i,c="".concat(a.packageName.toLowerCase(),"://");pa().handleOpenURL=function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&s({url:t}),"function"==typeof u)try{u(t)}catch(t){console.error(t)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}()),this.underlyingResolver=null,this._redirectPersistence=zr,this._completeRedirectFn=Ui,this._overrideRedirectResult=Li}return w(e,[{key:"_initialize",value:function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_openPopup",value:function(){var e=d(f().mark((function e(t,n,r,i){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));function t(t,n,r,i){return e.apply(this,arguments)}return t}()},{key:"_openRedirect",value:function(){var e=d(f().mark((function e(t,n,r,i){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));function t(t,n,r,i){return e.apply(this,arguments)}return t}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return Sa()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return La(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=d(f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!!Sa()&&new Promise((function(e){var t=setTimeout((function(){e(!1)}),1e3);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 1:case"end":return e.stop()}}),e)})))();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),e}();function Fa(e){return e.unwrap()}function Ua(e){var t=(e instanceof B?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof B)&&"temporaryProof"in t&&"phoneNumber"in t)return wi.credentialFromResult(e);var n,r=t.providerId;if(!r||"password"===r)return null;switch(r){case"google.com":n=Hn;break;case"facebook.com":n=Gn;break;case"github.com":n=Yn;break;case"twitter.com":n=Zn;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,s=t.pendingToken,u=t.nonce;return a||o||i||s?s?r.startsWith("saml.")?Jn._create(r,s):Vn._fromParams({providerId:r,signInMethod:r,pendingToken:s,idToken:i,accessToken:a}):new Wn(r).credential({idToken:i,accessToken:a,rawNonce:u}):null}return e instanceof B?n.credentialFromError(e):n.credentialFromResult(e)}function Va(e,t){return t.catch((function(t){throw t instanceof B&&function(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===t.code)t.resolver=new Ba(e,function(e,t){var n,r=ee(e),i=t;return At(t.customData.operationType,r,"argument-error"),At(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),Lr._fromError(r,i)}(e,t));else if(r){var i=Ua(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,Ua(t)),additionalUserInfo:Dr(e),user:za.getOrCreate(r)}}))}function qa(e,t){return ja.apply(this,arguments)}function ja(){return ja=d(f().mark((function e(t,n){var r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return Va(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)}))),ja.apply(this,arguments)}var Ba=function(){function e(t,n){k(this,e),this.resolver=n,this.auth=t.wrapped()}return w(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return Va(Fa(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),za=function(){function e(t){k(this,e),this._delegate=t,this.multiFactor=function(e){var t=ee(e);return Fr.has(t)||Fr.set(t,Mr._fromUser(t)),Fr.get(t)}(t)}return w(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Va(this.auth,mr(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"linkWithPhoneNumber",value:function(){var e=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",qa(this.auth,function(){var e=d(f().mark((function e(t,n,r){var i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ee(t),e.next=3,ur(!1,i,"phone");case 3:return e.next=5,bi(i.auth,n,ee(r));case 5:return a=e.sent,e.abrupt("return",new gi(a,(function(e){return mr(i,e)})));case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"linkWithPopup",value:function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Va(this.auth,function(){var e=d(f().mark((function e(t,n,r){var i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _t((i=ee(t)).auth,n,Kn),a=xi(i.auth,r),e.abrupt("return",new Ci(i.auth,"linkViaPopup",n,a,i).executeNotNull());case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()(this._delegate,t,Ma)));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"linkWithRedirect",value:function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pa(En(this.auth));case 2:return e.abrupt("return",function(e,t,n){return function(){var e=d(f().mark((function e(t,n,r){var i,a,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _t((i=ee(t)).auth,n,Kn),a=xi(i.auth,r),e.next=5,ur(!1,i,n.providerId);case 5:return e.next=7,Di(a,i.auth);case 7:return e.next=9,qi(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 11:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()(e,t,n)}(this._delegate,t,Ma));case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Va(this.auth,gr(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return qa(this.auth,function(){var e=d(f().mark((function e(t,n,r){var i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ee(t),e.next=3,bi(i.auth,n,ee(r));case 3:return a=e.sent,e.abrupt("return",new gi(a,(function(e){return gr(i,e)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return Va(this.auth,function(){var e=d(f().mark((function e(t,n,r){var i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _t((i=ee(t)).auth,n,Kn),a=xi(i.auth,r),e.abrupt("return",new Ci(i.auth,"reauthViaPopup",n,a,i).executeNotNull());case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()(this._delegate,e,Ma))}},{key:"reauthenticateWithRedirect",value:function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pa(En(this.auth));case 2:return e.abrupt("return",function(e,t,n){return function(){var e=d(f().mark((function e(t,n,r){var i,a,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _t((i=ee(t)).auth,n,Kn),a=xi(i.auth,r),e.next=5,Di(a,i.auth);case 5:return e.next=7,qi(i);case 7:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 9:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()(e,t,n)}(this._delegate,t,Ma));case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"sendEmailVerification",value:function(e){return function(){var e=d(f().mark((function e(t,n){var r,i,a,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ee(t),e.next=3,t.getIdToken();case 3:return e.t0=e.sent,i={requestType:"VERIFY_EMAIL",idToken:e.t0},n&&xr(r.auth,i,n),e.next=8,function(){var e=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Rn(t,n));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(r.auth,i);case 8:if(a=e.sent,o=a.email,e.t1=o!==t.email,!e.t1){e.next=14;break}return e.next=14,t.reload();case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this._delegate,e)}},{key:"unlink",value:function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,function(){var e=d(f().mark((function e(t,n){var r,i,a,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ee(t),e.next=3,ur(!0,r,n);case 3:return e.t0=function(){var e=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",qt(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=ar(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"updateEmail",value:function(e){return function(e,t){return Er(ee(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return Er(ee(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(){var e=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,or(ee(t),n);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(){var e=d(f().mark((function e(t,n){var r,i,a,o,s,u;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=ee(t),e.next=6,a.getIdToken();case 6:return e.t0=e.sent,e.t1=r,e.t2=i,e.t3=!0,o={idToken:e.t0,displayName:e.t1,photoUrl:e.t2,returnSecureToken:e.t3},e.next=13,Zt(a,function(){var e=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",qt(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(a.auth,o));case 13:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(u=a.providerData.find((function(e){return"password"===e.providerId})))&&(u.displayName=a.displayName,u.photoURL=a.photoURL),e.next=19,a._updateTokensIfNecessary(s);case 19:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(){var e=d(f().mark((function e(t,n,r){var i,a,o,s;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ee(t),e.next=3,t.getIdToken();case 3:return e.t0=e.sent,e.t1=n,a={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:e.t0,newEmail:e.t1},r&&xr(i.auth,a,r),e.next=9,function(){var e=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Rn(t,n));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(i.auth,a);case 9:if(o=e.sent,s=o.email,e.t2=s!==t.email,!e.t2){e.next=15;break}return e.next=15,t.reload();case 15:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();za.USER_MAP=new WeakMap;var Ka=At,Qa=function(){function e(t,n){if(k(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;Ka(r,"invalid-api-key",{appName:t.name}),Ka(r,"invalid-api-key",{appName:t.name});var i="undefined"!=typeof window?Ma:void 0;this._delegate=n.initialize({options:{persistence:Ga(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(mt),this.linkUnderlyingAuth()}return w(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?za.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){!function(e,t,n){var r=En(e);At(r._canInitEmulator,r,"emulator-config-failed"),At(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null==n?void 0:n.disableWarnings),a=Tn(t),o=function(e){var t=Tn(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:Sn(r.substr(a.length+1))}}var o=r.split(":"),s=v(o,2);return{host:s[0],port:Sn(s[1])}}(t),s=o.host,u=o.port,c=null===u?"":":".concat(u);r.config.emulator={url:"".concat(a,"//").concat(s).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:u,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(){var e=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,function(){var e=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",qt(t,"POST","/v1/accounts:update",Vt(t,n)));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(ee(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this._delegate,e)}},{key:"checkActionCode",value:function(e){return Ir(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(){var e=d(f().mark((function e(t,n,r){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Cn(ee(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Va(this._delegate,function(){var e=d(f().mark((function e(t,n,r){var i,a,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=En(t),e.next=3,$n(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,tr._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(){var e=d(f().mark((function e(t,n){var r,i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={identifier:n,continueUri:Pt()?Nt():"http://localhost"},e.next=3,function(){var e=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",qt(t,"POST","/v1/accounts:createAuthUri",Vt(t,n)));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(ee(t),r);case 3:return i=e.sent,a=i.signinMethods,e.abrupt("return",a||[]);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=Bn.parseLink(t);return"EMAIL_SIGNIN"===(null==n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=d(f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ka(Ta(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,function(){var e=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,En(t)._initializationPromise;case 2:return e.abrupt("return",Ui(t,n,!1));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this._delegate,Ma);case 3:return t=e.sent,e.abrupt("return",t?Va(this._delegate,Promise.resolve(t)):{credential:null,user:null});case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){En(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=Wa(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=Wa(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(){var e=d(f().mark((function e(t,n,r){var i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ee(t),a={requestType:"EMAIL_SIGNIN",email:n},At(r.handleCodeInApp,i,"argument-error"),r&&xr(i,a,r),e.next=5,function(){var e=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Rn(t,n));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(i,a);case 5:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(){var e=d(f().mark((function e(t,n,r){var i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ee(t),a={requestType:"PASSWORD_RESET",email:n},r&&xr(i,a,r),e.next=4,function(){var e=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Rn(t,n));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(i,a);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=d(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=(function(e,t){Ca(Object.values(Oa).includes(t),e,"invalid-persistence-type"),V()?Ca(t!==Oa.SESSION,e,"unsupported-persistence-type"):F()?Ca(t===Oa.NONE,e,"unsupported-persistence-type"):Aa()?Ca(t===Oa.NONE||t===Oa.LOCAL&&j(),e,"unsupported-persistence-type"):Ca(t===Oa.NONE||Ea(),e,"unsupported-persistence-type")}(this._delegate,t),t),e.next=e.t0===Oa.SESSION?3:e.t0===Oa.LOCAL?5:e.t0===Oa.NONE?14:16;break;case 3:return n=zr,e.abrupt("break",17);case 5:return e.next=7,Ct(ai)._isAvailable();case 7:if(!e.sent){e.next=11;break}e.t1=ai,e.next=12;break;case 11:e.t1=jr;case 12:return n=e.t1,e.abrupt("break",17);case 14:return n=cn,e.abrupt("break",17);case 16:return e.abrupt("return",wt("argument-error",{appName:this._delegate.name}));case 17:return e.abrupt("return",this._delegate.setPersistence(n));case 18:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return Va(this._delegate,function(){var e=d(f().mark((function e(t){var n,r,i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=En(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new tr({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,$n(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,tr._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this._delegate))}},{key:"signInWithCredential",value:function(e){return Va(this._delegate,pr(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return Va(this._delegate,function(){var e=d(f().mark((function e(t,n){var r,i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=En(t),e.next=3,function(){var e=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Kt(t,"POST","/v1/accounts:signInWithCustomToken",Vt(t,n)));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,tr._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return Va(this._delegate,function(e,t,n){return pr(ee(e),zn.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return Va(this._delegate,function(){var e=d(f().mark((function e(t,n,r){var i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ee(t),a=zn.credentialWithLink(n,r||Nt()),e.abrupt("return",(At(a._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),pr(i,a)));case 2:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return qa(this._delegate,function(){var e=d(f().mark((function e(t,n,r){var i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=En(t),e.next=3,bi(i,n,ee(r));case 3:return a=e.sent,e.abrupt("return",new gi(a,(function(e){return pr(i,e)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(Ka(Ta(),this._delegate,"operation-not-supported-in-this-environment"),Va(this._delegate,function(){var e=d(f().mark((function e(t,n,r){var i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=En(t),_t(t,n,Kn),a=xi(i,r),e.abrupt("return",new Ci(i,"signInViaPopup",n,a).executeNotNull());case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()(this._delegate,t,Ma))));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"signInWithRedirect",value:function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ka(Ta(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Pa(this._delegate);case 3:return e.abrupt("return",function(e,t,n){return function(){var e=d(f().mark((function e(t,n,r){var i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=En(t),_t(t,n,Kn),a=xi(i,r),e.next=5,Di(a,i);case 5:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 6:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()(e,t,n)}(this._delegate,t,Ma));case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(){var e=d(f().mark((function e(t,n){var r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ir(ee(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function Wa(e,t,n){var r,i=e;"function"!=typeof e&&(i=(r=e).next,t=r.error,n=r.complete);var a=i;return{next:function(e){return a(e&&za.getOrCreate(e))},error:t,complete:n}}function Ga(e,t){var n=function(e,t){var n=Ra();if(!n)return[];var r=ln(Na,e,t);switch(n.getItem(r)){case Oa.NONE:return[cn];case Oa.LOCAL:return[ai,zr];case Oa.SESSION:return[zr];default:return[]}}(e,t);if("undefined"==typeof self||n.includes(ai)||n.push(ai),"undefined"!=typeof window)for(var r=0,i=[jr,zr];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(cn)||n.push(cn),n}Qa.Persistence=Oa;var Ha=function(){function e(){k(this,e),this.providerId="phone",this._delegate=new wi(Fa(pt.auth()))}return w(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return wi.credential(e,t)}}]),e}();Ha.PHONE_SIGN_IN_METHOD=wi.PHONE_SIGN_IN_METHOD,Ha.PROVIDER_ID=wi.PROVIDER_ID;var Ya,Ja=At;(Ya=pt).INTERNAL.registerComponent(new ne("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new Qa(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:zn,FacebookAuthProvider:Gn,GithubAuthProvider:Yn,GoogleAuthProvider:Hn,OAuthProvider:Wn,SAMLAuthProvider:Xn,PhoneAuthProvider:Ha,PhoneMultiFactorGenerator:ca,RecaptchaVerifier:function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:pt.app();k(this,e),Ja(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new yi(t,n,i.auth()),this.type=this._delegate.type}return w(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}(),TwitterAuthProvider:Zn,Auth:Qa,AuthCredential:On,Error:B}).setInstantiationMode("LAZY").setMultipleInstances(!1)),Ya.registerVersion("@firebase/auth-compat","0.2.15");var Xa,Za="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},$a={},eo=eo||{},to=Za||self;function no(){}function ro(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function io(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var ao="closure_uid_"+(1e9*Math.random()>>>0),oo=0;function so(e,t,n){return e.call.apply(e.bind,arguments)}function uo(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function co(e,t,n){return(co=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?so:uo).apply(null,arguments)}function lo(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function fo(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function ho(){this.s=this.s,this.o=this.o}var po={};ho.prototype.s=!1,ho.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,ao)&&e[ao]||(e[ao]=++oo)}(this);delete po[e]}},ho.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var vo=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},mo=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"==typeof e?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};function yo(e){return Array.prototype.concat.apply([],arguments)}function go(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function bo(e){return/^[\s\xa0]*$/.test(e)}var ko,wo=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function xo(e,t){return-1!=e.indexOf(t)}function Io(e,t){return e<t?-1:e>t?1:0}e:{var _o=to.navigator;if(_o){var Eo=_o.userAgent;if(Eo){ko=Eo;break e}}ko=""}function Ao(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function To(e){var t={};for(var n in e)t[n]=e[n];return t}var So="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Oo(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<So.length;a++)n=So[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Co(e){return Co[" "](e),e}Co[" "]=no;var No,Po,Do=xo(ko,"Opera"),Ro=xo(ko,"Trident")||xo(ko,"MSIE"),Lo=xo(ko,"Edge"),Mo=Lo||Ro,Fo=xo(ko,"Gecko")&&!(xo(ko.toLowerCase(),"webkit")&&!xo(ko,"Edge"))&&!(xo(ko,"Trident")||xo(ko,"MSIE"))&&!xo(ko,"Edge"),Uo=xo(ko.toLowerCase(),"webkit")&&!xo(ko,"Edge");function Vo(){var e=to.document;return e?e.documentMode:void 0}e:{var qo="",jo=(Po=ko,Fo?/rv:([^\);]+)(\)|;)/.exec(Po):Lo?/Edge\/([\d\.]+)/.exec(Po):Ro?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Po):Uo?/WebKit\/(\S+)/.exec(Po):Do?/(?:Version)[ \/]?(\S+)/.exec(Po):void 0);if(jo&&(qo=jo?jo[1]:""),Ro){var Bo=Vo();if(null!=Bo&&Bo>parseFloat(qo)){No=String(Bo);break e}}No=qo}var zo={};function Ko(){return e=zo,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){for(var e=0,t=wo(String(No)).split("."),n=wo("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=Io(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||Io(0==a[2].length,0==o[2].length)||Io(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}();var e}var Qo=to.document&&Ro&&(Vo()||parseInt(No,10))||void 0,Wo=function(){if(!to.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{to.addEventListener("test",no,t),to.removeEventListener("test",no,t)}catch(e){}return e}();function Go(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function Ho(e,t){if(Go.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Fo){e:{try{Co(t.nodeName);var i=!0;break e}catch(e){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:Yo[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Ho.Z.h.call(this)}}Go.prototype.h=function(){this.defaultPrevented=!0},fo(Ho,Go);var Yo={2:"touch",3:"pen",4:"mouse"};Ho.prototype.h=function(){Ho.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Jo="closure_listenable_"+(1e6*Math.random()|0),Xo=0;function Zo(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++Xo,this.ca=this.fa=!1}function $o(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function es(e){this.src=e,this.g={},this.h=0}function ts(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=vo(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&($o(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function ns(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ca&&a.listener==t&&a.capture==!!n&&a.ia==r)return i}return-1}es.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=ns(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new Zo(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var rs="closure_lm_"+(1e6*Math.random()|0),is={};function as(e,t,n,r,i){if(r&&r.once)return ss(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)as(e,t[a],n,r,i);return null}return n=ps(n),e&&e[Jo]?e.N(t,n,io(r)?!!r.capture:!!r,i):os(e,t,n,!1,r,i)}function os(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=io(i)?!!i.capture:!!i,s=hs(e);if(s||(e[rs]=s=new es(e)),(n=s.add(t,n,r,o,a)).proxy)return n;if(r=function(){var e=fs;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Wo||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(ls(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function ss(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)ss(e,t[a],n,r,i);return null}return n=ps(n),e&&e[Jo]?e.O(t,n,io(r)?!!r.capture:!!r,i):os(e,t,n,!0,r,i)}function us(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)us(e,t[a],n,r,i);else r=io(r)?!!r.capture:!!r,n=ps(n),e&&e[Jo]?(e=e.i,(t=String(t).toString())in e.g&&-1<(n=ns(a=e.g[t],n,r,i))&&($o(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--))):e&&(e=hs(e))&&(t=e.g[t.toString()],e=-1,t&&(e=ns(t,n,r,i)),(n=-1<e?t[e]:null)&&cs(n))}function cs(e){if("number"!=typeof e&&e&&!e.ca){var t=e.src;if(t&&t[Jo])ts(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(ls(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=hs(t))?(ts(n,e),0==n.h&&(n.src=null,t[rs]=null)):$o(e)}}}function ls(e){return e in is?is[e]:is[e]="on"+e}function fs(e,t){if(e.ca)e=!0;else{t=new Ho(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&cs(e),e=n.call(r,t)}return e}function hs(e){return(e=e[rs])instanceof es?e:null}var ds="__closure_events_fn_"+(1e9*Math.random()>>>0);function ps(e){return"function"==typeof e?e:(e[ds]||(e[ds]=function(t){return e.handleEvent(t)}),e[ds])}function vs(){ho.call(this),this.i=new es(this),this.P=this,this.I=null}function ms(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"==typeof t)t=new Go(t,e);else if(t instanceof Go)t.target=t.target||e;else{var i=t;Oo(t=new Go(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=ys(o,r,!0,t)&&i}if(i=ys(o=t.g=e,r,!0,t)&&i,i=ys(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=ys(o=t.g=n[a],r,!1,t)&&i}function ys(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ca&&o.capture==n){var s=o.listener,u=o.ia||o.src;o.fa&&ts(e.i,o),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}fo(vs,ho),vs.prototype[Jo]=!0,vs.prototype.removeEventListener=function(e,t,n,r){us(this,e,t,n,r)},vs.prototype.M=function(){if(vs.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)$o(n[r]);delete t.g[e],t.h--}}this.I=null},vs.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},vs.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var gs=to.JSON.stringify;function bs(){var e=As,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var ks,ws=new(function(){function e(t,n){k(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return w(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new xs}),(function(e){return e.reset()})),xs=function(){function e(){k(this,e),this.next=this.g=this.h=null}return w(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function Is(e){to.setTimeout((function(){throw e}),0)}function _s(e,t){ks||function(){var e=to.Promise.resolve(void 0);ks=function(){e.then(Ts)}}(),Es||(ks(),Es=!0),As.add(e,t)}var Es=!1,As=new(function(){function e(){k(this,e),this.h=this.g=null}return w(e,[{key:"add",value:function(e,t){var n=ws.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}());function Ts(){for(var e;e=bs();){try{e.h.call(e.g)}catch(e){Is(e)}var t=ws;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Es=!1}function Ss(e,t){vs.call(this),this.h=e||1,this.g=t||to,this.j=co(this.kb,this),this.l=Date.now()}function Os(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function Cs(e,t,n){if("function"==typeof e)n&&(e=co(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=co(e.handleEvent,e)}return 2147483647<Number(t)?-1:to.setTimeout(e,t||0)}function Ns(e){e.g=Cs((function(){e.g=null,e.i&&(e.i=!1,Ns(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}fo(Ss,vs),(Xa=Ss.prototype).da=!1,Xa.S=null,Xa.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),ms(this,"tick"),this.da&&(Os(this),this.start()))}},Xa.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Xa.M=function(){Ss.Z.M.call(this),Os(this),delete this.g};var Ps=function(e){y(n,e);var t=g(n);function n(e,r){var i;return k(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return w(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:Ns(this)}},{key:"M",value:function(){s(u(n.prototype),"M",this).call(this),this.g&&(to.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(ho);function Ds(e){ho.call(this),this.h=e,this.g={}}fo(Ds,ho);var Rs=[];function Ls(e,t,n,r){Array.isArray(n)||(n&&(Rs[0]=n.toString()),n=Rs);for(var i=0;i<n.length;i++){var a=as(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function Ms(e){Ao(e.g,(function(e,t){this.g.hasOwnProperty(t)&&cs(e)}),e),e.g={}}function Fs(){this.g=!0}function Us(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return gs(n)}catch(e){return t}}(e,n)+(r?" "+r:"")}))}Ds.prototype.M=function(){Ds.Z.M.call(this),Ms(this)},Ds.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Fs.prototype.Aa=function(){this.g=!1},Fs.prototype.info=function(){};var Vs={},qs=null;function js(){return qs=qs||new vs}function Bs(e){Go.call(this,Vs.Ma,e)}function zs(e){var t=js();ms(t,new Bs(t,e))}function Ks(e,t){Go.call(this,Vs.STAT_EVENT,e),this.stat=t}function Qs(e){var t=js();ms(t,new Ks(t,e))}function Ws(e,t){Go.call(this,Vs.Na,e),this.size=t}function Gs(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return to.setTimeout((function(){e()}),t)}Vs.Ma="serverreachability",fo(Bs,Go),Vs.STAT_EVENT="statevent",fo(Ks,Go),Vs.Na="timingevent",fo(Ws,Go);var Hs={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Ys={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Js(){}function Xs(e){return e.h||(e.h=e.i())}function Zs(){}Js.prototype.h=null;var $s,eu={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function tu(){Go.call(this,"d")}function nu(){Go.call(this,"c")}function ru(){}function iu(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new Ds(this),this.P=ou,e=Mo?125:void 0,this.W=new Ss(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new au}function au(){this.i=null,this.g="",this.h=!1}fo(tu,Go),fo(nu,Go),fo(ru,Js),ru.prototype.g=function(){return new XMLHttpRequest},ru.prototype.i=function(){return{}},$s=new ru;var ou=45e3,su={},uu={};function cu(e,t,n){e.K=1,e.v=Pu(Au(t)),e.s=n,e.U=!0,lu(e,null)}function lu(e,t){e.F=Date.now(),pu(e),e.A=Au(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),Qu(n.h,"t",r),e.C=0,n=e.l.H,e.h=new au,e.g=Qc(e.l,n?t:null,!e.s),0<e.O&&(e.L=new Ps(co(e.Ia,e,e.g),e.O)),Ls(e.V,e.g,"readystatechange",e.gb),t=e.H?To(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),zs(1),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",s=a.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function fu(e){return!!e.g&&"GET"==e.u&&2!=e.K&&e.l.Ba}function hu(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=du(e,n))==uu){4==t&&(e.o=4,Qs(14),i=!1),Us(e.j,e.m,null,"[Incomplete Response]");break}if(r==su){e.o=4,Qs(15),Us(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Us(e.j,e.m,r,null),bu(e,r)}fu(e)&&r!=uu&&r!=su&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Qs(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Fc(t),t.L=!0,Qs(11))):(Us(e.j,e.m,n,"[Invalid Chunked Response]"),gu(e),yu(e))}function du(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?uu:(n=Number(t.substring(n,r)),isNaN(n)?su:(r+=1)+n>t.length?uu:(t=t.substr(r,n),e.C=r+n,t))}function pu(e){e.Y=Date.now()+e.P,vu(e,e.P)}function vu(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Gs(co(e.eb,e),t)}function mu(e){e.B&&(to.clearTimeout(e.B),e.B=null)}function yu(e){0==e.l.G||e.I||qc(e.l,e)}function gu(e){mu(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,Os(e.W),Ms(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function bu(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||Xu(n.i,e)))if(n.I=e.N,!e.J&&Xu(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(e){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;Vc(n),Sc(n)}Mc(n),Qs(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=Gs(co(n.ab,n),6e3));if(1>=Ju(n.i)&&n.ka){try{n.ka()}catch(e){}n.ka=void 0}}else Bc(n,11)}else if((e.J||n.g==e)&&Vc(n),!bo(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.U=a[0],a=a[1],2==n.G)if("c"==a[0]){n.J=a[1],n.la=a[2];var o=a[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var s=a[4];null!=s&&(n.za=s,n.h.info("SVER="+n.za));var u=a[5];null!=u&&"number"==typeof u&&0<u&&(r=1.5*u,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;!f.g&&(xo(l,"spdy")||xo(l,"quic")||xo(l,"h2"))&&(f.j=f.l,f.g=new Set,f.h&&(Zu(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.sa=h,Nu(r.F,r.D,h))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=Kc(r,r.H?r.la:null,r.W),d.J){$u(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(mu(p),pu(p)),r.g=d}else Lc(r);0<n.l.length&&Nc(n)}else"stop"!=a[0]&&"close"!=a[0]||Bc(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Bc(n,7):Tc(n):"noop"!=a[0]&&n.j&&n.j.wa(a),n.A=0)}zs(4)}catch(e){}}function ku(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(ro(e)||"string"==typeof e)mo(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(ro(e)||"string"==typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"==typeof e)return e.split("");if(ro(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}}function wu(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof wu)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function xu(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];Iu(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)Iu(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function Iu(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(Xa=iu.prototype).setTimeout=function(e){this.P=e},Xa.gb=function(e){e=e.target;var t=this.L;t&&3==xc(e)?t.l():this.Ia(e)},Xa.Ia=function(e){try{if(e==this.g)e:{var t=xc(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||Mo||this.g&&(this.h.h||this.g.ga()||Ic(this.g)))){this.I||4!=t||7==n||zs(8==n||0>=r?3:2),mu(this);var i=this.g.ba();this.N=i;t:if(fu(this)){var a=Ic(this.g);e="";var o=a.length,s=4==xc(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){gu(this),yu(this);var u="";break t}this.h.i=new to.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:s&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!bo(c)){var f=c;break t}}f=null}if(!(i=f)){this.i=!1,this.o=3,Qs(12),gu(this),yu(this);break e}Us(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,bu(this,i)}this.U?(hu(this,t,u),Mo&&this.i&&3==t&&(Ls(this.V,this.W,"tick",this.fb),this.W.start())):(Us(this.j,this.m,u,null),bu(this,u)),4==t&&gu(this),this.i&&!this.I&&(4==t?qc(this.l,this):(this.i=!1,pu(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,Qs(12)):(this.o=0,Qs(13)),gu(this),yu(this)}}}catch(e){}},Xa.fb=function(){if(this.g){var e=xc(this.g),t=this.g.ga();this.C<t.length&&(mu(this),hu(this,e,t),this.i&&4!=e&&pu(this))}},Xa.cancel=function(){this.I=!0,gu(this)},Xa.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(zs(3),Qs(17)),gu(this),this.o=2,yu(this)):vu(this,this.Y-e)},(Xa=wu.prototype).R=function(){xu(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},Xa.T=function(){return xu(this),this.g.concat()},Xa.get=function(e,t){return Iu(this.h,e)?this.h[e]:t},Xa.set=function(e,t){Iu(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},Xa.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}};var _u=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Eu(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof Eu){this.g=void 0!==t?t:e.g,Tu(this,e.j),this.s=e.s,Su(this,e.i),Ou(this,e.m),this.l=e.l,t=e.h;var n=new ju;n.i=t.i,t.g&&(n.g=new wu(t.g),n.h=t.h),Cu(this,n),this.o=e.o}else e&&(n=String(e).match(_u))?(this.g=!!t,Tu(this,n[1]||"",!0),this.s=Du(n[2]||""),Su(this,n[3]||"",!0),Ou(this,n[4]),this.l=Du(n[5]||"",!0),Cu(this,n[6]||"",!0),this.o=Du(n[7]||"")):(this.g=!!t,this.h=new ju(null,this.g))}function Au(e){return new Eu(e)}function Tu(e,t,n){e.j=n?Du(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Su(e,t,n){e.i=n?Du(t,!0):t}function Ou(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Cu(e,t,n){t instanceof ju?(e.h=t,function(e,t){t&&!e.j&&(Bu(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(zu(this,t),Qu(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=Ru(t,Vu)),e.h=new ju(t,e.g))}function Nu(e,t,n){e.h.set(t,n)}function Pu(e){return Nu(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Du(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Ru(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,Lu),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Lu(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Eu.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Ru(t,Mu,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Ru(t,Mu,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(Ru(n,"/"==n.charAt(0)?Uu:Fu,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Ru(n,qu)),e.join("")};var Mu=/[#\/\?@]/g,Fu=/[#\?:]/g,Uu=/[#\?]/g,Vu=/[#\?@]/g,qu=/#/g;function ju(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Bu(e){e.g||(e.g=new wu,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function zu(e,t){Bu(e),t=Wu(e,t),Iu(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,Iu((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&xu(e)))}function Ku(e,t){return Bu(e),t=Wu(e,t),Iu(e.g.h,t)}function Qu(e,t,n){zu(e,t),0<n.length&&(e.i=null,e.g.set(Wu(e,t),go(n)),e.h+=n.length)}function Wu(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Gu(e){this.l=e||Hu,e=to.PerformanceNavigationTiming?0<(e=to.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(to.g&&to.g.Ea&&to.g.Ea()&&to.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Xa=ju.prototype).add=function(e,t){Bu(this),this.i=null,e=Wu(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Xa.forEach=function(e,t){Bu(this),this.g.forEach((function(n,r){mo(n,(function(n){e.call(t,n,r,this)}),this)}),this)},Xa.T=function(){Bu(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Xa.R=function(e){Bu(this);var t=[];if("string"==typeof e)Ku(this,e)&&(t=yo(t,this.g.get(Wu(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=yo(t,e[n])}return t},Xa.set=function(e,t){return Bu(this),this.i=null,Ku(this,e=Wu(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Xa.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},Xa.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.i=e.join("&")};var Hu=10;function Yu(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Ju(e){return e.h?1:e.g?e.g.size:0}function Xu(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Zu(e,t){e.g?e.g.add(t):e.h=t}function $u(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function ec(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=p(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return go(e.i)}function tc(){}function nc(){this.g=new tc}function rc(e,t,n){var r=n||"";try{ku(e,(function(e,n){var i=e;io(e)&&(i=gs(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(e){throw t.push(r+"type="+encodeURIComponent("_badmap")),e}}function ic(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(e){}}function ac(e){this.l=e.$b||null,this.j=e.ib||!1}function oc(e,t){vs.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=sc,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Gu.prototype.cancel=function(){if(this.i=ec(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=p(this.g.values());try{for(t.s();!(e=t.n()).done;)e.value.cancel()}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},tc.prototype.stringify=function(e){return to.JSON.stringify(e,void 0)},tc.prototype.parse=function(e){return to.JSON.parse(e,void 0)},fo(ac,Js),ac.prototype.g=function(){return new oc(this.l,this.j)},ac.prototype.i=function(e){return function(){return e}}({}),fo(oc,vs);var sc=0;function uc(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function cc(e){e.readyState=4,e.l=null,e.j=null,e.A=null,lc(e)}function lc(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Xa=oc.prototype).open=function(e,t){if(this.readyState!=sc)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,lc(this)},Xa.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||to).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},Xa.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,cc(this)),this.readyState=sc},Xa.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,lc(this)),this.g&&(this.readyState=3,lc(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==to.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;uc(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},Xa.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?cc(this):lc(this),3==this.readyState&&uc(this)}},Xa.Ua=function(e){this.g&&(this.response=this.responseText=e,cc(this))},Xa.Ta=function(e){this.g&&(this.response=e,cc(this))},Xa.ha=function(){this.g&&cc(this)},Xa.setRequestHeader=function(e,t){this.v.append(e,t)},Xa.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Xa.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(oc.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var fc=to.JSON.parse;function hc(e){vs.call(this),this.headers=new wu,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=dc,this.K=this.L=!1}fo(hc,vs);var dc="",pc=/^https?$/i,vc=["POST","PUT"];function mc(e){return"content-type"==e.toLowerCase()}function yc(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,gc(e),kc(e)}function gc(e){e.D||(e.D=!0,ms(e,"complete"),ms(e,"error"))}function bc(e){if(e.h&&void 0!==eo&&(!e.C[1]||4!=xc(e)||2!=e.ba()))if(e.v&&4==xc(e))Cs(e.Fa,0,e);else if(ms(e,"readystatechange"),4==xc(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(_u)[1]||null;if(!a&&to.self&&to.self.location){var o=to.self.location.protocol;a=o.substr(0,o.length-1)}i=!pc.test(a?a.toLowerCase():"")}t=i}if(t)ms(e,"complete"),ms(e,"success");else{e.m=6;try{var s=2<xc(e)?e.g.statusText:""}catch(e){s=""}e.j=s+" ["+e.ba()+"]",gc(e)}}finally{kc(e)}}}function kc(e,t){if(e.g){wc(e);var n=e.g,r=e.C[0]?no:null;e.g=null,e.C=null,t||ms(e,"ready");try{n.onreadystatechange=r}catch(e){}}}function wc(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(to.clearTimeout(e.A),e.A=null)}function xc(e){return e.g?e.g.readyState:0}function Ic(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case dc:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(e){return null}}function _c(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return Ao(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):Nu(e,t,n))}function Ec(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Ac(e){this.za=0,this.l=[],this.h=new Fs,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Ec("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Ec("baseRetryDelayMs",5e3,e),this.$a=Ec("retryDelaySeedMs",1e4,e),this.Ya=Ec("forwardChannelMaxRetries",2,e),this.ra=Ec("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new Gu(e&&e.concurrentRequestLimit),this.Ca=new nc,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function Tc(e){if(Oc(e),3==e.G){var t=e.V++,n=Au(e.F);Nu(n,"SID",e.J),Nu(n,"RID",t),Nu(n,"TYPE","terminate"),Dc(e,n),(t=new iu(e,e.h,t,void 0)).K=2,t.v=Pu(Au(n)),n=!1,to.navigator&&to.navigator.sendBeacon&&(n=to.navigator.sendBeacon(t.v.toString(),"")),!n&&to.Image&&((new Image).src=t.v,n=!0),n||(t.g=Qc(t.l,null),t.g.ea(t.v)),t.F=Date.now(),pu(t)}zc(e)}function Sc(e){e.g&&(Fc(e),e.g.cancel(),e.g=null)}function Oc(e){Sc(e),e.u&&(to.clearTimeout(e.u),e.u=null),Vc(e),e.i.cancel(),e.m&&("number"==typeof e.m&&to.clearTimeout(e.m),e.m=null)}function Cc(e,t){e.l.push(new(function(){function e(t,n){k(this,e),this.h=t,this.g=n}return w(e)}())(e.Za++,t)),3==e.G&&Nc(e)}function Nc(e){Yu(e.i)||e.m||(e.m=!0,_s(e.Ha,e),e.C=0)}function Pc(e,t){var n;n=t?t.m:e.V++;var r=Au(e.F);Nu(r,"SID",e.J),Nu(r,"RID",n),Nu(r,"AID",e.U),Dc(e,r),e.o&&e.s&&_c(r,e.o,e.s),n=new iu(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=Rc(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),Zu(e.i,n),cu(n,r,t)}function Dc(e,t){e.j&&ku({},(function(e,n){Nu(t,n,e)}))}function Rc(e,t,n){n=Math.min(e.l.length,n);var r=e.j?co(e.j.Oa,e.j,e):null;e:for(var i=e.l,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var s=!0,u=0;u<n;u++){var c=i[u].h,l=i[u].g;if(0>(c-=a))a=Math.max(0,i[u].h-100),s=!1;else try{rc(l,o,"req"+c+"_")}catch(e){r&&r(l)}}if(s){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function Lc(e){e.g||e.u||(e.Y=1,_s(e.Ga,e),e.A=0)}function Mc(e){return!(e.g||e.u||3<=e.A||(e.Y++,e.u=Gs(co(e.Ga,e),jc(e,e.A)),e.A++,0))}function Fc(e){null!=e.B&&(to.clearTimeout(e.B),e.B=null)}function Uc(e){e.g=new iu(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=Au(e.oa);Nu(t,"RID","rpc"),Nu(t,"SID",e.J),Nu(t,"CI",e.N?"0":"1"),Nu(t,"AID",e.U),Dc(e,t),Nu(t,"TYPE","xmlhttp"),e.o&&e.s&&_c(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=Pu(Au(t)),n.s=null,n.U=!0,lu(n,e)}function Vc(e){null!=e.v&&(to.clearTimeout(e.v),e.v=null)}function qc(e,t){var n=null;if(e.g==t){Vc(e),Fc(e),e.g=null;var r=2}else{if(!Xu(e.i,t))return;n=t.D,$u(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;ms(r=js(),new Ws(r,n,t,i)),Nc(e)}else Lc(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(Ju(e.i)>=e.i.j-(e.m?1:0)||(e.m?(e.l=t.D.concat(e.l),0):1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya)||(e.m=Gs(co(e.Ha,e,t),jc(e,e.C)),e.C++,0)))}(e,t)||2==r&&Mc(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Bc(e,5);break;case 4:Bc(e,10);break;case 3:Bc(e,6);break;default:Bc(e,2)}}function jc(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function Bc(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=co(e.jb,e);n||(n=new Eu("//www.google.com/images/cleardot.gif"),to.location&&"http"==to.location.protocol||Tu(n,"https"),Pu(n)),function(e,t){var n=new Fs;if(to.Image){var r=new Image;r.onload=lo(ic,n,r,"TestLoadImage: loaded",!0,t),r.onerror=lo(ic,n,r,"TestLoadImage: error",!1,t),r.onabort=lo(ic,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=lo(ic,n,r,"TestLoadImage: timeout",!1,t),to.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Qs(2);e.G=0,e.j&&e.j.va(t),zc(e),Oc(e)}function zc(e){e.G=0,e.I=-1,e.j&&(0==ec(e.i).length&&0==e.l.length||(e.i.i.length=0,go(e.l),e.l.length=0),e.j.ua())}function Kc(e,t,n){var r=function(e){return e instanceof Eu?Au(e):new Eu(e,void 0)}(n);if(""!=r.i)t&&Su(r,t+"."+r.i),Ou(r,r.m);else{var i=to.location;r=function(e,t,n,r){var i=new Eu(null,void 0);return e&&Tu(i,e),t&&Su(i,t),n&&Ou(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&Ao(e.aa,(function(e,t){Nu(r,t,e)})),t=e.D,n=e.sa,t&&n&&Nu(r,t,n),Nu(r,"VER",e.ma),Dc(e,r),r}function Qc(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new hc(new ac({ib:!0})):new hc(e.qa)).L=e.H,t}function Wc(){}function Gc(){if(Ro&&!(10<=Number(Qo)))throw Error("Environmental error: no available transport.")}function Hc(e,t){vs.call(this),this.g=new Ac(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!bo(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!bo(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&t in(e=this.h)&&delete e[t]),this.j=new Xc(this)}function Yc(e){tu.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Jc(){nu.call(this),this.status=1}function Xc(e){this.g=e}(Xa=hc.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():$s.g(),this.C=this.u?Xs(this.u):Xs($s),this.g.onreadystatechange=co(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(e){return void yc(this,e)}e=n||"";var i=new wu(this.headers);r&&ku(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=mc,n=e.length,r="string"==typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"==typeof e?e.charAt(t):e[t]}(i.T()),n=to.FormData&&e instanceof to.FormData,!(0<=vo(vc,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{wc(this),0<this.B&&((this.K=function(e){return Ro&&Ko()&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=co(this.pa,this)):this.A=Cs(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(e){yc(this,e)}},Xa.pa=function(){void 0!==eo&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ms(this,"timeout"),this.abort(8))},Xa.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,ms(this,"complete"),ms(this,"abort"),kc(this))},Xa.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),kc(this,!0)),hc.Z.M.call(this)},Xa.Fa=function(){this.s||(this.F||this.v||this.l?bc(this):this.cb())},Xa.cb=function(){bc(this)},Xa.ba=function(){try{return 2<xc(this)?this.g.status:-1}catch(r){return-1}},Xa.ga=function(){try{return this.g?this.g.responseText:""}catch(r){return""}},Xa.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),fc(t)}},Xa.Da=function(){return this.m},Xa.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Xa=Ac.prototype).ma=8,Xa.G=1,Xa.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(e){}},Xa.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new iu(this,this.h,e,void 0),n=this.s;if(this.P&&(n?Oo(n=To(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var a=this.l[i];if(void 0===(a="__data__"in a.g&&"string"==typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Rc(this,t,r),Nu(i=Au(this.F),"RID",e),Nu(i,"CVER",22),this.D&&Nu(i,"X-HTTP-Session-Id",this.D),Dc(this,i),this.o&&n&&_c(i,this.o,n),Zu(this.i,t),this.Ra&&Nu(i,"TYPE","init"),this.ja?(Nu(i,"$req",r),Nu(i,"SID","null"),t.$=!0,cu(t,i,null)):cu(t,i,r),this.G=2}}else 3==this.G&&(e?Pc(this,e):0==this.l.length||Yu(this.i)||Pc(this))},Xa.Ga=function(){if(this.u=null,Uc(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=Gs(co(this.bb,this),e)}},Xa.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Qs(10),Sc(this),Uc(this))},Xa.ab=function(){null!=this.v&&(this.v=null,Sc(this),Mc(this),Qs(19))},Xa.jb=function(e){e?(this.h.info("Successfully pinged google.com"),Qs(2)):(this.h.info("Failed to ping google.com"),Qs(1))},(Xa=Wc.prototype).xa=function(){},Xa.wa=function(){},Xa.va=function(){},Xa.ua=function(){},Xa.Oa=function(){},Gc.prototype.g=function(e,t){return new Hc(e,t)},fo(Hc,vs),Hc.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),_s(co(e.hb,e,t))),Qs(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=Kc(e,null,e.W),Nc(e)},Hc.prototype.close=function(){Tc(this.g)},Hc.prototype.u=function(e){if("string"==typeof e){var t={};t.__data__=e,Cc(this.g,t)}else this.v?((t={}).__data__=gs(e),Cc(this.g,t)):Cc(this.g,e)},Hc.prototype.M=function(){this.g.j=null,delete this.j,Tc(this.g),delete this.g,Hc.Z.M.call(this)},fo(Yc,tu),fo(Jc,nu),fo(Xc,Wc),Xc.prototype.xa=function(){ms(this.g,"a")},Xc.prototype.wa=function(e){ms(this.g,new Yc(e))},Xc.prototype.va=function(e){ms(this.g,new Jc(e))},Xc.prototype.ua=function(){ms(this.g,"b")},Gc.prototype.createWebChannel=Gc.prototype.g,Hc.prototype.send=Hc.prototype.u,Hc.prototype.open=Hc.prototype.m,Hc.prototype.close=Hc.prototype.close,Hs.NO_ERROR=0,Hs.TIMEOUT=8,Hs.HTTP_ERROR=6,Ys.COMPLETE="complete",Zs.EventType=eu,eu.OPEN="a",eu.CLOSE="b",eu.ERROR="c",eu.MESSAGE="d",vs.prototype.listen=vs.prototype.N,hc.prototype.listenOnce=hc.prototype.O,hc.prototype.getLastError=hc.prototype.La,hc.prototype.getLastErrorCode=hc.prototype.Da,hc.prototype.getStatus=hc.prototype.ba,hc.prototype.getResponseJson=hc.prototype.Qa,hc.prototype.getResponseText=hc.prototype.ga,hc.prototype.send=hc.prototype.ea;var Zc=$a.createWebChannelTransport=function(){return new Gc},$c=$a.getStatEventTarget=function(){return js()},el=$a.ErrorCode=Hs,tl=$a.EventType=Ys,nl=$a.Event=Vs,rl=$a.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},il=$a.FetchXmlHttpFactory=ac,al=$a.WebChannel=Zs,ol=$a.XhrIo=hc,sl="@firebase/firestore",ul=function(){function e(t){k(this,e),this.uid=t}return w(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();ul.UNAUTHENTICATED=new ul(null),ul.GOOGLE_CREDENTIALS=new ul("google-credentials-uid"),ul.FIRST_PARTY=new ul("first-party-uid"),ul.MOCK_USER=new ul("mock-user");var cl="9.8.0",ll=new de("@firebase/firestore");function fl(){return ll.logLevel}function hl(e){if(ll.logLevel<=te.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(vl);ll.debug.apply(ll,["Firestore (".concat(cl,"): ").concat(e)].concat(h(i)))}}function dl(e){if(ll.logLevel<=te.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(vl);ll.error.apply(ll,["Firestore (".concat(cl,"): ").concat(e)].concat(h(i)))}}function pl(e){if(ll.logLevel<=te.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(vl);ll.warn.apply(ll,["Firestore (".concat(cl,"): ").concat(e)].concat(h(i)))}}function vl(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function ml(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(cl,") INTERNAL ASSERTION FAILED: ")+e;throw dl(t),new Error(t)}function yl(e,t){e||ml()}function gl(e,t){return e}var bl={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},kl=function(e){y(n,e);var t=g(n);function n(e,r){var i;return k(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return w(n)}(B),wl=w((function e(){var t=this;k(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),xl=w((function e(t,n){k(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),Il=function(){function e(){k(this,e)}return w(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(ul.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),_l=function(){function e(t){k(this,e),this.token=t,this.changeListener=null}return w(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),El=function(){function e(t){k(this,e),this.t=t,this.currentUser=ul.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return w(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new wl;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new wl,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},s=function(e){hl("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return s(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?s(e):(hl("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new wl)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(hl("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(yl("string"==typeof n.accessToken),new xl(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return yl(null===e||"string"==typeof e),new ul(e)}}]),e}(),Al=w((function e(t,n,r){k(this,e),this.type="FirstParty",this.user=ul.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);var i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)})),Tl=function(){function e(t,n,r){k(this,e),this.h=t,this.l=n,this.m=r}return w(e,[{key:"getToken",value:function(){return Promise.resolve(new Al(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(ul.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),Sl=w((function e(t){k(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),Ol=function(){function e(t){k(this,e),this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}return w(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&hl("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.p;return n.p=e.token,hl("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){hl("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.g.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.g.getImmediate({optional:!0});e?i(e):hl("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(yl("string"==typeof t.token),e.p=t.token,new Sl(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}(),Cl=function(){function e(t,n){var r=this;k(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.I(e)},this.T=function(e){return n.writeSequenceNumber(e)})}return w(e,[{key:"I",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.T&&this.T(e),e}}]),e}();function Nl(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}Cl.A=-1;var Pl=function(){function e(){k(this,e)}return w(e,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=Nl(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function Dl(e,t){return e<t?-1:e>t?1:0}function Rl(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function Ll(e){return e+"\0"}var Ml=function(){function e(t,n){if(k(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new kl(bl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new kl(bl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new kl(bl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new kl(bl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return w(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Dl(this.nanoseconds,e.nanoseconds):Dl(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Fl=function(){function e(t){k(this,e),this.timestamp=t}return w(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Ml(0,0))}},{key:"max",value:function(){return new e(new Ml(253402300799,999999999))}}]),e}();function Ul(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Vl(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function ql(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var jl=function(){function e(t,n,r){k(this,e),void 0===n?n=0:n>t.length&&ml(),void 0===r?r=t.length-n:r>t.length-n&&ml(),this.segments=t,this.offset=n,this.len=r}return w(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),Bl=function(e){y(n,e);var t=g(n);function n(){return k(this,n),t.apply(this,arguments)}return w(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var s=o[a];if(s.indexOf("//")>=0)throw new kl(bl.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push.apply(e,h(s.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(jl),zl=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Kl=function(e){y(n,e);var t=g(n);function n(){return k(this,n),t.apply(this,arguments)}return w(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return zl.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new kl(bl.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new kl(bl.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new kl(bl.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===s?(o=!o,i++):"."!==s||o?(r+=s,i++):(a(),i++)}if(a(),o)throw new kl(bl.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(jl),Ql=function(){function e(t){k(this,e),this.fields=t,t.sort(Kl.comparator)}return w(e,[{key:"covers",value:function(e){var t,n=p(this.fields);try{for(n.s();!(t=n.n()).done;)if(t.value.isPrefixOf(e))return!0}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return Rl(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}]),e}(),Wl=function(e){function t(e){k(this,t),this.binaryString=e}return w(t,[{key:e,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Dl(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}(Symbol.iterator);Wl.EMPTY_BYTE_STRING=new Wl("");var Gl=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Hl(e){if(yl(!!e),"string"==typeof e){var t=0,n=Gl.exec(e);if(yl(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Yl(e.seconds),nanos:Yl(e.nanos)}}function Yl(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Jl(e){return"string"==typeof e?Wl.fromBase64String(e):Wl.fromUint8Array(e)}function Xl(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Zl(e){var t=e.mapValue.fields.__previous_value__;return Xl(t)?Zl(t):t}function $l(e){var t=Hl(e.mapValue.fields.__local_write_time__.timestampValue);return new Ml(t.seconds,t.nanos)}var ef=w((function e(t,n,r,i,a,o,s,u){k(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=u})),tf=function(){function e(t,n){k(this,e),this.projectId=t,this.database=n||"(default)"}return w(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function nf(e){return null==e}function rf(e){return 0===e&&1/e==-1/0}function af(e){return"number"==typeof e&&Number.isInteger(e)&&!rf(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var of=function(){function e(t){k(this,e),this.path=t}return w(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===Bl.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(Bl.fromString(t))}},{key:"fromName",value:function(t){return new e(Bl.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(Bl.emptyPath())}},{key:"comparator",value:function(e,t){return Bl.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new Bl(t.slice()))}}]),e}(),sf={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},uf={nullValue:"NULL_VALUE"};function cf(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Xl(e)?4:If(e)?9007199254740991:10:ml()}function lf(e,t){if(e===t)return!0;var n=cf(e);if(n!==cf(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return $l(e).isEqual($l(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Hl(e.timestampValue),r=Hl(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Jl(e.bytesValue).isEqual(Jl(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Yl(e.geoPointValue.latitude)===Yl(t.geoPointValue.latitude)&&Yl(e.geoPointValue.longitude)===Yl(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Yl(e.integerValue)===Yl(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Yl(e.doubleValue),r=Yl(t.doubleValue);return n===r?rf(n)===rf(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Rl(e.arrayValue.values||[],t.arrayValue.values||[],lf);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Ul(n)!==Ul(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!lf(n[i],r[i])))return!1;return!0}(e,t);default:return ml()}}function ff(e,t){return void 0!==(e.values||[]).find((function(e){return lf(e,t)}))}function hf(e,t){if(e===t)return 0;var n=cf(e),r=cf(t);if(n!==r)return Dl(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Dl(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Yl(e.integerValue||e.doubleValue),r=Yl(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return df(e.timestampValue,t.timestampValue);case 4:return df($l(e),$l(t));case 5:return Dl(e.stringValue,t.stringValue);case 6:return function(e,t){var n=Jl(e),r=Jl(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=Dl(n[i],r[i]);if(0!==a)return a}return Dl(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Dl(Yl(e.latitude),Yl(t.latitude));return 0!==n?n:Dl(Yl(e.longitude),Yl(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=hf(n[i],r[i]);if(a)return a}return Dl(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===sf.mapValue&&t===sf.mapValue)return 0;if(e===sf.mapValue)return 1;if(t===sf.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var s=Dl(r[o],a[o]);if(0!==s)return s;var u=hf(n[r[o]],i[a[o]]);if(0!==u)return u}return Dl(r.length,a.length)}(e.mapValue,t.mapValue);default:throw ml()}}function df(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Dl(e,t);var n=Hl(e),r=Hl(t),i=Dl(n.seconds,r.seconds);return 0!==i?i:Dl(n.nanos,r.nanos)}function pf(e){return vf(e)}function vf(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Hl(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Jl(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,of.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=p(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=vf(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n=Object.keys(e.fields||{}).sort(),r="{",i=!0,a=p(n);try{for(a.s();!(t=a.n()).done;){var o=t.value;i?i=!1:r+=",",r+="".concat(o,":").concat(vf(e.fields[o]))}}catch(s){a.e(s)}finally{a.f()}return r+"}"}(e.mapValue):ml();var t,n}function mf(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function yf(e){return!!e&&"integerValue"in e}function gf(e){return!!e&&"arrayValue"in e}function bf(e){return!!e&&"nullValue"in e}function kf(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function wf(e){return!!e&&"mapValue"in e}function xf(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Vl(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=xf(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=xf(e.arrayValue.values[r]);return n}return Object.assign({},e)}function If(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function _f(e){return"nullValue"in e?uf:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?mf(tf.empty(),of.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:ml()}function Ef(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?mf(tf.empty(),of.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?sf:ml()}function Af(e,t){var n=hf(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Tf(e,t){var n=hf(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var Sf=function(){function e(t){k(this,e),this.value=t}return w(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!wf(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=xf(t)}},{key:"setAll",value:function(e){var t=this,n=Kl.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=xf(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());wf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return lf(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];wf(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Vl(t,(function(t,n){return e[t]=n}));var r,i=p(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(xf(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function Of(e){var t=[];return Vl(e.fields,(function(e,n){var r=new Kl([e]);if(wf(n)){var i=Of(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=p(i);try{for(o.s();!(a=o.n()).done;){var s=a.value;t.push(r.child(s))}}catch(u){o.e(u)}finally{o.f()}}}else t.push(r)})),new Ql(t)}var Cf=function(){function e(t,n,r,i,a,o){k(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.data=a,this.documentState=o}return w(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=Sf.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=Sf.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Fl.min(),Fl.min(),Sf.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,Fl.min(),r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Fl.min(),Sf.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Fl.min(),Sf.empty(),2)}}]),e}(),Nf=w((function e(t,n,r,i){k(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function Pf(e){return e.fields.find((function(e){return 2===e.kind}))}function Df(e){return e.fields.filter((function(e){return 2!==e.kind}))}Nf.UNKNOWN_ID=-1;var Rf=w((function e(t,n){k(this,e),this.fieldPath=t,this.kind=n})),Lf=function(){function e(t,n){k(this,e),this.sequenceNumber=t,this.offset=n}return w(e,null,[{key:"empty",value:function(){return new e(0,Uf.min())}}]),e}();function Mf(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Fl.fromTimestamp(1e9===r?new Ml(n+1,0):new Ml(n,r));return new Uf(i,of.empty(),t)}function Ff(e){return new Uf(e.readTime,e.key,-1)}var Uf=function(){function e(t,n,r){k(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return w(e,null,[{key:"min",value:function(){return new e(Fl.min(),of.empty(),-1)}},{key:"max",value:function(){return new e(Fl.max(),of.empty(),-1)}}]),e}();function Vf(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n||0!==(n=of.comparator(e.documentKey,t.documentKey))?n:Dl(e.largestBatchId,t.largestBatchId)}var qf=function(){function e(t,n){k(this,e),this.comparator=t,this.root=n||Bf.EMPTY}return w(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Bf.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Bf.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new jf(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new jf(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new jf(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new jf(this.root,e,this.comparator,!0)}}]),e}(),jf=function(){function e(t,n,r,i){k(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return w(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Bf=function(){function e(t,n,r,i,a){k(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return w(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw ml();if(this.right.isRed())throw ml();var e=this.left.check();if(e!==this.right.check())throw ml();return e+(this.isRed()?0:1)}}]),e}();Bf.EMPTY=null,Bf.RED=!0,Bf.BLACK=!1,Bf.EMPTY=new(function(){function e(){k(this,e),this.size=0}return w(e,[{key:"key",get:function(){throw ml()}},{key:"value",get:function(){throw ml()}},{key:"color",get:function(){throw ml()}},{key:"left",get:function(){throw ml()}},{key:"right",get:function(){throw ml()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Bf(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var zf=function(){function e(t){k(this,e),this.comparator=t,this.data=new qf(this.comparator)}return w(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Kf(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Kf(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),Kf=function(){function e(t){k(this,e),this.iter=t}return w(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function Qf(e){return e.hasNext()?e.getNext():void 0}var Wf=w((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;k(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=s,this.P=null}));function Gf(e){return new Wf(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Hf(e){var t=gl(e);if(null===t.P){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return(t=e).field.canonicalString()+t.op.toString()+pf(t.value);var t})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),nf(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return pf(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return pf(e)})).join(",")),t.P=n}return t.P}function Yf(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!fh(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!lf(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!dh(e.startAt,t.startAt)&&dh(e.endAt,t.endAt)}function Jf(e){return of.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Xf(e,t){return e.filters.filter((function(e){return e instanceof eh&&e.field.isEqual(t)}))}function Zf(e,t,n){var r,i=uf,a=!0,o=p(Xf(e,t));try{for(o.s();!(r=o.n()).done;){var s=r.value,u=uf,c=!0;switch(s.op){case"<":case"<=":u=_f(s.value);break;case"==":case"in":case">=":u=s.value;break;case">":u=s.value,c=!1;break;case"!=":case"not-in":u=uf}Af({value:i,inclusive:a},{value:u,inclusive:c})<0&&(i=u,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Af({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function $f(e,t,n){var r,i=sf,a=!0,o=p(Xf(e,t));try{for(o.s();!(r=o.n()).done;){var s=r.value,u=sf,c=!0;switch(s.op){case">=":case">":u=Ef(s.value),c=!1;break;case"==":case"in":case"<=":u=s.value;break;case"<":u=s.value,c=!1;break;case"!=":case"not-in":u=sf}Tf({value:i,inclusive:a},{value:u,inclusive:c})>0&&(i=u,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Tf({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var eh=function(e){y(n,e);var t=g(n);function n(e,r,i){var a;return k(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return w(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(hf(t,this.value)):null!==t&&cf(this.value)===cf(t)&&this.v(hf(t,this.value))}},{key:"v",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ml()}}},{key:"S",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new th(e,t,r):"array-contains"===t?new ah(e,r):"in"===t?new oh(e,r):"not-in"===t?new sh(e,r):"array-contains-any"===t?new uh(e,r):new n(e,t,r)}},{key:"V",value:function(e,t,n){return"in"===t?new nh(e,n):new rh(e,n)}}]),n}(function(){function e(){k(this,e)}return w(e)}()),th=function(e){y(n,e);var t=g(n);function n(e,r,i){var a;return k(this,n),(a=t.call(this,e,r,i)).key=of.fromName(i.referenceValue),a}return w(n,[{key:"matches",value:function(e){var t=of.comparator(e.key,this.key);return this.v(t)}}]),n}(eh),nh=function(e){y(n,e);var t=g(n);function n(e,r){var i;return k(this,n),(i=t.call(this,e,"in",r)).keys=ih(0,r),i}return w(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(eh),rh=function(e){y(n,e);var t=g(n);function n(e,r){var i;return k(this,n),(i=t.call(this,e,"not-in",r)).keys=ih(0,r),i}return w(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(eh);function ih(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return of.fromName(e.referenceValue)}))}var ah=function(e){y(n,e);var t=g(n);function n(e,r){return k(this,n),t.call(this,e,"array-contains",r)}return w(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return gf(t)&&ff(t.arrayValue,this.value)}}]),n}(eh),oh=function(e){y(n,e);var t=g(n);function n(e,r){return k(this,n),t.call(this,e,"in",r)}return w(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&ff(this.value.arrayValue,t)}}]),n}(eh),sh=function(e){y(n,e);var t=g(n);function n(e,r){return k(this,n),t.call(this,e,"not-in",r)}return w(n,[{key:"matches",value:function(e){if(ff(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!ff(this.value.arrayValue,t)}}]),n}(eh),uh=function(e){y(n,e);var t=g(n);function n(e,r){return k(this,n),t.call(this,e,"array-contains-any",r)}return w(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!gf(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return ff(t.value.arrayValue,e)}))}}]),n}(eh),ch=w((function e(t,n){k(this,e),this.position=t,this.inclusive=n})),lh=w((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";k(this,e),this.field=t,this.dir=n}));function fh(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function hh(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?of.comparator(of.fromName(o.referenceValue),n.key):hf(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function dh(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!lf(e.position[n],t.position[n]))return!1;return!0}var ph=w((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;k(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=s,this.endAt=u,this.D=null,this.C=null,this.startAt,this.endAt}));function vh(e,t,n,r,i,a,o,s){return new ph(e,t,n,r,i,a,o,s)}function mh(e){return new ph(e)}function yh(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function gh(e){var t,n=p(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.S())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function bh(e){return null!==e.collectionGroup}function kh(e){var t=gl(e);if(null===t.D){t.D=[];var n=gh(t),r=yh(t);if(null!==n&&null===r)n.isKeyField()||t.D.push(new lh(n)),t.D.push(new lh(Kl.keyField(),"asc"));else{var i,a=!1,o=p(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var s=i.value;t.D.push(s),s.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var u=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.D.push(new lh(Kl.keyField(),u))}}}return t.D}function wh(e){var t=gl(e);if(!t.C)if("F"===t.limitType)t.C=Gf(t.path,t.collectionGroup,kh(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=p(kh(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new lh(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var s=t.endAt?new ch(t.endAt.position,t.endAt.inclusive):null,u=t.startAt?new ch(t.startAt.position,t.startAt.inclusive):null;t.C=Gf(t.path,t.collectionGroup,r,t.filters,t.limit,s,u)}return t.C}function xh(e,t,n){return new ph(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Ih(e,t){return Yf(wh(e),wh(t))&&e.limitType===t.limitType}function _h(e){return"".concat(Hf(wh(e)),"|lt:").concat(e.limitType)}function Eh(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(pf(t.value));var t})).join(", "),"]")),nf(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return pf(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return pf(e)})).join(",")),"Target(".concat(t,")")}(wh(e)),"; limitType=").concat(e.limitType,")")}function Ah(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):of.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=p(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=p(e.filters);try{for(r.s();!(n=r.n()).done;)if(!n.value.matches(t))return!1}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=hh(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,kh(e),t)||e.endAt&&!function(e,t,n){var r=hh(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,kh(e),t))}(e,t)}function Th(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Sh(e){return function(t,n){var r,i=!1,a=p(kh(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,s=Oh(o,t,n);if(0!==s)return s;i=i||o.field.isKeyField()}}catch(u){a.e(u)}finally{a.f()}return 0}}function Oh(e,t,n){var r=e.field.isKeyField()?of.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?hf(r,i):ml()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return ml()}}function Ch(e,t){if(e.N){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rf(t)?"-0":t}}function Nh(e){return{integerValue:""+e}}function Ph(e,t){return af(t)?Nh(t):Ch(e,t)}var Dh=w((function e(){k(this,e),this._=void 0}));function Rh(e,t,n){return e instanceof Fh?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Uh?Vh(e,t):e instanceof qh?jh(e,t):function(e,t){var n=Mh(e,t),r=zh(n)+zh(e.k);return yf(n)&&yf(e.k)?Nh(r):Ch(e.M,r)}(e,t)}function Lh(e,t,n){return e instanceof Uh?Vh(e,t):e instanceof qh?jh(e,t):n}function Mh(e,t){return e instanceof Bh?yf(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var Fh=function(e){y(n,e);var t=g(n);function n(){return k(this,n),t.apply(this,arguments)}return w(n)}(Dh),Uh=function(e){y(n,e);var t=g(n);function n(e){var r;return k(this,n),(r=t.call(this)).elements=e,r}return w(n)}(Dh);function Vh(e,t){var n,r=Kh(t),i=p(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return lf(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var qh=function(e){y(n,e);var t=g(n);function n(e){var r;return k(this,n),(r=t.call(this)).elements=e,r}return w(n)}(Dh);function jh(e,t){var n,r=Kh(t),i=p(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!lf(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Bh=function(e){y(n,e);var t=g(n);function n(e,r){var i;return k(this,n),(i=t.call(this)).M=e,i.k=r,i}return w(n)}(Dh);function zh(e){return Yl(e.integerValue||e.doubleValue)}function Kh(e){return gf(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var Qh=w((function e(t,n){k(this,e),this.field=t,this.transform=n})),Wh=w((function e(t,n){k(this,e),this.version=t,this.transformResults=n})),Gh=function(){function e(t,n){k(this,e),this.updateTime=t,this.exists=n}return w(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function Hh(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var Yh=w((function e(){k(this,e)}));function Jh(e,t,n){e instanceof td?function(e,t,n){var r=e.value.clone(),i=id(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof nd?function(e,t,n){if(Hh(e.precondition,t)){var r=id(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(rd(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Xh(e,t,n){e instanceof td?function(e,t,n){if(Hh(e.precondition,t)){var r=e.value.clone(),i=ad(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(ed(t),r).setHasLocalMutations()}}(e,t,n):e instanceof nd?function(e,t,n){if(Hh(e.precondition,t)){var r=ad(e.fieldTransforms,n,t),i=t.data;i.setAll(rd(e)),i.setAll(r),t.convertToFoundDocument(ed(t),i).setHasLocalMutations()}}(e,t,n):function(e,t){Hh(e.precondition,t)&&t.convertToNoDocument(Fl.min())}(e,t)}function Zh(e,t){var n,r=null,i=p(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),s=Mh(a.transform,o||null);null!=s&&(null==r&&(r=Sf.empty()),r.set(a.field,s))}}catch(u){i.e(u)}finally{i.f()}return r||null}function $h(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Rl(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Uh&&t instanceof Uh||e instanceof qh&&t instanceof qh?Rl(e.elements,t.elements,lf):e instanceof Bh&&t instanceof Bh?lf(e.k,t.k):e instanceof Fh&&t instanceof Fh}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function ed(e){return e.isFoundDocument()?e.version:Fl.min()}var td=function(e){y(n,e);var t=g(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return k(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return w(n)}(Yh),nd=function(e){y(n,e);var t=g(n);function n(e,r,i,a){var o,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return k(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=s,o.type=1,o}return w(n)}(Yh);function rd(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function id(e,t,n){var r=new Map;yl(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,s=t.data.field(a.field);r.set(a.field,Lh(o,s,n[i]))}return r}function ad(e,t,n){var r,i=new Map,a=p(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=o.transform,u=n.data.field(o.field);i.set(o.field,Rh(s,u,t))}}catch(c){a.e(c)}finally{a.f()}return i}var od,sd,ud=function(e){y(n,e);var t=g(n);function n(e,r){var i;return k(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return w(n)}(Yh),cd=function(e){y(n,e);var t=g(n);function n(e,r){var i;return k(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return w(n)}(Yh),ld=w((function e(t){k(this,e),this.count=t}));function fd(e){switch(e){default:return ml();case bl.CANCELLED:case bl.UNKNOWN:case bl.DEADLINE_EXCEEDED:case bl.RESOURCE_EXHAUSTED:case bl.INTERNAL:case bl.UNAVAILABLE:case bl.UNAUTHENTICATED:return!1;case bl.INVALID_ARGUMENT:case bl.NOT_FOUND:case bl.ALREADY_EXISTS:case bl.PERMISSION_DENIED:case bl.FAILED_PRECONDITION:case bl.ABORTED:case bl.OUT_OF_RANGE:case bl.UNIMPLEMENTED:case bl.DATA_LOSS:return!0}}function hd(e){if(void 0===e)return dl("GRPC error has no .code"),bl.UNKNOWN;switch(e){case od.OK:return bl.OK;case od.CANCELLED:return bl.CANCELLED;case od.UNKNOWN:return bl.UNKNOWN;case od.DEADLINE_EXCEEDED:return bl.DEADLINE_EXCEEDED;case od.RESOURCE_EXHAUSTED:return bl.RESOURCE_EXHAUSTED;case od.INTERNAL:return bl.INTERNAL;case od.UNAVAILABLE:return bl.UNAVAILABLE;case od.UNAUTHENTICATED:return bl.UNAUTHENTICATED;case od.INVALID_ARGUMENT:return bl.INVALID_ARGUMENT;case od.NOT_FOUND:return bl.NOT_FOUND;case od.ALREADY_EXISTS:return bl.ALREADY_EXISTS;case od.PERMISSION_DENIED:return bl.PERMISSION_DENIED;case od.FAILED_PRECONDITION:return bl.FAILED_PRECONDITION;case od.ABORTED:return bl.ABORTED;case od.OUT_OF_RANGE:return bl.OUT_OF_RANGE;case od.UNIMPLEMENTED:return bl.UNIMPLEMENTED;case od.DATA_LOSS:return bl.DATA_LOSS;default:return ml()}}(sd=od||(od={}))[sd.OK=0]="OK",sd[sd.CANCELLED=1]="CANCELLED",sd[sd.UNKNOWN=2]="UNKNOWN",sd[sd.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",sd[sd.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",sd[sd.NOT_FOUND=5]="NOT_FOUND",sd[sd.ALREADY_EXISTS=6]="ALREADY_EXISTS",sd[sd.PERMISSION_DENIED=7]="PERMISSION_DENIED",sd[sd.UNAUTHENTICATED=16]="UNAUTHENTICATED",sd[sd.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",sd[sd.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",sd[sd.ABORTED=10]="ABORTED",sd[sd.OUT_OF_RANGE=11]="OUT_OF_RANGE",sd[sd.UNIMPLEMENTED=12]="UNIMPLEMENTED",sd[sd.INTERNAL=13]="INTERNAL",sd[sd.UNAVAILABLE=14]="UNAVAILABLE",sd[sd.DATA_LOSS=15]="DATA_LOSS";var dd=function(){function e(t,n){k(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return w(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=p(n);try{for(i.s();!(r=i.n()).done;){var a=v(r.value,2),o=a[0],s=a[1];if(this.equalsFn(o,e))return s}}catch(u){i.e(u)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Vl(this.inner,(function(t,n){var r,i=p(n);try{for(i.s();!(r=i.n()).done;){var a=v(r.value,2),o=a[0],s=a[1];e(o,s)}}catch(u){i.e(u)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return ql(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),pd=new qf(of.comparator);function vd(){return pd}var md=new qf(of.comparator);function yd(){for(var e=md,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function gd(){return new dd((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var bd=new qf(of.comparator),kd=new zf(of.comparator);function wd(){for(var e=kd,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var xd=new zf(Dl);function Id(){return xd}var _d=function(){function e(t,n,r,i,a){k(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return w(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,Ed.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(Fl.min(),r,Id(),vd(),wd())}}]),e}(),Ed=function(){function e(t,n,r,i,a){k(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return w(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(Wl.EMPTY_BYTE_STRING,n,wd(),wd(),wd())}}]),e}(),Ad=w((function e(t,n,r,i){k(this,e),this.O=t,this.removedTargetIds=n,this.key=r,this.F=i})),Td=w((function e(t,n){k(this,e),this.targetId=t,this.$=n})),Sd=w((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Wl.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;k(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),Od=function(){function e(){k(this,e),this.B=0,this.L=Pd(),this.U=Wl.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}return w(e,[{key:"current",get:function(){return this.q}},{key:"resumeToken",get:function(){return this.U}},{key:"G",get:function(){return 0!==this.B}},{key:"j",get:function(){return this.K}},{key:"W",value:function(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}},{key:"H",value:function(){var e=wd(),t=wd(),n=wd();return this.L.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:ml()}})),new Ed(this.U,this.q,e,t,n)}},{key:"J",value:function(){this.K=!1,this.L=Pd()}},{key:"Y",value:function(e,t){this.K=!0,this.L=this.L.insert(e,t)}},{key:"X",value:function(e){this.K=!0,this.L=this.L.remove(e)}},{key:"Z",value:function(){this.B+=1}},{key:"tt",value:function(){this.B-=1}},{key:"et",value:function(){this.K=!0,this.q=!0}}]),e}(),Cd=function(){function e(t){k(this,e),this.nt=t,this.st=new Map,this.it=vd(),this.rt=Nd(),this.ot=new zf(Dl)}return w(e,[{key:"ut",value:function(e){var t,n=p(e.O);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.F&&e.F.isFoundDocument()?this.at(r,e.F):this.ct(r,e.key,e.F)}}catch(s){n.e(s)}finally{n.f()}var i,a=p(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.ct(o,e.key,e.F)}}catch(s){a.e(s)}finally{a.f()}}},{key:"ht",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.lt(n);switch(e.state){case 0:t.ft(n)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||t.removeTarget(n);break;case 3:t.ft(n)&&(r.et(),r.W(e.resumeToken));break;case 4:t.ft(n)&&(t.dt(n),r.W(e.resumeToken));break;default:ml()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((function(e,r){n.ft(r)&&t(r)}))}},{key:"_t",value:function(e){var t=e.targetId,n=e.$.count,r=this.wt(t);if(r){var i=r.target;if(Jf(i))if(0===n){var a=new of(i.path);this.ct(t,a,Cf.newNoDocument(a,Fl.min()))}else yl(1===n);else this.gt(t)!==n&&(this.dt(t),this.ot=this.ot.add(t))}}},{key:"yt",value:function(e){var t=this,n=new Map;this.st.forEach((function(r,i){var a=t.wt(i);if(a){if(r.current&&Jf(a.target)){var o=new of(a.target.path);null!==t.it.get(o)||t.It(i,o)||t.ct(i,o,Cf.newNoDocument(o,e))}r.j&&(n.set(i,r.H()),r.J())}}));var r=wd();this.rt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.wt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.it.forEach((function(t,n){return n.setReadTime(e)}));var i=new _d(e,n,this.ot,this.it,r);return this.it=vd(),this.rt=Nd(),this.ot=new zf(Dl),i}},{key:"at",value:function(e,t){if(this.ft(e)){var n=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,n),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}}},{key:"ct",value:function(e,t,n){if(this.ft(e)){var r=this.lt(e);this.It(e,t)?r.Y(t,1):r.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),n&&(this.it=this.it.insert(t,n))}}},{key:"removeTarget",value:function(e){this.st.delete(e)}},{key:"gt",value:function(e){var t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Z",value:function(e){this.lt(e).Z()}},{key:"lt",value:function(e){var t=this.st.get(e);return t||(t=new Od,this.st.set(e,t)),t}},{key:"Tt",value:function(e){var t=this.rt.get(e);return t||(t=new zf(Dl),this.rt=this.rt.insert(e,t)),t}},{key:"ft",value:function(e){var t=null!==this.wt(e);return t||hl("WatchChangeAggregator","Detected inactive target",e),t}},{key:"wt",value:function(e){var t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}},{key:"dt",value:function(e){var t=this;this.st.set(e,new Od),this.nt.getRemoteKeysForTarget(e).forEach((function(n){t.ct(e,n,null)}))}},{key:"It",value:function(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}]),e}();function Nd(){return new qf(of.comparator)}function Pd(){return new qf(of.comparator)}var Dd={asc:"ASCENDING",desc:"DESCENDING"},Rd={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ld=w((function e(t,n){k(this,e),this.databaseId=t,this.N=n}));function Md(e,t){return e.N?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Fd(e,t){return e.N?t.toBase64():t.toUint8Array()}function Ud(e,t){return Md(e,t.toTimestamp())}function Vd(e){return yl(!!e),Fl.fromTimestamp(function(e){var t=Hl(e);return new Ml(t.seconds,t.nanos)}(e))}function qd(e,t){return function(e){return new Bl(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function jd(e){var t=Bl.fromString(e);return yl(cp(t)),t}function Bd(e,t){return qd(e.databaseId,t.path)}function zd(e,t){var n=jd(t);if(n.get(1)!==e.databaseId.projectId)throw new kl(bl.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new kl(bl.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new of(Gd(n))}function Kd(e,t){return qd(e.databaseId,t)}function Qd(e){var t=jd(e);return 4===t.length?Bl.emptyPath():Gd(t)}function Wd(e){return new Bl(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Gd(e){return yl(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Hd(e,t,n){return{name:Bd(e,t),fields:n.value.mapValue.fields}}function Yd(e,t,n){var r=zd(e,t.name),i=Vd(t.updateTime),a=new Sf({mapValue:{fields:t.fields}}),o=Cf.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function Jd(e,t){var n;if(t instanceof td)n={update:Hd(e,t.key,t.value)};else if(t instanceof ud)n={delete:Bd(e,t.key)};else if(t instanceof nd)n={update:Hd(e,t.key,t.data),updateMask:up(t.fieldMask)};else{if(!(t instanceof cd))return ml();n={verify:Bd(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Fh)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Uh)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof qh)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Bh)return{fieldPath:t.field.canonicalString(),increment:n.k};throw ml()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Ud(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:ml()}(e,t.precondition)),n}function Xd(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?Gh.updateTime(Vd(e.updateTime)):void 0!==e.exists?Gh.exists(e.exists):Gh.none()}(t.currentDocument):Gh.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)yl("REQUEST_TIME"===t.setToServerValue),n=new Fh;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new Uh(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new qh(i)}else"increment"in t?n=new Bh(e,t.increment):ml();var a=Kl.fromServerFormat(t.fieldPath);return new Qh(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=zd(e,t.update.name),a=new Sf({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new Ql(t.map((function(e){return Kl.fromServerFormat(e)})))}(t.updateMask);return new nd(i,a,o,n,r)}return new td(i,a,n,r)}if(t.delete){var s=zd(e,t.delete);return new ud(s,n)}if(t.verify){var u=zd(e,t.verify);return new cd(u,n)}return ml()}function Zd(e,t){return{documents:[Kd(e,t.path)]}}function $d(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Kd(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Kd(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(kf(e.value))return{unaryFilter:{field:ip(e.field),op:"IS_NAN"}};if(bf(e.value))return{unaryFilter:{field:ip(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(kf(e.value))return{unaryFilter:{field:ip(e.field),op:"IS_NOT_NAN"}};if(bf(e.value))return{unaryFilter:{field:ip(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ip(e.field),op:rp(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:ip(e.field),direction:np(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,s=function(e,t){return e.N||nf(t)?t:{value:t}}(e,t.limit);return null!==s&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function ep(e){var t=Qd(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){yl(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=tp(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(e){return function(e){return new lh(ap(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var u=null;n.limit&&(u=function(e){var t;return nf(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new ch(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new ch(n,t)}(n.endAt)),vh(t,i,s,o,u,"F",c,l)}function tp(e){return e?void 0!==e.unaryFilter?[sp(e)]:void 0!==e.fieldFilter?[op(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return tp(e)})).reduce((function(e,t){return e.concat(t)})):ml():[]}function np(e){return Dd[e]}function rp(e){return Rd[e]}function ip(e){return{fieldPath:e.canonicalString()}}function ap(e){return Kl.fromServerFormat(e.fieldPath)}function op(e){return eh.create(ap(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ml()}}(e.fieldFilter.op),e.fieldFilter.value)}function sp(e){switch(e.unaryFilter.op){case"IS_NAN":var t=ap(e.unaryFilter.field);return eh.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=ap(e.unaryFilter.field);return eh.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=ap(e.unaryFilter.field);return eh.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=ap(e.unaryFilter.field);return eh.create(i,"!=",{nullValue:"NULL_VALUE"});default:return ml()}}function up(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function cp(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function lp(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=hp(t)),t=fp(e.get(n),t);return hp(t)}function fp(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function hp(e){return e+"\x01\x01"}function dp(e){var t=e.length;if(yl(t>=2),2===t)return yl("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Bl.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&ml(),e.charAt(o+1)){case"\x01":var s=e.substring(a,o),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:ml()}a=o+2}return new Bl(r)}var pp=["userId","batchId"];function vp(e,t){return[e,lp(t)]}function mp(e,t,n){return[e,lp(t),n]}var yp={},gp=["prefixPath","collectionGroup","readTime","documentId"],bp=["prefixPath","collectionGroup","documentId"],kp=["collectionGroup","readTime","prefixPath","documentId"],wp=["canonicalId","targetId"],xp=["targetId","path"],Ip=["path","targetId"],_p=["collectionId","parent"],Ep=["indexId","uid"],Ap=["uid","sequenceNumber"],Tp=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Sp=["indexId","uid","orderedDocumentKey"],Op=["userId","collectionPath","documentId"],Cp=["userId","collectionPath","largestBatchId"],Np=["userId","collectionGroup","largestBatchId"],Pp=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Dp=[].concat(Pp,["documentOverlays"]),Rp=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Lp=[].concat(Rp,["indexConfiguration","indexState","indexEntries"]),Mp="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Fp=function(){function e(){k(this,e),this.onCommittedListeners=[]}return w(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}(),Up=function(){function e(t){var n=this;k(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return w(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&ml(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=p(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}}]),e}(),Vp=function(){function e(t,n){var r=this;k(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.At=new wl,this.transaction.oncomplete=function(){r.At.resolve()},this.transaction.onabort=function(){n.error?r.At.reject(new Bp(t,n.error)):r.At.resolve()},this.transaction.onerror=function(e){var n=Gp(e.target.error);r.At.reject(new Bp(t,n))}}return w(e,[{key:"Rt",get:function(){return this.At.promise}},{key:"abort",value:function(e){e&&this.At.reject(e),this.aborted||(hl("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"bt",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new Kp(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new Bp(n,t)}}}]),e}(),qp=function(){function e(t,n,r){k(this,e),this.name=t,this.version=n,this.Pt=r,12.2===e.Vt(L())&&dl("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return w(e,[{key:"Nt",value:function(){var e=d(f().mark((function e(t){var n=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return hl("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Bp(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new kl(bl.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new kl(bl.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new Bp(t,n))},i.onupgradeneeded=function(e){hl("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.Pt.kt(t,i.transaction,e.oldVersion,n.version).next((function(){hl("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.Mt&&(this.db.onversionchange=function(e){return n.Mt(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"Ot",value:function(e){this.Mt=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=d(f().mark((function e(t,n,r,i){var a,o,s,u,c=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(f().mark((function e(){var n,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Nt(t);case 2:return c.db=e.sent,n=Vp.open(c.db,t,a?"readonly":"readwrite",r),o=i(n).next((function(e){return n.bt(),e})).catch((function(e){return n.abort(e),Up.reject(e)})).toPromise(),o.catch((function(){})),e.next=7,n.Rt;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(s=e.t0)){e.next=8;break}return e.abrupt("return",s.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),u="FirebaseError"!==e.t1.name&&o<3,hl("SimpleDb","Transaction failed with error:",e.t1.message,"Retrying:",u),this.close(),u){e.next=15;break}return e.abrupt("return",Promise.reject(e.t1));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));function t(t,n,r,i){return e.apply(this,arguments)}return t}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return hl("SimpleDb","Removing database:",e),Qp(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"vt",value:function(){if(!j())return!1;if(e.St())return!0;var t=L(),n=e.Vt(t),r=0<n&&n<10,i=e.Dt(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"St",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.Ct)}},{key:"xt",value:function(e,t){return e.store(t)}},{key:"Vt",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"Dt",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),jp=function(){function e(t){k(this,e),this.Ft=t,this.$t=!1,this.Bt=null}return w(e,[{key:"isDone",get:function(){return this.$t}},{key:"Lt",get:function(){return this.Bt}},{key:"cursor",set:function(e){this.Ft=e}},{key:"done",value:function(){this.$t=!0}},{key:"Ut",value:function(e){this.Bt=e}},{key:"delete",value:function(){return Qp(this.Ft.delete())}}]),e}(),Bp=function(e){y(n,e);var t=g(n);function n(e,r){var i;return k(this,n),(i=t.call(this,bl.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return w(n)}(kl);function zp(e){return"IndexedDbTransactionError"===e.name}var Kp=function(){function e(t){k(this,e),this.store=t}return w(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(hl("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(hl("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Qp(n)}},{key:"add",value:function(e){return hl("SimpleDb","ADD",this.store.name,e,e),Qp(this.store.add(e))}},{key:"get",value:function(e){var t=this;return Qp(this.store.get(e)).next((function(n){return void 0===n&&(n=null),hl("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return hl("SimpleDb","DELETE",this.store.name,e),Qp(this.store.delete(e))}},{key:"count",value:function(){return hl("SimpleDb","COUNT",this.store.name),Qp(this.store.count())}},{key:"qt",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.Kt(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new Up((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"Gt",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new Up((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"Qt",value:function(e,t){hl("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.jt=!1;var r=this.cursor(n);return this.Kt(r,(function(e,t,n){return n.delete()}))}},{key:"Wt",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.Kt(r,t)}},{key:"zt",value:function(e){var t=this.cursor({});return new Up((function(n,r){t.onerror=function(e){var t=Gp(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"Kt",value:function(e,t){var n=[];return new Up((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new jp(i),o=t(i.primaryKey,i.value,a);if(o instanceof Up){var s=o.catch((function(e){return a.done(),Up.reject(e)}));n.push(s)}a.isDone?r():null===a.Lt?i.continue():i.continue(a.Lt)}else r()}})).next((function(){return Up.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.jt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function Qp(e){return new Up((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=Gp(e.target.error);n(t)}}))}var Wp=!1;function Gp(e){var t=qp.Vt(L());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new kl("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Wp||(Wp=!0,setTimeout((function(){throw r}),0)),r}}return e}var Hp=function(e){y(n,e);var t=g(n);function n(e,r){var i;return k(this,n),(i=t.call(this)).Ht=e,i.currentSequenceNumber=r,i}return w(n)}(Fp);function Yp(e,t){var n=gl(e);return qp.xt(n.Ht,t)}var Jp=function(){function e(t,n,r,i){k(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return w(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&Jh(i,e,n[r])}}},{key:"applyToLocalView",value:function(e){var t,n=p(this.baseMutations);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.key.isEqual(e.key)&&Xh(r,e,this.localWriteTime)}}catch(s){n.e(s)}finally{n.f()}var i,a=p(this.mutations);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.key.isEqual(e.key)&&Xh(o,e,this.localWriteTime)}}catch(s){a.e(s)}finally{a.f()}}},{key:"applyToLocalDocumentSet",value:function(e){var t=this;this.mutations.forEach((function(n){var r=e.get(n.key),i=r;t.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Fl.min())}))}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),wd())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&Rl(this.mutations,e.mutations,(function(e,t){return $h(e,t)}))&&Rl(this.baseMutations,e.baseMutations,(function(e,t){return $h(e,t)}))}}]),e}(),Xp=function(){function e(t,n,r,i){k(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return w(e,null,[{key:"from",value:function(t,n,r){yl(t.mutations.length===r.length);for(var i=bd,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),Zp=function(){function e(t,n){k(this,e),this.largestBatchId=t,this.mutation=n}return w(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),$p=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Fl.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Fl.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Wl.EMPTY_BYTE_STRING;k(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return w(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),ev=w((function e(t){k(this,e),this.Jt=t}));function tv(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:nv(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Bd(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Md(e,t.version.toTimestamp())}}(e.Jt,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:rv(t.version)};else{if(!t.isUnknownDocument())return ml();r.unknownDocument={path:n.path.toArray(),version:rv(t.version)}}return r}function nv(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function rv(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function iv(e){var t=new Ml(e.seconds,e.nanoseconds);return Fl.fromTimestamp(t)}function av(e,t){for(var n=(t.baseMutations||[]).map((function(t){return Xd(e.Jt,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return Xd(e.Jt,t)})),s=Ml.fromMillis(t.localWriteTimeMs);return new Jp(t.batchId,s,n,o)}function ov(e){var t,n,r=iv(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?iv(e.lastLimboFreeSnapshotVersion):Fl.min();return void 0!==e.query.documents?(yl(1===(n=e.query).documents.length),t=wh(mh(Qd(n.documents[0])))):t=function(e){return wh(ep(e))}(e.query),new $p(t,e.targetId,0,e.lastListenSequenceNumber,r,i,Wl.fromBase64String(e.resumeToken))}function sv(e,t){var n,r=rv(t.snapshotVersion),i=rv(t.lastLimboFreeSnapshotVersion);n=Jf(t.target)?Zd(e.Jt,t.target):$d(e.Jt,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Hf(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function uv(e){var t=ep({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?xh(t,t.limit,"L"):t}function cv(e,t){return new Zp(t.largestBatchId,Xd(e.Jt,t.overlayMutation))}function lv(e,t){var n=t.path.lastSegment();return[e,lp(t.path.popLast()),n]}var fv=function(){function e(){k(this,e)}return w(e,[{key:"getBundleMetadata",value:function(e,t){return hv(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:iv(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return hv(e).put({bundleId:(n=t).id,createTime:rv(Vd(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return dv(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:uv(t.bundledQuery),readTime:iv(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return dv(e).put(function(e){return{name:e.name,readTime:rv(Vd(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function hv(e){return Yp(e,"bundles")}function dv(e){return Yp(e,"namedQueries")}var pv=function(){function e(t,n){k(this,e),this.M=t,this.userId=n}return w(e,[{key:"getOverlay",value:function(e,t){var n=this;return vv(e).get(lv(this.userId,t)).next((function(e){return e?cv(n.M,e):null}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new Zp(t,a);i.push(r.Xt(e,o))})),Up.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(lp(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(vv(e).Qt("collectionPathOverlayIndex",i))})),Up.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=gd(),a=lp(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return vv(e).qt("collectionPathOverlayIndex",o).next((function(e){var t,n=p(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=cv(r.M,a);i.set(o.getKey(),o)}}catch(s){n.e(s)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=gd(),s=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return vv(e).Wt({index:"collectionGroupOverlayIndex",range:s},(function(e,t,n){var s=cv(a.M,t);o.size()<r||s.largestBatchId===i?(o.set(s.getKey(),s),i=s.largestBatchId):n.done()})).next((function(){return o}))}},{key:"Xt",value:function(e,t){return vv(e).put(function(e,t,n){var r=lv(t,n.mutation.key),i=v(r,3);return i[0],{userId:t,collectionPath:i[1],documentId:i[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Jd(e.Jt,n.mutation)}}(this.M,this.userId,t))}}],[{key:"Yt",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function vv(e){return Yp(e,"documentOverlays")}var mv=function(){function e(){k(this,e)}return w(e,[{key:"Zt",value:function(e,t){this.te(e,t),t.ee()}},{key:"te",value:function(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Yl(e.integerValue));else if("doubleValue"in e){var n=Yl(e.doubleValue);isNaN(n)?this.ne(t,13):(this.ne(t,15),rf(n)?t.se(0):t.se(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie("".concat(r.seconds||"")),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(Jl(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ne(t,45),t.se(i.latitude||0),t.se(i.longitude||0)}else"mapValue"in e?If(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):ml()}},{key:"re",value:function(e,t){this.ne(t,25),this.le(e,t)}},{key:"le",value:function(e,t){t.ie(e)}},{key:"ce",value:function(e,t){var n=e.fields||{};this.ne(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.re(a,t),this.te(n[a],t)}}},{key:"he",value:function(e,t){var n=e.values||[];this.ne(t,50);var r,i=p(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.te(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"ae",value:function(e,t){var n=this;this.ne(t,37),of.fromName(e).path.forEach((function(e){n.ne(t,60),n.le(e,t)}))}},{key:"ne",value:function(e,t){e.se(t)}},{key:"oe",value:function(e){e.se(2)}}]),e}();function yv(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function gv(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=yv(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}mv.fe=new mv;var bv=function(){function e(){k(this,e),this.buffer=new Uint8Array(1024),this.position=0}return w(e,[{key:"de",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this._e(n.value),n=t.next();this.we()}},{key:"me",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.ge(n.value),n=t.next();this.ye()}},{key:"pe",value:function(e){var t,n=p(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this._e(i);else if(i<2048)this._e(960|i>>>6),this._e(128|63&i);else if(r<"\ud800"||"\udbff"<r)this._e(480|i>>>12),this._e(128|63&i>>>6),this._e(128|63&i);else{var a=r.codePointAt(0);this._e(240|a>>>18),this._e(128|63&a>>>12),this._e(128|63&a>>>6),this._e(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.we()}},{key:"Ie",value:function(e){var t,n=p(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.ge(i);else if(i<2048)this.ge(960|i>>>6),this.ge(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.ge(480|i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i);else{var a=r.codePointAt(0);this.ge(240|a>>>18),this.ge(128|63&a>>>12),this.ge(128|63&a>>>6),this.ge(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.ye()}},{key:"Te",value:function(e){var t=this.Ee(e),n=gv(t);this.Ae(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Re",value:function(e){var t=this.Ee(e),n=gv(t);this.Ae(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"be",value:function(){this.Pe(255),this.Pe(255)}},{key:"Ve",value:function(){this.ve(255),this.ve(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Se",value:function(){return this.buffer.slice(0,this.position)}},{key:"Ee",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"_e",value:function(e){var t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}},{key:"ge",value:function(e){var t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}},{key:"we",value:function(){this.Pe(0),this.Pe(1)}},{key:"ye",value:function(){this.ve(0),this.ve(1)}},{key:"Pe",value:function(e){this.Ae(1),this.buffer[this.position++]=e}},{key:"ve",value:function(e){this.Ae(1),this.buffer[this.position++]=~e}},{key:"Ae",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),kv=function(){function e(t){k(this,e),this.De=t}return w(e,[{key:"ue",value:function(e){this.De.de(e)}},{key:"ie",value:function(e){this.De.pe(e)}},{key:"se",value:function(e){this.De.Te(e)}},{key:"ee",value:function(){this.De.be()}}]),e}(),wv=function(){function e(t){k(this,e),this.De=t}return w(e,[{key:"ue",value:function(e){this.De.me(e)}},{key:"ie",value:function(e){this.De.Ie(e)}},{key:"se",value:function(e){this.De.Re(e)}},{key:"ee",value:function(){this.De.Ve()}}]),e}(),xv=function(){function e(){k(this,e),this.De=new bv,this.Ce=new kv(this.De),this.xe=new wv(this.De)}return w(e,[{key:"seed",value:function(e){this.De.seed(e)}},{key:"Ne",value:function(e){return 0===e?this.Ce:this.xe}},{key:"Se",value:function(){return this.De.Se()}},{key:"reset",value:function(){this.De.reset()}}]),e}(),Iv=function(){function e(t,n,r,i){k(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return w(e,[{key:"ke",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function _v(e,t){var n=e.indexId-t.indexId;return 0!==n||0!==(n=Ev(e.arrayValue,t.arrayValue))||0!==(n=Ev(e.directionalValue,t.directionalValue))?n:of.comparator(e.documentKey,t.documentKey)}function Ev(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var Av=function(){function e(t){k(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Me=t.orderBy,this.Oe=[];var n,r=p(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.S()?this.Fe=i:this.Oe.push(i)}}catch(a){r.e(a)}finally{r.f()}}return w(e,[{key:"$e",value:function(e){var t=Pf(e);if(void 0!==t&&!this.Be(t))return!1;for(var n=Df(e),r=0,i=0;r<n.length&&this.Be(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Fe){var a=n[r];if(!this.Le(this.Fe,a)||!this.Ue(this.Me[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Me.length||!this.Ue(this.Me[i++],o))return!1}return!0}},{key:"Be",value:function(e){var t,n=p(this.Oe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.Le(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"Le",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"Ue",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}(),Tv=function(){function e(){k(this,e),this.qe=new Sv}return w(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.qe.add(t),Up.resolve()}},{key:"getCollectionParents",value:function(e,t){return Up.resolve(this.qe.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return Up.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return Up.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return Up.resolve(null)}},{key:"getIndexType",value:function(e,t){return Up.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return Up.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return Up.resolve(null)}},{key:"getMinOffset",value:function(e,t){return Up.resolve(Uf.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return Up.resolve()}},{key:"updateIndexEntries",value:function(e,t){return Up.resolve()}}]),e}(),Sv=function(){function e(){k(this,e),this.index={}}return w(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new zf(Bl.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new zf(Bl.comparator)).toArray()}}]),e}(),Ov=new Uint8Array(0),Cv=function(){function e(t,n){k(this,e),this.user=t,this.databaseId=n,this.Ke=new Sv,this.Ge=new dd((function(e){return Hf(e)}),(function(e,t){return Yf(e,t)})),this.uid=t.uid||""}return w(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Ke.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.Ke.add(t)}));var a={collectionId:r,parent:lp(i)};return Nv(e).put(a)}return Up.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Ll(t),""],!1,!0);return Nv(e).qt(r).next((function(e){var r,i=p(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(dp(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=Dv(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);return delete r.indexId,n.add(r).next()}},{key:"deleteFieldIndex",value:function(e,t){var n=Dv(e),r=Rv(e),i=Pv(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=Pv(e),i=!0,a=new Map;return Up.forEach(this.Qe(t),(function(t){return n.je(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=wd(),o=[];return Up.forEach(a,(function(i,a){var s;hl("IndexedDbIndexManager","Using index ".concat((s=i,"id=".concat(s.indexId,"|cg=").concat(s.collectionGroup,"|f=").concat(s.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(Hf(t)));var u=function(e,t){var n=Pf(t);if(void 0===n)return null;var r,i=p(Xf(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=p(Df(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,s=p(Xf(e,o.fieldPath));try{for(s.s();!(a=s.n()).done;){var u=a.value;switch(u.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),u.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),u.value),Array.from(r.values())}}}catch(c){s.e(c)}finally{s.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=p(Df(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,s=0===o.kind?Zf(e,o.fieldPath,e.startAt):$f(e,o.fieldPath,e.startAt);r.push(s.value),i&&(i=s.inclusive)}}catch(u){a.e(u)}finally{a.f()}return new ch(r,i)}(a,i),f=function(e,t){var n,r=[],i=!0,a=p(Df(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,s=0===o.kind?$f(e,o.fieldPath,e.endAt):Zf(e,o.fieldPath,e.endAt);r.push(s.value),i&&(i=s.inclusive)}}catch(u){a.e(u)}finally{a.f()}return new ch(r,i)}(a,i),h=n.We(i,a,l),d=n.We(i,a,f),v=n.ze(i,a,c),m=n.He(i.indexId,u,h,l.inclusive,d,f.inclusive,v);return Up.forEach(m,(function(n){return r.Gt(n,t.limit).next((function(t){t.forEach((function(t){var n=of.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return Up.resolve(null)}))}},{key:"Qe",value:function(e){var t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}},{key:"He",value:function(e,t,n,r,i,a,o){for(var s=this,u=(null!=t?t.length:1)*Math.max(n.length,i.length),c=u/(null!=t?t.length:1),l=[],f=function(u){var f=t?s.Je(t[u/c]):Ov,d=s.Ye(e,f,n[u%c],r),p=s.Xe(e,f,i[u%c],a),v=o.map((function(t){return s.Ye(e,f,t,!0)}));l.push.apply(l,h(s.createRange(d,p,v)))},d=0;d<u;++d)f(d);return l}},{key:"Ye",value:function(e,t,n,r){var i=new Iv(e,of.empty(),t,n);return r?i:i.ke()}},{key:"Xe",value:function(e,t,n,r){var i=new Iv(e,of.empty(),t,n);return r?i.ke():i}},{key:"je",value:function(e,t){var n=new Av(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=p(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.$e(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2;return Up.forEach(this.Qe(t),(function(t){return n.je(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new zf(Kl.comparator),r=!1,i=p(e.filters);try{for(i.s();!(t=i.n()).done;){var a=t.value;a.field.isKeyField()||("array-contains"===a.op||"array-contains-any"===a.op?r=!0:n=n.add(a.field))}}catch(c){i.e(c)}finally{i.f()}var o,s=p(e.orderBy);try{for(s.s();!(o=s.n()).done;){var u=o.value;u.field.isKeyField()||(n=n.add(u.field))}}catch(c){s.e(c)}finally{s.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return r}))}},{key:"Ze",value:function(e,t){var n,r=new xv,i=p(Df(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var s=r.Ne(a.kind);mv.fe.Zt(o,s)}}catch(u){i.e(u)}finally{i.f()}return r.Se()}},{key:"Je",value:function(e){var t=new xv;return mv.fe.Zt(e,t.Ne(0)),t.Se()}},{key:"tn",value:function(e,t){var n=new xv;return mv.fe.Zt(mf(this.databaseId,t),n.Ne(function(e){var t=Df(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Se()}},{key:"ze",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new xv);var i,a=0,o=p(Df(e));try{for(o.s();!(i=o.n()).done;){var s,u=i.value,c=n[a++],l=p(r);try{for(l.s();!(s=l.n()).done;){var f=s.value;if(this.en(t,u.fieldPath)&&gf(c))r=this.nn(r,u,c);else{var h=f.Ne(u.kind);mv.fe.Zt(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.sn(r)}},{key:"We",value:function(e,t,n){return this.ze(e,t,n.position)}},{key:"sn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Se();return t}},{key:"nn",value:function(e,t,n){var r,i=h(e),a=[],o=p(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var s,u=r.value,c=p(i);try{for(c.s();!(s=c.n()).done;){var l=s.value,f=new xv;f.seed(l.Se()),mv.fe.Zt(u,f.Ne(t.kind)),a.push(f)}}catch(d){c.e(d)}finally{c.f()}}}catch(d){o.e(d)}finally{o.f()}return a}},{key:"en",value:function(e,t){return!!e.filters.find((function(e){return e instanceof eh&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=Dv(e),i=Rv(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next((function(e){var t=[];return Up.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new Lf(t.sequenceNumber,new Uf(iv(t.readTime),new of(dp(t.documentKey)),t.largestBatchId)):Lf.empty(),r=e.fields.map((function(e){var t=v(e,2),n=t[0],r=t[1];return new Rf(Kl.fromServerFormat(n),r)}));return new Nf(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Dl(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=Dv(e),a=Rv(e);return this.rn(e).next((function(e){return i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return Up.forEach(t,(function(t){return a.put(function(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:rv(r.readTime),documentKey:lp(r.documentKey.path),largestBatchId:r.largestBatchId}}(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return Up.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?Up.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),Up.forEach(a,(function(r){return n.on(e,t,r).next((function(t){var a=n.un(i,r);return t.isEqual(a)?Up.resolve():n.an(e,i,r,t,a)}))}))}))}))}},{key:"cn",value:function(e,t,n,r){return Pv(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.tn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"hn",value:function(e,t,n,r){return Pv(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.tn(n,t.key),t.key.path.toArray()])}},{key:"on",value:function(e,t,n){var r=Pv(e),i=new zf(_v);return r.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.tn(n,t)])},(function(e,r){i=i.add(new Iv(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"un",value:function(e,t){var n=new zf(_v),r=this.Ze(t,e);if(null==r)return n;var i=Pf(t);if(null!=i){var a=e.data.field(i.fieldPath);if(gf(a)){var o,s=p(a.arrayValue.values||[]);try{for(s.s();!(o=s.n()).done;){var u=o.value;n=n.add(new Iv(t.indexId,e.key,this.Je(u),r))}}catch(c){s.e(c)}finally{s.f()}}}else n=n.add(new Iv(t.indexId,e.key,Ov,r));return n}},{key:"an",value:function(e,t,n,r,i){var a=this;hl("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),s=Qf(a),u=Qf(o);s||u;){var c=!1,l=!1;if(s&&u){var f=n(s,u);f<0?l=!0:f>0&&(c=!0)}else null!=s?l=!0:c=!0;c?(r(u),u=Qf(o)):l?(i(s),s=Qf(a)):(s=Qf(a),u=Qf(o))}}(r,i,_v,(function(r){o.push(a.cn(e,t,n,r))}),(function(r){o.push(a.hn(e,t,n,r))})),Up.waitFor(o)}},{key:"rn",value:function(e){var t=1;return Rv(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return _v(e,t)})).filter((function(e,t,n){return!t||0!==_v(e,n[t-1])}));var r=[];r.push(e);var i,a=p(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,s=_v(o,e),u=_v(o,t);if(0===s)r[0]=e.ke();else if(s>0&&u<0)r.push(o),r.push(o.ke());else if(u>0)break}}catch(f){a.e(f)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2)c.push(IDBKeyRange.bound([r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,Ov,[]],[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,Ov,[]]));return c}},{key:"getMinOffset",value:function(e,t){var n,r=this;return Up.forEach(this.Qe(t),(function(t){return r.je(e,t).next((function(e){e?(!n||Vf(e.indexState.offset,n)<0)&&(n=e.indexState.offset):n=Uf.min()}))})).next((function(){return n}))}}]),e}();function Nv(e){return Yp(e,"collectionParents")}function Pv(e){return Yp(e,"indexEntries")}function Dv(e){return Yp(e,"indexConfiguration")}function Rv(e){return Yp(e,"indexState")}var Lv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Mv=function(){function e(t,n,r){k(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return w(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function Fv(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),s=0,u=r.Wt({range:o},(function(e,t,n){return s++,n.delete()}));a.push(u.next((function(){yl(1===s)})));var c,l=[],f=p(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=mp(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(v){f.e(v)}finally{f.f()}return Up.waitFor(a).next((function(){return l}))}function Uv(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw ml();t=e.noDocument}return JSON.stringify(t).length}Mv.DEFAULT_COLLECTION_PERCENTILE=10,Mv.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Mv.DEFAULT=new Mv(41943040,Mv.DEFAULT_COLLECTION_PERCENTILE,Mv.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Mv.DISABLED=new Mv(-1,0,0);var Vv=function(){function e(t,n,r,i){k(this,e),this.userId=t,this.M=n,this.indexManager=r,this.referenceDelegate=i,this.ln={}}return w(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return jv(e).Wt({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=Bv(e),o=jv(e);return o.add({}).next((function(s){yl("number"==typeof s);var u,c=new Jp(s,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return Jd(e.Jt,t)})),i=n.mutations.map((function(t){return Jd(e.Jt,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.M,i.userId,c),f=[],h=new zf((function(e,t){return Dl(e.canonicalString(),t.canonicalString())})),d=p(r);try{for(d.s();!(u=d.n()).done;){var v=u.value,m=mp(i.userId,v.key.path,s);h=h.add(v.key.path.popLast()),f.push(o.put(l)),f.push(a.put(m,yp))}}catch(y){d.e(y)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.ln[s]=c.keys()})),Up.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return jv(e).get(t).next((function(e){return e?(yl(e.userId===n.userId),av(n.M,e)):null}))}},{key:"fn",value:function(e,t){var n=this;return this.ln[t]?Up.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.ln[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return jv(e).Wt({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(yl(t.batchId>=r),a=av(n.M,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return jv(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return jv(e).qt("userMutationsIndex",n).next((function(e){return e.map((function(e){return av(t.M,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=vp(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Bv(e).Wt({range:i},(function(r,i,o){var s=v(r,3),u=s[0],c=s[1],l=s[2],f=dp(c);if(u===n.userId&&t.path.isEqual(f))return jv(e).get(l).next((function(e){if(!e)throw ml();yl(e.userId===n.userId),a.push(av(n.M,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new zf(Dl),i=[];return t.forEach((function(t){var a=vp(n.userId,t.path),o=IDBKeyRange.lowerBound(a),s=Bv(e).Wt({range:o},(function(e,i,a){var o=v(e,3),s=o[0],u=o[1],c=o[2],l=dp(u);s===n.userId&&t.path.isEqual(l)?r=r.add(c):a.done()}));i.push(s)})),Up.waitFor(i).next((function(){return n.dn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=vp(this.userId,r),o=IDBKeyRange.lowerBound(a),s=new zf(Dl);return Bv(e).Wt({range:o},(function(e,t,a){var o=v(e,3),u=o[0],c=o[1],l=o[2],f=dp(c);u===n.userId&&r.isPrefixOf(f)?f.length===i&&(s=s.add(l)):a.done()})).next((function(){return n.dn(e,s)}))}},{key:"dn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(jv(e).get(t).next((function(e){if(null===e)throw ml();yl(e.userId===n.userId),r.push(av(n.M,e))})))})),Up.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return Fv(e.Ht,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n._n(t.batchId)})),Up.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"_n",value:function(e){delete this.ln[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return Up.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return Bv(e).Wt({range:r},(function(e,n,r){if(e[0]===t.userId){var a=dp(e[1]);i.push(a)}else r.done()})).next((function(){yl(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return qv(e,this.userId,t)}},{key:"wn",value:function(e){var t=this;return zv(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"Yt",value:function(t,n,r,i){return yl(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function qv(e,t,n){var r=vp(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return Bv(e).Wt({range:a,jt:!0},(function(e,n,r){var a=v(e,3),s=a[0],u=a[1];a[2],s===t&&u===i&&(o=!0),r.done()})).next((function(){return o}))}function jv(e){return Yp(e,"mutations")}function Bv(e){return Yp(e,"documentMutations")}function zv(e){return Yp(e,"mutationQueues")}var Kv=function(){function e(t){k(this,e),this.mn=t}return w(e,[{key:"next",value:function(){return this.mn+=2,this.mn}}],[{key:"gn",value:function(){return new e(0)}},{key:"yn",value:function(){return new e(-1)}}]),e}(),Qv=function(){function e(t,n){k(this,e),this.referenceDelegate=t,this.M=n}return w(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.pn(e).next((function(n){var r=new Kv(n.highestTargetId);return n.highestTargetId=r.next(),t.In(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.pn(e).next((function(e){return Fl.fromTimestamp(new Ml(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.pn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.pn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.In(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Tn(e,t).next((function(){return n.pn(e).next((function(r){return r.targetCount+=1,n.En(t,r),n.In(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Tn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return Wv(e).delete(t.targetId)})).next((function(){return n.pn(e)})).next((function(t){return yl(t.targetCount>0),t.targetCount-=1,n.In(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return Wv(e).Wt((function(o,s){var u=ov(s);u.sequenceNumber<=t&&null===n.get(u.targetId)&&(i++,a.push(r.removeTargetData(e,u)))})).next((function(){return Up.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return Wv(e).Wt((function(e,n){var r=ov(n);t(r)}))}},{key:"pn",value:function(e){return Gv(e).get("targetGlobalKey").next((function(e){return yl(null!==e),e}))}},{key:"In",value:function(e,t){return Gv(e).put("targetGlobalKey",t)}},{key:"Tn",value:function(e,t){return Wv(e).put(sv(this.M,t))}},{key:"En",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.pn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=Hf(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Wv(e).Wt({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=ov(n);Yf(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=Hv(e);return t.forEach((function(t){var o=lp(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),Up.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=Hv(e);return Up.forEach(t,(function(t){var a=lp(t.path);return Up.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=Hv(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Hv(e),i=wd();return r.Wt({range:n,jt:!0},(function(e,t,n){var r=dp(e[1]),a=new of(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=lp(t.path),r=IDBKeyRange.bound([n],[Ll(n)],!1,!0),i=0;return Hv(e).Wt({index:"documentTargetsIndex",jt:!0,range:r},(function(e,t,n){var r=v(e,2),a=r[0];r[1],0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"Et",value:function(e,t){return Wv(e).get(t).next((function(e){return e?ov(e):null}))}}]),e}();function Wv(e){return Yp(e,"targets")}function Gv(e){return Yp(e,"targetGlobal")}function Hv(e){return Yp(e,"targetDocuments")}function Yv(e){return Jv.apply(this,arguments)}function Jv(){return Jv=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===bl.FAILED_PRECONDITION&&t.message===Mp){e.next=2;break}throw t;case 2:hl("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),Jv.apply(this,arguments)}function Xv(e,t){var n=v(e,2),r=n[0],i=n[1],a=v(t,2),o=a[0],s=a[1],u=Dl(r,o);return 0===u?Dl(i,s):u}var Zv=function(){function e(t){k(this,e),this.An=t,this.buffer=new zf(Xv),this.Rn=0}return w(e,[{key:"bn",value:function(){return++this.Rn}},{key:"Pn",value:function(e){var t=[e,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();Xv(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),$v=function(){function e(t,n){k(this,e),this.garbageCollector=t,this.asyncQueue=n,this.Vn=!1,this.vn=null}return w(e,[{key:"start",value:function(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}},{key:"stop",value:function(){this.vn&&(this.vn.cancel(),this.vn=null)}},{key:"started",get:function(){return null!==this.vn}},{key:"Sn",value:function(e){var t=this,n=this.Vn?3e5:6e4;hl("LruGarbageCollector","Garbage collection scheduled in ".concat(n,"ms")),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,d(f().mark((function n(){return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.vn=null,t.Vn=!0,n.prev=1,n.next=4,e.collectGarbage(t.garbageCollector);case 4:n.next=14;break;case 6:if(n.prev=6,n.t0=n.catch(1),!zp(n.t0)){n.next=12;break}hl("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n.t0),n.next=14;break;case 12:return n.next=14,Yv(n.t0);case 14:return n.next=16,t.Sn(e);case 16:case"end":return n.stop()}}),n,null,[[1,6]])}))))}}]),e}(),em=function(){function e(t,n){k(this,e),this.Dn=t,this.params=n}return w(e,[{key:"calculateTargetCount",value:function(e,t){return this.Dn.Cn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return Up.resolve(Cl.A);var r=new Zv(t);return this.Dn.forEachTarget(e,(function(e){return r.Pn(e.sequenceNumber)})).next((function(){return n.Dn.xn(e,(function(e){return r.Pn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.Dn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.Dn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(hl("LruGarbageCollector","Garbage collection skipped; disabled"),Up.resolve(Lv)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(hl("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),Lv):n.Nn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.Dn.getCacheSize(e)}},{key:"Nn",value:function(e,t){var n,r,i,a,o,s,u,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(hl("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,s=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return u=Date.now(),fl()<=te.DEBUG&&hl("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(s-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(u-s)+"ms\n"+"Total Duration: ".concat(u-l,"ms")),Up.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),tm=function(){function e(t,n){k(this,e),this.db=t,this.garbageCollector=function(e,t){return new em(e,t)}(this,n)}return w(e,[{key:"Cn",value:function(e){var t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"kn",value:function(e){var t=0;return this.xn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"xn",value:function(e,t){return this.Mn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return nm(e,n)}},{key:"removeReference",value:function(e,t,n){return nm(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return nm(e,t)}},{key:"On",value:function(e,t){return function(e,t){var n=!1;return zv(e).zt((function(r){return qv(e,r,t).next((function(e){return e&&(n=!0),Up.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Mn(e,(function(o,s){if(s<=t){var u=n.On(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,Fl.min()),Hv(e).delete([0,lp(o.path)])}))}));i.push(u)}})).next((function(){return Up.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return nm(e,t)}},{key:"Mn",value:function(e,t){var n,r=Hv(e),i=Cl.A;return r.Wt({index:"documentTargetsIndex"},(function(e,r){var a=v(e,2),o=a[0],s=(a[1],r.path),u=r.sequenceNumber;0===o?(i!==Cl.A&&t(new of(dp(n)),i),i=u,n=s):i=Cl.A})).next((function(){i!==Cl.A&&t(new of(dp(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function nm(e,t){return Hv(e).put(function(e,t){return{targetId:0,path:lp(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var rm=function(){function e(){k(this,e),this.changes=new dd((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return w(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,Cf.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Up.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),im=function(){function e(t){k(this,e),this.M=t}return w(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return sm(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return sm(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],nv(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Fn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=Cf.newInvalidDocument(t);return sm(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(um(t))},(function(e,i){r=n.$n(t,i)})).next((function(){return r}))}},{key:"Bn",value:function(e,t){var n=this,r={size:0,document:Cf.newInvalidDocument(t)};return sm(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(um(t))},(function(e,i){r={document:n.$n(t,i),size:Uv(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=vd();return this.Ln(e,t,(function(e,t){var i=n.$n(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"Un",value:function(e,t){var n=this,r=vd(),i=new qf(of.comparator);return this.Ln(e,t,(function(e,t){var a=n.$n(e,t);r=r.insert(e,a),i=i.insert(e,Uv(t))})).next((function(){return{documents:r,qn:i}}))}},{key:"Ln",value:function(e,t,n){if(t.isEmpty())return Up.resolve();var r=new zf(lm);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(um(r.first()),um(r.last())),a=r.getIterator(),o=a.getNext();return sm(e).Wt({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=of.fromSegments([].concat(h(t.prefixPath),[t.collectionGroup,t.documentId]));o&&lm(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.Ut(um(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getAllFromCollection",value:function(e,t,n){var r=this,i=[t.popLast().toArray(),t.lastSegment(),nv(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return sm(e).qt(IDBKeyRange.bound(i,a,!0)).next((function(e){var t,n=vd(),i=p(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=r.$n(of.fromSegments(a.prefixPath.concat(a.collectionGroup,a.documentId)),a);n=n.insert(o.key,o)}}catch(s){i.e(s)}finally{i.f()}return n}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=vd(),o=cm(t,n),s=cm(t,Uf.max());return sm(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,s,!0)},(function(e,t,n){var o=i.$n(of.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new am(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return om(e).get("remoteDocumentGlobalKey").next((function(e){return yl(!!e),e}))}},{key:"Fn",value:function(e,t){return om(e).put("remoteDocumentGlobalKey",t)}},{key:"$n",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=Yd(e.Jt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=of.fromSegments(t.noDocument.path),i=iv(t.noDocument.readTime);n=Cf.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return ml();var a=of.fromSegments(t.unknownDocument.path),o=iv(t.unknownDocument.version);n=Cf.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new Ml(e[0],e[1]);return Fl.fromTimestamp(t)}(t.readTime)),n}(this.M,t);if(!n.isNoDocument()||!n.version.isEqual(Fl.min()))return n}return Cf.newInvalidDocument(e)}}]),e}(),am=function(e){y(n,e);var t=g(n);function n(e,r){var i;return k(this,n),(i=t.call(this)).Kn=e,i.trackRemovals=r,i.Gn=new dd((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return w(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new zf((function(e,t){return Dl(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var s=t.Gn.get(a);if(n.push(t.Kn.removeEntry(e,a,s.readTime)),o.isValidDocument()){var u=tv(t.Kn.M,o);i=i.add(a.path.popLast());var c=Uv(u);r+=c-s.size,n.push(t.Kn.addEntry(e,a,u))}else if(r-=s.size,t.trackRemovals){var l=tv(t.Kn.M,o.convertToNoDocument(Fl.min()));n.push(t.Kn.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.Kn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.Kn.updateMetadata(e,r)),Up.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.Kn.Bn(e,t).next((function(e){return n.Gn.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.Kn.Un(e,t).next((function(e){var t=e.documents;return e.qn.forEach((function(e,r){n.Gn.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(rm);function om(e){return Yp(e,"remoteDocumentGlobal")}function sm(e){return Yp(e,"remoteDocumentsV14")}function um(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function cm(e,t){var n=t.documentKey.path.toArray();return[e,nv(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function lm(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=Dl(n[a],r[a]))return i;return(i=Dl(n.length,r.length))||(i=Dl(n[n.length-2],r[r.length-2]))||Dl(n[n.length-1],r[r.length-1])}var fm=function(){function e(t){k(this,e),this.M=t}return w(e,[{key:"kt",value:function(e,t,n,r){var i=this,a=new Vp("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",pp,{unique:!0}),e.createObjectStore("documentMutations")}(e),hm(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=Up.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),hm(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Fl.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").qt().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",pp,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return Up.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Qn(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.jn(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Wn(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.zn(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.Hn(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:Op});t.createIndex("collectionPathOverlayIndex",Cp,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Np,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:gp});t.createIndex("documentKeyIndex",bp),t.createIndex("collectionGroupIndex",kp)}(e)})).next((function(){return i.Jn(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){!function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Ep}).createIndex("sequenceNumberIndex",Ap,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Tp}).createIndex("documentKeyIndex",Sp,{unique:!1})}(e)}))),o}},{key:"jn",value:function(e){var t=0;return e.store("remoteDocuments").Wt((function(e,n){t+=Uv(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Qn",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.qt().next((function(n){return Up.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",i).next((function(r){return Up.forEach(r,(function(r){yl(r.userId===n.userId);var i=av(t.M,r);return Fv(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Wn",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.Wt((function(n,i){var a=new Bl(n),o=function(e){return[0,lp(e)]}(a);r.push(t.get(o).next((function(n){return n?Up.resolve():function(n){return t.put({targetId:0,path:lp(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return Up.waitFor(r)}))}))}},{key:"zn",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:_p});var n=t.store("collectionParents"),r=new Sv,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:lp(i)})}};return t.store("remoteDocuments").Wt({jt:!0},(function(e,t){var n=new Bl(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").Wt({jt:!0},(function(e,t){var n=v(e,3),r=(n[0],n[1]),a=(n[2],dp(r));return i(a.popLast())}))}))}},{key:"Hn",value:function(e){var t=this,n=e.store("targets");return n.Wt((function(e,r){var i=ov(r),a=sv(t.M,i);return n.put(a)}))}},{key:"Jn",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.Wt((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new of(Bl.fromString(i.document.name).popFirst(5)):i.noDocument?of.fromSegments(i.noDocument.path):i.unknownDocument?of.fromSegments(i.unknownDocument.path):ml()).path.toArray(),s={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(s))})).next((function(){return Up.waitFor(r)}))}}]),e}();function hm(e){e.createObjectStore("targetDocuments",{keyPath:xp}).createIndex("documentTargetsIndex",Ip,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",wp,{unique:!0}),e.createObjectStore("targetGlobal")}var dm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",pm=function(){function e(t,n,r,i,a,o,s,u,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:13;if(k(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Yn=a,this.window=o,this.document=s,this.Xn=c,this.Zn=l,this.ts=f,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=function(e){return Promise.resolve()},!e.vt())throw new kl(bl.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new tm(this,i),this.hs=n+"main",this.M=new ev(u),this.ls=new qp(this.hs,this.ts,new fm(this.M)),this.fs=new Qv(this.referenceDelegate,this.M),this.ds=function(e){return new im(e)}(this.M),this._s=new fv,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===l&&dl("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return w(e,[{key:"start",value:function(){var e=this;return this.gs().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new kl(bl.FAILED_PRECONDITION,dm);return e.ys(),e.ps(),e.Is(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.fs.getHighestSequenceNumber(t)}))})).then((function(t){e.es=new Cl(t,e.Xn)})).then((function(){e.ns=!0})).catch((function(t){return e.ls&&e.ls.close(),Promise.reject(t)}))}},{key:"Ts",value:function(e){var t=this;return this.cs=function(){var n=d(f().mark((function n(r){return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ls.Ot(function(){var t=d(f().mark((function t(n){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget(d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.gs();case 4:case"end":return e.stop()}}),e)})))))}},{key:"gs",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return mm(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.Es(t).next((function(t){t||(e.isPrimary=!1,e.Yn.enqueueRetryable((function(){return e.cs(!1)})))}))})).next((function(){return e.As(t)})).next((function(n){return e.isPrimary&&!n?e.Rs(t).next((function(){return!1})):!!n&&e.bs(t).next((function(){return!0}))}))})).catch((function(t){if(zp(t))return hl("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return hl("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Yn.enqueueRetryable((function(){return e.cs(t)})),e.isPrimary=t}))}},{key:"Es",value:function(e){var t=this;return vm(e).get("owner").next((function(e){return Up.resolve(t.Ps(e))}))}},{key:"Vs",value:function(e){return mm(e).delete(this.clientId)}},{key:"vs",value:function(){var e=d(f().mark((function e(){var t,n,r,i,a=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.Ss(this.us,18e5)){e.next=6;break}return this.us=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=Yp(e,"clientMetadata");return t.qt().next((function(e){var n=a.Ds(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return Up.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.ws){n=p(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.ws.removeItem(this.Cs(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"Is",value:function(){var e=this;this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.gs().then((function(){return e.vs()})).then((function(){return e.Is()}))}))}},{key:"Ps",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"As",value:function(e){var t=this;return this.Zn?Up.resolve(!0):vm(e).get("owner").next((function(n){if(null!==n&&t.Ss(n.leaseTimestampMs,5e3)&&!t.xs(n.ownerId)){if(t.Ps(n)&&t.networkEnabled)return!0;if(!t.Ps(n)){if(!n.allowTabSynchronization)throw new kl(bl.FAILED_PRECONDITION,dm);return!1}}return!(!t.networkEnabled||!t.inForeground)||mm(e).qt().next((function(e){return void 0===t.Ds(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&hl("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=d(f().mark((function e(){var t=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.ns=!1,this.Ns(),this.os&&(this.os.cancel(),this.os=null),this.ks(),this.Ms(),e.next=7,this.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new Hp(e,Cl.A);return t.Rs(n).next((function(){return t.Vs(n)}))}));case 7:this.ls.close(),this.Os();case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"Ds",value:function(e,t){var n=this;return e.filter((function(e){return n.Ss(e.updateTimeMs,t)&&!n.xs(e.clientId)}))}},{key:"Fs",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return mm(t).qt().next((function(t){return e.Ds(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.ns}},{key:"getMutationQueue",value:function(e,t){return Vv.Yt(e,this.M,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.fs}},{key:"getRemoteDocumentCache",value:function(){return this.ds}},{key:"getIndexManager",value:function(e){return new Cv(e,this.M.Jt.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return pv.Yt(this.M,e)}},{key:"getBundleCache",value:function(){return this._s}},{key:"runTransaction",value:function(e,t,n){var r=this;hl("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",s=14===(i=this.ts)?Lp:13===i?Rp:12===i?Dp:11===i?Pp:void ml();return this.ls.runTransaction(e,o,s,(function(i){return a=new Hp(i,r.es?r.es.next():Cl.A),"readwrite-primary"===t?r.Es(a).next((function(e){return!!e||r.As(a)})).next((function(t){if(!t)throw dl("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Yn.enqueueRetryable((function(){return r.cs(!1)})),new kl(bl.FAILED_PRECONDITION,Mp);return n(a)})).next((function(e){return r.bs(a).next((function(){return e}))})):r.$s(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"$s",value:function(e){var t=this;return vm(e).get("owner").next((function(e){if(null!==e&&t.Ss(e.leaseTimestampMs,5e3)&&!t.xs(e.ownerId)&&!t.Ps(e)&&!(t.Zn||t.allowTabSynchronization&&e.allowTabSynchronization))throw new kl(bl.FAILED_PRECONDITION,dm)}))}},{key:"bs",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return vm(e).put("owner",t)}},{key:"Rs",value:function(e){var t=this,n=vm(e);return n.get("owner").next((function(e){return t.Ps(e)?(hl("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):Up.resolve()}))}},{key:"Ss",value:function(e,t){var n=Date.now();return!(e<n-t||e>n&&(dl("Detected an update time that is in the future: ".concat(e," > ").concat(n)),1))}},{key:"ys",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=function(){e.Yn.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.gs()}))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}},{key:"ks",value:function(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}},{key:"ps",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=function(){t.Ns(),!F()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&t.Yn.enterRestrictedMode(!0),t.Yn.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.ss))}},{key:"Ms",value:function(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}},{key:"xs",value:function(e){var t;try{var n=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return hl("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return dl("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Ns",value:function(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(r){dl("Failed to set zombie client id.",r)}}},{key:"Os",value:function(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(r){}}},{key:"Cs",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"vt",value:function(){return qp.vt()}}]),e}();function vm(e){return Yp(e,"owner")}function mm(e){return Yp(e,"clientMetadata")}function ym(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var gm=function(){function e(t,n,r){k(this,e),this.ds=t,this.Bs=n,this.indexManager=r}return w(e,[{key:"Ls",value:function(e,t){var n=this;return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.Us(e,t,r)}))}},{key:"Us",value:function(e,t,n){return this.ds.getEntry(e,t).next((function(e){var t,r=p(n);try{for(r.s();!(t=r.n()).done;)t.value.applyToLocalView(e)}catch(i){r.e(i)}finally{r.f()}return e}))}},{key:"qs",value:function(e,t){e.forEach((function(e,n){var r,i=p(t);try{for(i.s();!(r=i.n()).done;)r.value.applyToLocalView(n)}catch(a){i.e(a)}finally{i.f()}}))}},{key:"Ks",value:function(e,t){var n=this;return this.ds.getEntries(e,t).next((function(t){return n.Gs(e,t).next((function(){return t}))}))}},{key:"Gs",value:function(e,t){var n=this;return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){return n.qs(t,e)}))}},{key:"Qs",value:function(e,t,n){return function(e){return of.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.js(e,t.path):bh(t)?this.Ws(e,t,n):this.zs(e,t,n)}},{key:"js",value:function(e,t){return this.Ls(e,new of(t)).next((function(e){var t=yd();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"Ws",value:function(e,t,n){var r=this,i=t.collectionGroup,a=yd();return this.indexManager.getCollectionParents(e,i).next((function(o){return Up.forEach(o,(function(o){var s=function(e,t){return new ph(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.zs(e,s,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"zs",value:function(e,t,n){var r,i=this;return this.ds.getAllFromCollection(e,t.path,n).next((function(n){return r=n,i.Bs.getAllMutationBatchesAffectingQuery(e,t)})).next((function(e){var t,n=p(e);try{for(n.s();!(t=n.n()).done;){var i,a=t.value,o=p(a.mutations);try{for(o.s();!(i=o.n()).done;){var s=i.value,u=s.key,c=r.get(u);null==c&&(c=Cf.newInvalidDocument(u),r=r.insert(u,c)),Xh(s,c,a.localWriteTime),c.isFoundDocument()||(r=r.remove(u))}}catch(l){o.e(l)}finally{o.f()}}}catch(l){n.e(l)}finally{n.f()}})).next((function(){return r.forEach((function(e,n){Ah(t,n)||(r=r.remove(e))})),r}))}}]),e}(),bm=function(){function e(t,n,r,i){k(this,e),this.targetId=t,this.fromCache=n,this.Hs=r,this.Js=i}return w(e,null,[{key:"Ys",value:function(t,n){var r,i=wd(),a=wd(),o=p(n.docChanges);try{for(o.s();!(r=o.n()).done;){var s=r.value;switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}}}catch(u){o.e(u)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),km=function(){function e(){k(this,e),this.Xs=!1}return w(e,[{key:"initialize",value:function(e,t){this.Zs=e,this.indexManager=t,this.Xs=!0}},{key:"Qs",value:function(e,t,n,r){var i=this;return this.ti(e,t).next((function(a){return a||i.ei(e,t,r,n)})).next((function(n){return n||i.ni(e,t)}))}},{key:"ti",value:function(e,t){return Up.resolve(null)}},{key:"ei",value:function(e,t,n,r){var i=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||r.isEqual(Fl.min())?this.ni(e,t):this.Zs.Ks(e,n).next((function(a){var o=i.si(t,a);return i.ii(t,o,n,r)?i.ni(e,t):(fl()<=te.DEBUG&&hl("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Eh(t)),i.ri(e,o,t,Mf(r,-1)))}))}},{key:"si",value:function(e,t){var n=new zf(Sh(e));return t.forEach((function(t,r){Ah(e,r)&&(n=n.add(r))})),n}},{key:"ii",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"ni",value:function(e,t){return fl()<=te.DEBUG&&hl("QueryEngine","Using full collection scan to execute query:",Eh(t)),this.Zs.Qs(e,t,Uf.min())}},{key:"ri",value:function(e,t,n,r){return this.Zs.Qs(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),wm=function(){function e(t,n,r,i){k(this,e),this.persistence=t,this.oi=n,this.M=i,this.ui=new qf(Dl),this.ai=new dd((function(e){return Hf(e)}),Yf),this.ci=new Map,this.hi=t.getRemoteDocumentCache(),this.fs=t.getTargetCache(),this._s=t.getBundleCache(),this.li(r)}return w(e,[{key:"li",value:function(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.fi=new gm(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.ui)}))}}]),e}();function xm(e,t,n,r){return new wm(e,t,n,r)}function Im(e,t){return _m.apply(this,arguments)}function _m(){return _m=d(f().mark((function e(t,n){var r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=gl(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.Bs.getAllMutationBatches(e).next((function(i){return t=i,r.li(n),r.Bs.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],s=wd(),u=p(t);try{for(u.s();!(i=u.n()).done;){var c=i.value;a.push(c.batchId);var l,f=p(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;s=s.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){u.e(k)}finally{u.f()}var d,v=p(n);try{for(v.s();!(d=v.n()).done;){var m=d.value;o.push(m.batchId);var y,g=p(m.mutations);try{for(g.s();!(y=g.n()).done;){var b=y.value;s=s.add(b.key)}}catch(k){g.e(k)}finally{g.f()}}}catch(k){v.e(k)}finally{v.f()}return r.fi.Ks(e,s).next((function(e){return{di:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),_m.apply(this,arguments)}function Em(e){var t=gl(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.fs.getLastRemoteSnapshotVersion(e)}))}function Am(e,t,n){var r=wd();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=vd();return n.forEach((function(n,i){var a=e.get(n);i.isNoDocument()&&i.version.isEqual(Fl.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!a.isValidDocument()||i.version.compareTo(a.version)>0||0===i.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):hl("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",i.version)})),r}))}function Tm(e,t){var n=gl(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.Bs.getNextMutationBatchAfterBatchId(e,t)}))}function Sm(e,t){var n=gl(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.fs.getTargetData(e,t).next((function(i){return i?(r=i,Up.resolve(r)):n.fs.allocateTargetId(e).next((function(i){return r=new $p(t,i,0,e.currentSequenceNumber),n.fs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.ui.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ui=n.ui.insert(e.targetId,e),n.ai.set(t,e.targetId)),e}))}function Om(e,t,n){return Cm.apply(this,arguments)}function Cm(){return Cm=d(f().mark((function e(t,n,r){var i,a,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=gl(t),a=i.ui.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),zp(e.t1)){e.next=12;break}throw e.t1;case 12:hl("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.ui=i.ui.remove(n),i.ai.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),Cm.apply(this,arguments)}function Nm(e,t,n){var r=gl(e),i=Fl.min(),a=wd();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=gl(e),i=r.ai.get(n);return void 0!==i?Up.resolve(r.ui.get(i)):r.fs.getTargetData(t,n)}(r,e,wh(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.oi.Qs(e,t,n?i:Fl.min(),n?a:wd())})).next((function(e){return Rm(r,Th(t),e),{documents:e,_i:a}}))}))}function Pm(e,t){var n=gl(e),r=gl(n.fs),i=n.ui.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.Et(e,t).next((function(e){return e?e.target:null}))}))}function Dm(e,t){var n=gl(e),r=n.ci.get(t)||Fl.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.hi.getAllFromCollectionGroup(e,t,Mf(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return Rm(n,t,e),e}))}function Rm(e,t,n){var r=Fl.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.ci.set(t,r)}function Lm(e,t){return Mm.apply(this,arguments)}function Mm(){return Mm=d(f().mark((function e(t,n){var r,i,a,o=arguments;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:wd(),e.next=3,Sm(t,wh(uv(n.bundledQuery)));case 3:return i=e.sent,a=gl(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=Vd(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a._s.saveNamedQuery(e,n);var o=i.withResumeToken(Wl.EMPTY_BYTE_STRING,t);return a.ui=a.ui.insert(o.targetId,o),a.fs.updateTargetData(e,o).next((function(){return a.fs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.fs.addMatchingKeys(e,r,i.targetId)})).next((function(){return a._s.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),Mm.apply(this,arguments)}var Fm=function(){function e(t){k(this,e),this.M=t,this.yi=new Map,this.pi=new Map}return w(e,[{key:"getBundleMetadata",value:function(e,t){return Up.resolve(this.yi.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.yi.set(t.id,{id:(n=t).id,version:n.version,createTime:Vd(n.createTime)}),Up.resolve()}},{key:"getNamedQuery",value:function(e,t){return Up.resolve(this.pi.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.pi.set(t.name,function(e){return{name:e.name,query:uv(e.bundledQuery),readTime:Vd(e.readTime)}}(t)),Up.resolve()}}]),e}(),Um=function(){function e(){k(this,e),this.overlays=new qf(of.comparator),this.Ii=new Map}return w(e,[{key:"getOverlay",value:function(e,t){return Up.resolve(this.overlays.get(t))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.Xt(e,t,i)})),Up.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.Ii.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.Ii.delete(n)),Up.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=gd(),i=t.length+1,a=new of(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var s=o.getNext().value,u=s.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===i&&s.largestBatchId>n&&r.set(s.getKey(),s)}return Up.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new qf((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var s=i.get(o.largestBatchId);null===s&&(s=gd(),i=i.insert(o.largestBatchId,s)),s.set(o.getKey(),o)}}for(var u=gd(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return u.set(e,t)})),!(u.size()>=r)););return Up.resolve(u)}},{key:"Xt",value:function(e,t,n){if(null!==n){var r=this.overlays.get(n.key);if(null!==r){var i=this.Ii.get(r.largestBatchId).delete(n.key);this.Ii.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new Zp(t,n));var a=this.Ii.get(t);void 0===a&&(a=wd(),this.Ii.set(t,a)),this.Ii.set(t,a.add(n.key))}}}]),e}(),Vm=function(){function e(){k(this,e),this.Ti=new zf(qm.Ei),this.Ai=new zf(qm.Ri)}return w(e,[{key:"isEmpty",value:function(){return this.Ti.isEmpty()}},{key:"addReference",value:function(e,t){var n=new qm(e,t);this.Ti=this.Ti.add(n),this.Ai=this.Ai.add(n)}},{key:"bi",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.Pi(new qm(e,t))}},{key:"Vi",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"vi",value:function(e){var t=this,n=new of(new Bl([])),r=new qm(n,e),i=new qm(n,e+1),a=[];return this.Ai.forEachInRange([r,i],(function(e){t.Pi(e),a.push(e.key)})),a}},{key:"Si",value:function(){var e=this;this.Ti.forEach((function(t){return e.Pi(t)}))}},{key:"Pi",value:function(e){this.Ti=this.Ti.delete(e),this.Ai=this.Ai.delete(e)}},{key:"Di",value:function(e){var t=new of(new Bl([])),n=new qm(t,e),r=new qm(t,e+1),i=wd();return this.Ai.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new qm(e,0),n=this.Ti.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),qm=function(){function e(t,n){k(this,e),this.key=t,this.Ci=n}return w(e,null,[{key:"Ei",value:function(e,t){return of.comparator(e.key,t.key)||Dl(e.Ci,t.Ci)}},{key:"Ri",value:function(e,t){return Dl(e.Ci,t.Ci)||of.comparator(e.key,t.key)}}]),e}(),jm=function(){function e(t,n){k(this,e),this.indexManager=t,this.referenceDelegate=n,this.Bs=[],this.xi=1,this.Ni=new zf(qm.Ei)}return w(e,[{key:"checkEmpty",value:function(e){return Up.resolve(0===this.Bs.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.xi;this.xi++,this.Bs.length>0&&this.Bs[this.Bs.length-1];var a=new Jp(i,t,n,r);this.Bs.push(a);var o,s=p(r);try{for(s.s();!(o=s.n()).done;){var u=o.value;this.Ni=this.Ni.add(new qm(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast())}}catch(c){s.e(c)}finally{s.f()}return Up.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return Up.resolve(this.ki(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.Mi(n),i=r<0?0:r;return Up.resolve(this.Bs.length>i?this.Bs[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Up.resolve(0===this.Bs.length?-1:this.xi-1)}},{key:"getAllMutationBatches",value:function(e){return Up.resolve(this.Bs.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new qm(t,0),i=new qm(t,Number.POSITIVE_INFINITY),a=[];return this.Ni.forEachInRange([r,i],(function(e){var t=n.ki(e.Ci);a.push(t)})),Up.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new zf(Dl);return t.forEach((function(e){var t=new qm(e,0),i=new qm(e,Number.POSITIVE_INFINITY);n.Ni.forEachInRange([t,i],(function(e){r=r.add(e.Ci)}))})),Up.resolve(this.Oi(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;of.isDocumentKey(i)||(i=i.child(""));var a=new qm(new of(i),0),o=new zf(Dl);return this.Ni.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Ci)),!0)}),a),Up.resolve(this.Oi(o))}},{key:"Oi",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.ki(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;yl(0===this.Fi(t.batchId,"removed")),this.Bs.shift();var r=this.Ni;return Up.forEach(t.mutations,(function(i){var a=new qm(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.Ni=r}))}},{key:"_n",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new qm(t,0),r=this.Ni.firstAfterOrEqual(n);return Up.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.Bs.length,Up.resolve()}},{key:"Fi",value:function(e,t){return this.Mi(e)}},{key:"Mi",value:function(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}},{key:"ki",value:function(e){var t=this.Mi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}]),e}(),Bm=function(){function e(t){k(this,e),this.$i=t,this.docs=new qf(of.comparator),this.size=0}return w(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.$i(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Up.resolve(n?n.document.mutableCopy():Cf.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=vd();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():Cf.newInvalidDocument(e))})),Up.resolve(r)}},{key:"getAllFromCollection",value:function(e,t,n){for(var r=vd(),i=new of(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),s=o.key,u=o.value.document;if(!t.isPrefixOf(s.path))break;s.path.length>t.length+1||Vf(Ff(u),n)<=0||(r=r.insert(u.key,u.mutableCopy()))}return Up.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){ml()}},{key:"Bi",value:function(e,t){return Up.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new zm(this)}},{key:"getSize",value:function(e){return Up.resolve(this.size)}}]),e}(),zm=function(e){y(n,e);var t=g(n);function n(e){var r;return k(this,n),(r=t.call(this)).Kn=e,r}return w(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.Kn.addEntry(e,i)):t.Kn.removeEntry(r)})),Up.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Kn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Kn.getEntries(e,t)}}]),n}(rm),Km=function(){function e(t){k(this,e),this.persistence=t,this.Li=new dd((function(e){return Hf(e)}),Yf),this.lastRemoteSnapshotVersion=Fl.min(),this.highestTargetId=0,this.Ui=0,this.qi=new Vm,this.targetCount=0,this.Ki=Kv.gn()}return w(e,[{key:"forEachTarget",value:function(e,t){return this.Li.forEach((function(e,n){return t(n)})),Up.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Up.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Up.resolve(this.Ui)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Ki.next(),Up.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ui&&(this.Ui=t),Up.resolve()}},{key:"Tn",value:function(e){this.Li.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Ki=new Kv(t),this.highestTargetId=t),e.sequenceNumber>this.Ui&&(this.Ui=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Tn(t),this.targetCount+=1,Up.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Tn(t),Up.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Li.delete(t.target),this.qi.vi(t.targetId),this.targetCount-=1,Up.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Li.forEach((function(o,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.Li.delete(o),a.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)})),Up.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return Up.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Li.get(t)||null;return Up.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.qi.bi(t,n),Up.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.qi.Vi(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),Up.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.qi.vi(t),Up.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.qi.Di(t);return Up.resolve(n)}},{key:"containsKey",value:function(e,t){return Up.resolve(this.qi.containsKey(t))}}]),e}(),Qm=function(){function e(t,n){var r=this;k(this,e),this.Gi={},this.overlays={},this.es=new Cl(0),this.ns=!1,this.ns=!0,this.referenceDelegate=t(this),this.fs=new Km(this),this.indexManager=new Tv,this.ds=function(e){return new Bm(e)}((function(e){return r.referenceDelegate.Qi(e)})),this.M=new ev(n),this._s=new Fm(this.M)}return w(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.ns=!1,Promise.resolve()}},{key:"started",get:function(){return this.ns}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new Um,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Gi[e.toKey()];return n||(n=new jm(t,this.referenceDelegate),this.Gi[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.fs}},{key:"getRemoteDocumentCache",value:function(){return this.ds}},{key:"getBundleCache",value:function(){return this._s}},{key:"runTransaction",value:function(e,t,n){var r=this;hl("MemoryPersistence","Starting transaction:",e);var i=new Wm(this.es.next());return this.referenceDelegate.ji(),n(i).next((function(e){return r.referenceDelegate.Wi(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"zi",value:function(e,t){return Up.or(Object.values(this.Gi).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),Wm=function(e){y(n,e);var t=g(n);function n(e){var r;return k(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return w(n)}(Fp),Gm=function(){function e(t){k(this,e),this.persistence=t,this.Hi=new Vm,this.Ji=null}return w(e,[{key:"Xi",get:function(){if(this.Ji)return this.Ji;throw ml()}},{key:"addReference",value:function(e,t,n){return this.Hi.addReference(n,t),this.Xi.delete(n.toString()),Up.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Hi.removeReference(n,t),this.Xi.add(n.toString()),Up.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Xi.add(t.toString()),Up.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Hi.vi(t.targetId).forEach((function(e){return n.Xi.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Xi.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"ji",value:function(){this.Ji=new Set}},{key:"Wi",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Up.forEach(this.Xi,(function(r){var i=of.fromPath(r);return t.Zi(e,i).next((function(e){e||n.removeEntry(i,Fl.min())}))})).next((function(){return t.Ji=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Zi(e,t).next((function(e){e?n.Xi.delete(t.toString()):n.Xi.add(t.toString())}))}},{key:"Qi",value:function(e){return 0}},{key:"Zi",value:function(e,t){var n=this;return Up.or([function(){return Up.resolve(n.Hi.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.zi(e,t)}])}}],[{key:"Yi",value:function(t){return new e(t)}}]),e}();function Hm(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function Ym(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function Jm(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var Xm=function(){function e(t,n,r,i){k(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return w(e,[{key:"er",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"tr",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&(o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new kl(a.error.code,a.error.message)),o?new e(t,n,a.state,i):(dl("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),Zm=function(){function e(t,n,r){k(this,e),this.targetId=t,this.state=n,this.error=r}return w(e,[{key:"er",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"tr",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&(a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new kl(i.error.code,i.error.message)),a?new e(t,i.state,r):(dl("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),$m=function(){function e(t,n){k(this,e),this.clientId=t,this.activeTargetIds=n}return w(e,null,[{key:"tr",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Id(),o=0;i&&o<r.activeTargetIds.length;++o)i=af(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(dl("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),ey=function(){function e(t,n){k(this,e),this.clientId=t,this.onlineState=n}return w(e,null,[{key:"tr",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(dl("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),ty=function(){function e(){k(this,e),this.activeTargetIds=Id()}return w(e,[{key:"nr",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"sr",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"er",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),ny=function(){function e(t,n,r,i,a){k(this,e),this.window=t,this.Yn=n,this.persistenceKey=r,this.ir=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new qf(Dl),this.started=!1,this.cr=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.hr=Hm(this.persistenceKey,this.ir),this.lr=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ar=this.ar.insert(this.ir,new ty),this.dr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this._r=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.wr=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.mr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.gr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}return w(e,[{key:"start",value:function(){var e=d(f().mark((function e(){var t,n,r,i,a,o,s,u,c,l,h,d=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Fs();case 2:t=e.sent,n=p(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.ir){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(Hm(this.persistenceKey,i)))&&(o=$m.tr(i,a))&&(this.ar=this.ar.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.yr(),(s=this.storage.getItem(this.mr))&&(u=this.pr(s))&&this.Ir(u),c=p(this.cr);try{for(c.s();!(l=c.n()).done;)h=l.value,this.ur(h)}catch(f){c.e(f)}finally{c.f()}this.cr=[],this.window.addEventListener("pagehide",(function(){return d.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.lr,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.Tr(this.ar)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.ar.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Er(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Er(e,t,n),this.Ar(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(Jm(this.persistenceKey,e));if(n){var r=Zm.tr(e,n);r&&(t=r.state)}}return this.Rr.nr(e),this.yr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Rr.sr(e),this.yr()}},{key:"isLocalQueryTarget",value:function(e){return this.Rr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(Jm(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.br(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Ar(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Pr(e)}},{key:"notifyBundleLoaded",value:function(e){this.Vr(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return hl("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){hl("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){hl("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"ur",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(hl("SharedClientState","EVENT",n.key,n.newValue),n.key===this.hr)return void dl("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable(d(f().mark((function e(){var r,i,a,o,s,u,c;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.dr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.vr(n.key),e.abrupt("return",t.Sr(r,null));case 6:if(!(i=t.Dr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Sr(i.clientId,i));case 9:e.next=41;break;case 11:if(!t._r.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Cr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Nr(a));case 16:e.next=41;break;case 18:if(!t.wr.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.kr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Mr(o));case 23:e.next=41;break;case 25:if(n.key!==t.mr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(s=t.pr(n.newValue))){e.next=30;break}return e.abrupt("return",t.Ir(s));case 30:e.next=41;break;case 32:if(n.key!==t.lr){e.next=37;break}u=function(e){var t=Cl.A;if(null!=e)try{var n=JSON.parse(e);yl("number"==typeof n),t=n}catch(e){dl("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),u!==Cl.A&&t.sequenceNumberHandler(u),e.next=41;break;case 37:if(n.key!==t.gr){e.next=41;break}return c=t.Or(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Fr(e)})));case 41:e.next=44;break;case 43:t.cr.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Rr",get:function(){return this.ar.get(this.ir)}},{key:"yr",value:function(){this.setItem(this.hr,this.Rr.er())}},{key:"Er",value:function(e,t,n){var r=new Xm(this.currentUser,e,t,n),i=Ym(this.persistenceKey,this.currentUser,e);this.setItem(i,r.er())}},{key:"Ar",value:function(e){var t=Ym(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Pr",value:function(e){var t={clientId:this.ir,onlineState:e};this.storage.setItem(this.mr,JSON.stringify(t))}},{key:"br",value:function(e,t,n){var r=Jm(this.persistenceKey,e),i=new Zm(e,t,n);this.setItem(r,i.er())}},{key:"Vr",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.gr,t)}},{key:"vr",value:function(e){var t=this.dr.exec(e);return t?t[1]:null}},{key:"Dr",value:function(e,t){var n=this.vr(e);return $m.tr(n,t)}},{key:"Cr",value:function(e,t){var n=this._r.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Xm.tr(new ul(i),r,t)}},{key:"kr",value:function(e,t){var n=this.wr.exec(e),r=Number(n[1]);return Zm.tr(r,t)}},{key:"pr",value:function(e){return ey.tr(e)}},{key:"Or",value:function(e){return JSON.parse(e)}},{key:"Nr",value:function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.$r(t.batchId,t.state,t.error));case 2:hl("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"Mr",value:function(e){return this.syncEngine.Br(e.targetId,e.state,e.error)}},{key:"Sr",value:function(e,t){var n=this,r=t?this.ar.insert(e,t):this.ar.remove(e),i=this.Tr(this.ar),a=this.Tr(r),o=[],s=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||s.push(e)})),this.syncEngine.Lr(o,s).then((function(){n.ar=r}))}},{key:"Ir",value:function(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"Tr",value:function(e){var t=Id();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"vt",value:function(e){return!(!e||!e.localStorage)}}]),e}(),ry=function(){function e(){k(this,e),this.Ur=new ty,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return w(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Ur.nr(e),this.qr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.qr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Ur.sr(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Ur.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.qr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Ur.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Ur.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Ur=new ty,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),iy=function(){function e(){k(this,e)}return w(e,[{key:"Kr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),ay=function(){function e(){var t=this;k(this,e),this.Gr=function(){return t.Qr()},this.jr=function(){return t.Wr()},this.zr=[],this.Hr()}return w(e,[{key:"Kr",value:function(e){this.zr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}},{key:"Hr",value:function(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}},{key:"Qr",value:function(){hl("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=p(this.zr);try{for(t.s();!(e=t.n()).done;)(0,e.value)(0)}catch(n){t.e(n)}finally{t.f()}}},{key:"Wr",value:function(){hl("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=p(this.zr);try{for(t.s();!(e=t.n()).done;)(0,e.value)(1)}catch(n){t.e(n)}finally{t.f()}}}],[{key:"vt",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),oy={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},sy=function(){function e(t){k(this,e),this.Jr=t.Jr,this.Yr=t.Yr}return w(e,[{key:"Xr",value:function(e){this.Zr=e}},{key:"eo",value:function(e){this.no=e}},{key:"onMessage",value:function(e){this.so=e}},{key:"close",value:function(){this.Yr()}},{key:"send",value:function(e){this.Jr(e)}},{key:"io",value:function(){this.Zr()}},{key:"ro",value:function(e){this.no(e)}},{key:"oo",value:function(e){this.so(e)}}]),e}(),uy=function(e){y(n,e);var t=g(n);function n(e){var r;return k(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return w(n,[{key:"fo",value:function(e,t,n,r){return new Promise((function(i,a){var o=new ol;o.listenOnce(tl.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case el.NO_ERROR:var t=o.getResponseJson();hl("Connection","XHR received:",JSON.stringify(t)),i(t);break;case el.TIMEOUT:hl("Connection",'RPC "'+e+'" timed out'),a(new kl(bl.DEADLINE_EXCEEDED,"Request time out"));break;case el.HTTP_ERROR:var n=o.getStatus();if(hl("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var s=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(bl).indexOf(t)>=0?t:bl.UNKNOWN}(r.status);a(new kl(s,r.message))}else a(new kl(bl.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new kl(bl.UNAVAILABLE,"Connection failed."));break;default:ml()}}finally{hl("Connection",'RPC "'+e+'" completed.')}}));var s=JSON.stringify(r);o.send(t,"POST",s,n,15)}))}},{key:"wo",value:function(e,t,n){var r=[this.uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Zc(),a=$c(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new il({})),this.lo(o.initMessageHeaders,t,n),M()||V()||L().indexOf("Electron/")>=0||q()||L().indexOf("MSAppHost/")>=0||U()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=r.join("");hl("Connection","Creating WebChannel: "+s,o);var u=i.createWebChannel(s,o),c=!1,l=!1,f=new sy({Jr:function(e){l?hl("Connection","Not sending because WebChannel is closed:",e):(c||(hl("Connection","Opening WebChannel transport."),u.open(),c=!0),hl("Connection","WebChannel sending:",e),u.send(e))},Yr:function(){return u.close()}}),h=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return h(u,al.EventType.OPEN,(function(){l||hl("Connection","WebChannel transport opened.")})),h(u,al.EventType.CLOSE,(function(){l||(l=!0,hl("Connection","WebChannel transport closed"),f.ro())})),h(u,al.EventType.ERROR,(function(e){l||(l=!0,pl("Connection","WebChannel transport errored:",e),f.ro(new kl(bl.UNAVAILABLE,"The operation could not be completed")))})),h(u,al.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];yl(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){hl("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=od[e];if(void 0!==t)return hd(t)}(a),s=i.message;void 0===o&&(o=bl.INTERNAL,s="Unknown error status: "+a+" with message "+i.message),l=!0,f.ro(new kl(o,s)),u.close()}else hl("Connection","WebChannel received:",n),f.oo(n)}})),h(a,nl.STAT_EVENT,(function(e){e.stat===rl.PROXY?hl("Connection","Detected buffering proxy"):e.stat===rl.NOPROXY&&hl("Connection","Detected no buffering proxy")})),setTimeout((function(){f.io()}),0),f}}]),n}(function(){function e(t){k(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.uo=n+"://"+t.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return w(e,[{key:"co",value:function(e,t,n,r,i){var a=this.ho(e,t);hl("RestConnection","Sending: ",a,n);var o={};return this.lo(o,r,i),this.fo(e,a,o,n).then((function(e){return hl("RestConnection","Received: ",e),e}),(function(t){throw pl("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"_o",value:function(e,t,n,r,i){return this.co(e,t,n,r,i)}},{key:"lo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+cl,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"ho",value:function(e,t){var n=oy[e];return"".concat(this.uo,"/v1/").concat(t,":").concat(n)}}]),e}());function cy(){return"undefined"!=typeof window?window:null}function ly(){return"undefined"!=typeof document?document:null}function fy(e){return new Ld(e,!0)}var hy=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;k(this,e),this.Yn=t,this.timerId=n,this.mo=r,this.yo=i,this.po=a,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}return w(e,[{key:"reset",value:function(){this.Io=0}},{key:"Ao",value:function(){this.Io=this.po}},{key:"Ro",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,n-r);i>0&&hl("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Io," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.To=this.Yn.enqueueAfterDelay(this.timerId,i,(function(){return t.Eo=Date.now(),e()})),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}},{key:"Po",value:function(){null!==this.To&&(this.To.skipDelay(),this.To=null)}},{key:"cancel",value:function(){null!==this.To&&(this.To.cancel(),this.To=null)}},{key:"bo",value:function(){return(Math.random()-.5)*this.Io}}]),e}(),dy=function(){function e(t,n,r,i,a,o,s,u){k(this,e),this.Yn=t,this.Vo=r,this.vo=i,this.So=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=u,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new hy(t,n)}return w(e,[{key:"ko",value:function(){return 1===this.state||5===this.state||this.Mo()}},{key:"Mo",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Oo()}},{key:"stop",value:function(){var e=d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.ko(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"Fo",value:function(){this.state=0,this.No.reset()}},{key:"$o",value:function(){var e=this;this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,(function(){return e.Bo()})))}},{key:"Lo",value:function(e){this.Uo(),this.stream.send(e)}},{key:"Bo",value:function(){var e=d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Mo()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"Uo",value:function(){this.Co&&(this.Co.cancel(),this.Co=null)}},{key:"qo",value:function(){this.xo&&(this.xo.cancel(),this.xo=null)}},{key:"close",value:function(){var e=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Uo(),this.qo(),this.No.cancel(),this.Do++,4!==t?this.No.reset():n&&n.code===bl.RESOURCE_EXHAUSTED?(dl(n.toString()),dl("Using maximum backoff delay to prevent overloading the backend."),this.No.Ao()):n&&n.code===bl.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Ko(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.eo(n);case 9:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"Ko",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Go(this.Do),n=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=v(t,2),i=r[0],a=r[1];e.Do===n&&e.Qo(i,a)}),(function(n){t((function(){var t=new kl(bl.UNKNOWN,"Fetching auth token failed: "+n.message);return e.jo(t)}))}))}},{key:"Qo",value:function(e,t){var n=this,r=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Xr((function(){r((function(){return n.state=2,n.xo=n.Yn.enqueueAfterDelay(n.vo,1e4,(function(){return n.Mo()&&(n.state=3),Promise.resolve()})),n.listener.Xr()}))})),this.stream.eo((function(e){r((function(){return n.jo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Oo",value:function(){var e=this;this.state=5,this.No.Ro(d(f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"jo",value:function(e){return hl("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Go",value:function(e){var t=this;return function(n){t.Yn.enqueueAndForget((function(){return t.Do===e?n():(hl("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),py=function(e){y(n,e);var t=g(n);function n(e,r,i,a,o,s){var u;return k(this,n),(u=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,s)).M=o,u}return w(n,[{key:"Wo",value:function(e,t){return this.So.wo("Listen",e,t)}},{key:"onMessage",value:function(e){this.No.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:ml()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.N?(yl(void 0===t||"string"==typeof t),Wl.fromBase64String(t||"")):(yl(void 0===t||t instanceof Uint8Array),Wl.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,s=o&&function(e){var t=void 0===e.code?bl.UNKNOWN:hd(e.code);return new kl(t,e.message||"")}(o);n=new Sd(r,i,a,s||null)}else if("documentChange"in t){t.documentChange;var u=t.documentChange;u.document,u.document.name,u.document.updateTime;var c=zd(e,u.document.name),l=Vd(u.document.updateTime),f=new Sf({mapValue:{fields:u.document.fields}}),h=Cf.newFoundDocument(c,l,f),d=u.targetIds||[],p=u.removedTargetIds||[];n=new Ad(d,p,h.key,h)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var m=zd(e,v.document),y=v.readTime?Vd(v.readTime):Fl.min(),g=Cf.newNoDocument(m,y),b=v.removedTargetIds||[];n=new Ad([],b,g.key,g)}else if("documentRemove"in t){t.documentRemove;var k=t.documentRemove;k.document;var w=zd(e,k.document),x=k.removedTargetIds||[];n=new Ad([],x,w,null)}else{if(!("filter"in t))return ml();t.filter;var I=t.filter;I.targetId;var _=I.count||0,E=new ld(_),A=I.targetId;n=new Td(A,E)}return n}(this.M,e),n=function(e){if(!("targetChange"in e))return Fl.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Fl.min():t.readTime?Vd(t.readTime):Fl.min()}(e);return this.listener.zo(t,n)}},{key:"Ho",value:function(e){var t={};t.database=Wd(this.M),t.addTarget=function(e,t){var n,r=t.target;return(n=Jf(r)?{documents:Zd(e,r)}:{query:$d(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=Fd(e,t.resumeToken):t.snapshotVersion.compareTo(Fl.min())>0&&(n.readTime=Md(e,t.snapshotVersion.toTimestamp())),n}(this.M,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ml()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.M,e);n&&(t.labels=n),this.Lo(t)}},{key:"Jo",value:function(e){var t={};t.database=Wd(this.M),t.removeTarget=e,this.Lo(t)}}]),n}(dy),vy=function(e){y(n,e);var t=g(n);function n(e,r,i,a,o,s){var u;return k(this,n),(u=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,s)).M=o,u.Yo=!1,u}return w(n,[{key:"Xo",get:function(){return this.Yo}},{key:"start",value:function(){this.Yo=!1,this.lastStreamToken=void 0,s(u(n.prototype),"start",this).call(this)}},{key:"Ko",value:function(){this.Yo&&this.Zo([])}},{key:"Wo",value:function(e,t){return this.So.wo("Write",e,t)}},{key:"onMessage",value:function(e){if(yl(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();var t=function(e,t){return e&&e.length>0?(yl(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?Vd(e.updateTime):Vd(t);return n.isEqual(Fl.min())&&(n=Vd(t)),new Wh(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=Vd(e.commitTime);return this.listener.tu(n,t)}return yl(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}},{key:"nu",value:function(){var e={};e.database=Wd(this.M),this.Lo(e)}},{key:"Zo",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return Jd(t.M,e)}))};this.Lo(n)}}]),n}(dy),my=function(e){y(n,e);var t=g(n);function n(e,r,i,a){var o;return k(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.So=i,o.M=a,o.su=!1,o}return w(n,[{key:"iu",value:function(){if(this.su)throw new kl(bl.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"co",value:function(e,t,n){var r=this;return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=v(i,2),o=a[0],s=a[1];return r.So.co(e,t,n,o,s)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===bl.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new kl(bl.UNKNOWN,e.toString())}))}},{key:"_o",value:function(e,t,n){var r=this;return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=v(i,2),o=a[0],s=a[1];return r.So._o(e,t,n,o,s)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===bl.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new kl(bl.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.su=!0}}]),n}(function(){function e(){k(this,e)}return w(e)}()),yy=function(){function e(t,n){k(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}return w(e,[{key:"au",value:function(){var e=this;0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.ou=null,e.hu("Backend didn't respond within 10 seconds."),e.cu("Offline"),Promise.resolve()})))}},{key:"lu",value:function(e){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.cu("Offline")))}},{key:"set",value:function(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.cu(e)}},{key:"cu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"hu",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.uu?(dl(t),this.uu=!1):hl("OnlineStateTracker",t)}},{key:"fu",value:function(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}]),e}(),gy=w((function e(t,n,r,i,a){var o=this;k(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=a,this.gu.Kr((function(e){r.enqueueAndForget(d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=Oy(o),!e.t0){e.next=5;break}return hl("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=d(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=gl(t)).wu.add(4),e.next=4,wy(n);case 4:return n.yu.set("Unknown"),n.wu.delete(4),e.next=8,by(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.yu=new yy(r,i)}));function by(e){return ky.apply(this,arguments)}function ky(){return ky=d(f().mark((function e(t){var n,r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Oy(t)){e.next=18;break}n=p(t.mu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),ky.apply(this,arguments)}function wy(e){return xy.apply(this,arguments)}function xy(){return xy=d(f().mark((function e(t){var n,r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=p(t.mu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),xy.apply(this,arguments)}function Iy(e,t){var n=gl(e);n._u.has(t.targetId)||(n._u.set(t.targetId,t),Sy(n)?Ty(n):ig(n).Mo()&&Ey(n,t))}function _y(e,t){var n=gl(e),r=ig(n);n._u.delete(t),r.Mo()&&Ay(n,t),0===n._u.size&&(r.Mo()?r.$o():Oy(n)&&n.yu.set("Unknown"))}function Ey(e,t){e.pu.Z(t.targetId),ig(e).Ho(t)}function Ay(e,t){e.pu.Z(t),ig(e).Jo(t)}function Ty(e){e.pu=new Cd({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},Et:function(t){return e._u.get(t)||null}}),ig(e).start(),e.yu.au()}function Sy(e){return Oy(e)&&!ig(e).ko()&&e._u.size>0}function Oy(e){return 0===gl(e).wu.size}function Cy(e){e.pu=void 0}function Ny(e){return Py.apply(this,arguments)}function Py(){return Py=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t._u.forEach((function(e,n){Ey(t,e)}));case 1:case"end":return e.stop()}}),e)}))),Py.apply(this,arguments)}function Dy(e,t){return Ry.apply(this,arguments)}function Ry(){return Ry=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Cy(t),Sy(t)?(t.yu.lu(n),Ty(t)):t.yu.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),Ry.apply(this,arguments)}function Ly(e,t,n){return My.apply(this,arguments)}function My(){return My=d(f().mark((function e(t,n,r){var i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.yu.set("Online"),!(n instanceof Sd&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=d(f().mark((function e(t,n){var r,i,a,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=p(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t._u.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t._u.delete(o),t.pu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),hl("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,Fy(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof Ad?t.pu.ut(n):n instanceof Td?t.pu._t(n):t.pu.ht(n),r.isEqual(Fl.min())){e.next=29;break}return e.prev=14,e.next=17,Em(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.pu.yt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e._u.get(r);i&&e._u.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e._u.get(t);if(n){e._u.set(t,n.withResumeToken(Wl.EMPTY_BYTE_STRING,n.snapshotVersion)),Ay(e,t);var r=new $p(n.target,t,1,n.sequenceNumber);Ey(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),hl("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,Fy(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),My.apply(this,arguments)}function Fy(e,t,n){return Uy.apply(this,arguments)}function Uy(){return Uy=d(f().mark((function e(t,n,r){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(zp(n)){e.next=2;break}throw n;case 2:return t.wu.add(1),e.next=5,wy(t);case 5:t.yu.set("Offline"),r||(r=function(){return Em(t.localStore)}),t.asyncQueue.enqueueRetryable(d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return hl("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.wu.delete(1),e.next=6,by(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),Uy.apply(this,arguments)}function Vy(e,t){return t().catch((function(n){return Fy(e,n,t)}))}function qy(e){return jy.apply(this,arguments)}function jy(){return jy=d(f().mark((function e(t){var n,r,i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=gl(t),r=ag(n),i=n.du.length>0?n.du[n.du.length-1].batchId:-1;case 2:if(!By(n)){e.next=19;break}return e.prev=3,e.next=6,Tm(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.du.length&&r.$o(),e.abrupt("break",19);case 10:i=a.batchId,zy(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,Fy(n,e.t0);case 17:e.next=2;break;case 19:Ky(n)&&Qy(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),jy.apply(this,arguments)}function By(e){return Oy(e)&&e.du.length<10}function zy(e,t){e.du.push(t);var n=ag(e);n.Mo()&&n.Xo&&n.Zo(t.mutations)}function Ky(e){return Oy(e)&&!ag(e).ko()&&e.du.length>0}function Qy(e){ag(e).start()}function Wy(e){return Gy.apply(this,arguments)}function Gy(){return Gy=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ag(t).nu();case 1:case"end":return e.stop()}}),e)}))),Gy.apply(this,arguments)}function Hy(e){return Yy.apply(this,arguments)}function Yy(){return Yy=d(f().mark((function e(t){var n,r,i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=ag(t),r=p(t.du);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Zo(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),Yy.apply(this,arguments)}function Jy(e,t,n){return Xy.apply(this,arguments)}function Xy(){return Xy=d(f().mark((function e(t,n,r){var i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.du.shift(),a=Xp.from(i,n,r),e.next=3,Vy(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,qy(t);case 5:case"end":return e.stop()}}),e)}))),Xy.apply(this,arguments)}function Zy(e,t){return $y.apply(this,arguments)}function $y(){return $y=d(f().mark((function e(t,n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&ag(t).Xo,!e.t0){e.next=4;break}return e.next=4,function(){var e=d(f().mark((function e(t,n){var r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!fd(i=n.code)||i===bl.ABORTED){e.next=7;break}return r=t.du.shift(),ag(t).Fo(),e.next=5,Vy(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,qy(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:Ky(t)&&Qy(t);case 5:case"end":return e.stop()}}),e)}))),$y.apply(this,arguments)}function eg(e,t){return tg.apply(this,arguments)}function tg(){return tg=d(f().mark((function e(t,n){var r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=gl(t)).asyncQueue.verifyOperationInProgress(),hl("RemoteStore","RemoteStore received new credentials"),i=Oy(r),r.wu.add(3),e.next=6,wy(r);case 6:return i&&r.yu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.wu.delete(3),e.next=12,by(r);case 12:case"end":return e.stop()}}),e)}))),tg.apply(this,arguments)}function ng(e,t){return rg.apply(this,arguments)}function rg(){return rg=d(f().mark((function e(t,n){var r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=gl(t),!n){e.next=7;break}return r.wu.delete(2),e.next=5,by(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.wu.add(2),e.next=12,wy(r);case 12:r.yu.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),rg.apply(this,arguments)}function ig(e){return e.Iu||(e.Iu=function(e,t,n){var r=gl(e);return r.iu(),new py(t,r.So,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{Xr:Ny.bind(null,e),eo:Dy.bind(null,e),zo:Ly.bind(null,e)}),e.mu.push(function(){var t=d(f().mark((function t(n){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.Iu.Fo(),Sy(e)?Ty(e):e.yu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.Iu.stop();case 6:Cy(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Iu}function ag(e){return e.Tu||(e.Tu=function(e,t,n){var r=gl(e);return r.iu(),new vy(t,r.So,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{Xr:Wy.bind(null,e),eo:Zy.bind(null,e),eu:Hy.bind(null,e),tu:Jy.bind(null,e)}),e.mu.push(function(){var t=d(f().mark((function t(n){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Tu.Fo(),t.next=4,qy(e);case 4:t.next=9;break;case 6:return t.next=8,e.Tu.stop();case 8:e.du.length>0&&(hl("RemoteStore","Stopping write stream with ".concat(e.du.length," pending writes")),e.du=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Tu}var og=function(){function e(t,n,r,i,a){k(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new wl,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return w(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new kl(bl.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function sg(e,t){if(dl("AsyncQueue","".concat(t,": ").concat(e)),zp(e))return new kl(bl.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var ug=function(){function e(t){k(this,e),this.comparator=t?function(e,n){return t(e,n)||of.comparator(e.key,n.key)}:function(e,t){return of.comparator(e.key,t.key)},this.keyedMap=yd(),this.sortedSet=new qf(this.comparator)}return w(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),cg=function(){function e(){k(this,e),this.Eu=new qf(of.comparator)}return w(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Eu.get(t);n?0!==e.type&&3===n.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==n.type?this.Eu=this.Eu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Eu=this.Eu.remove(t):1===e.type&&2===n.type?this.Eu=this.Eu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):ml():this.Eu=this.Eu.insert(t,e)}},{key:"Au",value:function(){var e=[];return this.Eu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),lg=function(){function e(t,n,r,i,a,o,s,u){k(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=u}return w(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ih(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach((function(e){a.push({type:0,doc:e})})),new e(t,n,ug.emptySet(n),a,r,i,!0,!1)}}]),e}(),fg=w((function e(){k(this,e),this.Ru=void 0,this.listeners=[]})),hg=w((function e(){k(this,e),this.queries=new dd((function(e){return _h(e)}),Ih),this.onlineState="Unknown",this.bu=new Set}));function dg(e,t){return pg.apply(this,arguments)}function pg(){return pg=d(f().mark((function e(t,n){var r,i,a,o,s;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=gl(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new fg),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Ru=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),s=sg(e.t0,"Initialization of query '".concat(Eh(n.query),"' failed")),e.abrupt("return",void n.onError(s));case 13:r.queries.set(i,o),o.listeners.push(n),n.Pu(r.onlineState),o.Ru&&n.Vu(o.Ru)&&bg(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),pg.apply(this,arguments)}function vg(e,t){return mg.apply(this,arguments)}function mg(){return mg=d(f().mark((function e(t,n){var r,i,a,o,s;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=gl(t),i=n.query,a=!1,(o=r.queries.get(i))&&(s=o.listeners.indexOf(n))>=0&&(o.listeners.splice(s,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),mg.apply(this,arguments)}function yg(e,t){var n,r=gl(e),i=!1,a=p(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,s=o.query,u=r.queries.get(s);if(u){var c,l=p(u.listeners);try{for(l.s();!(c=l.n()).done;)c.value.Vu(o)&&(i=!0)}catch(f){l.e(f)}finally{l.f()}u.Ru=o}}}catch(f){a.e(f)}finally{a.f()}i&&bg(r)}function gg(e,t,n){var r=gl(e),i=r.queries.get(t);if(i){var a,o=p(i.listeners);try{for(o.s();!(a=o.n()).done;)a.value.onError(n)}catch(s){o.e(s)}finally{o.f()}}r.queries.delete(t)}function bg(e){e.bu.forEach((function(e){e.next()}))}var kg=function(){function e(t,n,r){k(this,e),this.query=t,this.vu=n,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}return w(e,[{key:"Vu",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=p(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new lg(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.Su?this.Cu(e)&&(this.vu.next(e),a=!0):this.xu(e,this.onlineState)&&(this.Nu(e),a=!0),this.Du=e,a}},{key:"onError",value:function(e){this.vu.error(e)}},{key:"Pu",value:function(e){this.onlineState=e;var t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}},{key:"xu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return!(this.options.ku&&n||e.docs.isEmpty()&&"Offline"!==t)}},{key:"Cu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Nu",value:function(e){e=lg.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.vu.next(e)}}]),e}(),wg=function(){function e(t,n){k(this,e),this.payload=t,this.byteLength=n}return w(e,[{key:"Mu",value:function(){return"metadata"in this.payload}}]),e}(),xg=function(){function e(t){k(this,e),this.M=t}return w(e,[{key:"wi",value:function(e){return zd(this.M,e)}},{key:"mi",value:function(e){return e.metadata.exists?Yd(this.M,e.document,!1):Cf.newNoDocument(this.wi(e.metadata.name),this.gi(e.metadata.readTime))}},{key:"gi",value:function(e){return Vd(e)}}]),e}(),Ig=function(){function e(t,n,r){k(this,e),this.Ou=t,this.localStore=n,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=_g(t)}return w(e,[{key:"Fu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;var n=Bl.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"$u",value:function(e){var t,n=new Map,r=new xg(this.M),i=p(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,s=r.wi(a.metadata.name),u=p(a.metadata.queries);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=(n.get(c)||wd()).add(s);n.set(c,l)}}catch(f){u.e(f)}finally{u.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=d(f().mark((function e(){var t,n,r,i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,function(){var e=d(f().mark((function e(t,n,r,i){var a,o,s,u,c,l,h,d,v,m;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=gl(t),o=wd(),s=vd(),u=p(r);try{for(u.s();!(c=u.n()).done;)l=c.value,h=n.wi(l.metadata.name),l.document&&(o=o.add(h)),(d=n.mi(l)).setReadTime(n.gi(l.metadata.readTime)),s=s.insert(h,d)}catch(f){u.e(f)}finally{u.f()}return v=a.hi.newChangeBuffer({trackRemovals:!0}),e.next=7,Sm(a,function(e){return wh(mh(Bl.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return m=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return Am(e,v,s).next((function(t){return v.apply(e),t})).next((function(t){return a.fs.removeMatchingKeysForTargetId(e,m.targetId).next((function(){return a.fs.addMatchingKeys(e,o,m.targetId)})).next((function(){return a.fi.Gs(e,t)})).next((function(){return t}))}))})));case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(this.localStore,new xg(this.M),this.documents,this.Ou.id);case 2:t=e.sent,n=this.$u(this.documents),r=p(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,Lm(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Bu:this.collectionGroups,Lu:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));function t(){return e.apply(this,arguments)}return t}()}]),e}();function _g(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var Eg=w((function e(t){k(this,e),this.key=t})),Ag=w((function e(t){k(this,e),this.key=t})),Tg=function(){function e(t,n){k(this,e),this.query=t,this.Uu=n,this.qu=null,this.current=!1,this.Ku=wd(),this.mutatedKeys=wd(),this.Gu=Sh(t),this.Qu=new ug(this.Gu)}return w(e,[{key:"ju",get:function(){return this.Uu}},{key:"Wu",value:function(e,t){var n=this,r=t?t.zu:new cg,i=t?t.Qu:this.Qu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,s=!1,u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=Ah(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Hu(l,f)||(r.track({type:2,doc:f}),p=!0,(u&&n.Gu(f,u)>0||c&&n.Gu(f,c)<0)&&(s=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(s=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Qu:o,zu:r,ii:s,mutatedKeys:a}}},{key:"Hu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;var a=e.zu.Au();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ml()}};return n(e)-n(t)}(e.type,t.type)||r.Gu(e.doc,t.doc)})),this.Ju(n);var o=t?this.Yu():[],s=0===this.Ku.size&&this.current?1:0,u=s!==this.qu;return this.qu=s,0!==a.length||u?{snapshot:new lg(this.query,e.Qu,i,a,e.mutatedKeys,0===s,u,!1),Xu:o}:{Xu:o}}},{key:"Pu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new cg,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}},{key:"Zu",value:function(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}},{key:"Ju",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Uu=t.Uu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Uu=t.Uu.delete(e)})),this.current=e.current)}},{key:"Yu",value:function(){var e=this;if(!this.current)return[];var t=this.Ku;this.Ku=wd(),this.Qu.forEach((function(t){e.Zu(t.key)&&(e.Ku=e.Ku.add(t.key))}));var n=[];return t.forEach((function(t){e.Ku.has(t)||n.push(new Ag(t))})),this.Ku.forEach((function(e){t.has(e)||n.push(new Eg(e))})),n}},{key:"ta",value:function(e){this.Uu=e._i,this.Ku=wd();var t=this.Wu(e.documents);return this.applyChanges(t,!0)}},{key:"ea",value:function(){return lg.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}]),e}(),Sg=w((function e(t,n,r){k(this,e),this.query=t,this.targetId=n,this.view=r})),Og=w((function e(t){k(this,e),this.key=t,this.na=!1})),Cg=function(){function e(t,n,r,i,a,o){k(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.sa={},this.ia=new dd((function(e){return _h(e)}),Ih),this.ra=new Map,this.oa=new Set,this.ua=new qf(of.comparator),this.aa=new Map,this.ca=new Vm,this.ha={},this.la=new Map,this.fa=Kv.yn(),this.onlineState="Unknown",this.da=void 0}return w(e,[{key:"isPrimaryClient",get:function(){return!0===this.da}}]),e}();function Ng(e,t){return Pg.apply(this,arguments)}function Pg(){return Pg=d(f().mark((function e(t,n){var r,i,a,o,s,u;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=gb(t),!(o=r.ia.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.ea(),e.next=15;break;case 6:return e.next=8,Sm(r.localStore,wh(n));case 8:return s=e.sent,r.isPrimaryClient&&Iy(r.remoteStore,s),u=r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.targetId,e.next=14,Dg(r,n,i,"current"===u);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),Pg.apply(this,arguments)}function Dg(e,t,n,r){return Rg.apply(this,arguments)}function Rg(){return Rg=d(f().mark((function e(t,n,r,i){var a,o,s,u,c,l;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._a=function(e,n,r){return function(){var e=d(f().mark((function e(t,n,r,i){var a,o,s;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Wu(r),e.t0=a.ii,!e.t0){e.next=6;break}return e.next=5,Nm(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Wu(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),s=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(Jg(t,n.targetId,s.Xu),s.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,Nm(t.localStore,n,!0);case 3:return a=e.sent,o=new Tg(n,a._i),s=o.Wu(a.documents),u=Ed.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),c=o.applyChanges(s,t.isPrimaryClient,u),Jg(t,r,c.Xu),l=new Sg(n,r,o),e.abrupt("return",(t.ia.set(n,l),t.ra.has(r)?t.ra.get(r).push(n):t.ra.set(r,[n]),c.snapshot));case 11:case"end":return e.stop()}}),e)}))),Rg.apply(this,arguments)}function Lg(e,t){return Mg.apply(this,arguments)}function Mg(){return Mg=d(f().mark((function e(t,n){var r,i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=gl(t),i=r.ia.get(n),!((a=r.ra.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.ra.set(i.targetId,a.filter((function(e){return!Ih(e,n)}))),void r.ia.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,Om(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),_y(r.remoteStore,i.targetId),Hg(r,i.targetId)})).catch(Yv);case 9:e.next=14;break;case 11:return Hg(r,i.targetId),e.next=14,Om(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),Mg.apply(this,arguments)}function Fg(e,t){return Ug.apply(this,arguments)}function Ug(){return Ug=d(f().mark((function e(t,n){var r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=gl(t),e.prev=1,e.next=4,function(e,t){var n=gl(e),r=t.snapshotVersion,i=n.ui;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.hi.newChangeBuffer({trackRemovals:!0});i=n.ui;var o=[];t.targetChanges.forEach((function(a,s){var u=i.get(s);if(u){o.push(n.fs.removeMatchingKeys(e,a.removedDocuments,s).next((function(){return n.fs.addMatchingKeys(e,a.addedDocuments,s)})));var c=u.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(s)?c=c.withResumeToken(Wl.EMPTY_BYTE_STRING,Fl.min()).withLastLimboFreeSnapshotVersion(Fl.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(s,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(u,c,a)&&o.push(n.fs.updateTargetData(e,c))}}));var s=vd();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Am(e,a,t.documentUpdates).next((function(e){s=e}))),!r.isEqual(Fl.min())){var u=n.fs.getLastRemoteSnapshotVersion(e).next((function(t){return n.fs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(u)}return Up.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.fi.Gs(e,s)})).next((function(){return s}))})).then((function(e){return n.ui=i,e}))}(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.aa.get(t);n&&(yl(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.na=!0:e.modifiedDocuments.size>0?yl(n.na):e.removedDocuments.size>0&&(yl(n.na),n.na=!1))})),e.next=8,$g(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Yv(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),Ug.apply(this,arguments)}function Vg(e,t,n){var r=gl(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.ia.forEach((function(e,n){var r=n.view.Pu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=gl(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=p(n.listeners);try{for(a.s();!(i=a.n()).done;)i.value.Pu(t)&&(r=!0)}catch(o){a.e(o)}finally{a.f()}})),r&&bg(n)}(r.eventManager,t),i.length&&r.sa.zo(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function qg(e,t,n){return jg.apply(this,arguments)}function jg(){return jg=d(f().mark((function e(t,n,r){var i,a,o,s,u,c;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=gl(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.aa.get(n),!(o=a&&a.key)){e.next=14;break}return s=(s=new qf(of.comparator)).insert(o,Cf.newNoDocument(o,Fl.min())),u=wd().add(o),c=new _d(Fl.min(),new Map,new zf(Dl),s,u),e.next=9,Fg(i,c);case 9:i.ua=i.ua.remove(o),i.aa.delete(n),Zg(i),e.next=16;break;case 14:return e.next=16,Om(i.localStore,n,!1).then((function(){return Hg(i,n,r)})).catch(Yv);case 16:case"end":return e.stop()}}),e)}))),jg.apply(this,arguments)}function Bg(e,t){return zg.apply(this,arguments)}function zg(){return zg=d(f().mark((function e(t,n){var r,i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=gl(t),i=n.batch.batchId,e.prev=1,e.next=4,function(e,t){var n=gl(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.hi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=Up.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);yl(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.Bs.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.Bs.performConsistencyCheck(e)})).next((function(){return n.fi.Ks(e,r)}))}))}(r.localStore,n);case 4:return a=e.sent,Gg(r,i,null),Wg(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,$g(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Yv(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),zg.apply(this,arguments)}function Kg(e,t,n){return Qg.apply(this,arguments)}function Qg(){return Qg=d(f().mark((function e(t,n,r){var i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=gl(t),e.prev=1,e.next=4,function(e,t){var n=gl(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.Bs.lookupMutationBatch(e,t).next((function(t){return yl(null!==t),r=t.keys(),n.Bs.removeMutationBatch(e,t)})).next((function(){return n.Bs.performConsistencyCheck(e)})).next((function(){return n.fi.Ks(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,Gg(i,n,r),Wg(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,$g(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Yv(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),Qg.apply(this,arguments)}function Wg(e,t){(e.la.get(t)||[]).forEach((function(e){e.resolve()})),e.la.delete(t)}function Gg(e,t,n){var r=gl(e),i=r.ha[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.ha[r.currentUser.toKey()]=i}}function Hg(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=p(e.ra.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.ia.delete(a),n&&e.sa.wa(a,n)}}catch(o){i.e(o)}finally{i.f()}e.ra.delete(t),e.isPrimaryClient&&e.ca.vi(t).forEach((function(t){e.ca.containsKey(t)||Yg(e,t)}))}function Yg(e,t){e.oa.delete(t.path.canonicalString());var n=e.ua.get(t);null!==n&&(_y(e.remoteStore,n),e.ua=e.ua.remove(t),e.aa.delete(n),Zg(e))}function Jg(e,t,n){var r,i=p(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof Eg?(e.ca.addReference(a.key,t),Xg(e,a)):a instanceof Ag?(hl("SyncEngine","Document no longer in limbo: "+a.key),e.ca.removeReference(a.key,t),e.ca.containsKey(a.key)||Yg(e,a.key)):ml()}}catch(o){i.e(o)}finally{i.f()}}function Xg(e,t){var n=t.key,r=n.path.canonicalString();e.ua.get(n)||e.oa.has(r)||(hl("SyncEngine","New document in limbo: "+n),e.oa.add(r),Zg(e))}function Zg(e){for(;e.oa.size>0&&e.ua.size<e.maxConcurrentLimboResolutions;){var t=e.oa.values().next().value;e.oa.delete(t);var n=new of(Bl.fromString(t)),r=e.fa.next();e.aa.set(r,new Og(n)),e.ua=e.ua.insert(n,r),Iy(e.remoteStore,new $p(wh(mh(n.path)),r,2,Cl.A))}}function $g(e,t,n){return eb.apply(this,arguments)}function eb(){return eb=d(f().mark((function e(t,n,r){var i,a,o,s;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=gl(t),a=[],o=[],s=[],e.t0=i.ia.isEmpty(),e.t0){e.next=9;break}return i.ia.forEach((function(e,t){s.push(i._a(t,n,r).then((function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),a.push(e);var n=bm.Ys(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(s);case 6:return i.sa.zo(a),e.next=9,function(){var e=d(f().mark((function e(t,n){var r,i,a,o,s,u,c,l;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=gl(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Up.forEach(n,(function(t){return Up.forEach(t.Hs,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return Up.forEach(t.Js,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),zp(e.t0)){e.next=10;break}throw e.t0;case 10:hl("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=p(n);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.targetId,o.fromCache||(u=r.ui.get(s),c=u.snapshotVersion,l=u.withLastLimboFreeSnapshotVersion(c),r.ui=r.ui.insert(s,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),eb.apply(this,arguments)}function tb(e,t){return nb.apply(this,arguments)}function nb(){return nb=d(f().mark((function e(t,n){var r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=gl(t)).currentUser.isEqual(n)){e.next=11;break}return hl("SyncEngine","User change. New user:",n.toKey()),e.next=5,Im(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.la.forEach((function(e){e.forEach((function(e){e.reject(new kl(bl.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.la.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,$g(r,i.di);case 11:case"end":return e.stop()}}),e)}))),nb.apply(this,arguments)}function rb(e,t){var n=gl(e),r=n.aa.get(t);if(r&&r.na)return wd().add(r.key);var i=wd(),a=n.ra.get(t);if(!a)return i;var o,s=p(a);try{for(s.s();!(o=s.n()).done;){var u=o.value,c=n.ia.get(u);i=i.unionWith(c.view.ju)}}catch(l){s.e(l)}finally{s.f()}return i}function ib(e,t){return ab.apply(this,arguments)}function ab(){return ab=d(f().mark((function e(t,n){var r,i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=gl(t),e.next=3,Nm(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.ta(i),e.abrupt("return",(r.isPrimaryClient&&Jg(r,n.targetId,a.Xu),a));case 6:case"end":return e.stop()}}),e)}))),ab.apply(this,arguments)}function ob(e,t){return sb.apply(this,arguments)}function sb(){return sb=d(f().mark((function e(t,n){var r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=gl(t),e.abrupt("return",Dm(r.localStore,n).then((function(e){return $g(r,e)})));case 2:case"end":return e.stop()}}),e)}))),sb.apply(this,arguments)}function ub(e,t,n,r){return cb.apply(this,arguments)}function cb(){return cb=d(f().mark((function e(t,n,r,i){var a,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=gl(t),e.next=3,function(e,t){var n=gl(e),r=gl(n.Bs);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.fn(e,t).next((function(t){return t?n.fi.Ks(e,t):Up.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,qy(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(Gg(a,n,i||null),Wg(a,n),function(e,t){gl(gl(e).Bs)._n(t)}(a.localStore,n)):ml();case 11:return e.next=13,$g(a,o);case 13:e.next=16;break;case 15:hl("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),cb.apply(this,arguments)}function lb(e,t,n){return fb.apply(this,arguments)}function fb(){return fb=d(f().mark((function e(t,n,r){var i,a,o,s,u,c,l,h,d,v,m,y,g,b;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=gl(t),a=[],o=[],s=p(n),e.prev=2,s.s();case 4:if((u=s.n()).done){e.next=45;break}if(c=u.value,l=void 0,!(h=i.ra.get(c))||0===h.length){e.next=34;break}return e.next=11,Sm(i.localStore,wh(h[0]));case 11:l=e.sent,d=p(h),e.prev=13,d.s();case 15:if((v=d.n()).done){e.next=24;break}return m=v.value,y=i.ia.get(m),e.next=20,ib(i,y);case 20:(g=e.sent).snapshot&&o.push(g.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),d.e(e.t0);case 29:return e.prev=29,d.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,Pm(i.localStore,c);case 36:return b=e.sent,e.next=39,Sm(i.localStore,b);case 39:return l=e.sent,e.next=42,Dg(i,hb(b),c,!1);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),s.e(e.t1);case 50:return e.prev=50,s.f(),e.finish(50);case 53:return e.abrupt("return",(i.sa.zo(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),fb.apply(this,arguments)}function hb(e){return vh(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function db(e){var t=gl(e);return gl(gl(t.localStore).persistence).Fs()}function pb(e,t,n,r){return vb.apply(this,arguments)}function vb(){return vb=d(f().mark((function e(t,n,r,i){var a,o,s,u;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=gl(t)).da){e.next=3;break}return e.abrupt("return",void hl("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.ra.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,Dm(a.localStore,Th(o[0]));case 10:return s=e.sent,u=_d.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=14,$g(a,s,u);case 14:return e.abrupt("break",20);case 15:return e.next=17,Om(a.localStore,n,!0);case 17:return Hg(a,n,i),e.abrupt("break",20);case 19:ml();case 20:case"end":return e.stop()}}),e)}))),vb.apply(this,arguments)}function mb(e,t,n){return yb.apply(this,arguments)}function yb(){return yb=d(f().mark((function e(t,n,r){var i,a,o,s,u,c,l,h,d;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=gb(t)).da){e.next=45;break}a=p(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(s=o.value,!i.ra.has(s)){e.next=10;break}return hl("SyncEngine","Adding an already active target "+s),e.abrupt("continue",19);case 10:return e.next=12,Pm(i.localStore,s);case 12:return u=e.sent,e.next=15,Sm(i.localStore,u);case 15:return c=e.sent,e.next=18,Dg(i,hb(u),c.targetId,!1);case 18:Iy(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=p(r),e.prev=30,d=f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.value,e.t0=i.ra.has(t),!e.t0){e.next=5;break}return e.next=5,Om(i.localStore,t,!1).then((function(){_y(i.remoteStore,t),Hg(i,t)})).catch(Yv);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((h=l.n()).done){e.next=37;break}return e.delegateYield(d(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),yb.apply(this,arguments)}function gb(e){var t=gl(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Fg.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=rb.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=qg.bind(null,t),t.sa.zo=yg.bind(null,t.eventManager),t.sa.wa=gg.bind(null,t.eventManager),t}function bb(e){var t=gl(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Bg.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Kg.bind(null,t),t}var kb=function(){function e(){k(this,e),this.synchronizeTabs=!1}return w(e,[{key:"initialize",value:function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.M=fy(t.databaseInfo.databaseId),this.sharedClientState=this.ga(t),this.persistence=this.ya(t),e.next=5,this.persistence.start();case 5:this.gcScheduler=this.pa(t),this.localStore=this.Ia(t);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"pa",value:function(e){return null}},{key:"Ia",value:function(e){return xm(this.persistence,new km,e.initialUser,this.M)}},{key:"ya",value:function(e){return new Qm(Gm.Yi,this.M)}},{key:"ga",value:function(e){return new ry}},{key:"terminate",value:function(){var e=d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),e}(),wb=function(e){y(n,e);var t=g(n);function n(e,r,i){var a;return k(this,n),(a=t.call(this)).Ta=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return w(n,[{key:"initialize",value:function(){var e=d(f().mark((function e(t){var r=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(u(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.Ta.initialize(this,t);case 4:return e.next=6,bb(this.Ta.syncEngine);case 6:return e.next=8,qy(this.Ta.remoteStore);case 8:return e.next=10,this.persistence.Ts((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"Ia",value:function(e){return xm(this.persistence,new km,e.initialUser,this.M)}},{key:"pa",value:function(e){var t=this.persistence.referenceDelegate.garbageCollector;return new $v(t,e.asyncQueue)}},{key:"ya",value:function(e){var t=ym(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Mv.withCacheSize(this.cacheSizeBytes):Mv.DEFAULT;return new pm(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,cy(),ly(),this.M,this.sharedClientState,!!this.forceOwnership)}},{key:"ga",value:function(e){return new ry}}]),n}(kb),xb=function(e){y(n,e);var t=g(n);function n(e,r){var i;return k(this,n),(i=t.call(this,e,r,!1)).Ta=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return w(n,[{key:"initialize",value:function(){var e=d(f().mark((function e(t){var r,i=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(u(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.Ta.syncEngine,e.t0=this.sharedClientState instanceof ny,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={$r:ub.bind(null,r),Br:pb.bind(null,r),Lr:mb.bind(null,r),Fs:db.bind(null,r),Fr:ob.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.Ts(function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,function(){var e=d(f().mark((function e(t,n){var r,i,a,o,s,u,c,l;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(gb(r=gl(t)),bb(r),!0!==n||!0===r.da){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,lb(r,i.toArray());case 5:return a=e.sent,r.da=!0,e.next=9,ng(r.remoteStore,!0);case 9:o=p(a);try{for(o.s();!(s=o.n()).done;)u=s.value,Iy(r.remoteStore,u)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.da){e.next=25;break}return c=[],l=Promise.resolve(),r.ra.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return Hg(r,t),Om(r.localStore,t,!0)})),_y(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,lb(r,c);case 21:return function(e){var t=gl(e);t.aa.forEach((function(e,n){_y(t.remoteStore,n)})),t.ca.Si(),t.aa=new Map,t.ua=new qf(of.comparator)}(r),r.da=!1,e.next=25,ng(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(i.Ta.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start(i.localStore):t||i.gcScheduler.stop());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"ga",value:function(e){var t=cy();if(!ny.vt(t))throw new kl(bl.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=ym(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new ny(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(wb),Ib=function(){function e(){k(this,e)}return w(e,[{key:"initialize",value:function(){var e=d(f().mark((function e(t,n){var r=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return Vg(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=tb.bind(null,this.syncEngine),e.next=12,ng(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"createEventManager",value:function(e){return new hg}},{key:"createDatastore",value:function(e){var t,n=fy(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new uy(t));return function(e,t,n,r){return new my(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return Vg(o.syncEngine,e,0)},a=ay.vt()?new ay:new iy,new gy(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var s=new Cg(e,t,n,r,i,a);return o&&(s.da=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=d(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=gl(t),hl("RemoteStore","RemoteStore shutting down."),n.wu.add(5),e.next=5,wy(n);case 5:n.gu.shutdown(),n.yu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function _b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return d(f().mark((function r(){var i;return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var Eb=function(){function e(t){k(this,e),this.observer=t,this.muted=!1}return w(e,[{key:"next",value:function(e){this.observer.next&&this.Ea(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}},{key:"Aa",value:function(){this.muted=!0}},{key:"Ea",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),Ab=function(){function e(t,n){var r=this;k(this,e),this.Ra=t,this.M=n,this.metadata=new wl,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then((function(e){e&&e.Mu()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))}),(function(e){return r.metadata.reject(e)}))}return w(e,[{key:"close",value:function(){return this.Ra.cancel()}},{key:"getMetadata",value:function(){var e=d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"ma",value:function(){var e=d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Pa());case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"Pa",value:function(){var e=d(f().mark((function e(){var t,n,r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Va();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.ba.decode(t),r=Number(n),isNaN(r)&&this.va("length string (".concat(n,") is not valid number")),e.next=9,this.Sa(r);case 9:return i=e.sent,e.abrupt("return",new wg(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"Da",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Va",value:function(){var e=d(f().mark((function e(){var t,n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.Da()<0,!e.t0){e.next=5;break}return e.next=4,this.Ca();case 4:e.t0=!e.sent;case 5:if(!e.t0){e.next=9;break}case 7:e.next=0;break;case 9:if(0!==this.buffer.length){e.next=11;break}return e.abrupt("return",null);case 11:return(t=this.Da())<0&&this.va("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 15:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"Sa",value:function(){var e=d(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Ca();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.va("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.ba.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"va",value:function(e){throw this.Ra.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Ca",value:function(){var e=d(f().mark((function e(){var t,n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ra.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),e}(),Tb=function(){function e(t){k(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return w(e,[{key:"lookup",value:function(){var e=d(f().mark((function e(t){var n,r=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new kl(bl.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=d(f().mark((function e(t,n){var r,i,a,o,s,u;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=gl(t),i=Wd(r.M)+"/documents",a={documents:n.map((function(e){return Bd(r.M,e)}))},e.next=5,r._o("BatchGetDocuments",i,a);case 5:return o=e.sent,s=new Map,o.forEach((function(e){var t=function(e,t){return"found"in t?function(e,t){yl(!!t.found),t.found.name,t.found.updateTime;var n=zd(e,t.found.name),r=Vd(t.found.updateTime),i=new Sf({mapValue:{fields:t.found.fields}});return Cf.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){yl(!!t.missing),yl(!!t.readTime);var n=zd(e,t.missing),r=Vd(t.readTime);return Cf.newNoDocument(n,r)}(e,t):ml()}(r.M,e);s.set(t.key.toString(),t)})),u=[],e.abrupt("return",(n.forEach((function(e){var t=s.get(e.toString());yl(!!t),u.push(t)})),u));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new ud(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=d(f().mark((function e(){var t,n=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=of.fromPath(t);n.mutations.push(new cd(r,n.precondition(r)))})),e.next=7,function(){var e=d(f().mark((function e(t,n){var r,i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=gl(t),i=Wd(r.M)+"/documents",a={writes:n.map((function(e){return Jd(r.M,e)}))},e.next=3,r.co("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ml();t=Fl.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new kl(bl.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Gh.updateTime(t):Gh.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Fl.min()))throw new kl(bl.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Gh.updateTime(t)}return Gh.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),Sb=function(){function e(t,n,r,i,a){k(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.xa=r.maxAttempts,this.No=new hy(this.asyncQueue,"transaction_retry")}return w(e,[{key:"run",value:function(){this.xa-=1,this.Na()}},{key:"Na",value:function(){var e=this;this.No.Ro(d(f().mark((function t(){var n,r;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new Tb(e.datastore),(r=e.ka(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Ma(t)}))}))})).catch((function(t){e.Ma(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"ka",value:function(e){try{var t=this.updateFunction(e);return!nf(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Ma",value:function(e){var t=this;this.xa>0&&this.Oa(e)?(this.xa-=1,this.asyncQueue.enqueueAndForget((function(){return t.Na(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"Oa",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!fd(t)}return!1}}]),e}(),Ob=function(){function e(t,n,r,i){var a=this;k(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=ul.UNAUTHENTICATED,this.clientId=Pl.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return hl("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return hl("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return w(e,[{key:"getConfiguration",value:function(){var e=d(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new kl(bl.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new wl;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(d(f().mark((function n(){var r;return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=sg(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function Cb(e,t){return Nb.apply(this,arguments)}function Nb(){return Nb=d(f().mark((function e(t,n){var r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),hl("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,Im(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),Nb.apply(this,arguments)}function Pb(e,t){return Db.apply(this,arguments)}function Db(){return Db=d(f().mark((function e(t,n){var r,i;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,Rb(t);case 3:return r=e.sent,hl("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return eg(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return eg(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),Db.apply(this,arguments)}function Rb(e){return Lb.apply(this,arguments)}function Lb(){return Lb=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return hl("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,Cb(t,new kb);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),Lb.apply(this,arguments)}function Mb(e){return Fb.apply(this,arguments)}function Fb(){return Fb=d(f().mark((function e(t){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return hl("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,Pb(t,new Ib);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),Fb.apply(this,arguments)}function Ub(e){return Rb(e).then((function(e){return e.persistence}))}function Vb(e){return Rb(e).then((function(e){return e.localStore}))}function qb(e){return Mb(e).then((function(e){return e.remoteStore}))}function jb(e){return Mb(e).then((function(e){return e.syncEngine}))}function Bb(e){return zb.apply(this,arguments)}function zb(){return zb=d(f().mark((function e(t){var n,r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mb(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=Ng.bind(null,n.syncEngine),r.onUnlisten=Lg.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),zb.apply(this,arguments)}function Kb(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new wl;return e.asyncQueue.enqueueAndForget(d(f().mark((function i(){return f().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Eb({next:function(a){t.enqueueAndForget((function(){return vg(e,o)}));var s=a.docs.has(n);!s&&a.fromCache?i.reject(new kl(bl.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&a.fromCache&&r&&"server"===r.source?i.reject(new kl(bl.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new kg(mh(n.path),a,{includeMetadataChanges:!0,ku:!0});return dg(e,o)},i.next=3,Bb(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function Qb(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new wl;return e.asyncQueue.enqueueAndForget(d(f().mark((function i(){return f().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Eb({next:function(n){t.enqueueAndForget((function(){return vg(e,o)})),n.fromCache&&"server"===r.source?i.reject(new kl(bl.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new kg(n,a,{includeMetadataChanges:!0,ku:!0});return dg(e,o)},i.next=3,Bb(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var Wb=new Map;function Gb(e,t,n){if(!n)throw new kl(bl.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Hb(e,t,n,r){if(!0===t&&!0===r)throw new kl(bl.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function Yb(e){if(!of.isDocumentKey(e))throw new kl(bl.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Jb(e){if(of.isDocumentKey(e))throw new kl(bl.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Xb(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":ml()}function Zb(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new kl(bl.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Xb(e);throw new kl(bl.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function $b(e,t){if(t<=0)throw new kl(bl.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var ek=function(){function e(t){var n;if(k(this,e),void 0===t.host){if(void 0!==t.ssl)throw new kl(bl.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new kl(bl.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,Hb("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return w(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),tk=function(){function e(t,n,r){k(this,e),this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ek({}),this._settingsFrozen=!1,t instanceof tf?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new kl(bl.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new tf(e.options.projectId)}(t))}return w(e,[{key:"app",get:function(){if(!this._app)throw new kl(bl.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new kl(bl.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ek(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Il;switch(e.type){case"gapi":var t=e.client;return yl(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new Tl(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new kl(bl.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=Wb.get(e);t&&(hl("ComponentProvider","Removing Datastore"),Wb.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}(),nk=function(){function e(t,n,r){k(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return w(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new ik(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),rk=function(){function e(t,n,r){k(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return w(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),ik=function(e){y(n,e);var t=g(n);function n(e,r,i){var a;return k(this,n),(a=t.call(this,e,r,mh(i)))._path=i,a.type="collection",a}return w(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new nk(this.firestore,null,new of(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(rk);function ak(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ee(e),Gb("collection","path",t),e instanceof tk){var a=Bl.fromString.apply(Bl,[t].concat(r));return Jb(a),new ik(e,null,a)}if(!(e instanceof nk||e instanceof ik))throw new kl(bl.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Bl.fromString.apply(Bl,[t].concat(r)));return Jb(o),new ik(e.firestore,null,o)}function ok(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ee(e),1===arguments.length&&(t=Pl.R()),Gb("doc","path",t),e instanceof tk){var a=Bl.fromString.apply(Bl,[t].concat(r));return Yb(a),new nk(e,null,new of(a))}if(!(e instanceof nk||e instanceof ik))throw new kl(bl.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Bl.fromString.apply(Bl,[t].concat(r)));return Yb(o),new nk(e.firestore,e instanceof ik?e.converter:null,new of(o))}function sk(e,t){return e=ee(e),t=ee(t),(e instanceof nk||e instanceof ik)&&(t instanceof nk||t instanceof ik)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function uk(e,t){return e=ee(e),t=ee(t),e instanceof rk&&t instanceof rk&&e.firestore===t.firestore&&Ih(e._query,t._query)&&e.converter===t.converter}var ck=function(){function e(){var t=this;k(this,e),this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new hy(this,"async_queue_retry"),this.Qa=function(){var e=ly();e&&hl("AsyncQueue","Visibility state changed to "+e.visibilityState),t.No.Po()};var n=ly();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Qa)}return w(e,[{key:"isShuttingDown",get:function(){return this.Ba}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.ja(),this.Wa(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Ba){this.Ba=!0,this.Ka=e||!1;var t=ly();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Qa)}}},{key:"enqueue",value:function(e){var t=this;if(this.ja(),this.Ba)return new Promise((function(){}));var n=new wl;return this.Wa((function(){return t.Ba&&t.Ka?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.$a.push(e),t.za()}))}},{key:"za",value:function(){var e=d(f().mark((function e(){var t=this;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.$a.length){e.next=14;break}return e.prev=1,e.next=4,this.$a[0]();case 4:this.$a.shift(),this.No.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),zp(e.t0)){e.next=12;break}throw e.t0;case 12:hl("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.$a.length>0&&this.No.Ro((function(){return t.za()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"Wa",value:function(e){var t=this,n=this.Fa.then((function(){return t.qa=!0,e().catch((function(e){t.Ua=e,t.qa=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw dl("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.qa=!1,e}))}));return this.Fa=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.ja(),this.Ga.indexOf(e)>-1&&(t=0);var i=og.createAndSchedule(this,e,t,n,(function(e){return r.Ha(e)}));return this.La.push(i),i}},{key:"ja",value:function(){this.Ua&&ml()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Ja",value:function(){var e=d(f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Fa,e.next=3,t;case 3:if(t!==this.Fa){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"Ya",value:function(e){var t,n=p(this.La);try{for(n.s();!(t=n.n()).done;)if(t.value.timerId===e)return!0}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Xa",value:function(e){var t=this;return this.Ja().then((function(){t.La.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=p(t.La);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.Ja()}))}},{key:"Za",value:function(e){this.Ga.push(e)}},{key:"Ha",value:function(e){var t=this.La.indexOf(e);this.La.splice(t,1)}}]),e}();function lk(e){return function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=e,r=0,i=["next","error","complete"];r<i.length;r++){var a=i[r];if(a in n&&"function"==typeof n[a])return!0}return!1}(e)}var fk=function(){function e(){k(this,e),this._progressObserver={},this._taskCompletionResolver=new wl,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return w(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),hk=function(e){y(n,e);var t=g(n);function n(e,r,i){var a;return k(this,n),(a=t.call(this,e,r,i)).type="firestore",a._queue=new ck,a._persistenceKey="name"in e?e.name:"[DEFAULT]",a}return w(n,[{key:"_terminate",value:function(){return this._firestoreClient||pk(this),this._firestoreClient.terminate()}}]),n}(tk);function dk(e){return e._firestoreClient||pk(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function pk(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new ef(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new Ob(e._authCredentials,e._appCheckCredentials,e._queue,r)}function vk(e,t,n){var r=new wl;return e.asyncQueue.enqueue(d(f().mark((function i(){return f().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,Cb(e,n);case 3:return i.next=5,Pb(e,t);case 5:r.resolve(),i.next=13;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===bl.FAILED_PRECONDITION||e.code===bl.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(i.t0)){i.next=12;break}throw i.t0;case 12:console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i.t0),r.reject(i.t0);case 13:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function mk(e){if(e._initialized||e._terminated)throw new kl(bl.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var yk=function(){function e(){k(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new kl(bl.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Kl(n)}return w(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}(),gk=function(){function e(t){k(this,e),this._byteString=t}return w(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Wl.fromBase64String(t))}catch(t){throw new kl(bl.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Wl.fromUint8Array(t))}}]),e}(),bk=w((function e(t){k(this,e),this._methodName=t})),kk=function(){function e(t,n){if(k(this,e),!isFinite(t)||t<-90||t>90)throw new kl(bl.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new kl(bl.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return w(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Dl(this._lat,e._lat)||Dl(this._long,e._long)}}]),e}(),wk=/^__.*__$/,xk=function(){function e(t,n,r){k(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return w(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new nd(e,this.data,this.fieldMask,t,this.fieldTransforms):new td(e,this.data,t,this.fieldTransforms)}}]),e}(),Ik=function(){function e(t,n,r){k(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return w(e,[{key:"toMutation",value:function(e,t){return new nd(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function _k(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ml()}}var Ek=function(){function e(t,n,r,i,a,o){k(this,e),this.settings=t,this.databaseId=n,this.M=r,this.ignoreUndefinedProperties=i,void 0===a&&this.tc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return w(e,[{key:"path",get:function(){return this.settings.path}},{key:"ec",get:function(){return this.settings.ec}},{key:"nc",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"sc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.nc({path:n,ic:!1});return r.rc(e),r}},{key:"oc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.nc({path:n,ic:!1});return r.tc(),r}},{key:"uc",value:function(e){return this.nc({path:void 0,ic:!0})}},{key:"ac",value:function(e){return Qk(e,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"tc",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.rc(this.path.get(e))}},{key:"rc",value:function(e){if(0===e.length)throw this.ac("Document fields must not be empty");if(_k(this.ec)&&wk.test(e))throw this.ac('Document fields cannot begin and end with "__"')}}]),e}(),Ak=function(){function e(t,n,r){k(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.M=r||fy(t)}return w(e,[{key:"lc",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Ek({ec:e,methodName:t,hc:n,path:Kl.emptyPath(),ic:!1,cc:r},this.databaseId,this.M,this.ignoreUndefinedProperties)}}]),e}();function Tk(e){var t=e._freezeSettings(),n=fy(e._databaseId);return new Ak(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Sk(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.lc(a.merge||a.mergeFields?2:0,t,n,i);jk("Data must be an object, but it was:",o,r);var s,u,c=Vk(r,o);if(a.merge)s=new Ql(o.fieldMask),u=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=p(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=Bk(t,l.value,n);if(!o.contains(d))throw new kl(bl.INVALID_ARGUMENT,"Field '".concat(d,"' is specified in your field mask but missing from your input data."));Wk(f,d)||f.push(d)}}catch(v){h.e(v)}finally{h.f()}s=new Ql(f),u=o.fieldTransforms.filter((function(e){return s.covers(e.field)}))}else s=null,u=o.fieldTransforms;return new xk(new Sf(c),s,u)}var Ok=function(e){y(n,e);var t=g(n);function n(){return k(this,n),t.apply(this,arguments)}return w(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.ec)throw 1===e.ec?e.ac("".concat(this._methodName,"() can only appear at the top level of your update data")):e.ac("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(bk);function Ck(e,t,n){return new Ek({ec:3,hc:t.settings.hc,methodName:e._methodName,ic:n},t.databaseId,t.M,t.ignoreUndefinedProperties)}var Nk=function(e){y(n,e);var t=g(n);function n(){return k(this,n),t.apply(this,arguments)}return w(n,[{key:"_toFieldTransform",value:function(e){return new Qh(e.path,new Fh)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(bk),Pk=function(e){y(n,e);var t=g(n);function n(e,r){var i;return k(this,n),(i=t.call(this,e)).fc=r,i}return w(n,[{key:"_toFieldTransform",value:function(e){var t=Ck(this,e,!0),n=this.fc.map((function(e){return Uk(e,t)})),r=new Uh(n);return new Qh(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(bk),Dk=function(e){y(n,e);var t=g(n);function n(e,r){var i;return k(this,n),(i=t.call(this,e)).fc=r,i}return w(n,[{key:"_toFieldTransform",value:function(e){var t=Ck(this,e,!0),n=this.fc.map((function(e){return Uk(e,t)})),r=new qh(n);return new Qh(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(bk),Rk=function(e){y(n,e);var t=g(n);function n(e,r){var i;return k(this,n),(i=t.call(this,e)).dc=r,i}return w(n,[{key:"_toFieldTransform",value:function(e){var t=new Bh(e.M,Ph(e.M,this.dc));return new Qh(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(bk);function Lk(e,t,n,r){var i=e.lc(1,t,n);jk("Data must be an object, but it was:",i,r);var a=[],o=Sf.empty();Vl(r,(function(e,r){var s=Kk(t,e,n);r=ee(r);var u=i.oc(s);if(r instanceof Ok)a.push(s);else{var c=Uk(r,u);null!=c&&(a.push(s),o.set(s,c))}}));var s=new Ql(a);return new Ik(o,s,i.fieldTransforms)}function Mk(e,t,n,r,i,a){var o=e.lc(1,t,n),s=[Bk(t,r,n)],u=[i];if(a.length%2!=0)throw new kl(bl.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)s.push(Bk(t,a[c])),u.push(a[c+1]);for(var l=[],f=Sf.empty(),h=s.length-1;h>=0;--h)if(!Wk(l,s[h])){var d=s[h],p=u[h];p=ee(p);var v=o.oc(d);if(p instanceof Ok)l.push(d);else{var m=Uk(p,v);null!=m&&(l.push(d),f.set(d,m))}}var y=new Ql(l);return new Ik(f,y,o.fieldTransforms)}function Fk(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Uk(n,e.lc(r?4:3,t))}function Uk(e,t){if(qk(e=ee(e)))return jk("Unsupported field value:",t,e),Vk(e,t);if(e instanceof bk)return function(e,t){if(!_k(t.ec))throw t.ac("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.ac("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.ic&&4!==t.ec)throw t.ac("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=p(e);try{for(a.s();!(n=a.n()).done;){var o=Uk(n.value,t.uc(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(s){a.e(s)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=ee(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Ph(t.M,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Ml.fromDate(e);return{timestampValue:Md(t.M,n)}}if(e instanceof Ml){var r=new Ml(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Md(t.M,r)}}if(e instanceof kk)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof gk)return{bytesValue:Fd(t.M,e._byteString)};if(e instanceof nk){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.ac("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:qd(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.ac("Unsupported field value: ".concat(Xb(e)))}(e,t)}function Vk(e,t){var n={};return ql(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Vl(e,(function(e,r){var i=Uk(r,t.sc(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function qk(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Ml||e instanceof kk||e instanceof gk||e instanceof nk||e instanceof bk)}function jk(e,t,n){if(!qk(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=Xb(n);throw"an object"===r?t.ac(e+" a custom object"):t.ac(e+" "+r)}}function Bk(e,t,n){if((t=ee(t))instanceof yk)return t._internalPath;if("string"==typeof t)return Kk(e,t);throw Qk("Field path arguments must be of type string or ",e,!1,void 0,n)}var zk=new RegExp("[~\\*/\\[\\]]");function Kk(e,t,n){if(t.search(zk)>=0)throw Qk("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return a(yk,h(t.split(".")))._internalPath}catch(_){throw Qk("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Qk(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,s="Function ".concat(t,"() called with invalid data");n&&(s+=" (via `toFirestore()`)"),s+=". ";var u="";return(a||o)&&(u+=" (found",a&&(u+=" in field ".concat(r)),o&&(u+=" in document ".concat(i)),u+=")"),new kl(bl.INVALID_ARGUMENT,s+e+u)}function Wk(e,t){return e.some((function(e){return e.isEqual(t)}))}var Gk=function(){function e(t,n,r,i,a){k(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return w(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new nk(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new Hk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(Yk("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),Hk=function(e){y(n,e);var t=g(n);function n(){return k(this,n),t.apply(this,arguments)}return w(n,[{key:"data",value:function(){return s(u(n.prototype),"data",this).call(this)}}]),n}(Gk);function Yk(e,t){return"string"==typeof t?Kk(e,t):t instanceof yk?t._internalPath:t._delegate._internalPath}var Jk=function(){function e(t,n){k(this,e),this.hasPendingWrites=t,this.fromCache=n}return w(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),Xk=function(e){y(n,e);var t=g(n);function n(e,r,i,a,o,s){var u;return k(this,n),(u=t.call(this,e,r,i,a,s))._firestore=e,u._firestoreImpl=e,u.metadata=o,u}return w(n,[{key:"exists",value:function(){return s(u(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new Zk(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(Yk("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(Gk),Zk=function(e){y(n,e);var t=g(n);function n(){return k(this,n),t.apply(this,arguments)}return w(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s(u(n.prototype),"data",this).call(this,e)}}]),n}(Xk),$k=function(){function e(t,n,r,i){k(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new Jk(i.hasPendingWrites,i.fromCache),this.query=r}return w(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new Zk(n._firestore,n._userDataWriter,r.key,r,new Jk(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new kl(bl.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new Zk(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Jk(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new Zk(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Jk(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:ew(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}]),e}();function ew(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ml()}}function tw(e,t){return e instanceof Xk&&t instanceof Xk?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof $k&&t instanceof $k&&e._firestore===t._firestore&&uk(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function nw(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new kl(bl.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var rw=w((function e(){k(this,e)}));function iw(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++)e=a[i]._apply(e);return e}var aw=function(e){y(n,e);var t=g(n);function n(e,r,i){var a;return k(this,n),(a=t.call(this))._c=e,a.wc=r,a.mc=i,a.type="where",a}return w(n,[{key:"_apply",value:function(e){var t=Tk(e.firestore),n=function(e,t,n,r,i,a,o){var s;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new kl(bl.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){hw(o,a);var u,c=[],l=p(o);try{for(l.s();!(u=l.n()).done;){var f=u.value;c.push(fw(r,e,f))}}catch(d){l.e(d)}finally{l.f()}s={arrayValue:{values:c}}}else s=fw(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||hw(o,a),s=Fk(n,"where",o,"in"===a||"not-in"===a);var h=eh.create(i,a,s);return function(e,t){if(t.S()){var n=gh(e);if(null!==n&&!n.isEqual(t.field))throw new kl(bl.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=yh(e);null!==r&&dw(0,t.field,r)}var i=function(e,t){var n,r=p(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(d){r.e(d)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new kl(bl.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new kl(bl.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,h),h}(e._query,0,t,e.firestore._databaseId,this._c,this.wc,this.mc);return new rk(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new ph(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(rw),ow=function(e){y(n,e);var t=g(n);function n(e,r){var i;return k(this,n),(i=t.call(this))._c=e,i.gc=r,i.type="orderBy",i}return w(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new kl(bl.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new kl(bl.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new lh(t,n);return function(e,t){if(null===yh(e)){var n=gh(e);null!==n&&dw(0,n,t.field)}}(e,r),r}(e._query,this._c,this.gc);return new rk(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new ph(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(rw),sw=function(e){y(n,e);var t=g(n);function n(e,r,i){var a;return k(this,n),(a=t.call(this)).type=e,a.yc=r,a.Ic=i,a}return w(n,[{key:"_apply",value:function(e){return new rk(e.firestore,e.converter,xh(e._query,this.yc,this.Ic))}}]),n}(rw),uw=function(e){y(n,e);var t=g(n);function n(e,r,i){var a;return k(this,n),(a=t.call(this)).type=e,a.Tc=r,a.Ec=i,a}return w(n,[{key:"_apply",value:function(e){var t=lw(e,this.type,this.Tc,this.Ec);return new rk(e.firestore,e.converter,function(e,t){return new ph(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(rw),cw=function(e){y(n,e);var t=g(n);function n(e,r,i){var a;return k(this,n),(a=t.call(this)).type=e,a.Tc=r,a.Ec=i,a}return w(n,[{key:"_apply",value:function(e){var t=lw(e,this.type,this.Tc,this.Ec);return new rk(e.firestore,e.converter,function(e,t){return new ph(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(rw);function lw(e,t,n,r){if(n[0]=ee(n[0]),n[0]instanceof Gk)return function(e,t,n,r,i){if(!r)throw new kl(bl.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],s=p(kh(e));try{for(s.s();!(a=s.n()).done;){var u=a.value;if(u.field.isKeyField())o.push(mf(t,r.key));else{var c=r.data.field(u.field);if(Xl(c))throw new kl(bl.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new kl(bl.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){s.e(f)}finally{s.f()}return new ch(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=Tk(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new kl(bl.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var s=[],u=0;u<i.length;u++){var c=i[u];if(o[u].field.isKeyField()){if("string"!=typeof c)throw new kl(bl.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!bh(e)&&-1!==c.indexOf("/"))throw new kl(bl.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(Bl.fromString(c));if(!of.isDocumentKey(l))throw new kl(bl.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new of(l);s.push(mf(t,f))}else{var h=Fk(n,r,c);s.push(h)}}return new ch(s,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function fw(e,t,n){if("string"==typeof(n=ee(n))){if(""===n)throw new kl(bl.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!bh(t)&&-1!==n.indexOf("/"))throw new kl(bl.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(Bl.fromString(n));if(!of.isDocumentKey(r))throw new kl(bl.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return mf(e,new of(r))}if(n instanceof nk)return mf(e,n._key);throw new kl(bl.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Xb(n),"."))}function hw(e,t){if(!Array.isArray(e)||0===e.length)throw new kl(bl.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new kl(bl.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function dw(e,t,n){if(!n.isEqual(t))throw new kl(bl.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var pw={maxAttempts:5},vw=function(){function e(){k(this,e)}return w(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(cf(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Yl(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Jl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ml()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return Vl(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new kk(Yl(e.latitude),Yl(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=Zl(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp($l(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Hl(e);return new Ml(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=Bl.fromString(e);yl(cp(n));var r=new tf(n.get(1),n.get(3)),i=new of(n.popFirst(5));return r.isEqual(t)||dl("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function mw(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var yw=function(e){y(n,e);var t=g(n);function n(e){var r;return k(this,n),(r=t.call(this)).firestore=e,r}return w(n,[{key:"convertBytes",value:function(e){return new gk(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new nk(this.firestore,null,t)}}]),n}(vw),gw=function(){function e(t,n){k(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Tk(t)}return w(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=bw(e,this._firestore),i=mw(r.converter,t,n),a=Sk(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,Gh.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=bw(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return r="string"==typeof(t=ee(t))||t instanceof yk?Mk(this._dataReader,"WriteBatch.update",i._key,t,n,o):Lk(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,Gh.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=bw(e,this._firestore);return this._mutations=this._mutations.concat(new ud(t._key,Gh.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new kl(bl.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function bw(e,t){if((e=ee(e)).firestore!==t)throw new kl(bl.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var kw=function(e){y(n,e);var t=g(n);function n(e){var r;return k(this,n),(r=t.call(this)).firestore=e,r}return w(n,[{key:"convertBytes",value:function(e){return new gk(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new nk(this.firestore,null,t)}}]),n}(vw);function ww(e,t,n){e=Zb(e,nk);var r=Zb(e.firestore,hk),i=mw(e.converter,t,n);return _w(r,[Sk(Tk(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Gh.none())])}function xw(e,t,n){e=Zb(e,nk);for(var r=Zb(e.firestore,hk),i=Tk(r),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return _w(r,[("string"==typeof(t=ee(t))||t instanceof yk?Mk(i,"updateDoc",e._key,t,n,o):Lk(i,"updateDoc",e._key,t)).toMutation(e._key,Gh.exists(!0))])}function Iw(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=ee(e);var s={includeMetadataChanges:!1},u=0;"object"!=typeof n[u]||lk(n[u])||(s=n[u],u++);var c,l,h,p={includeMetadataChanges:s.includeMetadataChanges};if(lk(n[u])){var v=n[u];n[u]=null===(i=v.next)||void 0===i?void 0:i.bind(v),n[u+1]=null===(a=v.error)||void 0===a?void 0:a.bind(v),n[u+2]=null===(o=v.complete)||void 0===o?void 0:o.bind(v)}if(e instanceof nk)l=Zb(e.firestore,hk),h=mh(e._key.path),c={next:function(t){n[u]&&n[u](Ew(l,e,t))},error:n[u+1],complete:n[u+2]};else{var m=Zb(e,rk);l=Zb(m.firestore,hk),h=m._query;var y=new kw(l);c={next:function(e){n[u]&&n[u](new $k(l,y,m,e))},error:n[u+1],complete:n[u+2]},nw(e._query)}return function(e,t,n,r){var i=new Eb(r),a=new kg(t,i,n);return e.asyncQueue.enqueueAndForget(d(f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=dg,t.next=3,Bb(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Aa(),e.asyncQueue.enqueueAndForget(d(f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=vg,t.next=3,Bb(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(dk(l),h,p,c)}function _w(e,t){return function(e,t){var n=new wl;return e.asyncQueue.enqueueAndForget(d(f().mark((function r(){return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=d(f().mark((function e(t,n,r){var i,a,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=bb(t),e.prev=1,e.next=4,function(e,t){var n,r=gl(e),i=Ml.now(),a=t.reduce((function(e,t){return e.add(t.key)}),wd());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(e){return r.fi.Ks(e,a).next((function(a){n=a;var o,s=[],u=p(t);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=Zh(c,n.get(c.key));null!=l&&s.push(new nd(c.key,l,Of(l.value.mapValue),Gh.exists(!0)))}}catch(f){u.e(f)}finally{u.f()}return r.Bs.addMutationBatch(e,i,s,t)}))})).then((function(e){return e.applyToLocalDocumentSet(n),{batchId:e.batchId,changes:n}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.ha[e.currentUser.toKey()];r||(r=new qf(Dl)),r=r.insert(t,n),e.ha[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,$g(i,a.changes);case 9:return e.next=11,qy(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=sg(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,jb(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(dk(e),t)}function Ew(e,t,n){var r=n.docs.get(t._key),i=new kw(e);return new Xk(e,i,t._key,r,new Jk(n.hasPendingWrites,n.fromCache),t.converter)}var Aw=function(e){y(n,e);var t=g(n);function n(e,r){var i;return k(this,n),(i=t.call(this,e,r))._firestore=e,i}return w(n,[{key:"get",value:function(e){var t=this,r=bw(e,this._firestore),i=new kw(this._firestore);return s(u(n.prototype),"get",this).call(this,e).then((function(e){return new Xk(t._firestore,i,r._key,e._document,new Jk(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){k(this,e),this._firestore=t,this._transaction=n,this._dataReader=Tk(t)}return w(e,[{key:"get",value:function(e){var t=this,n=bw(e,this._firestore),r=new yw(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return ml();var i=e[0];if(i.isFoundDocument())return new Gk(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Gk(t._firestore,r,n._key,null,n.converter);throw ml()}))}},{key:"set",value:function(e,t,n){var r=bw(e,this._firestore),i=mw(r.converter,t,n),a=Sk(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=bw(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return r="string"==typeof(t=ee(t))||t instanceof yk?Mk(this._dataReader,"Transaction.update",i._key,t,n,o):Lk(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=bw(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function Tw(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new kl("invalid-argument","Invalid options passed to function ".concat(e,'(): You cannot specify both "merge" and "mergeFields".'));return t}function Sw(){if("undefined"==typeof Uint8Array)throw new kl("unimplemented","Uint8Arrays are not available in this environment.")}function Ow(){if("undefined"==typeof atob)throw new kl("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){cl=e}(Ke),Ue(new ne("firestore",(function(e,n){var r=n.options,i=e.getProvider("app").getImmediate(),a=new hk(i,new El(e.getProvider("auth-internal")),new Ol(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a}),"PUBLIC")),Je(sl,"3.4.9",e),Je(sl,"3.4.9","esm2017")}();var Cw=function(){function e(t){k(this,e),this._delegate=t}return w(e,[{key:"toBase64",value:function(){return Ow(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return Sw(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return Ow(),new e(gk.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return Sw(),new e(gk.fromUint8Array(t))}}]),e}();function Nw(e){return function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=e,r=0,i=["next","error","complete"];r<i.length;r++){var a=i[r];if(a in n&&"function"==typeof n[a])return!0}return!1}(e)}var Pw=function(){function e(){k(this,e)}return w(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){mk(e=Zb(e,hk));var n=dk(e),r=e._freezeSettings(),i=new Ib;return vk(n,i,new wb(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){mk(e=Zb(e,hk));var t=dk(e),n=e._freezeSettings(),r=new Ib;return vk(t,r,new xb(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new kl(bl.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new wl;return e._queue.enqueueAndForgetEvenWhileRestricted(d(f().mark((function n(){return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=d(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(qp.vt()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,qp.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(ym(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),Dw=function(){function e(t,n,r){var i=this;k(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof tf||(this._appCompat=t)}return w(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||pl("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=Zb(e,tk))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&pl("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,s;if("string"==typeof i.mockUserToken)o=i.mockUserToken,s=ul.MOCK_USER;else{o=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[P(JSON.stringify({alg:"none",type:"JWT"})),P(JSON.stringify(a)),""].join(".")}(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var u=i.mockUserToken.sub||i.mockUserToken.user_id;if(!u)throw new kl(bl.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");s=new ul(u)}e._authCredentials=new _l(new xl(o,s))}}(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return function(e){return function(e){return e.asyncQueue.enqueue(d(f().mark((function t(){var n,r;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ub(e);case 2:return n=t.sent,t.next=5,qb(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=gl(e);return t.wu.delete(0),by(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(dk(e=Zb(e,hk)))}(this._delegate)}},{key:"disableNetwork",value:function(){return function(e){return function(e){return e.asyncQueue.enqueue(d(f().mark((function t(){var n,r;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ub(e);case 2:return n=t.sent,t.next=5,qb(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=d(f().mark((function e(t){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=gl(t)).wu.add(0),e.next=4,wy(n);case 4:n.yu.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(dk(e=Zb(e,hk)))}(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&Hb("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new wl;return e.asyncQueue.enqueueAndForget(d(f().mark((function n(){return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(){var e=d(f().mark((function e(t,n){var r,i,a,o;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Oy((r=gl(t)).remoteStore)||hl("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=gl(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.Bs.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.la.get(i)||[]).push(n),r.la.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=sg(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t,n){return e.apply(this,arguments)}}(),n.next=3,jb(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(dk(e=Zb(e,hk)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return function(e,t){return function(e,t){var n=new Eb(t);return e.asyncQueue.enqueueAndForget(d(f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){gl(e).bu.add(t),t.next()},t.next=3,Bb(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Aa(),e.asyncQueue.enqueueAndForget(d(f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){gl(e).bu.delete(t)},t.next=3,Bb(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(dk(e=Zb(e,hk)),lk(t)?t:{next:t})}(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new kl("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new Gw(this,ak(this._delegate,e))}catch(e){throw Vw(e,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new Uw(this,ok(this._delegate,e))}catch(e){throw Vw(e,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new Kw(this,function(e,t){if(e=Zb(e,tk),Gb("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new kl(bl.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new rk(e,null,function(e){return new ph(Bl.emptyPath(),e)}(t))}(this._delegate,e))}catch(e){throw Vw(e,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return function(e,t,n){e=Zb(e,hk);var r=Object.assign(Object.assign({},pw),n);return function(e){if(e.maxAttempts<1)throw new kl(bl.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new wl;return e.asyncQueue.enqueueAndForget(d(f().mark((function i(){var a;return f().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,function(e){return Mb(e).then((function(e){return e.datastore}))}(e);case 2:a=i.sent,new Sb(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(dk(e),(function(n){return t(new Aw(e,n))}),r)}(this._delegate,(function(n){return e(new Lw(t,n))}))}},{key:"batch",value:function(){var e=this;return dk(this._delegate),new Mw(new gw(this._delegate,(function(t){return _w(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return function(e,t){var n=dk(e=Zb(e,hk)),r=new fk;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new Ab(e,t)}(function(e,t){if(e instanceof Uint8Array)return _b(e,t);if(e instanceof ArrayBuffer)return _b(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,fy(t));e.asyncQueue.enqueueAndForget(d(f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t,n){var r=gl(e);(function(){var e=d(f().mark((function e(t,n,r){var i,a,o,s,u;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=gl(e),r=Vd(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n._s.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(_g(i)),a=new Ig(i,t.localStore,n.M),e.next=15,n.ma();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.Fu(o);case 19:return(s=e.sent)&&r._updateProgress(s),e.next=23,n.ma();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return u=e.sent,e.next=31,$g(t,u.Lu,void 0);case 31:return e.next=33,function(e,t){var n=gl(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n._s.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(u.progress),e.abrupt("return",Promise.resolve(u.Bu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(pl("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))},t.next=3,jb(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return function(e,t){return function(e,t){return e.asyncQueue.enqueue(d(f().mark((function n(){return f().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=gl(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n._s.getNamedQuery(e,t)}))},n.next=3,Vb(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(dk(e=Zb(e,hk)),t).then((function(t){return t?new rk(e,null,t.query):null}))}(this._delegate,e).then((function(e){return e?new Kw(t,e):null}))}}]),e}(),Rw=function(e){y(n,e);var t=g(n);function n(e){var r;return k(this,n),(r=t.call(this)).firestore=e,r}return w(n,[{key:"convertBytes",value:function(e){return new Cw(new gk(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return Uw.forKey(t,this.firestore,null)}}]),n}(vw),Lw=function(){function e(t,n){k(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new Rw(t)}return w(e,[{key:"get",value:function(e){var t=this,n=Hw(e);return this._delegate.get(n).then((function(e){return new Bw(t._firestore,new Xk(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=Hw(e);return n?(Tw("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r,i=arguments.length,a=new Array(i>3?i-3:0),o=3;o<i;o++)a[o-3]=arguments[o];var s=Hw(e);return 2===arguments.length?this._delegate.update(s,t):(r=this._delegate).update.apply(r,[s,t,n].concat(a)),this}},{key:"delete",value:function(e){var t=Hw(e);return this._delegate.delete(t),this}}]),e}(),Mw=function(){function e(t){k(this,e),this._delegate=t}return w(e,[{key:"set",value:function(e,t,n){var r=Hw(e);return n?(Tw("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r,i=arguments.length,a=new Array(i>3?i-3:0),o=3;o<i;o++)a[o-3]=arguments[o];var s=Hw(e);return 2===arguments.length?this._delegate.update(s,t):(r=this._delegate).update.apply(r,[s,t,n].concat(a)),this}},{key:"delete",value:function(e){var t=Hw(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),Fw=function(){function e(t,n,r){k(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return w(e,[{key:"fromFirestore",value:function(e,t){var n=new Zk(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new zw(this._firestore,n),null!=t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new Rw(t),n),i.set(n,a)),a}}]),e}();Fw.INSTANCES=new WeakMap;var Uw=function(){function e(t,n){k(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new Rw(t)}return w(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new Gw(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new Gw(this.firestore,ak(this._delegate,e))}catch(e){throw Vw(e,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=ee(e))instanceof nk&&sk(this._delegate,e)}},{key:"set",value:function(e,t){t=Tw("DocumentReference.set",t);try{return t?ww(this._delegate,e,t):ww(this._delegate,e)}catch(e){throw Vw(e,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?xw(this._delegate,e):xw.apply(void 0,[this._delegate,e,t].concat(r))}catch(e){throw Vw(e,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return _w(Zb(e.firestore,hk),[new ud(e._key,Gh.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=qw(n),a=jw(n,(function(t){return new Bw(e.firestore,new Xk(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return Iw(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null==e?void 0:e.source)?function(e){e=Zb(e,nk);var t=Zb(e.firestore,hk),n=dk(t),r=new kw(t);return function(e,t){var n=new wl;return e.asyncQueue.enqueueAndForget(d(f().mark((function r(){return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=d(f().mark((function e(t,n,r){var i,a;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=gl(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.fi.Ls(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new kl(bl.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=sg(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,Vb(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new Xk(t,r,e._key,n,new Jk(null!==n&&n.hasLocalMutations,!0),e.converter)}))}(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=Zb(e,nk);var t=Zb(e.firestore,hk);return Kb(dk(t),e._key,{source:"server"}).then((function(n){return Ew(t,e,n)}))}(this._delegate):function(e){e=Zb(e,nk);var t=Zb(e.firestore,hk);return Kb(dk(t),e._key).then((function(n){return Ew(t,e,n)}))}(this._delegate),t.then((function(e){return new Bw(n.firestore,new Xk(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(Fw.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!=0)throw new kl("invalid-argument","Invalid document reference. Document references must have an even number of segments, but ".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new nk(n._delegate,r,new of(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new nk(n._delegate,r,t))}}]),e}();function Vw(e,t,n){return e.message=e.message.replace(t,n),e}function qw(e){var t,n=p(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"==typeof r&&!Nw(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function jw(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=Nw(e[0])?e[0]:Nw(e[1])?e[1]:"function"==typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Bw=function(){function e(t,n){k(this,e),this._firestore=t,this._delegate=n}return w(e,[{key:"ref",get:function(){return new Uw(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return tw(this._delegate,e._delegate)}}]),e}(),zw=function(e){y(n,e);var t=g(n);function n(){return k(this,n),t.apply(this,arguments)}return w(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||ml()}(void 0!==t),t}}]),n}(Bw),Kw=function(){function e(t,n){k(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new Rw(t)}return w(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,iw(this._delegate,function(e,t,n){var r=t,i=Yk("where",e);return new aw(i,r,n)}(t,n,r)))}catch(t){throw Vw(t,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,iw(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Yk("orderBy",e);return new ow(n,t)}(t,n)))}catch(t){throw Vw(t,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,iw(this._delegate,function(e){return $b("limit",e),new sw("limit",e,"F")}(t)))}catch(t){throw Vw(t,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,iw(this._delegate,function(e){return $b("limitToLast",e),new sw("limitToLast",e,"L")}(t)))}catch(t){throw Vw(t,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,iw(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new uw("startAt",t,!0)}.apply(void 0,arguments)))}catch(r){throw Vw(r,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,iw(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new uw("startAfter",t,!1)}.apply(void 0,arguments)))}catch(r){throw Vw(r,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,iw(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new cw("endBefore",t,!1)}.apply(void 0,arguments)))}catch(r){throw Vw(r,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,iw(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new cw("endAt",t,!0)}.apply(void 0,arguments)))}catch(r){throw Vw(r,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return uk(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null==e?void 0:e.source)?function(e){e=Zb(e,rk);var t=Zb(e.firestore,hk),n=dk(t),r=new kw(t);return function(e,t){var n=new wl;return e.asyncQueue.enqueueAndForget(d(f().mark((function r(){return f().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=d(f().mark((function e(t,n,r){var i,a,o,s,u;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Nm(t,n,!0);case 3:i=e.sent,a=new Tg(n,i._i),o=a.Wu(i.documents),s=a.applyChanges(o,!1),r.resolve(s.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),u=sg(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(u);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,Vb(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new $k(t,r,e,n)}))}(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=Zb(e,rk);var t=Zb(e.firestore,hk),n=dk(t),r=new kw(t);return Qb(n,e._query,{source:"server"}).then((function(n){return new $k(t,r,e,n)}))}(this._delegate):function(e){e=Zb(e,rk);var t=Zb(e.firestore,hk),n=dk(t),r=new kw(t);return nw(e._query),Qb(n,e._query).then((function(n){return new $k(t,r,e,n)}))}(this._delegate),t.then((function(e){return new Ww(n.firestore,new $k(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=qw(n),a=jw(n,(function(t){return new Ww(e.firestore,new $k(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return Iw(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(Fw.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),Qw=function(){function e(t,n){k(this,e),this._firestore=t,this._delegate=n}return w(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new zw(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),Ww=function(){function e(t,n){k(this,e),this._firestore=t,this._delegate=n}return w(e,[{key:"query",get:function(){return new Kw(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new zw(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new Qw(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new zw(n._firestore,r))}))}},{key:"isEqual",value:function(e){return tw(this._delegate,e._delegate)}}]),e}(),Gw=function(e){y(n,e);var t=g(n);function n(e,r){var i;return k(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return w(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new Uw(this.firestore,e):null}},{key:"doc",value:function(e){try{return new Uw(this.firestore,void 0===e?ok(this._delegate):ok(this._delegate,e))}catch(e){throw Vw(e,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=Zb(e.firestore,hk),r=ok(e),i=mw(e.converter,t);return _w(n,[Sk(Tk(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Gh.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new Uw(t.firestore,e)}))}},{key:"isEqual",value:function(e){return sk(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(Fw.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(Kw);function Hw(e){return Zb(e,nk)}var Yw=function(){function e(){k(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=a(yk,n)}return w(e,[{key:"isEqual",value:function(e){return(e=ee(e))instanceof yk&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(Kl.keyField().canonicalString())}}]),e}(),Jw=function(){function e(t){k(this,e),this._delegate=t}return w(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new Nk("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new Ok("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Pk("arrayUnion",t)}.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Dk("arrayRemove",t)}.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new Rk("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),Xw={Firestore:Dw,GeoPoint:kk,Timestamp:Ml,Blob:Cw,Transaction:Lw,WriteBatch:Mw,DocumentReference:Uw,DocumentSnapshot:Bw,Query:Kw,QueryDocumentSnapshot:zw,QuerySnapshot:Ww,CollectionReference:Gw,FieldPath:Yw,FieldValue:Jw,setLogLevel:function(e){!function(e){ll.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new ne("firestore-compat",(function(e){return function(e,t){return new Dw(e,t,new Pw)}(e.getProvider("app-compat").getImmediate(),e.getProvider("firestore").getImmediate())}),"PUBLIC").setServiceProps(Object.assign({},Xw)))}(e),e.registerVersion("@firebase/firestore-compat","0.1.18")}(pt);var Zw,$w=function(e,t){var n,r;return n=e.appId,r=pt.apps.filter((function(e){return e.options.appId===n})),(1===r.length?r[0]:null)||pt.initializeApp(e,t)};"pam"==={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_APP_ENV?(console.log("using pjordan config"),Zw=$w({apiKey:"AIzaSyB9eVT-fu4TOjxHoPAXqsnz9tCcbTJkTOw",authDomain:"pamdev-ea800.firebaseapp.com",projectId:"pamdev-ea800",storageBucket:"pamdev-ea800.appspot.com",messagingSenderId:"366450927885",appId:"1:366450927885:web:caa5f022ef1de182a0e844",measurementId:"G-JC5XZEPYT1"},"pam")):"scott"==={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_APP_ENV?(console.log("using scott config"),Zw=$w({apiKey:"AIzaSyBEhbIdVW2F2vvvfvpNb2SsCDP9Yoc__z8",authDomain:"scottdev-f6528.firebaseapp.com",projectId:"scottdev-f6528",storageBucket:"scottdev-f6528.appspot.com",messagingSenderId:"447730403122",appId:"1:447730403122:web:1727020dbac4ad4cf6f92b"})):(console.log("using production config"),Zw=$w({apiKey:"AIzaSyBOgWAbXUGckpad2sk0IUo00hZsV4WxG0E",authDomain:"meddbriefer-68cd4.firebaseapp.com",projectId:"meddbriefer-68cd4",storageBucket:"meddbriefer-68cd4.appspot.com",messagingSenderId:"1087114796018",appId:"1:1087114796018:web:679fbab38dbf78af0ce96b",measurementId:"G-Q7QZKC9KHW"},"production"));var ex=Zw,tx=ex.auth(),nx=ex.firestore();window.db=nx;var rx=O().createContext({}),ix="auth/user-not-found",ax="auth/network-request-failed",ox="Sorry, we have no record of a user with your email address",sx="A Network Error has occurred. Try again later.",ux=function(){var e=E(T().mark((function e(t){var n,r;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",!1);case 2:return n=nx.collection("staff").doc(t.uid),e.next=5,n.get();case 5:return r=e.sent,e.abrupt("return",r.exists);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),cx="signin",lx="register",fx="forgot-passwd",hx="email-verify",dx=function(e){var t=e.children,n=I((0,S.useState)(!1),2),r=n[0],i=n[1],a=I((0,S.useState)(null),2),o=a[0],s=a[1],u=I((0,S.useState)(null),2),c=u[0],l=u[1],f=I((0,S.useState)(""),2),h=f[0],d=f[1],p=I((0,S.useState)(cx),2),v=p[0],m=p[1],y=I((0,S.useState)(""),2),g=y[0],b=y[1],k=I((0,S.useState)(""),2),w=k[0],x=k[1],_=I((0,S.useState)(""),2),A=_[0],C=_[1],N=I((0,S.useState)(!1),2),P=N[0],D=N[1],R=I((0,S.useState)(!1),2),L=R[0],M=R[1],F=I((0,S.useState)({}),2),U=F[0],V=F[1],q=function(){i(!1),D(!1),l(null),M(!1)};(0,S.useEffect)((function(){tx.onAuthStateChanged((function(e){s(e),e?(i(!0),l(e.email.substr(0,e.email.indexOf("@"))),ux(e).then((function(t){D(t),e.emailVerified?M(!0):(d("A message has been sent to your email address. It contains a link which will verify that you are the owner of that email address"),m(hx))})).catch((function(e){return console.error(e)}))):q()}))}),[]);var j=function(){return nx.collection("users").doc(o.uid)||null},B=function(){var e=E(T().mark((function e(){var t;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j().get();case 2:return t=e.sent,e.abrupt("return",t.data());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return O().createElement(rx.Provider,{value:{auth:tx,currentUser:o,authMsg:h,setAuthMsg:d,registerErrorMsg:g,setRegisterErrorMsg:b,registerUserWithEmailAndPassword:function(e,t){tx.createUserWithEmailAndPassword(e,t).then((function(e){e.user.sendEmailVerification(),setErrorMsg("")})).catch((function(e){switch(e.code){case"auth/email-already-in-use":b("An account already exists with that email address");break;case ax:b(sx);break;default:console.log(e.code),b(e.message)}}))},loginError:w,setLoginError:x,loginUserWithEmailAndPassword:function(e,t){tx.signInWithEmailAndPassword(e,t).then((function(){x("")})).catch((function(e){switch(e.code){case"auth/wrong-password":x("Incorrect Password. Try again.");break;case ix:x(ox);break;case ax:x(sx);break;default:console.log(e.code),x(e.message)}}))},passwdResetError:A,setPasswdResetError:C,sendOutPasswordReset:function(e){tx.sendPasswordResetEmail(e).then((function(){d("You should soon recieve an email with a password reset link it. After reseting you password, you will be able to sign in."),m(cx)})).catch((function(e){switch(e.code){case ix:C(ox);break;case ax:C(sx);break;default:console.log(e.code),C(e.message)}}))},currAuthComponent:v,setCurrAuthComponent:m,signOutUser:function(){tx.signOut().then((function(){q()})).catch((function(e){return console.log(e)}))},userName:c,isAuthenticated:r,isStaff:P,emailVerified:L,setEmailVerified:M,userPrefs:U,setUserPrefs:V,saveUserData:function(e,t){var n,r,i;j().set((i=t,(r=e)in(n={})?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,n),{merge:!0})},getUserData:B}},t)},px=n(779),vx=n.n(px),mx=n(62),yx=n.n(mx),gx=n(985);yx()(gx.Z,{insert:"head",singleton:!1});var bx=gx.Z.locals||{},kx=function(e){var t=e.visible,n=e.stateToggler;return O().createElement("span",{className:vx()(bx["input-group-text"],"material-icons-outlined"),onClick:n},t?"visibility":"visibility_off")},wx=function(){var e=I((0,S.useState)(!1),2),t=e[0],n=e[1],r=(0,S.useContext)(rx),i=r.authMsg,a=r.loginError,o=r.loginUserWithEmailAndPassword,s=r.setCurrAuthComponent;return O().createElement("div",null,O().createElement("form",{onSubmit:function(e){e.preventDefault();var t=e.target.elements,n=t.email,r=t.password;o(n.value,r.value)}},O().createElement("div",{className:bx.container},O().createElement("div",{className:bx.row},O().createElement("h3",null,"Sign In")),O().createElement("div",{className:bx.row},O().createElement("label",{htmlFor:"email",className:vx()(bx["col-sm-2"],bx["col-form-label"])},"Email address"),O().createElement("div",{className:bx["col-sm-10"]},O().createElement("input",{id:"email",name:"email",type:"email",className:bx["form-control"],placeholder:"Enter email",required:!0}))),O().createElement("div",{className:bx.row},O().createElement("label",{htmlFor:"password",className:vx()(bx["col-sm-2"],bx["col-form-label"])},"Password"),O().createElement("div",{className:vx()(bx["col-sm-10"],bx["input-group"])},O().createElement("input",{id:"password",name:"password",type:t?"text":"password",className:bx["form-control"],placeholder:"Enter password",required:!0}),O().createElement(kx,{visible:t,stateToggler:function(){return n(!t)}}))),O().createElement("div",{className:bx.row},O().createElement("p",{className:bx["text-danger"]},a)),O().createElement("div",{className:bx.row},O().createElement("p",null,i)),O().createElement("button",{type:"submit",className:vx()(bx.btn,bx["btn-primary"])},"Sign In"),O().createElement("button",{type:"button",className:vx()(bx.btn,bx["btn-link"]),onClick:function(e){e.preventDefault(),s(fx)}},"I forgot my Password"),O().createElement("button",{type:"button",className:vx()(bx.btn,bx["btn-link"]),onClick:function(e){e.preventDefault(),s(lx)}},"Register"))))},xx=function(){var e=I((0,S.useState)(!1),2),t=e[0],n=e[1],r=I((0,S.useState)(!1),2),i=r[0],a=r[1],o=(0,S.useContext)(rx),s=o.setCurrAuthComponent,u=o.registerErrorMsg,c=o.registerUserWithEmailAndPassword;return O().createElement("div",null,O().createElement("form",{onSubmit:function(e){e.preventDefault();var t=e.target.elements,n=t.email,r=t.password;c(n.value,r.value)}},O().createElement("div",{className:bx.container},O().createElement("div",{className:bx.row},O().createElement("h3",null,"Sign up for MedDBriefer")),O().createElement("div",{className:bx.row},O().createElement("label",{htmlFor:"classCode",className:vx()(bx["col-sm-3"],bx["col-form-label"])},"Class Code"),O().createElement("div",{className:bx["col-sm-9"]},O().createElement("input",{className:bx["form-control"],id:"classCode",name:"classCode",type:"text",placeholder:"example: demo",required:!0}))),O().createElement("div",{className:bx.row},O().createElement("label",{htmlFor:"emailAddress",className:vx()(bx["col-sm-3"],bx["col-form-label"])},"Email"),O().createElement("div",{className:bx["col-sm-9"]},O().createElement("input",{className:bx["form-control"],id:"emailAddress",name:"email",type:"email",placeholder:"example: john.doe@gmail.com",required:!0}))),O().createElement("div",{className:bx.row},O().createElement("label",{htmlFor:"password",className:vx()(bx["col-sm-3"],bx["col-form-label"])},"Password"),O().createElement("div",{className:vx()(bx["col-sm-9"],bx["input-group"])},O().createElement("input",{id:"password",name:"password",type:t?"text":"password",className:bx["form-control"],placeholder:"Enter password",required:!0}),O().createElement(kx,{visible:t,stateToggler:function(){return n(!t)}}))),O().createElement("div",{className:bx.row},O().createElement("label",{htmlFor:"confirmPassword",className:vx()(bx["col-sm-3"],bx["col-form-label"])},"Confirm Password"),O().createElement("div",{className:vx()(bx["col-sm-9"],bx["input-group"])},O().createElement("input",{className:bx["form-control"],id:"confirmPassword",name:"confirmPassword",type:i?"text":"password",placeholder:"Password",required:!0}),O().createElement(kx,{visible:i,stateToggler:function(){return a(!i)}}))),O().createElement("div",{className:bx.row},O().createElement("p",{className:bx["text-danger"]},u)),O().createElement("button",{type:"submit",className:vx()(bx.btn,bx["btn-primary"])},"Sign Up"),O().createElement("button",{type:"button",className:vx()(bx.btn,bx["btn-link"]),onClick:function(e){e.preventDefault(),s(cx)}},"I already have an account."))))},Ix=function(){var e=(0,S.useContext)(rx),t=e.sendOutPasswordReset,n=e.passwdResetError,r=e.setLoginError,i=e.setPasswdResetError,a=e.setCurrAuthComponent;return O().createElement("div",null,O().createElement("form",{onSubmit:function(e){e.preventDefault();var n=e.target.elements.email;r(""),t(n.value).then((function(){})).catch((function(e){i(e.message)}))}},O().createElement("div",{className:bx.container},O().createElement("div",{className:bx.row},O().createElement("h3",null,"MedDBriefer Password Reset Form")),O().createElement("div",{className:bx.row},O().createElement("label",{htmlFor:"email",className:vx()(bx["col-sm-1"],bx["col-form-label"])},"Email"),O().createElement("div",{className:bx["col-sm-11"]},O().createElement("input",{id:"email",name:"email",type:"email",className:bx["form-control"],placeholder:"Enter email",required:!0}))),O().createElement("div",{className:bx.row},O().createElement("p",{className:bx["text-danger"]},n)),O().createElement("div",{className:bx.row},O().createElement("button",{type:"submit",className:vx()(bx.btn,bx["btn-primary"])},"Send Password Reset Email"),O().createElement("button",{type:"button",className:vx()(bx.btn,bx["btn-link"]),onClick:function(e){e.preventDefault(),r(""),a(cx)}},"I remembered my password!")))))},_x=function(){var e=(0,S.useContext)(rx),t=e.authMsg,n=e.currentUser,r=e.setAuthFlowComponent,i=e.setAuthMsg,a=e.setEmailVerified,o=function e(){setTimeout((function(){n.reload().then((function(){n.emailVerified?(a(!0),r(cx),i("")):e()}))}),5e3)};return(0,S.useEffect)((function(){n.emailVerified?(a(!0),i(""),r(cx)):(a(!1),o())}),[]),O().createElement("div",{className:bx.container},O().createElement("div",{className:bx.row},O().createElement("h4",null,t)),O().createElement("div",{className:bx.row},O().createElement("p",null,"You will arrive at your destination web page soon after clicking on the verification link.")),O().createElement("div",{className:bx.row},O().createElement("p",null,'Didn\'t recieve a verification email? Verification link expired? Click "Resend Verification Email".')),O().createElement("div",{className:bx.row},O().createElement("button",{type:"button",className:vx()(bx.btn,bx["btn-primary"]),onClick:function(){n.emailVerified?console.log("email address already verified"):n.sendEmailVerification().then((function(){o()})).catch((function(e){return console.log(e)}))}},"Resend Verification Email")))},Ex=function(e){var t=e.heading,n=void 0===t?"You must be logged in to access this page":t,r=(0,S.useContext)(rx).currAuthComponent;return O().createElement("div",null,O().createElement("h3",{className:bx["text-center"]},n),function(){switch(r){case lx:return O().createElement(xx,null);case fx:return O().createElement(Ix,null);case hx:return O().createElement(_x,null);default:return O().createElement(wx,null)}}())};function Ax(){return Ax=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ax.apply(this,arguments)}function Tx(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var Sx=n(128),Ox=["component","authFlowLayout"],Cx=function(e){var t=e.component,n=e.authFlowLayout,r=Tx(e,Ox);return(0,S.useContext)(rx).emailVerified?O().createElement(Sx.Route,Ax({},r,{render:function(e){return O().createElement(t,e)}})):n?O().createElement(n,r,O().createElement(Ex,r)):O().createElement(Ex,r)},Nx=["component","authFlowLayout"],Px=function(e){var t=e.msg,n=void 0===t?"Staff Privileges are required to access this page.":t;return O().createElement("div",null,n)},Dx=function(e){var t=e.component,n=e.authFlowLayout,r=Tx(e,Nx),i=(0,S.useContext)(rx),a=i.isAuthenticated,o=i.isStaff,s=i.emailVerified;return o&&s?O().createElement(Sx.Route,Ax({},r,{render:function(e){return O().createElement(t,e)}})):a&&s?n?O().createElement(Sx.Route,Ax({},r,{render:function(e){return O().createElement(n,e,O().createElement(Px,null))}})):O().createElement(Px,null):n?O().createElement(Sx.Route,Ax({},r,{render:function(e){return O().createElement(n,e,O().createElement(Ex,r))}})):O().createElement(Sx.Route,Ax({},r,{render:function(e){return O().createElement(Ex,r)}}))}}(),x}())},5667:function(e,t){var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var a=typeof n;if("string"===a||"number"===a)e.push(n);else if(Array.isArray(n)){if(n.length){var o=i.apply(null,n);o&&e.push(o)}}else if("object"===a)if(n.toString===Object.prototype.toString)for(var s in n)r.call(n,s)&&n[s]&&e.push(s);else e.push(n.toString())}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},7828:function(e,t,n){"use strict";n.d(t,{lX:function(){return I},q_:function(){return O},ob:function(){return v},PP:function(){return N},Ep:function(){return p},Hp:function(){return m}});var r=n(7896);function i(e){return"/"===e.charAt(0)}function a(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}var o=function(e,t){void 0===t&&(t="");var n,r=e&&e.split("/")||[],o=t&&t.split("/")||[],s=e&&i(e),u=t&&i(t),c=s||u;if(e&&i(e)?o=r:r.length&&(o.pop(),o=o.concat(r)),!o.length)return"/";if(o.length){var l=o[o.length-1];n="."===l||".."===l||""===l}else n=!1;for(var f=0,h=o.length;h>=0;h--){var d=o[h];"."===d?a(o,h):".."===d?(a(o,h),f++):f&&(a(o,h),f--)}if(!c)for(;f--;f)o.unshift("..");!c||""===o[0]||o[0]&&i(o[0])||o.unshift("");var p=o.join("/");return n&&"/"!==p.substr(-1)&&(p+="/"),p};function s(e){return e.valueOf?e.valueOf():Object.prototype.valueOf.call(e)}var u=function e(t,n){if(t===n)return!0;if(null==t||null==n)return!1;if(Array.isArray(t))return Array.isArray(n)&&t.length===n.length&&t.every((function(t,r){return e(t,n[r])}));if("object"===typeof t||"object"===typeof n){var r=s(t),i=s(n);return r!==t||i!==n?e(r,i):Object.keys(Object.assign({},t,n)).every((function(r){return e(t[r],n[r])}))}return!1},c=n(5704);function l(e){return"/"===e.charAt(0)?e:"/"+e}function f(e){return"/"===e.charAt(0)?e.substr(1):e}function h(e,t){return function(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}(e,t)?e.substr(t.length):e}function d(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function p(e){var t=e.pathname,n=e.search,r=e.hash,i=t||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}function v(e,t,n,i){var a;"string"===typeof e?(a=function(e){var t=e||"/",n="",r="",i=t.indexOf("#");-1!==i&&(r=t.substr(i),t=t.substr(0,i));var a=t.indexOf("?");return-1!==a&&(n=t.substr(a),t=t.substr(0,a)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}(e),a.state=t):(void 0===(a=(0,r.Z)({},e)).pathname&&(a.pathname=""),a.search?"?"!==a.search.charAt(0)&&(a.search="?"+a.search):a.search="",a.hash?"#"!==a.hash.charAt(0)&&(a.hash="#"+a.hash):a.hash="",void 0!==t&&void 0===a.state&&(a.state=t));try{a.pathname=decodeURI(a.pathname)}catch(s){throw s instanceof URIError?new URIError('Pathname "'+a.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):s}return n&&(a.key=n),i?a.pathname?"/"!==a.pathname.charAt(0)&&(a.pathname=o(a.pathname,i.pathname)):a.pathname=i.pathname:a.pathname||(a.pathname="/"),a}function m(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash&&e.key===t.key&&u(e.state,t.state)}function y(){var e=null;var t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,r,i){if(null!=e){var a="function"===typeof e?e(t,n):e;"string"===typeof a?"function"===typeof r?r(a,i):i(!0):i(!1!==a)}else i(!0)},appendListener:function(e){var n=!0;function r(){n&&e.apply(void 0,arguments)}return t.push(r),function(){n=!1,t=t.filter((function(e){return e!==r}))}},notifyListeners:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach((function(e){return e.apply(void 0,n)}))}}}var g=!("undefined"===typeof window||!window.document||!window.document.createElement);function b(e,t){t(window.confirm(e))}var k="popstate",w="hashchange";function x(){try{return window.history.state||{}}catch(e){return{}}}function I(e){void 0===e&&(e={}),g||(0,c.Z)(!1);var t=window.history,n=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history}(),i=!(-1===window.navigator.userAgent.indexOf("Trident")),a=e,o=a.forceRefresh,s=void 0!==o&&o,u=a.getUserConfirmation,f=void 0===u?b:u,m=a.keyLength,I=void 0===m?6:m,_=e.basename?d(l(e.basename)):"";function E(e){var t=e||{},n=t.key,r=t.state,i=window.location,a=i.pathname+i.search+i.hash;return _&&(a=h(a,_)),v(a,r,n)}function A(){return Math.random().toString(36).substr(2,I)}var T=y();function S(e){(0,r.Z)(q,e),q.length=t.length,T.notifyListeners(q.location,q.action)}function O(e){(function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")})(e)||P(E(e.state))}function C(){P(E(x()))}var N=!1;function P(e){if(N)N=!1,S();else{T.confirmTransitionTo(e,"POP",f,(function(t){t?S({action:"POP",location:e}):function(e){var t=q.location,n=R.indexOf(t.key);-1===n&&(n=0);var r=R.indexOf(e.key);-1===r&&(r=0);var i=n-r;i&&(N=!0,M(i))}(e)}))}}var D=E(x()),R=[D.key];function L(e){return _+p(e)}function M(e){t.go(e)}var F=0;function U(e){1===(F+=e)&&1===e?(window.addEventListener(k,O),i&&window.addEventListener(w,C)):0===F&&(window.removeEventListener(k,O),i&&window.removeEventListener(w,C))}var V=!1;var q={length:t.length,action:"POP",location:D,createHref:L,push:function(e,r){var i="PUSH",a=v(e,r,A(),q.location);T.confirmTransitionTo(a,i,f,(function(e){if(e){var r=L(a),o=a.key,u=a.state;if(n)if(t.pushState({key:o,state:u},null,r),s)window.location.href=r;else{var c=R.indexOf(q.location.key),l=R.slice(0,c+1);l.push(a.key),R=l,S({action:i,location:a})}else window.location.href=r}}))},replace:function(e,r){var i="REPLACE",a=v(e,r,A(),q.location);T.confirmTransitionTo(a,i,f,(function(e){if(e){var r=L(a),o=a.key,u=a.state;if(n)if(t.replaceState({key:o,state:u},null,r),s)window.location.replace(r);else{var c=R.indexOf(q.location.key);-1!==c&&(R[c]=a.key),S({action:i,location:a})}else window.location.replace(r)}}))},go:M,goBack:function(){M(-1)},goForward:function(){M(1)},block:function(e){void 0===e&&(e=!1);var t=T.setPrompt(e);return V||(U(1),V=!0),function(){return V&&(V=!1,U(-1)),t()}},listen:function(e){var t=T.appendListener(e);return U(1),function(){U(-1),t()}}};return q}var _="hashchange",E={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+f(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:f,decodePath:l},slash:{encodePath:l,decodePath:l}};function A(e){var t=e.indexOf("#");return-1===t?e:e.slice(0,t)}function T(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function S(e){window.location.replace(A(window.location.href)+"#"+e)}function O(e){void 0===e&&(e={}),g||(0,c.Z)(!1);var t=window.history,n=(window.navigator.userAgent.indexOf("Firefox"),e),i=n.getUserConfirmation,a=void 0===i?b:i,o=n.hashType,s=void 0===o?"slash":o,u=e.basename?d(l(e.basename)):"",f=E[s],m=f.encodePath,k=f.decodePath;function w(){var e=k(T());return u&&(e=h(e,u)),v(e)}var x=y();function I(e){(0,r.Z)(q,e),q.length=t.length,x.notifyListeners(q.location,q.action)}var O=!1,C=null;function N(){var e,t,n=T(),r=m(n);if(n!==r)S(r);else{var i=w(),o=q.location;if(!O&&(t=i,(e=o).pathname===t.pathname&&e.search===t.search&&e.hash===t.hash))return;if(C===p(i))return;C=null,function(e){if(O)O=!1,I();else{var t="POP";x.confirmTransitionTo(e,t,a,(function(n){n?I({action:t,location:e}):function(e){var t=q.location,n=L.lastIndexOf(p(t));-1===n&&(n=0);var r=L.lastIndexOf(p(e));-1===r&&(r=0);var i=n-r;i&&(O=!0,M(i))}(e)}))}}(i)}}var P=T(),D=m(P);P!==D&&S(D);var R=w(),L=[p(R)];function M(e){t.go(e)}var F=0;function U(e){1===(F+=e)&&1===e?window.addEventListener(_,N):0===F&&window.removeEventListener(_,N)}var V=!1;var q={length:t.length,action:"POP",location:R,createHref:function(e){var t=document.querySelector("base"),n="";return t&&t.getAttribute("href")&&(n=A(window.location.href)),n+"#"+m(u+p(e))},push:function(e,t){var n="PUSH",r=v(e,void 0,void 0,q.location);x.confirmTransitionTo(r,n,a,(function(e){if(e){var t=p(r),i=m(u+t);if(T()!==i){C=t,function(e){window.location.hash=e}(i);var a=L.lastIndexOf(p(q.location)),o=L.slice(0,a+1);o.push(t),L=o,I({action:n,location:r})}else I()}}))},replace:function(e,t){var n="REPLACE",r=v(e,void 0,void 0,q.location);x.confirmTransitionTo(r,n,a,(function(e){if(e){var t=p(r),i=m(u+t);T()!==i&&(C=t,S(i));var a=L.indexOf(p(q.location));-1!==a&&(L[a]=t),I({action:n,location:r})}}))},go:M,goBack:function(){M(-1)},goForward:function(){M(1)},block:function(e){void 0===e&&(e=!1);var t=x.setPrompt(e);return V||(U(1),V=!0),function(){return V&&(V=!1,U(-1)),t()}},listen:function(e){var t=x.appendListener(e);return U(1),function(){U(-1),t()}}};return q}function C(e,t,n){return Math.min(Math.max(e,t),n)}function N(e){void 0===e&&(e={});var t=e,n=t.getUserConfirmation,i=t.initialEntries,a=void 0===i?["/"]:i,o=t.initialIndex,s=void 0===o?0:o,u=t.keyLength,c=void 0===u?6:u,l=y();function f(e){(0,r.Z)(k,e),k.length=k.entries.length,l.notifyListeners(k.location,k.action)}function h(){return Math.random().toString(36).substr(2,c)}var d=C(s,0,a.length-1),m=a.map((function(e){return v(e,void 0,"string"===typeof e?h():e.key||h())})),g=p;function b(e){var t=C(k.index+e,0,k.entries.length-1),r=k.entries[t];l.confirmTransitionTo(r,"POP",n,(function(e){e?f({action:"POP",location:r,index:t}):f()}))}var k={length:m.length,action:"POP",location:m[d],index:d,entries:m,createHref:g,push:function(e,t){var r="PUSH",i=v(e,t,h(),k.location);l.confirmTransitionTo(i,r,n,(function(e){if(e){var t=k.index+1,n=k.entries.slice(0);n.length>t?n.splice(t,n.length-t,i):n.push(i),f({action:r,location:i,index:t,entries:n})}}))},replace:function(e,t){var r="REPLACE",i=v(e,t,h(),k.location);l.confirmTransitionTo(i,r,n,(function(e){e&&(k.entries[k.index]=i,f({action:r,location:i}))}))},go:b,goBack:function(){b(-1)},goForward:function(){b(1)},canGo:function(e){var t=k.index+e;return t>=0&&t<k.entries.length},block:function(e){return void 0===e&&(e=!1),l.setPrompt(e)},listen:function(e){return l.appendListener(e)}};return k}},7814:function(e,t,n){"use strict";var r=n(9479),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function u(e){return r.isMemo(e)?o:s[e.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=o;var c=Object.defineProperty,l=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=d(n);i&&i!==p&&e(t,i,r)}var o=l(n);f&&(o=o.concat(f(n)));for(var s=u(t),v=u(n),m=0;m<o.length;++m){var y=o[m];if(!a[y]&&(!r||!r[y])&&(!v||!v[y])&&(!s||!s[y])){var g=h(n,y);try{c(t,y,g)}catch(b){}}}}return t}},8807:function(e,t,n){var r="undefined"!==typeof JSON?JSON:n(6903);e.exports=function(e,t){t||(t={}),"function"===typeof t&&(t={cmp:t});var n=t.space||"";"number"===typeof n&&(n=Array(n+1).join(" "));var o,s="boolean"===typeof t.cycles&&t.cycles,u=t.replacer||function(e,t){return t},c=t.cmp&&(o=t.cmp,function(e){return function(t,n){var r={key:t,value:e[t]},i={key:n,value:e[n]};return o(r,i)}}),l=[];return function e(t,o,f,h){var d=n?"\n"+new Array(h+1).join(n):"",p=n?": ":":";if(f&&f.toJSON&&"function"===typeof f.toJSON&&(f=f.toJSON()),void 0!==(f=u.call(t,o,f))){if("object"!==typeof f||null===f)return r.stringify(f);if(i(f)){for(var v=[],m=0;m<f.length;m++){var y=e(f,m,f[m],h+1)||r.stringify(null);v.push(d+n+y)}return"["+v.join(",")+d+"]"}if(-1!==l.indexOf(f)){if(s)return r.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}l.push(f);var g=a(f).sort(c&&c(f));for(v=[],m=0;m<g.length;m++){var b=e(f,o=g[m],f[o],h+1);if(b){var k=r.stringify(o)+p+b;v.push(d+n+k)}}return l.splice(l.indexOf(f),1),"{"+v.join(",")+d+"}"}}({"":e},"",e,0)};var i=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},a=Object.keys||function(e){var t=Object.prototype.hasOwnProperty||function(){return!0},n=[];for(var r in e)t.call(e,r)&&n.push(r);return n}},6903:function(e,t,n){t.parse=n(2115),t.stringify=n(8101)},2115:function(e){var t,n,r,i,a={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},o=function(e){throw{name:"SyntaxError",message:e,at:t,text:r}},s=function(e){return e&&e!==n&&o("Expected '"+e+"' instead of '"+n+"'"),n=r.charAt(t),t+=1,n},u=function(){var e,t="";for("-"===n&&(t="-",s("-"));n>="0"&&n<="9";)t+=n,s();if("."===n)for(t+=".";s()&&n>="0"&&n<="9";)t+=n;if("e"===n||"E"===n)for(t+=n,s(),"-"!==n&&"+"!==n||(t+=n,s());n>="0"&&n<="9";)t+=n,s();if(e=+t,isFinite(e))return e;o("Bad number")},c=function(){var e,t,r,i="";if('"'===n)for(;s();){if('"'===n)return s(),i;if("\\"===n)if(s(),"u"===n){for(r=0,t=0;t<4&&(e=parseInt(s(),16),isFinite(e));t+=1)r=16*r+e;i+=String.fromCharCode(r)}else{if("string"!==typeof a[n])break;i+=a[n]}else i+=n}o("Bad string")},l=function(){for(;n&&n<=" ";)s()},f=function(){var e=[];if("["===n){if(s("["),l(),"]"===n)return s("]"),e;for(;n;){if(e.push(i()),l(),"]"===n)return s("]"),e;s(","),l()}}o("Bad array")},h=function(){var e,t={};if("{"===n){if(s("{"),l(),"}"===n)return s("}"),t;for(;n;){if(e=c(),l(),s(":"),Object.hasOwnProperty.call(t,e)&&o('Duplicate key "'+e+'"'),t[e]=i(),l(),"}"===n)return s("}"),t;s(","),l()}}o("Bad object")};i=function(){switch(l(),n){case"{":return h();case"[":return f();case'"':return c();case"-":return u();default:return n>="0"&&n<="9"?u():function(){switch(n){case"t":return s("t"),s("r"),s("u"),s("e"),!0;case"f":return s("f"),s("a"),s("l"),s("s"),s("e"),!1;case"n":return s("n"),s("u"),s("l"),s("l"),null}o("Unexpected '"+n+"'")}()}},e.exports=function(e,a){var s;return r=e,t=0,n=" ",s=i(),l(),n&&o("Syntax error"),"function"===typeof a?function e(t,n){var r,i,o=t[n];if(o&&"object"===typeof o)for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(void 0!==(i=e(o,r))?o[r]=i:delete o[r]);return a.call(t,n,o)}({"":s},""):s}},8101:function(e){var t,n,r,i=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,a={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function o(e){return i.lastIndex=0,i.test(e)?'"'+e.replace(i,(function(e){var t=a[e];return"string"===typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))+'"':'"'+e+'"'}function s(e,i){var a,u,c,l,f,h=t,d=i[e];switch(d&&"object"===typeof d&&"function"===typeof d.toJSON&&(d=d.toJSON(e)),"function"===typeof r&&(d=r.call(i,e,d)),typeof d){case"string":return o(d);case"number":return isFinite(d)?String(d):"null";case"boolean":case"null":return String(d);case"object":if(!d)return"null";if(t+=n,f=[],"[object Array]"===Object.prototype.toString.apply(d)){for(l=d.length,a=0;a<l;a+=1)f[a]=s(a,d)||"null";return c=0===f.length?"[]":t?"[\n"+t+f.join(",\n"+t)+"\n"+h+"]":"["+f.join(",")+"]",t=h,c}if(r&&"object"===typeof r)for(l=r.length,a=0;a<l;a+=1)"string"===typeof(u=r[a])&&(c=s(u,d))&&f.push(o(u)+(t?": ":":")+c);else for(u in d)Object.prototype.hasOwnProperty.call(d,u)&&(c=s(u,d))&&f.push(o(u)+(t?": ":":")+c);return c=0===f.length?"{}":t?"{\n"+t+f.join(",\n"+t)+"\n"+h+"}":"{"+f.join(",")+"}",t=h,c}}e.exports=function(e,i,a){var o;if(t="",n="","number"===typeof a)for(o=0;o<a;o+=1)n+=" ";else"string"===typeof a&&(n=a);if(r=i,i&&"function"!==typeof i&&("object"!==typeof i||"number"!==typeof i.length))throw new Error("JSON.stringify");return s("",{"":e})}},576:function(e,t,n){var r;e=n.nmd(e),function(){var i,a="Expected a function",o="__lodash_hash_undefined__",s="__lodash_placeholder__",u=16,c=32,l=64,f=128,h=256,d=1/0,p=9007199254740991,v=NaN,m=4294967295,y=[["ary",f],["bind",1],["bindKey",2],["curry",8],["curryRight",u],["flip",512],["partial",c],["partialRight",l],["rearg",h]],g="[object Arguments]",b="[object Array]",k="[object Boolean]",w="[object Date]",x="[object Error]",I="[object Function]",_="[object GeneratorFunction]",E="[object Map]",A="[object Number]",T="[object Object]",S="[object Promise]",O="[object RegExp]",C="[object Set]",N="[object String]",P="[object Symbol]",D="[object WeakMap]",R="[object ArrayBuffer]",L="[object DataView]",M="[object Float32Array]",F="[object Float64Array]",U="[object Int8Array]",V="[object Int16Array]",q="[object Int32Array]",j="[object Uint8Array]",B="[object Uint8ClampedArray]",z="[object Uint16Array]",K="[object Uint32Array]",Q=/\b__p \+= '';/g,W=/\b(__p \+=) '' \+/g,G=/(__e\(.*?\)|\b__t\)) \+\n'';/g,H=/&(?:amp|lt|gt|quot|#39);/g,Y=/[&<>"']/g,J=RegExp(H.source),X=RegExp(Y.source),Z=/<%-([\s\S]+?)%>/g,$=/<%([\s\S]+?)%>/g,ee=/<%=([\s\S]+?)%>/g,te=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ne=/^\w*$/,re=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ie=/[\\^$.*+?()[\]{}|]/g,ae=RegExp(ie.source),oe=/^\s+/,se=/\s/,ue=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ce=/\{\n\/\* \[wrapped with (.+)\] \*/,le=/,? & /,fe=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,he=/[()=,{}\[\]\/\s]/,de=/\\(\\)?/g,pe=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ve=/\w*$/,me=/^[-+]0x[0-9a-f]+$/i,ye=/^0b[01]+$/i,ge=/^\[object .+?Constructor\]$/,be=/^0o[0-7]+$/i,ke=/^(?:0|[1-9]\d*)$/,we=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,xe=/($^)/,Ie=/['\n\r\u2028\u2029\\]/g,_e="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Ee="\\u2700-\\u27bf",Ae="a-z\\xdf-\\xf6\\xf8-\\xff",Te="A-Z\\xc0-\\xd6\\xd8-\\xde",Se="\\ufe0e\\ufe0f",Oe="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ce="['\u2019]",Ne="[\\ud800-\\udfff]",Pe="["+Oe+"]",De="["+_e+"]",Re="\\d+",Le="[\\u2700-\\u27bf]",Me="["+Ae+"]",Fe="[^\\ud800-\\udfff"+Oe+Re+Ee+Ae+Te+"]",Ue="\\ud83c[\\udffb-\\udfff]",Ve="[^\\ud800-\\udfff]",qe="(?:\\ud83c[\\udde6-\\uddff]){2}",je="[\\ud800-\\udbff][\\udc00-\\udfff]",Be="["+Te+"]",ze="(?:"+Me+"|"+Fe+")",Ke="(?:"+Be+"|"+Fe+")",Qe="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",We="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Ge="(?:"+De+"|"+Ue+")"+"?",He="[\\ufe0e\\ufe0f]?",Ye=He+Ge+("(?:\\u200d(?:"+[Ve,qe,je].join("|")+")"+He+Ge+")*"),Je="(?:"+[Le,qe,je].join("|")+")"+Ye,Xe="(?:"+[Ve+De+"?",De,qe,je,Ne].join("|")+")",Ze=RegExp(Ce,"g"),$e=RegExp(De,"g"),et=RegExp(Ue+"(?="+Ue+")|"+Xe+Ye,"g"),tt=RegExp([Be+"?"+Me+"+"+Qe+"(?="+[Pe,Be,"$"].join("|")+")",Ke+"+"+We+"(?="+[Pe,Be+ze,"$"].join("|")+")",Be+"?"+ze+"+"+Qe,Be+"+"+We,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Re,Je].join("|"),"g"),nt=RegExp("[\\u200d\\ud800-\\udfff"+_e+Se+"]"),rt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,it=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],at=-1,ot={};ot[M]=ot[F]=ot[U]=ot[V]=ot[q]=ot[j]=ot[B]=ot[z]=ot[K]=!0,ot[g]=ot[b]=ot[R]=ot[k]=ot[L]=ot[w]=ot[x]=ot[I]=ot[E]=ot[A]=ot[T]=ot[O]=ot[C]=ot[N]=ot[D]=!1;var st={};st[g]=st[b]=st[R]=st[L]=st[k]=st[w]=st[M]=st[F]=st[U]=st[V]=st[q]=st[E]=st[A]=st[T]=st[O]=st[C]=st[N]=st[P]=st[j]=st[B]=st[z]=st[K]=!0,st[x]=st[I]=st[D]=!1;var ut={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ct=parseFloat,lt=parseInt,ft="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,ht="object"==typeof self&&self&&self.Object===Object&&self,dt=ft||ht||Function("return this")(),pt=t&&!t.nodeType&&t,vt=pt&&e&&!e.nodeType&&e,mt=vt&&vt.exports===pt,yt=mt&&ft.process,gt=function(){try{var e=vt&&vt.require&&vt.require("util").types;return e||yt&&yt.binding&&yt.binding("util")}catch(t){}}(),bt=gt&&gt.isArrayBuffer,kt=gt&&gt.isDate,wt=gt&&gt.isMap,xt=gt&&gt.isRegExp,It=gt&&gt.isSet,_t=gt&&gt.isTypedArray;function Et(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function At(e,t,n,r){for(var i=-1,a=null==e?0:e.length;++i<a;){var o=e[i];t(r,o,n(o),e)}return r}function Tt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function St(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function Ot(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function Ct(e,t){for(var n=-1,r=null==e?0:e.length,i=0,a=[];++n<r;){var o=e[n];t(o,n,e)&&(a[i++]=o)}return a}function Nt(e,t){return!!(null==e?0:e.length)&&jt(e,t,0)>-1}function Pt(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function Dt(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function Rt(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function Lt(e,t,n,r){var i=-1,a=null==e?0:e.length;for(r&&a&&(n=e[++i]);++i<a;)n=t(n,e[i],i,e);return n}function Mt(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function Ft(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var Ut=Qt("length");function Vt(e,t,n){var r;return n(e,(function(e,n,i){if(t(e,n,i))return r=n,!1})),r}function qt(e,t,n,r){for(var i=e.length,a=n+(r?1:-1);r?a--:++a<i;)if(t(e[a],a,e))return a;return-1}function jt(e,t,n){return t===t?function(e,t,n){var r=n-1,i=e.length;for(;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):qt(e,zt,n)}function Bt(e,t,n,r){for(var i=n-1,a=e.length;++i<a;)if(r(e[i],t))return i;return-1}function zt(e){return e!==e}function Kt(e,t){var n=null==e?0:e.length;return n?Ht(e,t)/n:v}function Qt(e){return function(t){return null==t?i:t[e]}}function Wt(e){return function(t){return null==e?i:e[t]}}function Gt(e,t,n,r,i){return i(e,(function(e,i,a){n=r?(r=!1,e):t(n,e,i,a)})),n}function Ht(e,t){for(var n,r=-1,a=e.length;++r<a;){var o=t(e[r]);o!==i&&(n=n===i?o:n+o)}return n}function Yt(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function Jt(e){return e?e.slice(0,vn(e)+1).replace(oe,""):e}function Xt(e){return function(t){return e(t)}}function Zt(e,t){return Dt(t,(function(t){return e[t]}))}function $t(e,t){return e.has(t)}function en(e,t){for(var n=-1,r=e.length;++n<r&&jt(t,e[n],0)>-1;);return n}function tn(e,t){for(var n=e.length;n--&&jt(t,e[n],0)>-1;);return n}function nn(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}var rn=Wt({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),an=Wt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function on(e){return"\\"+ut[e]}function sn(e){return nt.test(e)}function un(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function cn(e,t){return function(n){return e(t(n))}}function ln(e,t){for(var n=-1,r=e.length,i=0,a=[];++n<r;){var o=e[n];o!==t&&o!==s||(e[n]=s,a[i++]=n)}return a}function fn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function hn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}function dn(e){return sn(e)?function(e){var t=et.lastIndex=0;for(;et.test(e);)++t;return t}(e):Ut(e)}function pn(e){return sn(e)?function(e){return e.match(et)||[]}(e):function(e){return e.split("")}(e)}function vn(e){for(var t=e.length;t--&&se.test(e.charAt(t)););return t}var mn=Wt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var yn=function e(t){var n=(t=null==t?dt:yn.defaults(dt.Object(),t,yn.pick(dt,it))).Array,r=t.Date,se=t.Error,_e=t.Function,Ee=t.Math,Ae=t.Object,Te=t.RegExp,Se=t.String,Oe=t.TypeError,Ce=n.prototype,Ne=_e.prototype,Pe=Ae.prototype,De=t["__core-js_shared__"],Re=Ne.toString,Le=Pe.hasOwnProperty,Me=0,Fe=function(){var e=/[^.]+$/.exec(De&&De.keys&&De.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Ue=Pe.toString,Ve=Re.call(Ae),qe=dt._,je=Te("^"+Re.call(Le).replace(ie,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Be=mt?t.Buffer:i,ze=t.Symbol,Ke=t.Uint8Array,Qe=Be?Be.allocUnsafe:i,We=cn(Ae.getPrototypeOf,Ae),Ge=Ae.create,He=Pe.propertyIsEnumerable,Ye=Ce.splice,Je=ze?ze.isConcatSpreadable:i,Xe=ze?ze.iterator:i,et=ze?ze.toStringTag:i,nt=function(){try{var e=ha(Ae,"defineProperty");return e({},"",{}),e}catch(t){}}(),ut=t.clearTimeout!==dt.clearTimeout&&t.clearTimeout,ft=r&&r.now!==dt.Date.now&&r.now,ht=t.setTimeout!==dt.setTimeout&&t.setTimeout,pt=Ee.ceil,vt=Ee.floor,yt=Ae.getOwnPropertySymbols,gt=Be?Be.isBuffer:i,Ut=t.isFinite,Wt=Ce.join,gn=cn(Ae.keys,Ae),bn=Ee.max,kn=Ee.min,wn=r.now,xn=t.parseInt,In=Ee.random,_n=Ce.reverse,En=ha(t,"DataView"),An=ha(t,"Map"),Tn=ha(t,"Promise"),Sn=ha(t,"Set"),On=ha(t,"WeakMap"),Cn=ha(Ae,"create"),Nn=On&&new On,Pn={},Dn=Va(En),Rn=Va(An),Ln=Va(Tn),Mn=Va(Sn),Fn=Va(On),Un=ze?ze.prototype:i,Vn=Un?Un.valueOf:i,qn=Un?Un.toString:i;function jn(e){if(rs(e)&&!Wo(e)&&!(e instanceof Qn)){if(e instanceof Kn)return e;if(Le.call(e,"__wrapped__"))return qa(e)}return new Kn(e)}var Bn=function(){function e(){}return function(t){if(!ns(t))return{};if(Ge)return Ge(t);e.prototype=t;var n=new e;return e.prototype=i,n}}();function zn(){}function Kn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=i}function Qn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=m,this.__views__=[]}function Wn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Gn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Hn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Yn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Hn;++t<n;)this.add(e[t])}function Jn(e){var t=this.__data__=new Gn(e);this.size=t.size}function Xn(e,t){var n=Wo(e),r=!n&&Qo(e),i=!n&&!r&&Jo(e),a=!n&&!r&&!i&&fs(e),o=n||r||i||a,s=o?Yt(e.length,Se):[],u=s.length;for(var c in e)!t&&!Le.call(e,c)||o&&("length"==c||i&&("offset"==c||"parent"==c)||a&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||ba(c,u))||s.push(c);return s}function Zn(e){var t=e.length;return t?e[Yr(0,t-1)]:i}function $n(e,t){return Ma(Ci(e),ur(t,0,e.length))}function er(e){return Ma(Ci(e))}function tr(e,t,n){(n!==i&&!Bo(e[t],n)||n===i&&!(t in e))&&or(e,t,n)}function nr(e,t,n){var r=e[t];Le.call(e,t)&&Bo(r,n)&&(n!==i||t in e)||or(e,t,n)}function rr(e,t){for(var n=e.length;n--;)if(Bo(e[n][0],t))return n;return-1}function ir(e,t,n,r){return dr(e,(function(e,i,a){t(r,e,n(e),a)})),r}function ar(e,t){return e&&Ni(t,Ds(t),e)}function or(e,t,n){"__proto__"==t&&nt?nt(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function sr(e,t){for(var r=-1,a=t.length,o=n(a),s=null==e;++r<a;)o[r]=s?i:Ss(e,t[r]);return o}function ur(e,t,n){return e===e&&(n!==i&&(e=e<=n?e:n),t!==i&&(e=e>=t?e:t)),e}function cr(e,t,n,r,a,o){var s,u=1&t,c=2&t,l=4&t;if(n&&(s=a?n(e,r,a,o):n(e)),s!==i)return s;if(!ns(e))return e;var f=Wo(e);if(f){if(s=function(e){var t=e.length,n=new e.constructor(t);t&&"string"==typeof e[0]&&Le.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(e),!u)return Ci(e,s)}else{var h=va(e),d=h==I||h==_;if(Jo(e))return _i(e,u);if(h==T||h==g||d&&!a){if(s=c||d?{}:ya(e),!u)return c?function(e,t){return Ni(e,pa(e),t)}(e,function(e,t){return e&&Ni(t,Rs(t),e)}(s,e)):function(e,t){return Ni(e,da(e),t)}(e,ar(s,e))}else{if(!st[h])return a?e:{};s=function(e,t,n){var r=e.constructor;switch(t){case R:return Ei(e);case k:case w:return new r(+e);case L:return function(e,t){var n=t?Ei(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case M:case F:case U:case V:case q:case j:case B:case z:case K:return Ai(e,n);case E:return new r;case A:case N:return new r(e);case O:return function(e){var t=new e.constructor(e.source,ve.exec(e));return t.lastIndex=e.lastIndex,t}(e);case C:return new r;case P:return i=e,Vn?Ae(Vn.call(i)):{}}var i}(e,h,u)}}o||(o=new Jn);var p=o.get(e);if(p)return p;o.set(e,s),us(e)?e.forEach((function(r){s.add(cr(r,t,n,r,e,o))})):is(e)&&e.forEach((function(r,i){s.set(i,cr(r,t,n,i,e,o))}));var v=f?i:(l?c?aa:ia:c?Rs:Ds)(e);return Tt(v||e,(function(r,i){v&&(r=e[i=r]),nr(s,i,cr(r,t,n,i,e,o))})),s}function lr(e,t,n){var r=n.length;if(null==e)return!r;for(e=Ae(e);r--;){var a=n[r],o=t[a],s=e[a];if(s===i&&!(a in e)||!o(s))return!1}return!0}function fr(e,t,n){if("function"!=typeof e)throw new Oe(a);return Pa((function(){e.apply(i,n)}),t)}function hr(e,t,n,r){var i=-1,a=Nt,o=!0,s=e.length,u=[],c=t.length;if(!s)return u;n&&(t=Dt(t,Xt(n))),r?(a=Pt,o=!1):t.length>=200&&(a=$t,o=!1,t=new Yn(t));e:for(;++i<s;){var l=e[i],f=null==n?l:n(l);if(l=r||0!==l?l:0,o&&f===f){for(var h=c;h--;)if(t[h]===f)continue e;u.push(l)}else a(t,f,r)||u.push(l)}return u}jn.templateSettings={escape:Z,evaluate:$,interpolate:ee,variable:"",imports:{_:jn}},jn.prototype=zn.prototype,jn.prototype.constructor=jn,Kn.prototype=Bn(zn.prototype),Kn.prototype.constructor=Kn,Qn.prototype=Bn(zn.prototype),Qn.prototype.constructor=Qn,Wn.prototype.clear=function(){this.__data__=Cn?Cn(null):{},this.size=0},Wn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Wn.prototype.get=function(e){var t=this.__data__;if(Cn){var n=t[e];return n===o?i:n}return Le.call(t,e)?t[e]:i},Wn.prototype.has=function(e){var t=this.__data__;return Cn?t[e]!==i:Le.call(t,e)},Wn.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Cn&&t===i?o:t,this},Gn.prototype.clear=function(){this.__data__=[],this.size=0},Gn.prototype.delete=function(e){var t=this.__data__,n=rr(t,e);return!(n<0)&&(n==t.length-1?t.pop():Ye.call(t,n,1),--this.size,!0)},Gn.prototype.get=function(e){var t=this.__data__,n=rr(t,e);return n<0?i:t[n][1]},Gn.prototype.has=function(e){return rr(this.__data__,e)>-1},Gn.prototype.set=function(e,t){var n=this.__data__,r=rr(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},Hn.prototype.clear=function(){this.size=0,this.__data__={hash:new Wn,map:new(An||Gn),string:new Wn}},Hn.prototype.delete=function(e){var t=la(this,e).delete(e);return this.size-=t?1:0,t},Hn.prototype.get=function(e){return la(this,e).get(e)},Hn.prototype.has=function(e){return la(this,e).has(e)},Hn.prototype.set=function(e,t){var n=la(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Yn.prototype.add=Yn.prototype.push=function(e){return this.__data__.set(e,o),this},Yn.prototype.has=function(e){return this.__data__.has(e)},Jn.prototype.clear=function(){this.__data__=new Gn,this.size=0},Jn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Jn.prototype.get=function(e){return this.__data__.get(e)},Jn.prototype.has=function(e){return this.__data__.has(e)},Jn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Gn){var r=n.__data__;if(!An||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Hn(r)}return n.set(e,t),this.size=n.size,this};var dr=Ri(wr),pr=Ri(xr,!0);function vr(e,t){var n=!0;return dr(e,(function(e,r,i){return n=!!t(e,r,i)})),n}function mr(e,t,n){for(var r=-1,a=e.length;++r<a;){var o=e[r],s=t(o);if(null!=s&&(u===i?s===s&&!ls(s):n(s,u)))var u=s,c=o}return c}function yr(e,t){var n=[];return dr(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n}function gr(e,t,n,r,i){var a=-1,o=e.length;for(n||(n=ga),i||(i=[]);++a<o;){var s=e[a];t>0&&n(s)?t>1?gr(s,t-1,n,r,i):Rt(i,s):r||(i[i.length]=s)}return i}var br=Li(),kr=Li(!0);function wr(e,t){return e&&br(e,t,Ds)}function xr(e,t){return e&&kr(e,t,Ds)}function Ir(e,t){return Ct(t,(function(t){return $o(e[t])}))}function _r(e,t){for(var n=0,r=(t=ki(t,e)).length;null!=e&&n<r;)e=e[Ua(t[n++])];return n&&n==r?e:i}function Er(e,t,n){var r=t(e);return Wo(e)?r:Rt(r,n(e))}function Ar(e){return null==e?e===i?"[object Undefined]":"[object Null]":et&&et in Ae(e)?function(e){var t=Le.call(e,et),n=e[et];try{e[et]=i;var r=!0}catch(o){}var a=Ue.call(e);r&&(t?e[et]=n:delete e[et]);return a}(e):function(e){return Ue.call(e)}(e)}function Tr(e,t){return e>t}function Sr(e,t){return null!=e&&Le.call(e,t)}function Or(e,t){return null!=e&&t in Ae(e)}function Cr(e,t,r){for(var a=r?Pt:Nt,o=e[0].length,s=e.length,u=s,c=n(s),l=1/0,f=[];u--;){var h=e[u];u&&t&&(h=Dt(h,Xt(t))),l=kn(h.length,l),c[u]=!r&&(t||o>=120&&h.length>=120)?new Yn(u&&h):i}h=e[0];var d=-1,p=c[0];e:for(;++d<o&&f.length<l;){var v=h[d],m=t?t(v):v;if(v=r||0!==v?v:0,!(p?$t(p,m):a(f,m,r))){for(u=s;--u;){var y=c[u];if(!(y?$t(y,m):a(e[u],m,r)))continue e}p&&p.push(m),f.push(v)}}return f}function Nr(e,t,n){var r=null==(e=Sa(e,t=ki(t,e)))?e:e[Ua(Xa(t))];return null==r?i:Et(r,e,n)}function Pr(e){return rs(e)&&Ar(e)==g}function Dr(e,t,n,r,a){return e===t||(null==e||null==t||!rs(e)&&!rs(t)?e!==e&&t!==t:function(e,t,n,r,a,o){var s=Wo(e),u=Wo(t),c=s?b:va(e),l=u?b:va(t),f=(c=c==g?T:c)==T,h=(l=l==g?T:l)==T,d=c==l;if(d&&Jo(e)){if(!Jo(t))return!1;s=!0,f=!1}if(d&&!f)return o||(o=new Jn),s||fs(e)?na(e,t,n,r,a,o):function(e,t,n,r,i,a,o){switch(n){case L:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case R:return!(e.byteLength!=t.byteLength||!a(new Ke(e),new Ke(t)));case k:case w:case A:return Bo(+e,+t);case x:return e.name==t.name&&e.message==t.message;case O:case N:return e==t+"";case E:var s=un;case C:var u=1&r;if(s||(s=fn),e.size!=t.size&&!u)return!1;var c=o.get(e);if(c)return c==t;r|=2,o.set(e,t);var l=na(s(e),s(t),r,i,a,o);return o.delete(e),l;case P:if(Vn)return Vn.call(e)==Vn.call(t)}return!1}(e,t,c,n,r,a,o);if(!(1&n)){var p=f&&Le.call(e,"__wrapped__"),v=h&&Le.call(t,"__wrapped__");if(p||v){var m=p?e.value():e,y=v?t.value():t;return o||(o=new Jn),a(m,y,n,r,o)}}if(!d)return!1;return o||(o=new Jn),function(e,t,n,r,a,o){var s=1&n,u=ia(e),c=u.length,l=ia(t).length;if(c!=l&&!s)return!1;var f=c;for(;f--;){var h=u[f];if(!(s?h in t:Le.call(t,h)))return!1}var d=o.get(e),p=o.get(t);if(d&&p)return d==t&&p==e;var v=!0;o.set(e,t),o.set(t,e);var m=s;for(;++f<c;){var y=e[h=u[f]],g=t[h];if(r)var b=s?r(g,y,h,t,e,o):r(y,g,h,e,t,o);if(!(b===i?y===g||a(y,g,n,r,o):b)){v=!1;break}m||(m="constructor"==h)}if(v&&!m){var k=e.constructor,w=t.constructor;k==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof k&&k instanceof k&&"function"==typeof w&&w instanceof w||(v=!1)}return o.delete(e),o.delete(t),v}(e,t,n,r,a,o)}(e,t,n,r,Dr,a))}function Rr(e,t,n,r){var a=n.length,o=a,s=!r;if(null==e)return!o;for(e=Ae(e);a--;){var u=n[a];if(s&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++a<o;){var c=(u=n[a])[0],l=e[c],f=u[1];if(s&&u[2]){if(l===i&&!(c in e))return!1}else{var h=new Jn;if(r)var d=r(l,f,c,e,t,h);if(!(d===i?Dr(f,l,3,r,h):d))return!1}}return!0}function Lr(e){return!(!ns(e)||(t=e,Fe&&Fe in t))&&($o(e)?je:ge).test(Va(e));var t}function Mr(e){return"function"==typeof e?e:null==e?au:"object"==typeof e?Wo(e)?Br(e[0],e[1]):jr(e):pu(e)}function Fr(e){if(!_a(e))return gn(e);var t=[];for(var n in Ae(e))Le.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Ur(e){if(!ns(e))return function(e){var t=[];if(null!=e)for(var n in Ae(e))t.push(n);return t}(e);var t=_a(e),n=[];for(var r in e)("constructor"!=r||!t&&Le.call(e,r))&&n.push(r);return n}function Vr(e,t){return e<t}function qr(e,t){var r=-1,i=Ho(e)?n(e.length):[];return dr(e,(function(e,n,a){i[++r]=t(e,n,a)})),i}function jr(e){var t=fa(e);return 1==t.length&&t[0][2]?Aa(t[0][0],t[0][1]):function(n){return n===e||Rr(n,e,t)}}function Br(e,t){return wa(e)&&Ea(t)?Aa(Ua(e),t):function(n){var r=Ss(n,e);return r===i&&r===t?Os(n,e):Dr(t,r,3)}}function zr(e,t,n,r,a){e!==t&&br(t,(function(o,s){if(a||(a=new Jn),ns(o))!function(e,t,n,r,a,o,s){var u=Ca(e,n),c=Ca(t,n),l=s.get(c);if(l)return void tr(e,n,l);var f=o?o(u,c,n+"",e,t,s):i,h=f===i;if(h){var d=Wo(c),p=!d&&Jo(c),v=!d&&!p&&fs(c);f=c,d||p||v?Wo(u)?f=u:Yo(u)?f=Ci(u):p?(h=!1,f=_i(c,!0)):v?(h=!1,f=Ai(c,!0)):f=[]:os(c)||Qo(c)?(f=u,Qo(u)?f=bs(u):ns(u)&&!$o(u)||(f=ya(c))):h=!1}h&&(s.set(c,f),a(f,c,r,o,s),s.delete(c));tr(e,n,f)}(e,t,s,n,zr,r,a);else{var u=r?r(Ca(e,s),o,s+"",e,t,a):i;u===i&&(u=o),tr(e,s,u)}}),Rs)}function Kr(e,t){var n=e.length;if(n)return ba(t+=t<0?n:0,n)?e[t]:i}function Qr(e,t,n){t=t.length?Dt(t,(function(e){return Wo(e)?function(t){return _r(t,1===e.length?e[0]:e)}:e})):[au];var r=-1;t=Dt(t,Xt(ca()));var i=qr(e,(function(e,n,i){var a=Dt(t,(function(t){return t(e)}));return{criteria:a,index:++r,value:e}}));return function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(i,(function(e,t){return function(e,t,n){var r=-1,i=e.criteria,a=t.criteria,o=i.length,s=n.length;for(;++r<o;){var u=Ti(i[r],a[r]);if(u)return r>=s?u:u*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)}))}function Wr(e,t,n){for(var r=-1,i=t.length,a={};++r<i;){var o=t[r],s=_r(e,o);n(s,o)&&ei(a,ki(o,e),s)}return a}function Gr(e,t,n,r){var i=r?Bt:jt,a=-1,o=t.length,s=e;for(e===t&&(t=Ci(t)),n&&(s=Dt(e,Xt(n)));++a<o;)for(var u=0,c=t[a],l=n?n(c):c;(u=i(s,l,u,r))>-1;)s!==e&&Ye.call(s,u,1),Ye.call(e,u,1);return e}function Hr(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==a){var a=i;ba(i)?Ye.call(e,i,1):hi(e,i)}}return e}function Yr(e,t){return e+vt(In()*(t-e+1))}function Jr(e,t){var n="";if(!e||t<1||t>p)return n;do{t%2&&(n+=e),(t=vt(t/2))&&(e+=e)}while(t);return n}function Xr(e,t){return Da(Ta(e,t,au),e+"")}function Zr(e){return Zn(Bs(e))}function $r(e,t){var n=Bs(e);return Ma(n,ur(t,0,n.length))}function ei(e,t,n,r){if(!ns(e))return e;for(var a=-1,o=(t=ki(t,e)).length,s=o-1,u=e;null!=u&&++a<o;){var c=Ua(t[a]),l=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return e;if(a!=s){var f=u[c];(l=r?r(f,c,u):i)===i&&(l=ns(f)?f:ba(t[a+1])?[]:{})}nr(u,c,l),u=u[c]}return e}var ti=Nn?function(e,t){return Nn.set(e,t),e}:au,ni=nt?function(e,t){return nt(e,"toString",{configurable:!0,enumerable:!1,value:nu(t),writable:!0})}:au;function ri(e){return Ma(Bs(e))}function ii(e,t,r){var i=-1,a=e.length;t<0&&(t=-t>a?0:a+t),(r=r>a?a:r)<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var o=n(a);++i<a;)o[i]=e[i+t];return o}function ai(e,t){var n;return dr(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n}function oi(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t===t&&i<=2147483647){for(;r<i;){var a=r+i>>>1,o=e[a];null!==o&&!ls(o)&&(n?o<=t:o<t)?r=a+1:i=a}return i}return si(e,t,au,n)}function si(e,t,n,r){var a=0,o=null==e?0:e.length;if(0===o)return 0;for(var s=(t=n(t))!==t,u=null===t,c=ls(t),l=t===i;a<o;){var f=vt((a+o)/2),h=n(e[f]),d=h!==i,p=null===h,v=h===h,m=ls(h);if(s)var y=r||v;else y=l?v&&(r||d):u?v&&d&&(r||!p):c?v&&d&&!p&&(r||!m):!p&&!m&&(r?h<=t:h<t);y?a=f+1:o=f}return kn(o,4294967294)}function ui(e,t){for(var n=-1,r=e.length,i=0,a=[];++n<r;){var o=e[n],s=t?t(o):o;if(!n||!Bo(s,u)){var u=s;a[i++]=0===o?0:o}}return a}function ci(e){return"number"==typeof e?e:ls(e)?v:+e}function li(e){if("string"==typeof e)return e;if(Wo(e))return Dt(e,li)+"";if(ls(e))return qn?qn.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function fi(e,t,n){var r=-1,i=Nt,a=e.length,o=!0,s=[],u=s;if(n)o=!1,i=Pt;else if(a>=200){var c=t?null:Ji(e);if(c)return fn(c);o=!1,i=$t,u=new Yn}else u=t?[]:s;e:for(;++r<a;){var l=e[r],f=t?t(l):l;if(l=n||0!==l?l:0,o&&f===f){for(var h=u.length;h--;)if(u[h]===f)continue e;t&&u.push(f),s.push(l)}else i(u,f,n)||(u!==s&&u.push(f),s.push(l))}return s}function hi(e,t){return null==(e=Sa(e,t=ki(t,e)))||delete e[Ua(Xa(t))]}function di(e,t,n,r){return ei(e,t,n(_r(e,t)),r)}function pi(e,t,n,r){for(var i=e.length,a=r?i:-1;(r?a--:++a<i)&&t(e[a],a,e););return n?ii(e,r?0:a,r?a+1:i):ii(e,r?a+1:0,r?i:a)}function vi(e,t){var n=e;return n instanceof Qn&&(n=n.value()),Lt(t,(function(e,t){return t.func.apply(t.thisArg,Rt([e],t.args))}),n)}function mi(e,t,r){var i=e.length;if(i<2)return i?fi(e[0]):[];for(var a=-1,o=n(i);++a<i;)for(var s=e[a],u=-1;++u<i;)u!=a&&(o[a]=hr(o[a]||s,e[u],t,r));return fi(gr(o,1),t,r)}function yi(e,t,n){for(var r=-1,a=e.length,o=t.length,s={};++r<a;){var u=r<o?t[r]:i;n(s,e[r],u)}return s}function gi(e){return Yo(e)?e:[]}function bi(e){return"function"==typeof e?e:au}function ki(e,t){return Wo(e)?e:wa(e,t)?[e]:Fa(ks(e))}var wi=Xr;function xi(e,t,n){var r=e.length;return n=n===i?r:n,!t&&n>=r?e:ii(e,t,n)}var Ii=ut||function(e){return dt.clearTimeout(e)};function _i(e,t){if(t)return e.slice();var n=e.length,r=Qe?Qe(n):new e.constructor(n);return e.copy(r),r}function Ei(e){var t=new e.constructor(e.byteLength);return new Ke(t).set(new Ke(e)),t}function Ai(e,t){var n=t?Ei(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Ti(e,t){if(e!==t){var n=e!==i,r=null===e,a=e===e,o=ls(e),s=t!==i,u=null===t,c=t===t,l=ls(t);if(!u&&!l&&!o&&e>t||o&&s&&c&&!u&&!l||r&&s&&c||!n&&c||!a)return 1;if(!r&&!o&&!l&&e<t||l&&n&&a&&!r&&!o||u&&n&&a||!s&&a||!c)return-1}return 0}function Si(e,t,r,i){for(var a=-1,o=e.length,s=r.length,u=-1,c=t.length,l=bn(o-s,0),f=n(c+l),h=!i;++u<c;)f[u]=t[u];for(;++a<s;)(h||a<o)&&(f[r[a]]=e[a]);for(;l--;)f[u++]=e[a++];return f}function Oi(e,t,r,i){for(var a=-1,o=e.length,s=-1,u=r.length,c=-1,l=t.length,f=bn(o-u,0),h=n(f+l),d=!i;++a<f;)h[a]=e[a];for(var p=a;++c<l;)h[p+c]=t[c];for(;++s<u;)(d||a<o)&&(h[p+r[s]]=e[a++]);return h}function Ci(e,t){var r=-1,i=e.length;for(t||(t=n(i));++r<i;)t[r]=e[r];return t}function Ni(e,t,n,r){var a=!n;n||(n={});for(var o=-1,s=t.length;++o<s;){var u=t[o],c=r?r(n[u],e[u],u,n,e):i;c===i&&(c=e[u]),a?or(n,u,c):nr(n,u,c)}return n}function Pi(e,t){return function(n,r){var i=Wo(n)?At:ir,a=t?t():{};return i(n,e,ca(r,2),a)}}function Di(e){return Xr((function(t,n){var r=-1,a=n.length,o=a>1?n[a-1]:i,s=a>2?n[2]:i;for(o=e.length>3&&"function"==typeof o?(a--,o):i,s&&ka(n[0],n[1],s)&&(o=a<3?i:o,a=1),t=Ae(t);++r<a;){var u=n[r];u&&e(t,u,r,o)}return t}))}function Ri(e,t){return function(n,r){if(null==n)return n;if(!Ho(n))return e(n,r);for(var i=n.length,a=t?i:-1,o=Ae(n);(t?a--:++a<i)&&!1!==r(o[a],a,o););return n}}function Li(e){return function(t,n,r){for(var i=-1,a=Ae(t),o=r(t),s=o.length;s--;){var u=o[e?s:++i];if(!1===n(a[u],u,a))break}return t}}function Mi(e){return function(t){var n=sn(t=ks(t))?pn(t):i,r=n?n[0]:t.charAt(0),a=n?xi(n,1).join(""):t.slice(1);return r[e]()+a}}function Fi(e){return function(t){return Lt($s(Qs(t).replace(Ze,"")),e,"")}}function Ui(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Bn(e.prototype),r=e.apply(n,t);return ns(r)?r:n}}function Vi(e){return function(t,n,r){var a=Ae(t);if(!Ho(t)){var o=ca(n,3);t=Ds(t),n=function(e){return o(a[e],e,a)}}var s=e(t,n,r);return s>-1?a[o?t[s]:s]:i}}function qi(e){return ra((function(t){var n=t.length,r=n,o=Kn.prototype.thru;for(e&&t.reverse();r--;){var s=t[r];if("function"!=typeof s)throw new Oe(a);if(o&&!u&&"wrapper"==sa(s))var u=new Kn([],!0)}for(r=u?r:n;++r<n;){var c=sa(s=t[r]),l="wrapper"==c?oa(s):i;u=l&&xa(l[0])&&424==l[1]&&!l[4].length&&1==l[9]?u[sa(l[0])].apply(u,l[3]):1==s.length&&xa(s)?u[c]():u.thru(s)}return function(){var e=arguments,r=e[0];if(u&&1==e.length&&Wo(r))return u.plant(r).value();for(var i=0,a=n?t[i].apply(this,e):r;++i<n;)a=t[i].call(this,a);return a}}))}function ji(e,t,r,a,o,s,u,c,l,h){var d=t&f,p=1&t,v=2&t,m=24&t,y=512&t,g=v?i:Ui(e);return function i(){for(var f=arguments.length,b=n(f),k=f;k--;)b[k]=arguments[k];if(m)var w=ua(i),x=nn(b,w);if(a&&(b=Si(b,a,o,m)),s&&(b=Oi(b,s,u,m)),f-=x,m&&f<h){var I=ln(b,w);return Hi(e,t,ji,i.placeholder,r,b,I,c,l,h-f)}var _=p?r:this,E=v?_[e]:e;return f=b.length,c?b=Oa(b,c):y&&f>1&&b.reverse(),d&&l<f&&(b.length=l),this&&this!==dt&&this instanceof i&&(E=g||Ui(E)),E.apply(_,b)}}function Bi(e,t){return function(n,r){return function(e,t,n,r){return wr(e,(function(e,i,a){t(r,n(e),i,a)})),r}(n,e,t(r),{})}}function zi(e,t){return function(n,r){var a;if(n===i&&r===i)return t;if(n!==i&&(a=n),r!==i){if(a===i)return r;"string"==typeof n||"string"==typeof r?(n=li(n),r=li(r)):(n=ci(n),r=ci(r)),a=e(n,r)}return a}}function Ki(e){return ra((function(t){return t=Dt(t,Xt(ca())),Xr((function(n){var r=this;return e(t,(function(e){return Et(e,r,n)}))}))}))}function Qi(e,t){var n=(t=t===i?" ":li(t)).length;if(n<2)return n?Jr(t,e):t;var r=Jr(t,pt(e/dn(t)));return sn(t)?xi(pn(r),0,e).join(""):r.slice(0,e)}function Wi(e){return function(t,r,a){return a&&"number"!=typeof a&&ka(t,r,a)&&(r=a=i),t=vs(t),r===i?(r=t,t=0):r=vs(r),function(e,t,r,i){for(var a=-1,o=bn(pt((t-e)/(r||1)),0),s=n(o);o--;)s[i?o:++a]=e,e+=r;return s}(t,r,a=a===i?t<r?1:-1:vs(a),e)}}function Gi(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=gs(t),n=gs(n)),e(t,n)}}function Hi(e,t,n,r,a,o,s,u,f,h){var d=8&t;t|=d?c:l,4&(t&=~(d?l:c))||(t&=-4);var p=[e,t,a,d?o:i,d?s:i,d?i:o,d?i:s,u,f,h],v=n.apply(i,p);return xa(e)&&Na(v,p),v.placeholder=r,Ra(v,e,t)}function Yi(e){var t=Ee[e];return function(e,n){if(e=gs(e),(n=null==n?0:kn(ms(n),292))&&Ut(e)){var r=(ks(e)+"e").split("e");return+((r=(ks(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var Ji=Sn&&1/fn(new Sn([,-0]))[1]==d?function(e){return new Sn(e)}:lu;function Xi(e){return function(t){var n=va(t);return n==E?un(t):n==C?hn(t):function(e,t){return Dt(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Zi(e,t,r,o,d,p,v,m){var y=2&t;if(!y&&"function"!=typeof e)throw new Oe(a);var g=o?o.length:0;if(g||(t&=-97,o=d=i),v=v===i?v:bn(ms(v),0),m=m===i?m:ms(m),g-=d?d.length:0,t&l){var b=o,k=d;o=d=i}var w=y?i:oa(e),x=[e,t,r,o,d,b,k,p,v,m];if(w&&function(e,t){var n=e[1],r=t[1],i=n|r,a=i<131,o=r==f&&8==n||r==f&&n==h&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!a&&!o)return e;1&r&&(e[2]=t[2],i|=1&n?0:4);var u=t[3];if(u){var c=e[3];e[3]=c?Si(c,u,t[4]):u,e[4]=c?ln(e[3],s):t[4]}(u=t[5])&&(c=e[5],e[5]=c?Oi(c,u,t[6]):u,e[6]=c?ln(e[5],s):t[6]);(u=t[7])&&(e[7]=u);r&f&&(e[8]=null==e[8]?t[8]:kn(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=i}(x,w),e=x[0],t=x[1],r=x[2],o=x[3],d=x[4],!(m=x[9]=x[9]===i?y?0:e.length:bn(x[9]-g,0))&&24&t&&(t&=-25),t&&1!=t)I=8==t||t==u?function(e,t,r){var a=Ui(e);return function o(){for(var s=arguments.length,u=n(s),c=s,l=ua(o);c--;)u[c]=arguments[c];var f=s<3&&u[0]!==l&&u[s-1]!==l?[]:ln(u,l);return(s-=f.length)<r?Hi(e,t,ji,o.placeholder,i,u,f,i,i,r-s):Et(this&&this!==dt&&this instanceof o?a:e,this,u)}}(e,t,m):t!=c&&33!=t||d.length?ji.apply(i,x):function(e,t,r,i){var a=1&t,o=Ui(e);return function t(){for(var s=-1,u=arguments.length,c=-1,l=i.length,f=n(l+u),h=this&&this!==dt&&this instanceof t?o:e;++c<l;)f[c]=i[c];for(;u--;)f[c++]=arguments[++s];return Et(h,a?r:this,f)}}(e,t,r,o);else var I=function(e,t,n){var r=1&t,i=Ui(e);return function t(){return(this&&this!==dt&&this instanceof t?i:e).apply(r?n:this,arguments)}}(e,t,r);return Ra((w?ti:Na)(I,x),e,t)}function $i(e,t,n,r){return e===i||Bo(e,Pe[n])&&!Le.call(r,n)?t:e}function ea(e,t,n,r,a,o){return ns(e)&&ns(t)&&(o.set(t,e),zr(e,t,i,ea,o),o.delete(t)),e}function ta(e){return os(e)?i:e}function na(e,t,n,r,a,o){var s=1&n,u=e.length,c=t.length;if(u!=c&&!(s&&c>u))return!1;var l=o.get(e),f=o.get(t);if(l&&f)return l==t&&f==e;var h=-1,d=!0,p=2&n?new Yn:i;for(o.set(e,t),o.set(t,e);++h<u;){var v=e[h],m=t[h];if(r)var y=s?r(m,v,h,t,e,o):r(v,m,h,e,t,o);if(y!==i){if(y)continue;d=!1;break}if(p){if(!Ft(t,(function(e,t){if(!$t(p,t)&&(v===e||a(v,e,n,r,o)))return p.push(t)}))){d=!1;break}}else if(v!==m&&!a(v,m,n,r,o)){d=!1;break}}return o.delete(e),o.delete(t),d}function ra(e){return Da(Ta(e,i,Wa),e+"")}function ia(e){return Er(e,Ds,da)}function aa(e){return Er(e,Rs,pa)}var oa=Nn?function(e){return Nn.get(e)}:lu;function sa(e){for(var t=e.name+"",n=Pn[t],r=Le.call(Pn,t)?n.length:0;r--;){var i=n[r],a=i.func;if(null==a||a==e)return i.name}return t}function ua(e){return(Le.call(jn,"placeholder")?jn:e).placeholder}function ca(){var e=jn.iteratee||ou;return e=e===ou?Mr:e,arguments.length?e(arguments[0],arguments[1]):e}function la(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function fa(e){for(var t=Ds(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,Ea(i)]}return t}function ha(e,t){var n=function(e,t){return null==e?i:e[t]}(e,t);return Lr(n)?n:i}var da=yt?function(e){return null==e?[]:(e=Ae(e),Ct(yt(e),(function(t){return He.call(e,t)})))}:yu,pa=yt?function(e){for(var t=[];e;)Rt(t,da(e)),e=We(e);return t}:yu,va=Ar;function ma(e,t,n){for(var r=-1,i=(t=ki(t,e)).length,a=!1;++r<i;){var o=Ua(t[r]);if(!(a=null!=e&&n(e,o)))break;e=e[o]}return a||++r!=i?a:!!(i=null==e?0:e.length)&&ts(i)&&ba(o,i)&&(Wo(e)||Qo(e))}function ya(e){return"function"!=typeof e.constructor||_a(e)?{}:Bn(We(e))}function ga(e){return Wo(e)||Qo(e)||!!(Je&&e&&e[Je])}function ba(e,t){var n=typeof e;return!!(t=null==t?p:t)&&("number"==n||"symbol"!=n&&ke.test(e))&&e>-1&&e%1==0&&e<t}function ka(e,t,n){if(!ns(n))return!1;var r=typeof t;return!!("number"==r?Ho(n)&&ba(t,n.length):"string"==r&&t in n)&&Bo(n[t],e)}function wa(e,t){if(Wo(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!ls(e))||(ne.test(e)||!te.test(e)||null!=t&&e in Ae(t))}function xa(e){var t=sa(e),n=jn[t];if("function"!=typeof n||!(t in Qn.prototype))return!1;if(e===n)return!0;var r=oa(n);return!!r&&e===r[0]}(En&&va(new En(new ArrayBuffer(1)))!=L||An&&va(new An)!=E||Tn&&va(Tn.resolve())!=S||Sn&&va(new Sn)!=C||On&&va(new On)!=D)&&(va=function(e){var t=Ar(e),n=t==T?e.constructor:i,r=n?Va(n):"";if(r)switch(r){case Dn:return L;case Rn:return E;case Ln:return S;case Mn:return C;case Fn:return D}return t});var Ia=De?$o:gu;function _a(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Pe)}function Ea(e){return e===e&&!ns(e)}function Aa(e,t){return function(n){return null!=n&&(n[e]===t&&(t!==i||e in Ae(n)))}}function Ta(e,t,r){return t=bn(t===i?e.length-1:t,0),function(){for(var i=arguments,a=-1,o=bn(i.length-t,0),s=n(o);++a<o;)s[a]=i[t+a];a=-1;for(var u=n(t+1);++a<t;)u[a]=i[a];return u[t]=r(s),Et(e,this,u)}}function Sa(e,t){return t.length<2?e:_r(e,ii(t,0,-1))}function Oa(e,t){for(var n=e.length,r=kn(t.length,n),a=Ci(e);r--;){var o=t[r];e[r]=ba(o,n)?a[o]:i}return e}function Ca(e,t){if(("constructor"!==t||"function"!==typeof e[t])&&"__proto__"!=t)return e[t]}var Na=La(ti),Pa=ht||function(e,t){return dt.setTimeout(e,t)},Da=La(ni);function Ra(e,t,n){var r=t+"";return Da(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(ue,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return Tt(y,(function(n){var r="_."+n[0];t&n[1]&&!Nt(e,r)&&e.push(r)})),e.sort()}(function(e){var t=e.match(ce);return t?t[1].split(le):[]}(r),n)))}function La(e){var t=0,n=0;return function(){var r=wn(),a=16-(r-n);if(n=r,a>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(i,arguments)}}function Ma(e,t){var n=-1,r=e.length,a=r-1;for(t=t===i?r:t;++n<t;){var o=Yr(n,a),s=e[o];e[o]=e[n],e[n]=s}return e.length=t,e}var Fa=function(e){var t=Mo(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(re,(function(e,n,r,i){t.push(r?i.replace(de,"$1"):n||e)})),t}));function Ua(e){if("string"==typeof e||ls(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Va(e){if(null!=e){try{return Re.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function qa(e){if(e instanceof Qn)return e.clone();var t=new Kn(e.__wrapped__,e.__chain__);return t.__actions__=Ci(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var ja=Xr((function(e,t){return Yo(e)?hr(e,gr(t,1,Yo,!0)):[]})),Ba=Xr((function(e,t){var n=Xa(t);return Yo(n)&&(n=i),Yo(e)?hr(e,gr(t,1,Yo,!0),ca(n,2)):[]})),za=Xr((function(e,t){var n=Xa(t);return Yo(n)&&(n=i),Yo(e)?hr(e,gr(t,1,Yo,!0),i,n):[]}));function Ka(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:ms(n);return i<0&&(i=bn(r+i,0)),qt(e,ca(t,3),i)}function Qa(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var a=r-1;return n!==i&&(a=ms(n),a=n<0?bn(r+a,0):kn(a,r-1)),qt(e,ca(t,3),a,!0)}function Wa(e){return(null==e?0:e.length)?gr(e,1):[]}function Ga(e){return e&&e.length?e[0]:i}var Ha=Xr((function(e){var t=Dt(e,gi);return t.length&&t[0]===e[0]?Cr(t):[]})),Ya=Xr((function(e){var t=Xa(e),n=Dt(e,gi);return t===Xa(n)?t=i:n.pop(),n.length&&n[0]===e[0]?Cr(n,ca(t,2)):[]})),Ja=Xr((function(e){var t=Xa(e),n=Dt(e,gi);return(t="function"==typeof t?t:i)&&n.pop(),n.length&&n[0]===e[0]?Cr(n,i,t):[]}));function Xa(e){var t=null==e?0:e.length;return t?e[t-1]:i}var Za=Xr($a);function $a(e,t){return e&&e.length&&t&&t.length?Gr(e,t):e}var eo=ra((function(e,t){var n=null==e?0:e.length,r=sr(e,t);return Hr(e,Dt(t,(function(e){return ba(e,n)?+e:e})).sort(Ti)),r}));function to(e){return null==e?e:_n.call(e)}var no=Xr((function(e){return fi(gr(e,1,Yo,!0))})),ro=Xr((function(e){var t=Xa(e);return Yo(t)&&(t=i),fi(gr(e,1,Yo,!0),ca(t,2))})),io=Xr((function(e){var t=Xa(e);return t="function"==typeof t?t:i,fi(gr(e,1,Yo,!0),i,t)}));function ao(e){if(!e||!e.length)return[];var t=0;return e=Ct(e,(function(e){if(Yo(e))return t=bn(e.length,t),!0})),Yt(t,(function(t){return Dt(e,Qt(t))}))}function oo(e,t){if(!e||!e.length)return[];var n=ao(e);return null==t?n:Dt(n,(function(e){return Et(t,i,e)}))}var so=Xr((function(e,t){return Yo(e)?hr(e,t):[]})),uo=Xr((function(e){return mi(Ct(e,Yo))})),co=Xr((function(e){var t=Xa(e);return Yo(t)&&(t=i),mi(Ct(e,Yo),ca(t,2))})),lo=Xr((function(e){var t=Xa(e);return t="function"==typeof t?t:i,mi(Ct(e,Yo),i,t)})),fo=Xr(ao);var ho=Xr((function(e){var t=e.length,n=t>1?e[t-1]:i;return n="function"==typeof n?(e.pop(),n):i,oo(e,n)}));function po(e){var t=jn(e);return t.__chain__=!0,t}function vo(e,t){return t(e)}var mo=ra((function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,a=function(t){return sr(t,e)};return!(t>1||this.__actions__.length)&&r instanceof Qn&&ba(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:vo,args:[a],thisArg:i}),new Kn(r,this.__chain__).thru((function(e){return t&&!e.length&&e.push(i),e}))):this.thru(a)}));var yo=Pi((function(e,t,n){Le.call(e,n)?++e[n]:or(e,n,1)}));var go=Vi(Ka),bo=Vi(Qa);function ko(e,t){return(Wo(e)?Tt:dr)(e,ca(t,3))}function wo(e,t){return(Wo(e)?St:pr)(e,ca(t,3))}var xo=Pi((function(e,t,n){Le.call(e,n)?e[n].push(t):or(e,n,[t])}));var Io=Xr((function(e,t,r){var i=-1,a="function"==typeof t,o=Ho(e)?n(e.length):[];return dr(e,(function(e){o[++i]=a?Et(t,e,r):Nr(e,t,r)})),o})),_o=Pi((function(e,t,n){or(e,n,t)}));function Eo(e,t){return(Wo(e)?Dt:qr)(e,ca(t,3))}var Ao=Pi((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]}));var To=Xr((function(e,t){if(null==e)return[];var n=t.length;return n>1&&ka(e,t[0],t[1])?t=[]:n>2&&ka(t[0],t[1],t[2])&&(t=[t[0]]),Qr(e,gr(t,1),[])})),So=ft||function(){return dt.Date.now()};function Oo(e,t,n){return t=n?i:t,t=e&&null==t?e.length:t,Zi(e,f,i,i,i,i,t)}function Co(e,t){var n;if("function"!=typeof t)throw new Oe(a);return e=ms(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=i),n}}var No=Xr((function(e,t,n){var r=1;if(n.length){var i=ln(n,ua(No));r|=c}return Zi(e,r,t,n,i)})),Po=Xr((function(e,t,n){var r=3;if(n.length){var i=ln(n,ua(Po));r|=c}return Zi(t,r,e,n,i)}));function Do(e,t,n){var r,o,s,u,c,l,f=0,h=!1,d=!1,p=!0;if("function"!=typeof e)throw new Oe(a);function v(t){var n=r,a=o;return r=o=i,f=t,u=e.apply(a,n)}function m(e){return f=e,c=Pa(g,t),h?v(e):u}function y(e){var n=e-l;return l===i||n>=t||n<0||d&&e-f>=s}function g(){var e=So();if(y(e))return b(e);c=Pa(g,function(e){var n=t-(e-l);return d?kn(n,s-(e-f)):n}(e))}function b(e){return c=i,p&&r?v(e):(r=o=i,u)}function k(){var e=So(),n=y(e);if(r=arguments,o=this,l=e,n){if(c===i)return m(l);if(d)return Ii(c),c=Pa(g,t),v(l)}return c===i&&(c=Pa(g,t)),u}return t=gs(t)||0,ns(n)&&(h=!!n.leading,s=(d="maxWait"in n)?bn(gs(n.maxWait)||0,t):s,p="trailing"in n?!!n.trailing:p),k.cancel=function(){c!==i&&Ii(c),f=0,r=l=o=c=i},k.flush=function(){return c===i?u:b(So())},k}var Ro=Xr((function(e,t){return fr(e,1,t)})),Lo=Xr((function(e,t,n){return fr(e,gs(t)||0,n)}));function Mo(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Oe(a);var n=function n(){var r=arguments,i=t?t.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=e.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(Mo.Cache||Hn),n}function Fo(e){if("function"!=typeof e)throw new Oe(a);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Mo.Cache=Hn;var Uo=wi((function(e,t){var n=(t=1==t.length&&Wo(t[0])?Dt(t[0],Xt(ca())):Dt(gr(t,1),Xt(ca()))).length;return Xr((function(r){for(var i=-1,a=kn(r.length,n);++i<a;)r[i]=t[i].call(this,r[i]);return Et(e,this,r)}))})),Vo=Xr((function(e,t){var n=ln(t,ua(Vo));return Zi(e,c,i,t,n)})),qo=Xr((function(e,t){var n=ln(t,ua(qo));return Zi(e,l,i,t,n)})),jo=ra((function(e,t){return Zi(e,h,i,i,i,t)}));function Bo(e,t){return e===t||e!==e&&t!==t}var zo=Gi(Tr),Ko=Gi((function(e,t){return e>=t})),Qo=Pr(function(){return arguments}())?Pr:function(e){return rs(e)&&Le.call(e,"callee")&&!He.call(e,"callee")},Wo=n.isArray,Go=bt?Xt(bt):function(e){return rs(e)&&Ar(e)==R};function Ho(e){return null!=e&&ts(e.length)&&!$o(e)}function Yo(e){return rs(e)&&Ho(e)}var Jo=gt||gu,Xo=kt?Xt(kt):function(e){return rs(e)&&Ar(e)==w};function Zo(e){if(!rs(e))return!1;var t=Ar(e);return t==x||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!os(e)}function $o(e){if(!ns(e))return!1;var t=Ar(e);return t==I||t==_||"[object AsyncFunction]"==t||"[object Proxy]"==t}function es(e){return"number"==typeof e&&e==ms(e)}function ts(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=p}function ns(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function rs(e){return null!=e&&"object"==typeof e}var is=wt?Xt(wt):function(e){return rs(e)&&va(e)==E};function as(e){return"number"==typeof e||rs(e)&&Ar(e)==A}function os(e){if(!rs(e)||Ar(e)!=T)return!1;var t=We(e);if(null===t)return!0;var n=Le.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Re.call(n)==Ve}var ss=xt?Xt(xt):function(e){return rs(e)&&Ar(e)==O};var us=It?Xt(It):function(e){return rs(e)&&va(e)==C};function cs(e){return"string"==typeof e||!Wo(e)&&rs(e)&&Ar(e)==N}function ls(e){return"symbol"==typeof e||rs(e)&&Ar(e)==P}var fs=_t?Xt(_t):function(e){return rs(e)&&ts(e.length)&&!!ot[Ar(e)]};var hs=Gi(Vr),ds=Gi((function(e,t){return e<=t}));function ps(e){if(!e)return[];if(Ho(e))return cs(e)?pn(e):Ci(e);if(Xe&&e[Xe])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[Xe]());var t=va(e);return(t==E?un:t==C?fn:Bs)(e)}function vs(e){return e?(e=gs(e))===d||e===-1/0?17976931348623157e292*(e<0?-1:1):e===e?e:0:0===e?e:0}function ms(e){var t=vs(e),n=t%1;return t===t?n?t-n:t:0}function ys(e){return e?ur(ms(e),0,m):0}function gs(e){if("number"==typeof e)return e;if(ls(e))return v;if(ns(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=ns(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Jt(e);var n=ye.test(e);return n||be.test(e)?lt(e.slice(2),n?2:8):me.test(e)?v:+e}function bs(e){return Ni(e,Rs(e))}function ks(e){return null==e?"":li(e)}var ws=Di((function(e,t){if(_a(t)||Ho(t))Ni(t,Ds(t),e);else for(var n in t)Le.call(t,n)&&nr(e,n,t[n])})),xs=Di((function(e,t){Ni(t,Rs(t),e)})),Is=Di((function(e,t,n,r){Ni(t,Rs(t),e,r)})),_s=Di((function(e,t,n,r){Ni(t,Ds(t),e,r)})),Es=ra(sr);var As=Xr((function(e,t){e=Ae(e);var n=-1,r=t.length,a=r>2?t[2]:i;for(a&&ka(t[0],t[1],a)&&(r=1);++n<r;)for(var o=t[n],s=Rs(o),u=-1,c=s.length;++u<c;){var l=s[u],f=e[l];(f===i||Bo(f,Pe[l])&&!Le.call(e,l))&&(e[l]=o[l])}return e})),Ts=Xr((function(e){return e.push(i,ea),Et(Ms,i,e)}));function Ss(e,t,n){var r=null==e?i:_r(e,t);return r===i?n:r}function Os(e,t){return null!=e&&ma(e,t,Or)}var Cs=Bi((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Ue.call(t)),e[t]=n}),nu(au)),Ns=Bi((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Ue.call(t)),Le.call(e,t)?e[t].push(n):e[t]=[n]}),ca),Ps=Xr(Nr);function Ds(e){return Ho(e)?Xn(e):Fr(e)}function Rs(e){return Ho(e)?Xn(e,!0):Ur(e)}var Ls=Di((function(e,t,n){zr(e,t,n)})),Ms=Di((function(e,t,n,r){zr(e,t,n,r)})),Fs=ra((function(e,t){var n={};if(null==e)return n;var r=!1;t=Dt(t,(function(t){return t=ki(t,e),r||(r=t.length>1),t})),Ni(e,aa(e),n),r&&(n=cr(n,7,ta));for(var i=t.length;i--;)hi(n,t[i]);return n}));var Us=ra((function(e,t){return null==e?{}:function(e,t){return Wr(e,t,(function(t,n){return Os(e,n)}))}(e,t)}));function Vs(e,t){if(null==e)return{};var n=Dt(aa(e),(function(e){return[e]}));return t=ca(t),Wr(e,n,(function(e,n){return t(e,n[0])}))}var qs=Xi(Ds),js=Xi(Rs);function Bs(e){return null==e?[]:Zt(e,Ds(e))}var zs=Fi((function(e,t,n){return t=t.toLowerCase(),e+(n?Ks(t):t)}));function Ks(e){return Zs(ks(e).toLowerCase())}function Qs(e){return(e=ks(e))&&e.replace(we,rn).replace($e,"")}var Ws=Fi((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),Gs=Fi((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),Hs=Mi("toLowerCase");var Ys=Fi((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}));var Js=Fi((function(e,t,n){return e+(n?" ":"")+Zs(t)}));var Xs=Fi((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),Zs=Mi("toUpperCase");function $s(e,t,n){return e=ks(e),(t=n?i:t)===i?function(e){return rt.test(e)}(e)?function(e){return e.match(tt)||[]}(e):function(e){return e.match(fe)||[]}(e):e.match(t)||[]}var eu=Xr((function(e,t){try{return Et(e,i,t)}catch(n){return Zo(n)?n:new se(n)}})),tu=ra((function(e,t){return Tt(t,(function(t){t=Ua(t),or(e,t,No(e[t],e))})),e}));function nu(e){return function(){return e}}var ru=qi(),iu=qi(!0);function au(e){return e}function ou(e){return Mr("function"==typeof e?e:cr(e,1))}var su=Xr((function(e,t){return function(n){return Nr(n,e,t)}})),uu=Xr((function(e,t){return function(n){return Nr(e,n,t)}}));function cu(e,t,n){var r=Ds(t),i=Ir(t,r);null!=n||ns(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=Ir(t,Ds(t)));var a=!(ns(n)&&"chain"in n)||!!n.chain,o=$o(e);return Tt(i,(function(n){var r=t[n];e[n]=r,o&&(e.prototype[n]=function(){var t=this.__chain__;if(a||t){var n=e(this.__wrapped__),i=n.__actions__=Ci(this.__actions__);return i.push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,Rt([this.value()],arguments))})})),e}function lu(){}var fu=Ki(Dt),hu=Ki(Ot),du=Ki(Ft);function pu(e){return wa(e)?Qt(Ua(e)):function(e){return function(t){return _r(t,e)}}(e)}var vu=Wi(),mu=Wi(!0);function yu(){return[]}function gu(){return!1}var bu=zi((function(e,t){return e+t}),0),ku=Yi("ceil"),wu=zi((function(e,t){return e/t}),1),xu=Yi("floor");var Iu=zi((function(e,t){return e*t}),1),_u=Yi("round"),Eu=zi((function(e,t){return e-t}),0);return jn.after=function(e,t){if("function"!=typeof t)throw new Oe(a);return e=ms(e),function(){if(--e<1)return t.apply(this,arguments)}},jn.ary=Oo,jn.assign=ws,jn.assignIn=xs,jn.assignInWith=Is,jn.assignWith=_s,jn.at=Es,jn.before=Co,jn.bind=No,jn.bindAll=tu,jn.bindKey=Po,jn.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Wo(e)?e:[e]},jn.chain=po,jn.chunk=function(e,t,r){t=(r?ka(e,t,r):t===i)?1:bn(ms(t),0);var a=null==e?0:e.length;if(!a||t<1)return[];for(var o=0,s=0,u=n(pt(a/t));o<a;)u[s++]=ii(e,o,o+=t);return u},jn.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var a=e[t];a&&(i[r++]=a)}return i},jn.concat=function(){var e=arguments.length;if(!e)return[];for(var t=n(e-1),r=arguments[0],i=e;i--;)t[i-1]=arguments[i];return Rt(Wo(r)?Ci(r):[r],gr(t,1))},jn.cond=function(e){var t=null==e?0:e.length,n=ca();return e=t?Dt(e,(function(e){if("function"!=typeof e[1])throw new Oe(a);return[n(e[0]),e[1]]})):[],Xr((function(n){for(var r=-1;++r<t;){var i=e[r];if(Et(i[0],this,n))return Et(i[1],this,n)}}))},jn.conforms=function(e){return function(e){var t=Ds(e);return function(n){return lr(n,e,t)}}(cr(e,1))},jn.constant=nu,jn.countBy=yo,jn.create=function(e,t){var n=Bn(e);return null==t?n:ar(n,t)},jn.curry=function e(t,n,r){var a=Zi(t,8,i,i,i,i,i,n=r?i:n);return a.placeholder=e.placeholder,a},jn.curryRight=function e(t,n,r){var a=Zi(t,u,i,i,i,i,i,n=r?i:n);return a.placeholder=e.placeholder,a},jn.debounce=Do,jn.defaults=As,jn.defaultsDeep=Ts,jn.defer=Ro,jn.delay=Lo,jn.difference=ja,jn.differenceBy=Ba,jn.differenceWith=za,jn.drop=function(e,t,n){var r=null==e?0:e.length;return r?ii(e,(t=n||t===i?1:ms(t))<0?0:t,r):[]},jn.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?ii(e,0,(t=r-(t=n||t===i?1:ms(t)))<0?0:t):[]},jn.dropRightWhile=function(e,t){return e&&e.length?pi(e,ca(t,3),!0,!0):[]},jn.dropWhile=function(e,t){return e&&e.length?pi(e,ca(t,3),!0):[]},jn.fill=function(e,t,n,r){var a=null==e?0:e.length;return a?(n&&"number"!=typeof n&&ka(e,t,n)&&(n=0,r=a),function(e,t,n,r){var a=e.length;for((n=ms(n))<0&&(n=-n>a?0:a+n),(r=r===i||r>a?a:ms(r))<0&&(r+=a),r=n>r?0:ys(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},jn.filter=function(e,t){return(Wo(e)?Ct:yr)(e,ca(t,3))},jn.flatMap=function(e,t){return gr(Eo(e,t),1)},jn.flatMapDeep=function(e,t){return gr(Eo(e,t),d)},jn.flatMapDepth=function(e,t,n){return n=n===i?1:ms(n),gr(Eo(e,t),n)},jn.flatten=Wa,jn.flattenDeep=function(e){return(null==e?0:e.length)?gr(e,d):[]},jn.flattenDepth=function(e,t){return(null==e?0:e.length)?gr(e,t=t===i?1:ms(t)):[]},jn.flip=function(e){return Zi(e,512)},jn.flow=ru,jn.flowRight=iu,jn.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},jn.functions=function(e){return null==e?[]:Ir(e,Ds(e))},jn.functionsIn=function(e){return null==e?[]:Ir(e,Rs(e))},jn.groupBy=xo,jn.initial=function(e){return(null==e?0:e.length)?ii(e,0,-1):[]},jn.intersection=Ha,jn.intersectionBy=Ya,jn.intersectionWith=Ja,jn.invert=Cs,jn.invertBy=Ns,jn.invokeMap=Io,jn.iteratee=ou,jn.keyBy=_o,jn.keys=Ds,jn.keysIn=Rs,jn.map=Eo,jn.mapKeys=function(e,t){var n={};return t=ca(t,3),wr(e,(function(e,r,i){or(n,t(e,r,i),e)})),n},jn.mapValues=function(e,t){var n={};return t=ca(t,3),wr(e,(function(e,r,i){or(n,r,t(e,r,i))})),n},jn.matches=function(e){return jr(cr(e,1))},jn.matchesProperty=function(e,t){return Br(e,cr(t,1))},jn.memoize=Mo,jn.merge=Ls,jn.mergeWith=Ms,jn.method=su,jn.methodOf=uu,jn.mixin=cu,jn.negate=Fo,jn.nthArg=function(e){return e=ms(e),Xr((function(t){return Kr(t,e)}))},jn.omit=Fs,jn.omitBy=function(e,t){return Vs(e,Fo(ca(t)))},jn.once=function(e){return Co(2,e)},jn.orderBy=function(e,t,n,r){return null==e?[]:(Wo(t)||(t=null==t?[]:[t]),Wo(n=r?i:n)||(n=null==n?[]:[n]),Qr(e,t,n))},jn.over=fu,jn.overArgs=Uo,jn.overEvery=hu,jn.overSome=du,jn.partial=Vo,jn.partialRight=qo,jn.partition=Ao,jn.pick=Us,jn.pickBy=Vs,jn.property=pu,jn.propertyOf=function(e){return function(t){return null==e?i:_r(e,t)}},jn.pull=Za,jn.pullAll=$a,jn.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?Gr(e,t,ca(n,2)):e},jn.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?Gr(e,t,i,n):e},jn.pullAt=eo,jn.range=vu,jn.rangeRight=mu,jn.rearg=jo,jn.reject=function(e,t){return(Wo(e)?Ct:yr)(e,Fo(ca(t,3)))},jn.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],a=e.length;for(t=ca(t,3);++r<a;){var o=e[r];t(o,r,e)&&(n.push(o),i.push(r))}return Hr(e,i),n},jn.rest=function(e,t){if("function"!=typeof e)throw new Oe(a);return Xr(e,t=t===i?t:ms(t))},jn.reverse=to,jn.sampleSize=function(e,t,n){return t=(n?ka(e,t,n):t===i)?1:ms(t),(Wo(e)?$n:$r)(e,t)},jn.set=function(e,t,n){return null==e?e:ei(e,t,n)},jn.setWith=function(e,t,n,r){return r="function"==typeof r?r:i,null==e?e:ei(e,t,n,r)},jn.shuffle=function(e){return(Wo(e)?er:ri)(e)},jn.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&ka(e,t,n)?(t=0,n=r):(t=null==t?0:ms(t),n=n===i?r:ms(n)),ii(e,t,n)):[]},jn.sortBy=To,jn.sortedUniq=function(e){return e&&e.length?ui(e):[]},jn.sortedUniqBy=function(e,t){return e&&e.length?ui(e,ca(t,2)):[]},jn.split=function(e,t,n){return n&&"number"!=typeof n&&ka(e,t,n)&&(t=n=i),(n=n===i?m:n>>>0)?(e=ks(e))&&("string"==typeof t||null!=t&&!ss(t))&&!(t=li(t))&&sn(e)?xi(pn(e),0,n):e.split(t,n):[]},jn.spread=function(e,t){if("function"!=typeof e)throw new Oe(a);return t=null==t?0:bn(ms(t),0),Xr((function(n){var r=n[t],i=xi(n,0,t);return r&&Rt(i,r),Et(e,this,i)}))},jn.tail=function(e){var t=null==e?0:e.length;return t?ii(e,1,t):[]},jn.take=function(e,t,n){return e&&e.length?ii(e,0,(t=n||t===i?1:ms(t))<0?0:t):[]},jn.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?ii(e,(t=r-(t=n||t===i?1:ms(t)))<0?0:t,r):[]},jn.takeRightWhile=function(e,t){return e&&e.length?pi(e,ca(t,3),!1,!0):[]},jn.takeWhile=function(e,t){return e&&e.length?pi(e,ca(t,3)):[]},jn.tap=function(e,t){return t(e),e},jn.throttle=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new Oe(a);return ns(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Do(e,t,{leading:r,maxWait:t,trailing:i})},jn.thru=vo,jn.toArray=ps,jn.toPairs=qs,jn.toPairsIn=js,jn.toPath=function(e){return Wo(e)?Dt(e,Ua):ls(e)?[e]:Ci(Fa(ks(e)))},jn.toPlainObject=bs,jn.transform=function(e,t,n){var r=Wo(e),i=r||Jo(e)||fs(e);if(t=ca(t,4),null==n){var a=e&&e.constructor;n=i?r?new a:[]:ns(e)&&$o(a)?Bn(We(e)):{}}return(i?Tt:wr)(e,(function(e,r,i){return t(n,e,r,i)})),n},jn.unary=function(e){return Oo(e,1)},jn.union=no,jn.unionBy=ro,jn.unionWith=io,jn.uniq=function(e){return e&&e.length?fi(e):[]},jn.uniqBy=function(e,t){return e&&e.length?fi(e,ca(t,2)):[]},jn.uniqWith=function(e,t){return t="function"==typeof t?t:i,e&&e.length?fi(e,i,t):[]},jn.unset=function(e,t){return null==e||hi(e,t)},jn.unzip=ao,jn.unzipWith=oo,jn.update=function(e,t,n){return null==e?e:di(e,t,bi(n))},jn.updateWith=function(e,t,n,r){return r="function"==typeof r?r:i,null==e?e:di(e,t,bi(n),r)},jn.values=Bs,jn.valuesIn=function(e){return null==e?[]:Zt(e,Rs(e))},jn.without=so,jn.words=$s,jn.wrap=function(e,t){return Vo(bi(t),e)},jn.xor=uo,jn.xorBy=co,jn.xorWith=lo,jn.zip=fo,jn.zipObject=function(e,t){return yi(e||[],t||[],nr)},jn.zipObjectDeep=function(e,t){return yi(e||[],t||[],ei)},jn.zipWith=ho,jn.entries=qs,jn.entriesIn=js,jn.extend=xs,jn.extendWith=Is,cu(jn,jn),jn.add=bu,jn.attempt=eu,jn.camelCase=zs,jn.capitalize=Ks,jn.ceil=ku,jn.clamp=function(e,t,n){return n===i&&(n=t,t=i),n!==i&&(n=(n=gs(n))===n?n:0),t!==i&&(t=(t=gs(t))===t?t:0),ur(gs(e),t,n)},jn.clone=function(e){return cr(e,4)},jn.cloneDeep=function(e){return cr(e,5)},jn.cloneDeepWith=function(e,t){return cr(e,5,t="function"==typeof t?t:i)},jn.cloneWith=function(e,t){return cr(e,4,t="function"==typeof t?t:i)},jn.conformsTo=function(e,t){return null==t||lr(e,t,Ds(t))},jn.deburr=Qs,jn.defaultTo=function(e,t){return null==e||e!==e?t:e},jn.divide=wu,jn.endsWith=function(e,t,n){e=ks(e),t=li(t);var r=e.length,a=n=n===i?r:ur(ms(n),0,r);return(n-=t.length)>=0&&e.slice(n,a)==t},jn.eq=Bo,jn.escape=function(e){return(e=ks(e))&&X.test(e)?e.replace(Y,an):e},jn.escapeRegExp=function(e){return(e=ks(e))&&ae.test(e)?e.replace(ie,"\\$&"):e},jn.every=function(e,t,n){var r=Wo(e)?Ot:vr;return n&&ka(e,t,n)&&(t=i),r(e,ca(t,3))},jn.find=go,jn.findIndex=Ka,jn.findKey=function(e,t){return Vt(e,ca(t,3),wr)},jn.findLast=bo,jn.findLastIndex=Qa,jn.findLastKey=function(e,t){return Vt(e,ca(t,3),xr)},jn.floor=xu,jn.forEach=ko,jn.forEachRight=wo,jn.forIn=function(e,t){return null==e?e:br(e,ca(t,3),Rs)},jn.forInRight=function(e,t){return null==e?e:kr(e,ca(t,3),Rs)},jn.forOwn=function(e,t){return e&&wr(e,ca(t,3))},jn.forOwnRight=function(e,t){return e&&xr(e,ca(t,3))},jn.get=Ss,jn.gt=zo,jn.gte=Ko,jn.has=function(e,t){return null!=e&&ma(e,t,Sr)},jn.hasIn=Os,jn.head=Ga,jn.identity=au,jn.includes=function(e,t,n,r){e=Ho(e)?e:Bs(e),n=n&&!r?ms(n):0;var i=e.length;return n<0&&(n=bn(i+n,0)),cs(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&jt(e,t,n)>-1},jn.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:ms(n);return i<0&&(i=bn(r+i,0)),jt(e,t,i)},jn.inRange=function(e,t,n){return t=vs(t),n===i?(n=t,t=0):n=vs(n),function(e,t,n){return e>=kn(t,n)&&e<bn(t,n)}(e=gs(e),t,n)},jn.invoke=Ps,jn.isArguments=Qo,jn.isArray=Wo,jn.isArrayBuffer=Go,jn.isArrayLike=Ho,jn.isArrayLikeObject=Yo,jn.isBoolean=function(e){return!0===e||!1===e||rs(e)&&Ar(e)==k},jn.isBuffer=Jo,jn.isDate=Xo,jn.isElement=function(e){return rs(e)&&1===e.nodeType&&!os(e)},jn.isEmpty=function(e){if(null==e)return!0;if(Ho(e)&&(Wo(e)||"string"==typeof e||"function"==typeof e.splice||Jo(e)||fs(e)||Qo(e)))return!e.length;var t=va(e);if(t==E||t==C)return!e.size;if(_a(e))return!Fr(e).length;for(var n in e)if(Le.call(e,n))return!1;return!0},jn.isEqual=function(e,t){return Dr(e,t)},jn.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:i)?n(e,t):i;return r===i?Dr(e,t,i,n):!!r},jn.isError=Zo,jn.isFinite=function(e){return"number"==typeof e&&Ut(e)},jn.isFunction=$o,jn.isInteger=es,jn.isLength=ts,jn.isMap=is,jn.isMatch=function(e,t){return e===t||Rr(e,t,fa(t))},jn.isMatchWith=function(e,t,n){return n="function"==typeof n?n:i,Rr(e,t,fa(t),n)},jn.isNaN=function(e){return as(e)&&e!=+e},jn.isNative=function(e){if(Ia(e))throw new se("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Lr(e)},jn.isNil=function(e){return null==e},jn.isNull=function(e){return null===e},jn.isNumber=as,jn.isObject=ns,jn.isObjectLike=rs,jn.isPlainObject=os,jn.isRegExp=ss,jn.isSafeInteger=function(e){return es(e)&&e>=-9007199254740991&&e<=p},jn.isSet=us,jn.isString=cs,jn.isSymbol=ls,jn.isTypedArray=fs,jn.isUndefined=function(e){return e===i},jn.isWeakMap=function(e){return rs(e)&&va(e)==D},jn.isWeakSet=function(e){return rs(e)&&"[object WeakSet]"==Ar(e)},jn.join=function(e,t){return null==e?"":Wt.call(e,t)},jn.kebabCase=Ws,jn.last=Xa,jn.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var a=r;return n!==i&&(a=(a=ms(n))<0?bn(r+a,0):kn(a,r-1)),t===t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,a):qt(e,zt,a,!0)},jn.lowerCase=Gs,jn.lowerFirst=Hs,jn.lt=hs,jn.lte=ds,jn.max=function(e){return e&&e.length?mr(e,au,Tr):i},jn.maxBy=function(e,t){return e&&e.length?mr(e,ca(t,2),Tr):i},jn.mean=function(e){return Kt(e,au)},jn.meanBy=function(e,t){return Kt(e,ca(t,2))},jn.min=function(e){return e&&e.length?mr(e,au,Vr):i},jn.minBy=function(e,t){return e&&e.length?mr(e,ca(t,2),Vr):i},jn.stubArray=yu,jn.stubFalse=gu,jn.stubObject=function(){return{}},jn.stubString=function(){return""},jn.stubTrue=function(){return!0},jn.multiply=Iu,jn.nth=function(e,t){return e&&e.length?Kr(e,ms(t)):i},jn.noConflict=function(){return dt._===this&&(dt._=qe),this},jn.noop=lu,jn.now=So,jn.pad=function(e,t,n){e=ks(e);var r=(t=ms(t))?dn(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return Qi(vt(i),n)+e+Qi(pt(i),n)},jn.padEnd=function(e,t,n){e=ks(e);var r=(t=ms(t))?dn(e):0;return t&&r<t?e+Qi(t-r,n):e},jn.padStart=function(e,t,n){e=ks(e);var r=(t=ms(t))?dn(e):0;return t&&r<t?Qi(t-r,n)+e:e},jn.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),xn(ks(e).replace(oe,""),t||0)},jn.random=function(e,t,n){if(n&&"boolean"!=typeof n&&ka(e,t,n)&&(t=n=i),n===i&&("boolean"==typeof t?(n=t,t=i):"boolean"==typeof e&&(n=e,e=i)),e===i&&t===i?(e=0,t=1):(e=vs(e),t===i?(t=e,e=0):t=vs(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var a=In();return kn(e+a*(t-e+ct("1e-"+((a+"").length-1))),t)}return Yr(e,t)},jn.reduce=function(e,t,n){var r=Wo(e)?Lt:Gt,i=arguments.length<3;return r(e,ca(t,4),n,i,dr)},jn.reduceRight=function(e,t,n){var r=Wo(e)?Mt:Gt,i=arguments.length<3;return r(e,ca(t,4),n,i,pr)},jn.repeat=function(e,t,n){return t=(n?ka(e,t,n):t===i)?1:ms(t),Jr(ks(e),t)},jn.replace=function(){var e=arguments,t=ks(e[0]);return e.length<3?t:t.replace(e[1],e[2])},jn.result=function(e,t,n){var r=-1,a=(t=ki(t,e)).length;for(a||(a=1,e=i);++r<a;){var o=null==e?i:e[Ua(t[r])];o===i&&(r=a,o=n),e=$o(o)?o.call(e):o}return e},jn.round=_u,jn.runInContext=e,jn.sample=function(e){return(Wo(e)?Zn:Zr)(e)},jn.size=function(e){if(null==e)return 0;if(Ho(e))return cs(e)?dn(e):e.length;var t=va(e);return t==E||t==C?e.size:Fr(e).length},jn.snakeCase=Ys,jn.some=function(e,t,n){var r=Wo(e)?Ft:ai;return n&&ka(e,t,n)&&(t=i),r(e,ca(t,3))},jn.sortedIndex=function(e,t){return oi(e,t)},jn.sortedIndexBy=function(e,t,n){return si(e,t,ca(n,2))},jn.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=oi(e,t);if(r<n&&Bo(e[r],t))return r}return-1},jn.sortedLastIndex=function(e,t){return oi(e,t,!0)},jn.sortedLastIndexBy=function(e,t,n){return si(e,t,ca(n,2),!0)},jn.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var n=oi(e,t,!0)-1;if(Bo(e[n],t))return n}return-1},jn.startCase=Js,jn.startsWith=function(e,t,n){return e=ks(e),n=null==n?0:ur(ms(n),0,e.length),t=li(t),e.slice(n,n+t.length)==t},jn.subtract=Eu,jn.sum=function(e){return e&&e.length?Ht(e,au):0},jn.sumBy=function(e,t){return e&&e.length?Ht(e,ca(t,2)):0},jn.template=function(e,t,n){var r=jn.templateSettings;n&&ka(e,t,n)&&(t=i),e=ks(e),t=Is({},t,r,$i);var a,o,s=Is({},t.imports,r.imports,$i),u=Ds(s),c=Zt(s,u),l=0,f=t.interpolate||xe,h="__p += '",d=Te((t.escape||xe).source+"|"+f.source+"|"+(f===ee?pe:xe).source+"|"+(t.evaluate||xe).source+"|$","g"),p="//# sourceURL="+(Le.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++at+"]")+"\n";e.replace(d,(function(t,n,r,i,s,u){return r||(r=i),h+=e.slice(l,u).replace(Ie,on),n&&(a=!0,h+="' +\n__e("+n+") +\n'"),s&&(o=!0,h+="';\n"+s+";\n__p += '"),r&&(h+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=u+t.length,t})),h+="';\n";var v=Le.call(t,"variable")&&t.variable;if(v){if(he.test(v))throw new se("Invalid `variable` option passed into `_.template`")}else h="with (obj) {\n"+h+"\n}\n";h=(o?h.replace(Q,""):h).replace(W,"$1").replace(G,"$1;"),h="function("+(v||"obj")+") {\n"+(v?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var m=eu((function(){return _e(u,p+"return "+h).apply(i,c)}));if(m.source=h,Zo(m))throw m;return m},jn.times=function(e,t){if((e=ms(e))<1||e>p)return[];var n=m,r=kn(e,m);t=ca(t),e-=m;for(var i=Yt(r,t);++n<e;)t(n);return i},jn.toFinite=vs,jn.toInteger=ms,jn.toLength=ys,jn.toLower=function(e){return ks(e).toLowerCase()},jn.toNumber=gs,jn.toSafeInteger=function(e){return e?ur(ms(e),-9007199254740991,p):0===e?e:0},jn.toString=ks,jn.toUpper=function(e){return ks(e).toUpperCase()},jn.trim=function(e,t,n){if((e=ks(e))&&(n||t===i))return Jt(e);if(!e||!(t=li(t)))return e;var r=pn(e),a=pn(t);return xi(r,en(r,a),tn(r,a)+1).join("")},jn.trimEnd=function(e,t,n){if((e=ks(e))&&(n||t===i))return e.slice(0,vn(e)+1);if(!e||!(t=li(t)))return e;var r=pn(e);return xi(r,0,tn(r,pn(t))+1).join("")},jn.trimStart=function(e,t,n){if((e=ks(e))&&(n||t===i))return e.replace(oe,"");if(!e||!(t=li(t)))return e;var r=pn(e);return xi(r,en(r,pn(t))).join("")},jn.truncate=function(e,t){var n=30,r="...";if(ns(t)){var a="separator"in t?t.separator:a;n="length"in t?ms(t.length):n,r="omission"in t?li(t.omission):r}var o=(e=ks(e)).length;if(sn(e)){var s=pn(e);o=s.length}if(n>=o)return e;var u=n-dn(r);if(u<1)return r;var c=s?xi(s,0,u).join(""):e.slice(0,u);if(a===i)return c+r;if(s&&(u+=c.length-u),ss(a)){if(e.slice(u).search(a)){var l,f=c;for(a.global||(a=Te(a.source,ks(ve.exec(a))+"g")),a.lastIndex=0;l=a.exec(f);)var h=l.index;c=c.slice(0,h===i?u:h)}}else if(e.indexOf(li(a),u)!=u){var d=c.lastIndexOf(a);d>-1&&(c=c.slice(0,d))}return c+r},jn.unescape=function(e){return(e=ks(e))&&J.test(e)?e.replace(H,mn):e},jn.uniqueId=function(e){var t=++Me;return ks(e)+t},jn.upperCase=Xs,jn.upperFirst=Zs,jn.each=ko,jn.eachRight=wo,jn.first=Ga,cu(jn,function(){var e={};return wr(jn,(function(t,n){Le.call(jn.prototype,n)||(e[n]=t)})),e}(),{chain:!1}),jn.VERSION="4.17.21",Tt(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){jn[e].placeholder=jn})),Tt(["drop","take"],(function(e,t){Qn.prototype[e]=function(n){n=n===i?1:bn(ms(n),0);var r=this.__filtered__&&!t?new Qn(this):this.clone();return r.__filtered__?r.__takeCount__=kn(n,r.__takeCount__):r.__views__.push({size:kn(n,m),type:e+(r.__dir__<0?"Right":"")}),r},Qn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),Tt(["filter","map","takeWhile"],(function(e,t){var n=t+1,r=1==n||3==n;Qn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:ca(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}})),Tt(["head","last"],(function(e,t){var n="take"+(t?"Right":"");Qn.prototype[e]=function(){return this[n](1).value()[0]}})),Tt(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");Qn.prototype[e]=function(){return this.__filtered__?new Qn(this):this[n](1)}})),Qn.prototype.compact=function(){return this.filter(au)},Qn.prototype.find=function(e){return this.filter(e).head()},Qn.prototype.findLast=function(e){return this.reverse().find(e)},Qn.prototype.invokeMap=Xr((function(e,t){return"function"==typeof e?new Qn(this):this.map((function(n){return Nr(n,e,t)}))})),Qn.prototype.reject=function(e){return this.filter(Fo(ca(e)))},Qn.prototype.slice=function(e,t){e=ms(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Qn(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==i&&(n=(t=ms(t))<0?n.dropRight(-t):n.take(t-e)),n)},Qn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Qn.prototype.toArray=function(){return this.take(m)},wr(Qn.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),a=jn[r?"take"+("last"==t?"Right":""):t],o=r||/^find/.test(t);a&&(jn.prototype[t]=function(){var t=this.__wrapped__,s=r?[1]:arguments,u=t instanceof Qn,c=s[0],l=u||Wo(t),f=function(e){var t=a.apply(jn,Rt([e],s));return r&&h?t[0]:t};l&&n&&"function"==typeof c&&1!=c.length&&(u=l=!1);var h=this.__chain__,d=!!this.__actions__.length,p=o&&!h,v=u&&!d;if(!o&&l){t=v?t:new Qn(this);var m=e.apply(t,s);return m.__actions__.push({func:vo,args:[f],thisArg:i}),new Kn(m,h)}return p&&v?e.apply(this,s):(m=this.thru(f),p?r?m.value()[0]:m.value():m)})})),Tt(["pop","push","shift","sort","splice","unshift"],(function(e){var t=Ce[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);jn.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply(Wo(i)?i:[],e)}return this[n]((function(n){return t.apply(Wo(n)?n:[],e)}))}})),wr(Qn.prototype,(function(e,t){var n=jn[t];if(n){var r=n.name+"";Le.call(Pn,r)||(Pn[r]=[]),Pn[r].push({name:t,func:n})}})),Pn[ji(i,2).name]=[{name:"wrapper",func:i}],Qn.prototype.clone=function(){var e=new Qn(this.__wrapped__);return e.__actions__=Ci(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Ci(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Ci(this.__views__),e},Qn.prototype.reverse=function(){if(this.__filtered__){var e=new Qn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Qn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=Wo(e),r=t<0,i=n?e.length:0,a=function(e,t,n){var r=-1,i=n.length;for(;++r<i;){var a=n[r],o=a.size;switch(a.type){case"drop":e+=o;break;case"dropRight":t-=o;break;case"take":t=kn(t,e+o);break;case"takeRight":e=bn(e,t-o)}}return{start:e,end:t}}(0,i,this.__views__),o=a.start,s=a.end,u=s-o,c=r?s:o-1,l=this.__iteratees__,f=l.length,h=0,d=kn(u,this.__takeCount__);if(!n||!r&&i==u&&d==u)return vi(e,this.__actions__);var p=[];e:for(;u--&&h<d;){for(var v=-1,m=e[c+=t];++v<f;){var y=l[v],g=y.iteratee,b=y.type,k=g(m);if(2==b)m=k;else if(!k){if(1==b)continue e;break e}}p[h++]=m}return p},jn.prototype.at=mo,jn.prototype.chain=function(){return po(this)},jn.prototype.commit=function(){return new Kn(this.value(),this.__chain__)},jn.prototype.next=function(){this.__values__===i&&(this.__values__=ps(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?i:this.__values__[this.__index__++]}},jn.prototype.plant=function(e){for(var t,n=this;n instanceof zn;){var r=qa(n);r.__index__=0,r.__values__=i,t?a.__wrapped__=r:t=r;var a=r;n=n.__wrapped__}return a.__wrapped__=e,t},jn.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Qn){var t=e;return this.__actions__.length&&(t=new Qn(this)),(t=t.reverse()).__actions__.push({func:vo,args:[to],thisArg:i}),new Kn(t,this.__chain__)}return this.thru(to)},jn.prototype.toJSON=jn.prototype.valueOf=jn.prototype.value=function(){return vi(this.__wrapped__,this.__actions__)},jn.prototype.first=jn.prototype.head,Xe&&(jn.prototype[Xe]=function(){return this}),jn}();dt._=yn,(r=function(){return yn}.call(t,n,t,e))===i||(e.exports=r)}.call(this)},3545:function(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function i(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,a){for(var o,s,u=i(e),c=1;c<arguments.length;c++){for(var l in o=Object(arguments[c]))n.call(o,l)&&(u[l]=o[l]);if(t){s=t(o);for(var f=0;f<s.length;f++)r.call(o,s[f])&&(u[s[f]]=o[s[f]])}}return u}},2102:function(e,t,n){"use strict";var r=n(1369);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,o){if(o!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},4974:function(e,t,n){e.exports=n(2102)()},1369:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},2610:function(e,t,n){"use strict";var r=n(969),i=n(3545),a=n(8019);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(o(227));var s=new Set,u={};function c(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(u[e]=t,e=0;e<t.length;e++)s.add(t[e])}var f=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d=Object.prototype.hasOwnProperty,p={},v={};function m(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(v,e)||!d.call(p,e)&&(h.test(e)?v[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,b);y[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,b);y[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,b);y[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=60103,I=60106,_=60107,E=60108,A=60114,T=60109,S=60110,O=60112,C=60113,N=60120,P=60115,D=60116,R=60121,L=60128,M=60129,F=60130,U=60131;if("function"===typeof Symbol&&Symbol.for){var V=Symbol.for;x=V("react.element"),I=V("react.portal"),_=V("react.fragment"),E=V("react.strict_mode"),A=V("react.profiler"),T=V("react.provider"),S=V("react.context"),O=V("react.forward_ref"),C=V("react.suspense"),N=V("react.suspense_list"),P=V("react.memo"),D=V("react.lazy"),R=V("react.block"),V("react.scope"),L=V("react.opaque.id"),M=V("react.debug_trace_mode"),F=V("react.offscreen"),U=V("react.legacy_hidden")}var q,j="function"===typeof Symbol&&Symbol.iterator;function B(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=j&&e[j]||e["@@iterator"])?e:null}function z(e){if(void 0===q)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);q=t&&t[1]||""}return"\n"+q+e}var K=!1;function Q(e,t){if(!e||K)return"";K=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s])return"\n"+i[o].replace(" at new "," at ")}while(1<=o&&0<=s);break}}}finally{K=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?z(e):""}function W(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return e=Q(e.type,!1);case 11:return e=Q(e.type.render,!1);case 22:return e=Q(e.type._render,!1);case 1:return e=Q(e.type,!0);default:return""}}function G(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case _:return"Fragment";case I:return"Portal";case A:return"Profiler";case E:return"StrictMode";case C:return"Suspense";case N:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case S:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case O:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case P:return G(e.type);case R:return G(e._render);case D:t=e._payload,e=e._init;try{return G(e(t))}catch(n){}}return null}function H(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Y(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function J(e){e._valueTracker||(e._valueTracker=function(e){var t=Y(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function X(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Y(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Z(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function $(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ie(e,t.type,n):t.hasOwnProperty("defaultValue")&&ie(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ie(e,t,n){"number"===t&&Z(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function ae(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function oe(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function se(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ue(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function ce(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function le(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var fe="http://www.w3.org/1999/xhtml",he="http://www.w3.org/2000/svg";function de(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?de(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ve,me,ye=(me=function(e,t){if(e.namespaceURI!==he||"innerHTML"in e)e.innerHTML=t;else{for((ve=ve||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ve.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return me(e,t)}))}:me);function ge(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var be={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ke=["Webkit","ms","Moz","O"];function we(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||be.hasOwnProperty(e)&&be[e]?(""+t).trim():t+"px"}function xe(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=we(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(be).forEach((function(e){ke.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),be[t]=be[e]}))}));var Ie=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _e(e,t){if(t){if(Ie[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function Ee(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Ae(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Te=null,Se=null,Oe=null;function Ce(e){if(e=ri(e)){if("function"!==typeof Te)throw Error(o(280));var t=e.stateNode;t&&(t=ai(t),Te(e.stateNode,e.type,t))}}function Ne(e){Se?Oe?Oe.push(e):Oe=[e]:Se=e}function Pe(){if(Se){var e=Se,t=Oe;if(Oe=Se=null,Ce(e),t)for(e=0;e<t.length;e++)Ce(t[e])}}function De(e,t){return e(t)}function Re(e,t,n,r,i){return e(t,n,r,i)}function Le(){}var Me=De,Fe=!1,Ue=!1;function Ve(){null===Se&&null===Oe||(Le(),Pe())}function qe(e,t){var n=e.stateNode;if(null===n)return null;var r=ai(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var je=!1;if(f)try{var Be={};Object.defineProperty(Be,"passive",{get:function(){je=!0}}),window.addEventListener("test",Be,Be),window.removeEventListener("test",Be,Be)}catch(me){je=!1}function ze(e,t,n,r,i,a,o,s,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Ke=!1,Qe=null,We=!1,Ge=null,He={onError:function(e){Ke=!0,Qe=e}};function Ye(e,t,n,r,i,a,o,s,u){Ke=!1,Qe=null,ze.apply(He,arguments)}function Je(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Xe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ze(e){if(Je(e)!==e)throw Error(o(188))}function $e(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=Je(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return Ze(i),e;if(a===r)return Ze(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=a;break}if(u===r){s=!0,r=i,n=a;break}u=u.sibling}if(!s){for(u=a.child;u;){if(u===n){s=!0,n=a,r=i;break}if(u===r){s=!0,r=a,n=i;break}u=u.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function et(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var tt,nt,rt,it,at=!1,ot=[],st=null,ut=null,ct=null,lt=new Map,ft=new Map,ht=[],dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pt(e,t,n,r,i){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function vt(e,t){switch(e){case"focusin":case"focusout":st=null;break;case"dragenter":case"dragleave":ut=null;break;case"mouseover":case"mouseout":ct=null;break;case"pointerover":case"pointerout":lt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ft.delete(t.pointerId)}}function mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e=pt(t,n,r,i,a),null!==t&&(null!==(t=ri(t))&&nt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function yt(e){var t=ni(e.target);if(null!==t){var n=Je(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Xe(n)))return e.blockedOn=t,void it(e.lanePriority,(function(){a.unstable_runWithPriority(e.priority,(function(){rt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function gt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ri(n))&&nt(t),e.blockedOn=n,!1;t.shift()}return!0}function bt(e,t,n){gt(e)&&n.delete(t)}function kt(){for(at=!1;0<ot.length;){var e=ot[0];if(null!==e.blockedOn){null!==(e=ri(e.blockedOn))&&tt(e);break}for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&ot.shift()}null!==st&&gt(st)&&(st=null),null!==ut&&gt(ut)&&(ut=null),null!==ct&&gt(ct)&&(ct=null),lt.forEach(bt),ft.forEach(bt)}function wt(e,t){e.blockedOn===t&&(e.blockedOn=null,at||(at=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,kt)))}function xt(e){function t(t){return wt(t,e)}if(0<ot.length){wt(ot[0],e);for(var n=1;n<ot.length;n++){var r=ot[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==st&&wt(st,e),null!==ut&&wt(ut,e),null!==ct&&wt(ct,e),lt.forEach(t),ft.forEach(t),n=0;n<ht.length;n++)(r=ht[n]).blockedOn===e&&(r.blockedOn=null);for(;0<ht.length&&null===(n=ht[0]).blockedOn;)yt(n),null===n.blockedOn&&ht.shift()}function It(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _t={animationend:It("Animation","AnimationEnd"),animationiteration:It("Animation","AnimationIteration"),animationstart:It("Animation","AnimationStart"),transitionend:It("Transition","TransitionEnd")},Et={},At={};function Tt(e){if(Et[e])return Et[e];if(!_t[e])return e;var t,n=_t[e];for(t in n)if(n.hasOwnProperty(t)&&t in At)return Et[e]=n[t];return e}f&&(At=document.createElement("div").style,"AnimationEvent"in window||(delete _t.animationend.animation,delete _t.animationiteration.animation,delete _t.animationstart.animation),"TransitionEvent"in window||delete _t.transitionend.transition);var St=Tt("animationend"),Ot=Tt("animationiteration"),Ct=Tt("animationstart"),Nt=Tt("transitionend"),Pt=new Map,Dt=new Map,Rt=["abort","abort",St,"animationEnd",Ot,"animationIteration",Ct,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Nt,"transitionEnd","waiting","waiting"];function Lt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Dt.set(r,t),Pt.set(r,i),c(i,[r])}}(0,a.unstable_now)();var Mt=8;function Ft(e){if(0!==(1&e))return Mt=15,1;if(0!==(2&e))return Mt=14,2;if(0!==(4&e))return Mt=13,4;var t=24&e;return 0!==t?(Mt=12,t):0!==(32&e)?(Mt=11,32):0!==(t=192&e)?(Mt=10,t):0!==(256&e)?(Mt=9,256):0!==(t=3584&e)?(Mt=8,t):0!==(4096&e)?(Mt=7,4096):0!==(t=4186112&e)?(Mt=6,t):0!==(t=62914560&e)?(Mt=5,t):67108864&e?(Mt=4,67108864):0!==(134217728&e)?(Mt=3,134217728):0!==(t=805306368&e)?(Mt=2,t):0!==(1073741824&e)?(Mt=1,1073741824):(Mt=8,e)}function Ut(e,t){var n=e.pendingLanes;if(0===n)return Mt=0;var r=0,i=0,a=e.expiredLanes,o=e.suspendedLanes,s=e.pingedLanes;if(0!==a)r=a,i=Mt=15;else if(0!==(a=134217727&n)){var u=a&~o;0!==u?(r=Ft(u),i=Mt):0!==(s&=a)&&(r=Ft(s),i=Mt)}else 0!==(a=n&~o)?(r=Ft(a),i=Mt):0!==s&&(r=Ft(s),i=Mt);if(0===r)return 0;if(r=n&((0>(r=31-Kt(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0===(t&o)){if(Ft(t),i<=Mt)return t;Mt=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-Kt(t)),r|=e[n],t&=~i;return r}function Vt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function qt(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=jt(24&~t))?qt(10,t):e;case 10:return 0===(e=jt(192&~t))?qt(8,t):e;case 8:return 0===(e=jt(3584&~t))&&(0===(e=jt(4186112&~t))&&(e=512)),e;case 2:return 0===(t=jt(805306368&~t))&&(t=268435456),t}throw Error(o(358,e))}function jt(e){return e&-e}function Bt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function zt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-Kt(t)]=n}var Kt=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Qt(e)/Wt|0)|0},Qt=Math.log,Wt=Math.LN2;var Gt=a.unstable_UserBlockingPriority,Ht=a.unstable_runWithPriority,Yt=!0;function Jt(e,t,n,r){Fe||Le();var i=Zt,a=Fe;Fe=!0;try{Re(i,e,t,n,r)}finally{(Fe=a)||Ve()}}function Xt(e,t,n,r){Ht(Gt,Zt.bind(null,e,t,n,r))}function Zt(e,t,n,r){var i;if(Yt)if((i=0===(4&t))&&0<ot.length&&-1<dt.indexOf(e))e=pt(null,e,t,n,r),ot.push(e);else{var a=$t(e,t,n,r);if(null===a)i&&vt(e,r);else{if(i){if(-1<dt.indexOf(e))return e=pt(a,e,t,n,r),void ot.push(e);if(function(e,t,n,r,i){switch(t){case"focusin":return st=mt(st,e,t,n,r,i),!0;case"dragenter":return ut=mt(ut,e,t,n,r,i),!0;case"mouseover":return ct=mt(ct,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return lt.set(a,mt(lt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,ft.set(a,mt(ft.get(a)||null,e,t,n,r,i)),!0}return!1}(a,e,t,n,r))return;vt(e,r)}Lr(e,t,r,null,n)}}}function $t(e,t,n,r){var i=Ae(r);if(null!==(i=ni(i))){var a=Je(i);if(null===a)i=null;else{var o=a.tag;if(13===o){if(null!==(i=Xe(a)))return i;i=null}else if(3===o){if(a.stateNode.hydrate)return 3===a.tag?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return Lr(e,t,r,i,n),null}var en=null,tn=null,nn=null;function rn(){if(nn)return nn;var e,t,n=tn,r=n.length,i="value"in en?en.value:en.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return nn=i.slice(e,1<t?1-t:void 0)}function an(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function on(){return!0}function sn(){return!1}function un(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?on:sn,this.isPropagationStopped=sn,this}return i(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=on)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=on)},persist:function(){},isPersistent:on}),t}var cn,ln,fn,hn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=un(hn),pn=i({},hn,{view:0,detail:0}),vn=un(pn),mn=i({},pn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==fn&&(fn&&"mousemove"===e.type?(cn=e.screenX-fn.screenX,ln=e.screenY-fn.screenY):ln=cn=0,fn=e),cn)},movementY:function(e){return"movementY"in e?e.movementY:ln}}),yn=un(mn),gn=un(i({},mn,{dataTransfer:0})),bn=un(i({},pn,{relatedTarget:0})),kn=un(i({},hn,{animationName:0,elapsedTime:0,pseudoElement:0})),wn=i({},hn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xn=un(wn),In=un(i({},hn,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},En={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},An={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=An[e])&&!!t[e]}function Sn(){return Tn}var On=i({},pn,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=an(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?En[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?an(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?an(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=un(On),Nn=un(i({},mn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Pn=un(i({},pn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),Dn=un(i({},hn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=i({},mn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ln=un(Rn),Mn=[9,13,27,32],Fn=f&&"CompositionEvent"in window,Un=null;f&&"documentMode"in document&&(Un=document.documentMode);var Vn=f&&"TextEvent"in window&&!Un,qn=f&&(!Fn||Un&&8<Un&&11>=Un),jn=String.fromCharCode(32),Bn=!1;function zn(e,t){switch(e){case"keyup":return-1!==Mn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Qn=!1;var Wn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Wn[e.type]:"textarea"===t}function Hn(e,t,n,r){Ne(r),0<(t=Fr(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Yn=null,Jn=null;function Xn(e){Or(e,0)}function Zn(e){if(X(ii(e)))return e}function $n(e,t){if("change"===e)return t}var er=!1;if(f){var tr;if(f){var nr="oninput"in document;if(!nr){var rr=document.createElement("div");rr.setAttribute("oninput","return;"),nr="function"===typeof rr.oninput}tr=nr}else tr=!1;er=tr&&(!document.documentMode||9<document.documentMode)}function ir(){Yn&&(Yn.detachEvent("onpropertychange",ar),Jn=Yn=null)}function ar(e){if("value"===e.propertyName&&Zn(Jn)){var t=[];if(Hn(t,Jn,e,Ae(e)),e=Xn,Fe)e(t);else{Fe=!0;try{De(e,t)}finally{Fe=!1,Ve()}}}}function or(e,t,n){"focusin"===e?(ir(),Jn=n,(Yn=t).attachEvent("onpropertychange",ar)):"focusout"===e&&ir()}function sr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Zn(Jn)}function ur(e,t){if("click"===e)return Zn(t)}function cr(e,t){if("input"===e||"change"===e)return Zn(t)}var lr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},fr=Object.prototype.hasOwnProperty;function hr(e,t){if(lr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!fr.call(t,n[r])||!lr(e[n[r]],t[n[r]]))return!1;return!0}function dr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function pr(e,t){var n,r=dr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=dr(r)}}function vr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?vr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function mr(){for(var e=window,t=Z();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Z((e=t.contentWindow).document)}return t}function yr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var gr=f&&"documentMode"in document&&11>=document.documentMode,br=null,kr=null,wr=null,xr=!1;function Ir(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;xr||null==br||br!==Z(r)||("selectionStart"in(r=br)&&yr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},wr&&hr(wr,r)||(wr=r,0<(r=Fr(kr,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=br)))}Lt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Lt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Lt(Rt,2);for(var _r="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Er=0;Er<_r.length;Er++)Dt.set(_r[Er],0);l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ar="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Tr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ar));function Sr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,s,u,c){if(Ye.apply(this,arguments),Ke){if(!Ke)throw Error(o(198));var l=Qe;Ke=!1,Qe=null,We||(We=!0,Ge=l)}}(r,t,void 0,e),e.currentTarget=null}function Or(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],u=s.instance,c=s.currentTarget;if(s=s.listener,u!==a&&i.isPropagationStopped())break e;Sr(i,s,c),a=u}else for(o=0;o<r.length;o++){if(u=(s=r[o]).instance,c=s.currentTarget,s=s.listener,u!==a&&i.isPropagationStopped())break e;Sr(i,s,c),a=u}}}if(We)throw e=Ge,We=!1,Ge=null,e}function Cr(e,t){var n=oi(t),r=e+"__bubble";n.has(r)||(Rr(t,e,2,!1),n.add(r))}var Nr="_reactListening"+Math.random().toString(36).slice(2);function Pr(e){e[Nr]||(e[Nr]=!0,s.forEach((function(t){Tr.has(t)||Dr(t,!1,e,null),Dr(t,!0,e,null)})))}function Dr(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,a=n;if("selectionchange"===e&&9!==n.nodeType&&(a=n.ownerDocument),null!==r&&!t&&Tr.has(e)){if("scroll"!==e)return;i|=2,a=r}var o=oi(a),s=e+"__"+(t?"capture":"bubble");o.has(s)||(t&&(i|=4),Rr(a,e,i,t),o.add(s))}function Rr(e,t,n,r){var i=Dt.get(t);switch(void 0===i?2:i){case 0:i=Jt;break;case 1:i=Xt;break;default:i=Zt}n=i.bind(null,t,n,e),i=void 0,!je||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Lr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var u=o.tag;if((3===u||4===u)&&((u=o.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;o=o.return}for(;null!==s;){if(null===(o=ni(s)))return;if(5===(u=o.tag)||6===u){r=a=o;continue e}s=s.parentNode}}r=r.return}!function(e,t,n){if(Ue)return e(t,n);Ue=!0;try{Me(e,t,n)}finally{Ue=!1,Ve()}}((function(){var r=a,i=Ae(n),o=[];e:{var s=Pt.get(e);if(void 0!==s){var u=dn,c=e;switch(e){case"keypress":if(0===an(n))break e;case"keydown":case"keyup":u=Cn;break;case"focusin":c="focus",u=bn;break;case"focusout":c="blur",u=bn;break;case"beforeblur":case"afterblur":u=bn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=yn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Pn;break;case St:case Ot:case Ct:u=kn;break;case Nt:u=Dn;break;case"scroll":u=vn;break;case"wheel":u=Ln;break;case"copy":case"cut":case"paste":u=xn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Nn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==s?s+"Capture":null:s;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=qe(p,h))&&l.push(Mr(p,v,d)))),f)break;p=p.return}0<l.length&&(s=new u(s,c,null,n,i),o.push({event:s,listeners:l}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||0!==(16&t)||!(c=n.relatedTarget||n.fromElement)||!ni(c)&&!c[ei])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(c=(c=n.relatedTarget||n.toElement)?ni(c):null)&&(c!==(f=Je(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(u=null,c=r),u!==c)){if(l=yn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Nn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==u?s:ii(u),d=null==c?s:ii(c),(s=new l(v,p+"leave",u,n,i)).target=f,s.relatedTarget=d,v=null,ni(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,u&&c)e:{for(h=c,p=0,d=l=u;d;d=Ur(d))p++;for(d=0,v=h;v;v=Ur(v))d++;for(;0<p-d;)l=Ur(l),p--;for(;0<d-p;)h=Ur(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Ur(l),h=Ur(h)}l=null}else l=null;null!==u&&Vr(o,s,u,l,!1),null!==c&&null!==f&&Vr(o,f,c,l,!0)}if("select"===(u=(s=r?ii(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var m=$n;else if(Gn(s))if(er)m=cr;else{m=sr;var y=or}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=ur);switch(m&&(m=m(e,r))?Hn(o,m,n,i):(y&&y(e,s,r),"focusout"===e&&(y=s._wrapperState)&&y.controlled&&"number"===s.type&&ie(s,"number",s.value)),y=r?ii(r):window,e){case"focusin":(Gn(y)||"true"===y.contentEditable)&&(br=y,kr=r,wr=null);break;case"focusout":wr=kr=br=null;break;case"mousedown":xr=!0;break;case"contextmenu":case"mouseup":case"dragend":xr=!1,Ir(o,n,i);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":Ir(o,n,i)}var g;if(Fn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Qn?zn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(qn&&"ko"!==n.locale&&(Qn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Qn&&(g=rn()):(tn="value"in(en=i)?en.value:en.textContent,Qn=!0)),0<(y=Fr(r,b)).length&&(b=new In(b,e,null,n,i),o.push({event:b,listeners:y}),g?b.data=g:null!==(g=Kn(n))&&(b.data=g))),(g=Vn?function(e,t){switch(e){case"compositionend":return Kn(t);case"keypress":return 32!==t.which?null:(Bn=!0,jn);case"textInput":return(e=t.data)===jn&&Bn?null:e;default:return null}}(e,n):function(e,t){if(Qn)return"compositionend"===e||!Fn&&zn(e,t)?(e=rn(),nn=tn=en=null,Qn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return qn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Fr(r,"onBeforeInput")).length&&(i=new In("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Or(o,t)}))}function Mr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Fr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=qe(e,n))&&r.unshift(Mr(e,a,i)),null!=(a=qe(e,t))&&r.push(Mr(e,a,i))),e=e.return}return r}function Ur(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Vr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var s=n,u=s.alternate,c=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==c&&(s=c,i?null!=(u=qe(n,a))&&o.unshift(Mr(n,u,s)):i||null!=(u=qe(n,a))&&o.push(Mr(n,u,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}function qr(){}var jr=null,Br=null;function zr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Kr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Qr="function"===typeof setTimeout?setTimeout:void 0,Wr="function"===typeof clearTimeout?clearTimeout:void 0;function Gr(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Hr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Yr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Jr=0;var Xr=Math.random().toString(36).slice(2),Zr="__reactFiber$"+Xr,$r="__reactProps$"+Xr,ei="__reactContainer$"+Xr,ti="__reactEvents$"+Xr;function ni(e){var t=e[Zr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ei]||n[Zr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Yr(e);null!==e;){if(n=e[Zr])return n;e=Yr(e)}return t}n=(e=n).parentNode}return null}function ri(e){return!(e=e[Zr]||e[ei])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ii(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function ai(e){return e[$r]||null}function oi(e){var t=e[ti];return void 0===t&&(t=e[ti]=new Set),t}var si=[],ui=-1;function ci(e){return{current:e}}function li(e){0>ui||(e.current=si[ui],si[ui]=null,ui--)}function fi(e,t){ui++,si[ui]=e.current,e.current=t}var hi={},di=ci(hi),pi=ci(!1),vi=hi;function mi(e,t){var n=e.type.contextTypes;if(!n)return hi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function yi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function gi(){li(pi),li(di)}function bi(e,t,n){if(di.current!==hi)throw Error(o(168));fi(di,t),fi(pi,n)}function ki(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in e))throw Error(o(108,G(t)||"Unknown",a));return i({},n,r)}function wi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||hi,vi=di.current,fi(di,e),fi(pi,pi.current),!0}function xi(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=ki(e,t,vi),r.__reactInternalMemoizedMergedChildContext=e,li(pi),li(di),fi(di,e)):li(pi),fi(pi,n)}var Ii=null,_i=null,Ei=a.unstable_runWithPriority,Ai=a.unstable_scheduleCallback,Ti=a.unstable_cancelCallback,Si=a.unstable_shouldYield,Oi=a.unstable_requestPaint,Ci=a.unstable_now,Ni=a.unstable_getCurrentPriorityLevel,Pi=a.unstable_ImmediatePriority,Di=a.unstable_UserBlockingPriority,Ri=a.unstable_NormalPriority,Li=a.unstable_LowPriority,Mi=a.unstable_IdlePriority,Fi={},Ui=void 0!==Oi?Oi:function(){},Vi=null,qi=null,ji=!1,Bi=Ci(),zi=1e4>Bi?Ci:function(){return Ci()-Bi};function Ki(){switch(Ni()){case Pi:return 99;case Di:return 98;case Ri:return 97;case Li:return 96;case Mi:return 95;default:throw Error(o(332))}}function Qi(e){switch(e){case 99:return Pi;case 98:return Di;case 97:return Ri;case 96:return Li;case 95:return Mi;default:throw Error(o(332))}}function Wi(e,t){return e=Qi(e),Ei(e,t)}function Gi(e,t,n){return e=Qi(e),Ai(e,t,n)}function Hi(){if(null!==qi){var e=qi;qi=null,Ti(e)}Yi()}function Yi(){if(!ji&&null!==Vi){ji=!0;var e=0;try{var t=Vi;Wi(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Vi=null}catch(n){throw null!==Vi&&(Vi=Vi.slice(e+1)),Ai(Pi,Hi),n}finally{ji=!1}}}var Ji=w.ReactCurrentBatchConfig;function Xi(e,t){if(e&&e.defaultProps){for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Zi=ci(null),$i=null,ea=null,ta=null;function na(){ta=ea=$i=null}function ra(e){var t=Zi.current;li(Zi),e.type._context._currentValue=t}function ia(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function aa(e,t){$i=e,ta=ea=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Fo=!0),e.firstContext=null)}function oa(e,t){if(ta!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(ta=e,t=1073741823),t={context:e,observedBits:t,next:null},null===ea){if(null===$i)throw Error(o(308));ea=t,$i.dependencies={lanes:0,firstContext:t,responders:null}}else ea=ea.next=t;return e._currentValue}var sa=!1;function ua(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function ca(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function la(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function fa(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function ha(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function da(e,t,n,r){var a=e.updateQueue;sa=!1;var o=a.firstBaseUpdate,s=a.lastBaseUpdate,u=a.shared.pending;if(null!==u){a.shared.pending=null;var c=u,l=c.next;c.next=null,null===s?o=l:s.next=l,s=c;var f=e.alternate;if(null!==f){var h=(f=f.updateQueue).lastBaseUpdate;h!==s&&(null===h?f.firstBaseUpdate=l:h.next=l,f.lastBaseUpdate=c)}}if(null!==o){for(h=a.baseState,s=0,f=l=c=null;;){u=o.lane;var d=o.eventTime;if((r&u)===u){null!==f&&(f=f.next={eventTime:d,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,v=o;switch(u=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){h=p.call(d,h,u);break e}h=p;break e;case 3:p.flags=-4097&p.flags|64;case 0:if(null===(u="function"===typeof(p=v.payload)?p.call(d,h,u):p)||void 0===u)break e;h=i({},h,u);break e;case 2:sa=!0}}null!==o.callback&&(e.flags|=32,null===(u=a.effects)?a.effects=[o]:u.push(o))}else d={eventTime:d,lane:u,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===f?(l=f=d,c=h):f=f.next=d,s|=u;if(null===(o=o.next)){if(null===(u=a.shared.pending))break;o=u.next,u.next=null,a.lastBaseUpdate=u,a.shared.pending=null}}null===f&&(c=h),a.baseState=c,a.firstBaseUpdate=l,a.lastBaseUpdate=f,js|=s,e.lanes=s,e.memoizedState=h}}function pa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var va=(new r.Component).refs;function ma(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ya={isMounted:function(e){return!!(e=e._reactInternals)&&Je(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=hu(),i=du(e),a=la(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),fa(e,a),pu(e,i,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=hu(),i=du(e),a=la(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),fa(e,a),pu(e,i,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=hu(),r=du(e),i=la(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),fa(e,i),pu(e,r,n)}};function ga(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!hr(n,r)||!hr(i,a))}function ba(e,t,n){var r=!1,i=hi,a=t.contextType;return"object"===typeof a&&null!==a?a=oa(a):(i=yi(t)?vi:di.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?mi(e,i):hi),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ya,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function ka(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ya.enqueueReplaceState(t,t.state,null)}function wa(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=va,ua(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=oa(a):(a=yi(t)?vi:di.current,i.context=mi(e,a)),da(e,n,i,r),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(ma(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ya.enqueueReplaceState(i,i.state,null),da(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4)}var xa=Array.isArray;function Ia(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=r.refs;t===va&&(t=r.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function _a(e,t){if("textarea"!==e.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Ea(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Wu(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function s(t){return e&&null===t.alternate&&(t.flags=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Ju(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=Ia(e,t,n),r.return=e,r):((r=Gu(n.type,n.key,n.props,null,e.mode,r)).ref=Ia(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Xu(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Hu(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=Ju(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Gu(t.type,t.key,t.props,null,e.mode,n)).ref=Ia(e,null,t),n.return=e,n;case I:return(t=Xu(t,e.mode,n)).return=e,t}if(xa(t)||B(t))return(t=Hu(t,e.mode,n,null)).return=e,t;_a(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===i?n.type===_?f(e,t,n.props.children,r,i):c(e,t,n,r):null;case I:return n.key===i?l(e,t,n,r):null}if(xa(n)||B(n))return null!==i?null:f(e,t,n,r,null);_a(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return e=e.get(null===r.key?n:r.key)||null,r.type===_?f(t,e,r.props.children,i,r.key):c(t,e,r,i);case I:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(xa(r)||B(r))return f(t,e=e.get(n)||null,r,i,null);_a(t,r)}return null}function v(i,o,s,u){for(var c=null,l=null,f=o,v=o=0,m=null;null!==f&&v<s.length;v++){f.index>v?(m=f,f=null):m=f.sibling;var y=d(i,f,s[v],u);if(null===y){null===f&&(f=m);break}e&&f&&null===y.alternate&&t(i,f),o=a(y,o,v),null===l?c=y:l.sibling=y,l=y,f=m}if(v===s.length)return n(i,f),c;if(null===f){for(;v<s.length;v++)null!==(f=h(i,s[v],u))&&(o=a(f,o,v),null===l?c=f:l.sibling=f,l=f);return c}for(f=r(i,f);v<s.length;v++)null!==(m=p(f,i,v,s[v],u))&&(e&&null!==m.alternate&&f.delete(null===m.key?v:m.key),o=a(m,o,v),null===l?c=m:l.sibling=m,l=m);return e&&f.forEach((function(e){return t(i,e)})),c}function m(i,s,u,c){var l=B(u);if("function"!==typeof l)throw Error(o(150));if(null==(u=l.call(u)))throw Error(o(151));for(var f=l=null,v=s,m=s=0,y=null,g=u.next();null!==v&&!g.done;m++,g=u.next()){v.index>m?(y=v,v=null):y=v.sibling;var b=d(i,v,g.value,c);if(null===b){null===v&&(v=y);break}e&&v&&null===b.alternate&&t(i,v),s=a(b,s,m),null===f?l=b:f.sibling=b,f=b,v=y}if(g.done)return n(i,v),l;if(null===v){for(;!g.done;m++,g=u.next())null!==(g=h(i,g.value,c))&&(s=a(g,s,m),null===f?l=g:f.sibling=g,f=g);return l}for(v=r(i,v);!g.done;m++,g=u.next())null!==(g=p(v,i,m,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?m:g.key),s=a(g,s,m),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),l}return function(e,r,a,u){var c="object"===typeof a&&null!==a&&a.type===_&&null===a.key;c&&(a=a.props.children);var l="object"===typeof a&&null!==a;if(l)switch(a.$$typeof){case x:e:{for(l=a.key,c=r;null!==c;){if(c.key===l){if(7===c.tag){if(a.type===_){n(e,c.sibling),(r=i(c,a.props.children)).return=e,e=r;break e}}else if(c.elementType===a.type){n(e,c.sibling),(r=i(c,a.props)).ref=Ia(e,c,a),r.return=e,e=r;break e}n(e,c);break}t(e,c),c=c.sibling}a.type===_?((r=Hu(a.props.children,e.mode,u,a.key)).return=e,e=r):((u=Gu(a.type,a.key,a.props,null,e.mode,u)).ref=Ia(e,r,a),u.return=e,e=u)}return s(e);case I:e:{for(c=a.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===a.containerInfo&&r.stateNode.implementation===a.implementation){n(e,r.sibling),(r=i(r,a.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Xu(a,e.mode,u)).return=e,e=r}return s(e)}if("string"===typeof a||"number"===typeof a)return a=""+a,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,a)).return=e,e=r):(n(e,r),(r=Ju(a,e.mode,u)).return=e,e=r),s(e);if(xa(a))return v(e,r,a,u);if(B(a))return m(e,r,a,u);if(l&&_a(e,a),"undefined"===typeof a&&!c)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(o(152,G(e.type)||"Component"))}return n(e,r)}}var Aa=Ea(!0),Ta=Ea(!1),Sa={},Oa=ci(Sa),Ca=ci(Sa),Na=ci(Sa);function Pa(e){if(e===Sa)throw Error(o(174));return e}function Da(e,t){switch(fi(Na,t),fi(Ca,e),fi(Oa,Sa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:pe(null,"");break;default:t=pe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}li(Oa),fi(Oa,t)}function Ra(){li(Oa),li(Ca),li(Na)}function La(e){Pa(Na.current);var t=Pa(Oa.current),n=pe(t,e.type);t!==n&&(fi(Ca,e),fi(Oa,n))}function Ma(e){Ca.current===e&&(li(Oa),li(Ca))}var Fa=ci(0);function Ua(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Va=null,qa=null,ja=!1;function Ba(e,t){var n=Ku(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function za(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function Ka(e){if(ja){var t=qa;if(t){var n=t;if(!za(e,t)){if(!(t=Hr(n.nextSibling))||!za(e,t))return e.flags=-1025&e.flags|2,ja=!1,void(Va=e);Ba(Va,n)}Va=e,qa=Hr(t.firstChild)}else e.flags=-1025&e.flags|2,ja=!1,Va=e}}function Qa(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Va=e}function Wa(e){if(e!==Va)return!1;if(!ja)return Qa(e),ja=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Kr(t,e.memoizedProps))for(t=qa;t;)Ba(e,t),t=Hr(t.nextSibling);if(Qa(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){qa=Hr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}qa=null}}else qa=Va?Hr(e.stateNode.nextSibling):null;return!0}function Ga(){qa=Va=null,ja=!1}var Ha=[];function Ya(){for(var e=0;e<Ha.length;e++)Ha[e]._workInProgressVersionPrimary=null;Ha.length=0}var Ja=w.ReactCurrentDispatcher,Xa=w.ReactCurrentBatchConfig,Za=0,$a=null,eo=null,to=null,no=!1,ro=!1;function io(){throw Error(o(321))}function ao(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!lr(e[n],t[n]))return!1;return!0}function oo(e,t,n,r,i,a){if(Za=a,$a=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ja.current=null===e||null===e.memoizedState?Do:Ro,e=n(r,i),ro){a=0;do{if(ro=!1,!(25>a))throw Error(o(301));a+=1,to=eo=null,t.updateQueue=null,Ja.current=Lo,e=n(r,i)}while(ro)}if(Ja.current=Po,t=null!==eo&&null!==eo.next,Za=0,to=eo=$a=null,no=!1,t)throw Error(o(300));return e}function so(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===to?$a.memoizedState=to=e:to=to.next=e,to}function uo(){if(null===eo){var e=$a.alternate;e=null!==e?e.memoizedState:null}else e=eo.next;var t=null===to?$a.memoizedState:to.next;if(null!==t)to=t,eo=e;else{if(null===e)throw Error(o(310));e={memoizedState:(eo=e).memoizedState,baseState:eo.baseState,baseQueue:eo.baseQueue,queue:eo.queue,next:null},null===to?$a.memoizedState=to=e:to=to.next=e}return to}function co(e,t){return"function"===typeof t?t(e):t}function lo(e){var t=uo(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=eo,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var u=s=a=null,c=i;do{var l=c.lane;if((Za&l)===l)null!==u&&(u=u.next={lane:0,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),r=c.eagerReducer===e?c.eagerState:e(r,c.action);else{var f={lane:l,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===u?(s=u=f,a=r):u=u.next=f,$a.lanes|=l,js|=l}c=c.next}while(null!==c&&c!==i);null===u?a=r:u.next=s,lr(r,t.memoizedState)||(Fo=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=u,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function fo(e){var t=uo(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{a=e(a,s.action),s=s.next}while(s!==i);lr(a,t.memoizedState)||(Fo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function ho(e,t,n){var r=t._getVersion;r=r(t._source);var i=t._workInProgressVersionPrimary;if(null!==i?e=i===r:(e=e.mutableReadLanes,(e=(Za&e)===e)&&(t._workInProgressVersionPrimary=r,Ha.push(t))),e)return n(t._source);throw Ha.push(t),Error(o(350))}function po(e,t,n,r){var i=Ds;if(null===i)throw Error(o(349));var a=t._getVersion,s=a(t._source),u=Ja.current,c=u.useState((function(){return ho(i,t,n)})),l=c[1],f=c[0];c=to;var h=e.memoizedState,d=h.refs,p=d.getSnapshot,v=h.source;h=h.subscribe;var m=$a;return e.memoizedState={refs:d,source:t,subscribe:r},u.useEffect((function(){d.getSnapshot=n,d.setSnapshot=l;var e=a(t._source);if(!lr(s,e)){e=n(t._source),lr(f,e)||(l(e),e=du(m),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var r=i.entanglements,o=e;0<o;){var u=31-Kt(o),c=1<<u;r[u]|=e,o&=~c}}}),[n,t,r]),u.useEffect((function(){return r(t._source,(function(){var e=d.getSnapshot,n=d.setSnapshot;try{n(e(t._source));var r=du(m);i.mutableReadLanes|=r&i.pendingLanes}catch(a){n((function(){throw a}))}}))}),[t,r]),lr(p,n)&&lr(v,t)&&lr(h,r)||((e={pending:null,dispatch:null,lastRenderedReducer:co,lastRenderedState:f}).dispatch=l=No.bind(null,$a,e),c.queue=e,c.baseQueue=null,f=ho(i,t,n),c.memoizedState=c.baseState=f),f}function vo(e,t,n){return po(uo(),e,t,n)}function mo(e){var t=so();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:co,lastRenderedState:e}).dispatch=No.bind(null,$a,e),[t.memoizedState,e]}function yo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=$a.updateQueue)?(t={lastEffect:null},$a.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function go(e){return e={current:e},so().memoizedState=e}function bo(){return uo().memoizedState}function ko(e,t,n,r){var i=so();$a.flags|=e,i.memoizedState=yo(1|t,n,void 0,void 0===r?null:r)}function wo(e,t,n,r){var i=uo();r=void 0===r?null:r;var a=void 0;if(null!==eo){var o=eo.memoizedState;if(a=o.destroy,null!==r&&ao(r,o.deps))return void yo(t,n,a,r)}$a.flags|=e,i.memoizedState=yo(1|t,n,a,r)}function xo(e,t){return ko(516,4,e,t)}function Io(e,t){return wo(516,4,e,t)}function _o(e,t){return wo(4,2,e,t)}function Eo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ao(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,wo(4,2,Eo.bind(null,t,e),n)}function To(){}function So(e,t){var n=uo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ao(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Oo(e,t){var n=uo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ao(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Co(e,t){var n=Ki();Wi(98>n?98:n,(function(){e(!0)})),Wi(97<n?97:n,(function(){var n=Xa.transition;Xa.transition=1;try{e(!1),t()}finally{Xa.transition=n}}))}function No(e,t,n){var r=hu(),i=du(e),a={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},o=t.pending;if(null===o?a.next=a:(a.next=o.next,o.next=a),t.pending=a,o=e.alternate,e===$a||null!==o&&o===$a)ro=no=!0;else{if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,u=o(s,n);if(a.eagerReducer=o,a.eagerState=u,lr(u,s))return}catch(c){}pu(e,i,r)}}var Po={readContext:oa,useCallback:io,useContext:io,useEffect:io,useImperativeHandle:io,useLayoutEffect:io,useMemo:io,useReducer:io,useRef:io,useState:io,useDebugValue:io,useDeferredValue:io,useTransition:io,useMutableSource:io,useOpaqueIdentifier:io,unstable_isNewReconciler:!1},Do={readContext:oa,useCallback:function(e,t){return so().memoizedState=[e,void 0===t?null:t],e},useContext:oa,useEffect:xo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,ko(4,2,Eo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ko(4,2,e,t)},useMemo:function(e,t){var n=so();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=so();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=No.bind(null,$a,e),[r.memoizedState,e]},useRef:go,useState:mo,useDebugValue:To,useDeferredValue:function(e){var t=mo(e),n=t[0],r=t[1];return xo((function(){var t=Xa.transition;Xa.transition=1;try{r(e)}finally{Xa.transition=t}}),[e]),n},useTransition:function(){var e=mo(!1),t=e[0];return go(e=Co.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=so();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},po(r,e,t,n)},useOpaqueIdentifier:function(){if(ja){var e=!1,t=function(e){return{$$typeof:L,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(Jr++).toString(36))),Error(o(355))})),n=mo(t)[1];return 0===(2&$a.mode)&&($a.flags|=516,yo(5,(function(){n("r:"+(Jr++).toString(36))}),void 0,null)),t}return mo(t="r:"+(Jr++).toString(36)),t},unstable_isNewReconciler:!1},Ro={readContext:oa,useCallback:So,useContext:oa,useEffect:Io,useImperativeHandle:Ao,useLayoutEffect:_o,useMemo:Oo,useReducer:lo,useRef:bo,useState:function(){return lo(co)},useDebugValue:To,useDeferredValue:function(e){var t=lo(co),n=t[0],r=t[1];return Io((function(){var t=Xa.transition;Xa.transition=1;try{r(e)}finally{Xa.transition=t}}),[e]),n},useTransition:function(){var e=lo(co)[0];return[bo().current,e]},useMutableSource:vo,useOpaqueIdentifier:function(){return lo(co)[0]},unstable_isNewReconciler:!1},Lo={readContext:oa,useCallback:So,useContext:oa,useEffect:Io,useImperativeHandle:Ao,useLayoutEffect:_o,useMemo:Oo,useReducer:fo,useRef:bo,useState:function(){return fo(co)},useDebugValue:To,useDeferredValue:function(e){var t=fo(co),n=t[0],r=t[1];return Io((function(){var t=Xa.transition;Xa.transition=1;try{r(e)}finally{Xa.transition=t}}),[e]),n},useTransition:function(){var e=fo(co)[0];return[bo().current,e]},useMutableSource:vo,useOpaqueIdentifier:function(){return fo(co)[0]},unstable_isNewReconciler:!1},Mo=w.ReactCurrentOwner,Fo=!1;function Uo(e,t,n,r){t.child=null===e?Ta(t,null,n,r):Aa(t,e.child,n,r)}function Vo(e,t,n,r,i){n=n.render;var a=t.ref;return aa(t,i),r=oo(e,t,n,r,a,i),null===e||Fo?(t.flags|=1,Uo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,as(e,t,i))}function qo(e,t,n,r,i,a){if(null===e){var o=n.type;return"function"!==typeof o||Qu(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Gu(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,jo(e,t,o,r,i,a))}return o=e.child,0===(i&a)&&(i=o.memoizedProps,(n=null!==(n=n.compare)?n:hr)(i,r)&&e.ref===t.ref)?as(e,t,a):(t.flags|=1,(e=Wu(o,r)).ref=t.ref,e.return=t,t.child=e)}function jo(e,t,n,r,i,a){if(null!==e&&hr(e.memoizedProps,r)&&e.ref===t.ref){if(Fo=!1,0===(a&i))return t.lanes=e.lanes,as(e,t,a);0!==(16384&e.flags)&&(Fo=!0)}return Ko(e,t,n,r,a)}function Bo(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0===(4&t.mode))t.memoizedState={baseLanes:0},xu(t,n);else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},xu(t,e),null;t.memoizedState={baseLanes:0},xu(t,null!==a?a.baseLanes:n)}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,xu(t,r);return Uo(e,t,i,n),t.child}function zo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Ko(e,t,n,r,i){var a=yi(n)?vi:di.current;return a=mi(t,a),aa(t,i),n=oo(e,t,n,r,a,i),null===e||Fo?(t.flags|=1,Uo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,as(e,t,i))}function Qo(e,t,n,r,i){if(yi(n)){var a=!0;wi(t)}else a=!1;if(aa(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),ba(t,n,r),wa(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var u=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=oa(c):c=mi(t,c=yi(n)?vi:di.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||u!==c)&&ka(t,o,r,c),sa=!1;var h=t.memoizedState;o.state=h,da(t,r,o,i),u=t.memoizedState,s!==r||h!==u||pi.current||sa?("function"===typeof l&&(ma(t,n,l,r),u=t.memoizedState),(s=sa||ga(t,n,s,r,h,u,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4)):("function"===typeof o.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=c,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4),r=!1)}else{o=t.stateNode,ca(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:Xi(t.type,s),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(u=n.contextType)&&null!==u?u=oa(u):u=mi(t,u=yi(n)?vi:di.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==f||h!==u)&&ka(t,o,r,u),sa=!1,h=t.memoizedState,o.state=h,da(t,r,o,i);var p=t.memoizedState;s!==f||h!==p||pi.current||sa?("function"===typeof d&&(ma(t,n,d,r),p=t.memoizedState),(c=sa||ga(t,n,c,r,h,p,u))?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,u),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,u)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=c):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),r=!1)}return Wo(e,t,n,r,a,i)}function Wo(e,t,n,r,i,a){zo(e,t);var o=0!==(64&t.flags);if(!r&&!o)return i&&xi(t,n,!1),as(e,t,a);r=t.stateNode,Mo.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Aa(t,e.child,null,a),t.child=Aa(t,null,s,a)):Uo(e,t,s,a),t.memoizedState=r.state,i&&xi(t,n,!0),t.child}function Go(e){var t=e.stateNode;t.pendingContext?bi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&bi(0,t.context,!1),Da(e,t.containerInfo)}var Ho,Yo,Jo,Xo={dehydrated:null,retryLane:0};function Zo(e,t,n){var r,i=t.pendingProps,a=Fa.current,o=!1;return(r=0!==(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(a|=1),fi(Fa,1&a),null===e?(void 0!==i.fallback&&Ka(t),e=i.children,a=i.fallback,o?(e=$o(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Xo,e):"number"===typeof i.unstable_expectedLoadTime?(e=$o(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Xo,t.lanes=33554432,e):((n=Yu({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,o?(i=ts(e,t,i.children,i.fallback,n),o=t.child,a=e.child.memoizedState,o.memoizedState=null===a?{baseLanes:n}:{baseLanes:a.baseLanes|n},o.childLanes=e.childLanes&~n,t.memoizedState=Xo,i):(n=es(e,t,i.children,n),t.memoizedState=null,n))}function $o(e,t,n,r){var i=e.mode,a=e.child;return t={mode:"hidden",children:t},0===(2&i)&&null!==a?(a.childLanes=0,a.pendingProps=t):a=Yu(t,i,0,null),n=Hu(n,i,r,null),a.return=e,n.return=e,a.sibling=n,e.child=a,n}function es(e,t,n,r){var i=e.child;return e=i.sibling,n=Wu(i,{mode:"visible",children:n}),0===(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function ts(e,t,n,r,i){var a=t.mode,o=e.child;e=o.sibling;var s={mode:"hidden",children:n};return 0===(2&a)&&t.child!==o?((n=t.child).childLanes=0,n.pendingProps=s,null!==(o=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=o,o.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Wu(o,s),null!==e?r=Wu(e,r):(r=Hu(r,a,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function ns(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),ia(e.return,t)}function rs(e,t,n,r,i,a){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i,o.lastEffect=a)}function is(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(Uo(e,t,r.children,n),0!==(2&(r=Fa.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!==(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ns(e,n);else if(19===e.tag)ns(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(fi(Fa,r),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Ua(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),rs(t,!1,i,n,a,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Ua(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}rs(t,!0,n,null,a,t.lastEffect);break;case"together":rs(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function as(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),js|=t.lanes,0!==(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Wu(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Wu(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function os(e,t){if(!ja)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ss(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return yi(t.type)&&gi(),null;case 3:return Ra(),li(pi),li(di),Ya(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Wa(t)?t.flags|=4:r.hydrate||(t.flags|=256)),null;case 5:Ma(t);var a=Pa(Na.current);if(n=t.type,null!==e&&null!=t.stateNode)Yo(e,t,n,r),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(o(166));return null}if(e=Pa(Oa.current),Wa(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Zr]=t,r[$r]=s,n){case"dialog":Cr("cancel",r),Cr("close",r);break;case"iframe":case"object":case"embed":Cr("load",r);break;case"video":case"audio":for(e=0;e<Ar.length;e++)Cr(Ar[e],r);break;case"source":Cr("error",r);break;case"img":case"image":case"link":Cr("error",r),Cr("load",r);break;case"details":Cr("toggle",r);break;case"input":ee(r,s),Cr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Cr("invalid",r);break;case"textarea":ue(r,s),Cr("invalid",r)}for(var c in _e(n,s),e=null,s)s.hasOwnProperty(c)&&(a=s[c],"children"===c?"string"===typeof a?r.textContent!==a&&(e=["children",a]):"number"===typeof a&&r.textContent!==""+a&&(e=["children",""+a]):u.hasOwnProperty(c)&&null!=a&&"onScroll"===c&&Cr("scroll",r));switch(n){case"input":J(r),re(r,s,!0);break;case"textarea":J(r),le(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=qr)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(c=9===a.nodeType?a:a.ownerDocument,e===fe&&(e=de(n)),e===fe?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[Zr]=t,e[$r]=r,Ho(e,t),t.stateNode=e,c=Ee(n,r),n){case"dialog":Cr("cancel",e),Cr("close",e),a=r;break;case"iframe":case"object":case"embed":Cr("load",e),a=r;break;case"video":case"audio":for(a=0;a<Ar.length;a++)Cr(Ar[a],e);a=r;break;case"source":Cr("error",e),a=r;break;case"img":case"image":case"link":Cr("error",e),Cr("load",e),a=r;break;case"details":Cr("toggle",e),a=r;break;case"input":ee(e,r),a=$(e,r),Cr("invalid",e);break;case"option":a=ae(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=i({},r,{value:void 0}),Cr("invalid",e);break;case"textarea":ue(e,r),a=se(e,r),Cr("invalid",e);break;default:a=r}_e(n,a);var l=a;for(s in l)if(l.hasOwnProperty(s)){var f=l[s];"style"===s?xe(e,f):"dangerouslySetInnerHTML"===s?null!=(f=f?f.__html:void 0)&&ye(e,f):"children"===s?"string"===typeof f?("textarea"!==n||""!==f)&&ge(e,f):"number"===typeof f&&ge(e,""+f):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(u.hasOwnProperty(s)?null!=f&&"onScroll"===s&&Cr("scroll",e):null!=f&&k(e,s,f,c))}switch(n){case"input":J(e),re(e,r,!1);break;case"textarea":J(e),le(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?oe(e,!!r.multiple,s,!1):null!=r.defaultValue&&oe(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=qr)}zr(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Jo(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));n=Pa(Na.current),Pa(Oa.current),Wa(t)?(r=t.stateNode,n=t.memoizedProps,r[Zr]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Zr]=t,t.stateNode=r)}return null;case 13:return li(Fa),r=t.memoizedState,0!==(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Wa(t):n=null!==e.memoizedState,r&&!n&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Fa.current)?0===Us&&(Us=3):(0!==Us&&3!==Us||(Us=4),null===Ds||0===(134217727&js)&&0===(134217727&Bs)||gu(Ds,Ls))),(r||n)&&(t.flags|=4),null);case 4:return Ra(),null===e&&Pr(t.stateNode.containerInfo),null;case 10:return ra(t),null;case 19:if(li(Fa),null===(r=t.memoizedState))return null;if(s=0!==(64&t.flags),null===(c=r.rendering))if(s)os(r,!1);else{if(0!==Us||null!==e&&0!==(64&e.flags))for(e=t.child;null!==e;){if(null!==(c=Ua(e))){for(t.flags|=64,os(r,!1),null!==(s=c.updateQueue)&&(t.updateQueue=s,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,null===(c=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=c.childLanes,s.lanes=c.lanes,s.child=c.child,s.memoizedProps=c.memoizedProps,s.memoizedState=c.memoizedState,s.updateQueue=c.updateQueue,s.type=c.type,e=c.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return fi(Fa,1&Fa.current|2),t.child}e=e.sibling}null!==r.tail&&zi()>Ws&&(t.flags|=64,s=!0,os(r,!1),t.lanes=33554432)}else{if(!s)if(null!==(e=Ua(c))){if(t.flags|=64,s=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),os(r,!0),null===r.tail&&"hidden"===r.tailMode&&!c.alternate&&!ja)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*zi()-r.renderingStartTime>Ws&&1073741824!==n&&(t.flags|=64,s=!0,os(r,!1),t.lanes=33554432);r.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=r.last)?n.sibling=c:t.child=c,r.last=c)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=zi(),n.sibling=null,t=Fa.current,fi(Fa,s?1&t|2:1&t),n):null;case 23:case 24:return Iu(),null!==e&&null!==e.memoizedState!==(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(o(156,t.tag))}function us(e){switch(e.tag){case 1:yi(e.type)&&gi();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Ra(),li(pi),li(di),Ya(),0!==(64&(t=e.flags)))throw Error(o(285));return e.flags=-4097&t|64,e;case 5:return Ma(e),null;case 13:return li(Fa),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return li(Fa),null;case 4:return Ra(),null;case 10:return ra(e),null;case 23:case 24:return Iu(),null;default:return null}}function cs(e,t){try{var n="",r=t;do{n+=W(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i}}function ls(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}Ho=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Yo=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,Pa(Oa.current);var o,s=null;switch(n){case"input":a=$(e,a),r=$(e,r),s=[];break;case"option":a=ae(e,a),r=ae(e,r),s=[];break;case"select":a=i({},a,{value:void 0}),r=i({},r,{value:void 0}),s=[];break;case"textarea":a=se(e,a),r=se(e,r),s=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(e.onclick=qr)}for(f in _e(n,r),n=null,a)if(!r.hasOwnProperty(f)&&a.hasOwnProperty(f)&&null!=a[f])if("style"===f){var c=a[f];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==f&&"children"!==f&&"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&"autoFocus"!==f&&(u.hasOwnProperty(f)?s||(s=[]):(s=s||[]).push(f,null));for(f in r){var l=r[f];if(c=null!=a?a[f]:void 0,r.hasOwnProperty(f)&&l!==c&&(null!=l||null!=c))if("style"===f)if(c){for(o in c)!c.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&c[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(f,n)),n=l;else"dangerouslySetInnerHTML"===f?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(s=s||[]).push(f,l)):"children"===f?"string"!==typeof l&&"number"!==typeof l||(s=s||[]).push(f,""+l):"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&(u.hasOwnProperty(f)?(null!=l&&"onScroll"===f&&Cr("scroll",e),s||c===l||(s=[])):"object"===typeof l&&null!==l&&l.$$typeof===L?l.toString():(s=s||[]).push(f,l))}n&&(s=s||[]).push("style",n);var f=s;(t.updateQueue=f)&&(t.flags|=4)}},Jo=function(e,t,n,r){n!==r&&(t.flags|=4)};var fs="function"===typeof WeakMap?WeakMap:Map;function hs(e,t,n){(n=la(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Js||(Js=!0,Xs=r),ls(0,t)},n}function ds(e,t,n){(n=la(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return ls(0,t),r(i)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Zs?Zs=new Set([this]):Zs.add(this),ls(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var ps="function"===typeof WeakSet?WeakSet:Set;function vs(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){qu(e,n)}else t.current=null}function ms(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Xi(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Gr(t.stateNode.containerInfo))}throw Error(o(163))}function ys(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3===(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;r=i.next,0!==(4&(i=i.tag))&&0!==(1&i)&&(Fu(n,e),Mu(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Xi(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&pa(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}pa(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&zr(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&xt(n)))))}throw Error(o(163))}function gs(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"===typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=void 0!==i&&null!==i&&i.hasOwnProperty("display")?i.display:null,r.style.display=we("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function bs(e,t){if(_i&&"function"===typeof _i.onCommitFiberUnmount)try{_i.onCommitFiberUnmount(Ii,t)}catch(a){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!==(4&r))Fu(t,n);else{r=t;try{i()}catch(a){qu(r,a)}}n=n.next}while(n!==e)}break;case 1:if(vs(t),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(a){qu(t,a)}break;case 5:vs(t);break;case 4:Es(e,t)}}function ks(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function ws(e){return 5===e.tag||3===e.tag||4===e.tag}function xs(e){e:{for(var t=e.return;null!==t;){if(ws(t))break e;t=t.return}throw Error(o(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(o(161))}16&n.flags&&(ge(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||ws(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?Is(e,n,t):_s(e,n,t)}function Is(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=qr));else if(4!==r&&null!==(e=e.child))for(Is(e,t,n),e=e.sibling;null!==e;)Is(e,t,n),e=e.sibling}function _s(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(_s(e,t,n),e=e.sibling;null!==e;)_s(e,t,n),e=e.sibling}function Es(e,t){for(var n,r,i=t,a=!1;;){if(!a){a=i.return;e:for(;;){if(null===a)throw Error(o(160));switch(n=a.stateNode,a.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}a=a.return}a=!0}if(5===i.tag||6===i.tag){e:for(var s=e,u=i,c=u;;)if(bs(s,c),null!==c.child&&4!==c.tag)c.child.return=c,c=c.child;else{if(c===u)break e;for(;null===c.sibling;){if(null===c.return||c.return===u)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}r?(s=n,u=i.stateNode,8===s.nodeType?s.parentNode.removeChild(u):s.removeChild(u)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(bs(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(a=!1)}i.sibling.return=i.return,i=i.sibling}}function As(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3===(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:case 12:case 17:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var i=null!==e?e.memoizedProps:r;e=t.type;var a=t.updateQueue;if(t.updateQueue=null,null!==a){for(n[$r]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),Ee(e,i),t=Ee(e,r),i=0;i<a.length;i+=2){var s=a[i],u=a[i+1];"style"===s?xe(n,u):"dangerouslySetInnerHTML"===s?ye(n,u):"children"===s?ge(n,u):k(n,s,u,t)}switch(e){case"input":ne(n,r);break;case"textarea":ce(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(a=r.value)?oe(n,!!r.multiple,a,!1):e!==!!r.multiple&&(null!=r.defaultValue?oe(n,!!r.multiple,r.defaultValue,!0):oe(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(o(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,xt(n.containerInfo)));case 13:return null!==t.memoizedState&&(Qs=zi(),gs(t.child,!0)),void Ts(t);case 19:return void Ts(t);case 23:case 24:return void gs(t,null!==t.memoizedState)}throw Error(o(163))}function Ts(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new ps),t.forEach((function(t){var r=Bu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Ss(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var Os=Math.ceil,Cs=w.ReactCurrentDispatcher,Ns=w.ReactCurrentOwner,Ps=0,Ds=null,Rs=null,Ls=0,Ms=0,Fs=ci(0),Us=0,Vs=null,qs=0,js=0,Bs=0,zs=0,Ks=null,Qs=0,Ws=1/0;function Gs(){Ws=zi()+500}var Hs,Ys=null,Js=!1,Xs=null,Zs=null,$s=!1,eu=null,tu=90,nu=[],ru=[],iu=null,au=0,ou=null,su=-1,uu=0,cu=0,lu=null,fu=!1;function hu(){return 0!==(48&Ps)?zi():-1!==su?su:su=zi()}function du(e){if(0===(2&(e=e.mode)))return 1;if(0===(4&e))return 99===Ki()?1:2;if(0===uu&&(uu=qs),0!==Ji.transition){0!==cu&&(cu=null!==Ks?Ks.pendingLanes:0),e=uu;var t=4186112&~cu;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=Ki(),0!==(4&Ps)&&98===e?e=qt(12,uu):e=qt(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),uu),e}function pu(e,t,n){if(50<au)throw au=0,ou=null,Error(o(185));if(null===(e=vu(e,t)))return null;zt(e,t,n),e===Ds&&(Bs|=t,4===Us&&gu(e,Ls));var r=Ki();1===t?0!==(8&Ps)&&0===(48&Ps)?bu(e):(mu(e,n),0===Ps&&(Gs(),Hi())):(0===(4&Ps)||98!==r&&99!==r||(null===iu?iu=new Set([e]):iu.add(e)),mu(e,n)),Ks=e}function vu(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function mu(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,a=e.expirationTimes,s=e.pendingLanes;0<s;){var u=31-Kt(s),c=1<<u,l=a[u];if(-1===l){if(0===(c&r)||0!==(c&i)){l=t,Ft(c);var f=Mt;a[u]=10<=f?l+250:6<=f?l+5e3:-1}}else l<=t&&(e.expiredLanes|=c);s&=~c}if(r=Ut(e,e===Ds?Ls:0),t=Mt,0===r)null!==n&&(n!==Fi&&Ti(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Fi&&Ti(n)}15===t?(n=bu.bind(null,e),null===Vi?(Vi=[n],qi=Ai(Pi,Yi)):Vi.push(n),n=Fi):14===t?n=Gi(99,bu.bind(null,e)):(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(o(358,e))}}(t),n=Gi(n,yu.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function yu(e){if(su=-1,cu=uu=0,0!==(48&Ps))throw Error(o(327));var t=e.callbackNode;if(Lu()&&e.callbackNode!==t)return null;var n=Ut(e,e===Ds?Ls:0);if(0===n)return null;var r=n,i=Ps;Ps|=16;var a=Au();for(Ds===e&&Ls===r||(Gs(),_u(e,r));;)try{Ou();break}catch(u){Eu(e,u)}if(na(),Cs.current=a,Ps=i,null!==Rs?r=0:(Ds=null,Ls=0,r=Us),0!==(qs&Bs))_u(e,0);else if(0!==r){if(2===r&&(Ps|=64,e.hydrate&&(e.hydrate=!1,Gr(e.containerInfo)),0!==(n=Vt(e))&&(r=Tu(e,n))),1===r)throw t=Vs,_u(e,0),gu(e,n),mu(e,zi()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(o(345));case 2:case 5:Pu(e);break;case 3:if(gu(e,n),(62914560&n)===n&&10<(r=Qs+500-zi())){if(0!==Ut(e,0))break;if(((i=e.suspendedLanes)&n)!==n){hu(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Qr(Pu.bind(null,e),r);break}Pu(e);break;case 4:if(gu(e,n),(4186112&n)===n)break;for(r=e.eventTimes,i=-1;0<n;){var s=31-Kt(n);a=1<<s,(s=r[s])>i&&(i=s),n&=~a}if(n=i,10<(n=(120>(n=zi()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Os(n/1960))-n)){e.timeoutHandle=Qr(Pu.bind(null,e),n);break}Pu(e);break;default:throw Error(o(329))}}return mu(e,zi()),e.callbackNode===t?yu.bind(null,e):null}function gu(e,t){for(t&=~zs,t&=~Bs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Kt(t),r=1<<n;e[n]=-1,t&=~r}}function bu(e){if(0!==(48&Ps))throw Error(o(327));if(Lu(),e===Ds&&0!==(e.expiredLanes&Ls)){var t=Ls,n=Tu(e,t);0!==(qs&Bs)&&(n=Tu(e,t=Ut(e,t)))}else n=Tu(e,t=Ut(e,0));if(0!==e.tag&&2===n&&(Ps|=64,e.hydrate&&(e.hydrate=!1,Gr(e.containerInfo)),0!==(t=Vt(e))&&(n=Tu(e,t))),1===n)throw n=Vs,_u(e,0),gu(e,t),mu(e,zi()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Pu(e),mu(e,zi()),null}function ku(e,t){var n=Ps;Ps|=1;try{return e(t)}finally{0===(Ps=n)&&(Gs(),Hi())}}function wu(e,t){var n=Ps;Ps&=-2,Ps|=8;try{return e(t)}finally{0===(Ps=n)&&(Gs(),Hi())}}function xu(e,t){fi(Fs,Ms),Ms|=t,qs|=t}function Iu(){Ms=Fs.current,li(Fs)}function _u(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Wr(n)),null!==Rs)for(n=Rs.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&gi();break;case 3:Ra(),li(pi),li(di),Ya();break;case 5:Ma(r);break;case 4:Ra();break;case 13:case 19:li(Fa);break;case 10:ra(r);break;case 23:case 24:Iu()}n=n.return}Ds=e,Rs=Wu(e.current,null),Ls=Ms=qs=t,Us=0,Vs=null,zs=Bs=js=0}function Eu(e,t){for(;;){var n=Rs;try{if(na(),Ja.current=Po,no){for(var r=$a.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}no=!1}if(Za=0,to=eo=$a=null,ro=!1,Ns.current=null,null===n||null===n.return){Us=1,Vs=t,Rs=null;break}e:{var a=e,o=n.return,s=n,u=t;if(t=Ls,s.flags|=2048,s.firstEffect=s.lastEffect=null,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u;if(0===(2&s.mode)){var l=s.alternate;l?(s.updateQueue=l.updateQueue,s.memoizedState=l.memoizedState,s.lanes=l.lanes):(s.updateQueue=null,s.memoizedState=null)}var f=0!==(1&Fa.current),h=o;do{var d;if(d=13===h.tag){var p=h.memoizedState;if(null!==p)d=null!==p.dehydrated;else{var v=h.memoizedProps;d=void 0!==v.fallback&&(!0!==v.unstable_avoidThisFallback||!f)}}if(d){var m=h.updateQueue;if(null===m){var y=new Set;y.add(c),h.updateQueue=y}else m.add(c);if(0===(2&h.mode)){if(h.flags|=64,s.flags|=16384,s.flags&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var g=la(-1,1);g.tag=2,fa(s,g)}s.lanes|=1;break e}u=void 0,s=t;var b=a.pingCache;if(null===b?(b=a.pingCache=new fs,u=new Set,b.set(c,u)):void 0===(u=b.get(c))&&(u=new Set,b.set(c,u)),!u.has(s)){u.add(s);var k=ju.bind(null,a,c,s);c.then(k,k)}h.flags|=4096,h.lanes=t;break e}h=h.return}while(null!==h);u=Error((G(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Us&&(Us=2),u=cs(u,s),h=o;do{switch(h.tag){case 3:a=u,h.flags|=4096,t&=-t,h.lanes|=t,ha(h,hs(0,a,t));break e;case 1:a=u;var w=h.type,x=h.stateNode;if(0===(64&h.flags)&&("function"===typeof w.getDerivedStateFromError||null!==x&&"function"===typeof x.componentDidCatch&&(null===Zs||!Zs.has(x)))){h.flags|=4096,t&=-t,h.lanes|=t,ha(h,ds(h,a,t));break e}}h=h.return}while(null!==h)}Nu(n)}catch(I){t=I,Rs===n&&null!==n&&(Rs=n=n.return);continue}break}}function Au(){var e=Cs.current;return Cs.current=Po,null===e?Po:e}function Tu(e,t){var n=Ps;Ps|=16;var r=Au();for(Ds===e&&Ls===t||_u(e,t);;)try{Su();break}catch(i){Eu(e,i)}if(na(),Ps=n,Cs.current=r,null!==Rs)throw Error(o(261));return Ds=null,Ls=0,Us}function Su(){for(;null!==Rs;)Cu(Rs)}function Ou(){for(;null!==Rs&&!Si();)Cu(Rs)}function Cu(e){var t=Hs(e.alternate,e,Ms);e.memoizedProps=e.pendingProps,null===t?Nu(e):Rs=t,Ns.current=null}function Nu(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(2048&t.flags)){if(null!==(n=ss(n,t,Ms)))return void(Rs=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&Ms)||0===(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==e&&0===(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=us(t)))return n.flags&=2047,void(Rs=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Rs=t);Rs=t=e}while(null!==t);0===Us&&(Us=5)}function Pu(e){var t=Ki();return Wi(99,Du.bind(null,e,t)),null}function Du(e,t){do{Lu()}while(null!==eu);if(0!==(48&Ps))throw Error(o(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null;var r=n.lanes|n.childLanes,i=r,a=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var s=e.eventTimes,u=e.expirationTimes;0<a;){var c=31-Kt(a),l=1<<c;i[c]=0,s[c]=-1,u[c]=-1,a&=~l}if(null!==iu&&0===(24&r)&&iu.has(e)&&iu.delete(e),e===Ds&&(Rs=Ds=null,Ls=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=Ps,Ps|=32,Ns.current=null,jr=Yt,yr(s=mr())){if("selectionStart"in s)u={start:s.selectionStart,end:s.selectionEnd};else e:if(u=(u=s.ownerDocument)&&u.defaultView||window,(l=u.getSelection&&u.getSelection())&&0!==l.rangeCount){u=l.anchorNode,a=l.anchorOffset,c=l.focusNode,l=l.focusOffset;try{u.nodeType,c.nodeType}catch(A){u=null;break e}var f=0,h=-1,d=-1,p=0,v=0,m=s,y=null;t:for(;;){for(var g;m!==u||0!==a&&3!==m.nodeType||(h=f+a),m!==c||0!==l&&3!==m.nodeType||(d=f+l),3===m.nodeType&&(f+=m.nodeValue.length),null!==(g=m.firstChild);)y=m,m=g;for(;;){if(m===s)break t;if(y===u&&++p===a&&(h=f),y===c&&++v===l&&(d=f),null!==(g=m.nextSibling))break;y=(m=y).parentNode}m=g}u=-1===h||-1===d?null:{start:h,end:d}}else u=null;u=u||{start:0,end:0}}else u=null;Br={focusedElem:s,selectionRange:u},Yt=!1,lu=null,fu=!1,Ys=r;do{try{Ru()}catch(A){if(null===Ys)throw Error(o(330));qu(Ys,A),Ys=Ys.nextEffect}}while(null!==Ys);lu=null,Ys=r;do{try{for(s=e;null!==Ys;){var b=Ys.flags;if(16&b&&ge(Ys.stateNode,""),128&b){var k=Ys.alternate;if(null!==k){var w=k.ref;null!==w&&("function"===typeof w?w(null):w.current=null)}}switch(1038&b){case 2:xs(Ys),Ys.flags&=-3;break;case 6:xs(Ys),Ys.flags&=-3,As(Ys.alternate,Ys);break;case 1024:Ys.flags&=-1025;break;case 1028:Ys.flags&=-1025,As(Ys.alternate,Ys);break;case 4:As(Ys.alternate,Ys);break;case 8:Es(s,u=Ys);var x=u.alternate;ks(u),null!==x&&ks(x)}Ys=Ys.nextEffect}}catch(A){if(null===Ys)throw Error(o(330));qu(Ys,A),Ys=Ys.nextEffect}}while(null!==Ys);if(w=Br,k=mr(),b=w.focusedElem,s=w.selectionRange,k!==b&&b&&b.ownerDocument&&vr(b.ownerDocument.documentElement,b)){null!==s&&yr(b)&&(k=s.start,void 0===(w=s.end)&&(w=k),"selectionStart"in b?(b.selectionStart=k,b.selectionEnd=Math.min(w,b.value.length)):(w=(k=b.ownerDocument||document)&&k.defaultView||window).getSelection&&(w=w.getSelection(),u=b.textContent.length,x=Math.min(s.start,u),s=void 0===s.end?x:Math.min(s.end,u),!w.extend&&x>s&&(u=s,s=x,x=u),u=pr(b,x),a=pr(b,s),u&&a&&(1!==w.rangeCount||w.anchorNode!==u.node||w.anchorOffset!==u.offset||w.focusNode!==a.node||w.focusOffset!==a.offset)&&((k=k.createRange()).setStart(u.node,u.offset),w.removeAllRanges(),x>s?(w.addRange(k),w.extend(a.node,a.offset)):(k.setEnd(a.node,a.offset),w.addRange(k))))),k=[];for(w=b;w=w.parentNode;)1===w.nodeType&&k.push({element:w,left:w.scrollLeft,top:w.scrollTop});for("function"===typeof b.focus&&b.focus(),b=0;b<k.length;b++)(w=k[b]).element.scrollLeft=w.left,w.element.scrollTop=w.top}Yt=!!jr,Br=jr=null,e.current=n,Ys=r;do{try{for(b=e;null!==Ys;){var I=Ys.flags;if(36&I&&ys(b,Ys.alternate,Ys),128&I){k=void 0;var _=Ys.ref;if(null!==_){var E=Ys.stateNode;Ys.tag,k=E,"function"===typeof _?_(k):_.current=k}}Ys=Ys.nextEffect}}catch(A){if(null===Ys)throw Error(o(330));qu(Ys,A),Ys=Ys.nextEffect}}while(null!==Ys);Ys=null,Ui(),Ps=i}else e.current=n;if($s)$s=!1,eu=e,tu=t;else for(Ys=r;null!==Ys;)t=Ys.nextEffect,Ys.nextEffect=null,8&Ys.flags&&((I=Ys).sibling=null,I.stateNode=null),Ys=t;if(0===(r=e.pendingLanes)&&(Zs=null),1===r?e===ou?au++:(au=0,ou=e):au=0,n=n.stateNode,_i&&"function"===typeof _i.onCommitFiberRoot)try{_i.onCommitFiberRoot(Ii,n,void 0,64===(64&n.current.flags))}catch(A){}if(mu(e,zi()),Js)throw Js=!1,e=Xs,Xs=null,e;return 0!==(8&Ps)||Hi(),null}function Ru(){for(;null!==Ys;){var e=Ys.alternate;fu||null===lu||(0!==(8&Ys.flags)?et(Ys,lu)&&(fu=!0):13===Ys.tag&&Ss(e,Ys)&&et(Ys,lu)&&(fu=!0));var t=Ys.flags;0!==(256&t)&&ms(e,Ys),0===(512&t)||$s||($s=!0,Gi(97,(function(){return Lu(),null}))),Ys=Ys.nextEffect}}function Lu(){if(90!==tu){var e=97<tu?97:tu;return tu=90,Wi(e,Uu)}return!1}function Mu(e,t){nu.push(t,e),$s||($s=!0,Gi(97,(function(){return Lu(),null})))}function Fu(e,t){ru.push(t,e),$s||($s=!0,Gi(97,(function(){return Lu(),null})))}function Uu(){if(null===eu)return!1;var e=eu;if(eu=null,0!==(48&Ps))throw Error(o(331));var t=Ps;Ps|=32;var n=ru;ru=[];for(var r=0;r<n.length;r+=2){var i=n[r],a=n[r+1],s=i.destroy;if(i.destroy=void 0,"function"===typeof s)try{s()}catch(c){if(null===a)throw Error(o(330));qu(a,c)}}for(n=nu,nu=[],r=0;r<n.length;r+=2){i=n[r],a=n[r+1];try{var u=i.create;i.destroy=u()}catch(c){if(null===a)throw Error(o(330));qu(a,c)}}for(u=e.current.firstEffect;null!==u;)e=u.nextEffect,u.nextEffect=null,8&u.flags&&(u.sibling=null,u.stateNode=null),u=e;return Ps=t,Hi(),!0}function Vu(e,t,n){fa(e,t=hs(0,t=cs(n,t),1)),t=hu(),null!==(e=vu(e,1))&&(zt(e,1,t),mu(e,t))}function qu(e,t){if(3===e.tag)Vu(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Vu(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Zs||!Zs.has(r))){var i=ds(n,e=cs(t,e),1);if(fa(n,i),i=hu(),null!==(n=vu(n,1)))zt(n,1,i),mu(n,i);else if("function"===typeof r.componentDidCatch&&(null===Zs||!Zs.has(r)))try{r.componentDidCatch(t,e)}catch(a){}break}}n=n.return}}function ju(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=hu(),e.pingedLanes|=e.suspendedLanes&n,Ds===e&&(Ls&n)===n&&(4===Us||3===Us&&(62914560&Ls)===Ls&&500>zi()-Qs?_u(e,0):zs|=n),mu(e,t)}function Bu(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0===(2&(t=e.mode))?t=1:0===(4&t)?t=99===Ki()?1:2:(0===uu&&(uu=qs),0===(t=jt(62914560&~uu))&&(t=4194304))),n=hu(),null!==(e=vu(e,t))&&(zt(e,t,n),mu(e,n))}function zu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Ku(e,t,n,r){return new zu(e,t,n,r)}function Qu(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Wu(e,t){var n=e.alternate;return null===n?((n=Ku(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Gu(e,t,n,r,i,a){var s=2;if(r=e,"function"===typeof e)Qu(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case _:return Hu(n.children,i,a,t);case M:s=8,i|=16;break;case E:s=8,i|=1;break;case A:return(e=Ku(12,n,t,8|i)).elementType=A,e.type=A,e.lanes=a,e;case C:return(e=Ku(13,n,t,i)).type=C,e.elementType=C,e.lanes=a,e;case N:return(e=Ku(19,n,t,i)).elementType=N,e.lanes=a,e;case F:return Yu(n,i,a,t);case U:return(e=Ku(24,n,t,i)).elementType=U,e.lanes=a,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:s=10;break e;case S:s=9;break e;case O:s=11;break e;case P:s=14;break e;case D:s=16,r=null;break e;case R:s=22;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Ku(s,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Hu(e,t,n,r){return(e=Ku(7,e,r,t)).lanes=n,e}function Yu(e,t,n,r){return(e=Ku(23,e,r,t)).elementType=F,e.lanes=n,e}function Ju(e,t,n){return(e=Ku(6,e,null,t)).lanes=n,e}function Xu(e,t,n){return(t=Ku(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Zu(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Bt(0),this.expirationTimes=Bt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bt(0),this.mutableSourceEagerHydrationData=null}function $u(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:I,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function ec(e,t,n,r){var i=t.current,a=hu(),s=du(i);e:if(n){t:{if(Je(n=n._reactInternals)!==n||1!==n.tag)throw Error(o(170));var u=n;do{switch(u.tag){case 3:u=u.stateNode.context;break t;case 1:if(yi(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break t}}u=u.return}while(null!==u);throw Error(o(171))}if(1===n.tag){var c=n.type;if(yi(c)){n=ki(n,c,u);break e}}n=u}else n=hi;return null===t.context?t.context=n:t.pendingContext=n,(t=la(a,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),fa(i,t),pu(i,s,a),s}function tc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function nc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function rc(e,t){nc(e,t),(e=e.alternate)&&nc(e,t)}function ic(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Zu(e,t,null!=n&&!0===n.hydrate),t=Ku(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,ua(t),e[ei]=n.current,Pr(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var i=(t=r[e])._getVersion;i=i(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,i]:n.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=n}function ac(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function oc(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a._internalRoot;if("function"===typeof i){var s=i;i=function(){var e=tc(o);s.call(e)}}ec(t,o,e,i)}else{if(a=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new ic(e,0,t?{hydrate:!0}:void 0)}(n,r),o=a._internalRoot,"function"===typeof i){var u=i;i=function(){var e=tc(o);u.call(e)}}wu((function(){ec(t,o,e,i)}))}return tc(o)}function sc(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ac(t))throw Error(o(200));return $u(e,t,null,n)}Hs=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||pi.current)Fo=!0;else{if(0===(n&r)){switch(Fo=!1,t.tag){case 3:Go(t),Ga();break;case 5:La(t);break;case 1:yi(t.type)&&wi(t);break;case 4:Da(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var i=t.type._context;fi(Zi,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(n&t.child.childLanes)?Zo(e,t,n):(fi(Fa,1&Fa.current),null!==(t=as(e,t,n))?t.sibling:null);fi(Fa,1&Fa.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(64&e.flags)){if(r)return is(e,t,n);t.flags|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),fi(Fa,Fa.current),r)break;return null;case 23:case 24:return t.lanes=0,Bo(e,t,n)}return as(e,t,n)}Fo=0!==(16384&e.flags)}else Fo=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=mi(t,di.current),aa(t,n),i=oo(null,t,r,e,i,n),t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,yi(r)){var a=!0;wi(t)}else a=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,ua(t);var s=r.getDerivedStateFromProps;"function"===typeof s&&ma(t,r,s,e),i.updater=ya,t.stateNode=i,i._reactInternals=t,wa(t,r,e,n),t=Wo(null,t,r,!0,a,n)}else t.tag=0,Uo(null,t,i,n),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(a=i._init)(i._payload),t.type=i,a=t.tag=function(e){if("function"===typeof e)return Qu(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===O)return 11;if(e===P)return 14}return 2}(i),e=Xi(i,e),a){case 0:t=Ko(null,t,i,e,n);break e;case 1:t=Qo(null,t,i,e,n);break e;case 11:t=Vo(null,t,i,e,n);break e;case 14:t=qo(null,t,i,Xi(i.type,e),r,n);break e}throw Error(o(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ko(e,t,r,i=t.elementType===r?i:Xi(r,i),n);case 1:return r=t.type,i=t.pendingProps,Qo(e,t,r,i=t.elementType===r?i:Xi(r,i),n);case 3:if(Go(t),r=t.updateQueue,null===e||null===r)throw Error(o(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,ca(e,t),da(t,r,null,n),(r=t.memoizedState.element)===i)Ga(),t=as(e,t,n);else{if((a=(i=t.stateNode).hydrate)&&(qa=Hr(t.stateNode.containerInfo.firstChild),Va=t,a=ja=!0),a){if(null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)(a=e[i])._workInProgressVersionPrimary=e[i+1],Ha.push(a);for(n=Ta(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Uo(e,t,r,n),Ga();t=t.child}return t;case 5:return La(t),null===e&&Ka(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,s=i.children,Kr(r,i)?s=null:null!==a&&Kr(r,a)&&(t.flags|=16),zo(e,t),Uo(e,t,s,n),t.child;case 6:return null===e&&Ka(t),null;case 13:return Zo(e,t,n);case 4:return Da(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Aa(t,null,r,n):Uo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Vo(e,t,r,i=t.elementType===r?i:Xi(r,i),n);case 7:return Uo(e,t,t.pendingProps,n),t.child;case 8:case 12:return Uo(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value;var u=t.type._context;if(fi(Zi,u._currentValue),u._currentValue=a,null!==s)if(u=s.value,0===(a=lr(u,a)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(u,a):1073741823))){if(s.children===i.children&&!pi.current){t=as(e,t,n);break e}}else for(null!==(u=t.child)&&(u.return=t);null!==u;){var c=u.dependencies;if(null!==c){s=u.child;for(var l=c.firstContext;null!==l;){if(l.context===r&&0!==(l.observedBits&a)){1===u.tag&&((l=la(-1,n&-n)).tag=2,fa(u,l)),u.lanes|=n,null!==(l=u.alternate)&&(l.lanes|=n),ia(u.return,n),c.lanes|=n;break}l=l.next}}else s=10===u.tag&&u.type===t.type?null:u.child;if(null!==s)s.return=u;else for(s=u;null!==s;){if(s===t){s=null;break}if(null!==(u=s.sibling)){u.return=s.return,s=u;break}s=s.return}u=s}Uo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(a=t.pendingProps).children,aa(t,n),r=r(i=oa(i,a.unstable_observedBits)),t.flags|=1,Uo(e,t,r,n),t.child;case 14:return a=Xi(i=t.type,t.pendingProps),qo(e,t,i,a=Xi(i.type,a),r,n);case 15:return jo(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Xi(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,yi(r)?(e=!0,wi(t)):e=!1,aa(t,n),ba(t,r,i),wa(t,r,i,n),Wo(null,t,r,!0,e,n);case 19:return is(e,t,n);case 23:case 24:return Bo(e,t,n)}throw Error(o(156,t.tag))},ic.prototype.render=function(e){ec(e,this._internalRoot,null,null)},ic.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;ec(null,e,null,(function(){t[ei]=null}))},tt=function(e){13===e.tag&&(pu(e,4,hu()),rc(e,4))},nt=function(e){13===e.tag&&(pu(e,67108864,hu()),rc(e,67108864))},rt=function(e){if(13===e.tag){var t=hu(),n=du(e);pu(e,n,t),rc(e,n)}},it=function(e,t){return t()},Te=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=ai(r);if(!i)throw Error(o(90));X(r),ne(r,i)}}}break;case"textarea":ce(e,n);break;case"select":null!=(t=n.value)&&oe(e,!!n.multiple,t,!1)}},De=ku,Re=function(e,t,n,r,i){var a=Ps;Ps|=4;try{return Wi(98,e.bind(null,t,n,r,i))}finally{0===(Ps=a)&&(Gs(),Hi())}},Le=function(){0===(49&Ps)&&(function(){if(null!==iu){var e=iu;iu=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,mu(e,zi())}))}Hi()}(),Lu())},Me=function(e,t){var n=Ps;Ps|=2;try{return e(t)}finally{0===(Ps=n)&&(Gs(),Hi())}};var uc={Events:[ri,ii,ai,Ne,Pe,Lu,{current:!1}]},cc={findFiberByHostInstance:ni,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},lc={bundleType:cc.bundleType,version:cc.version,rendererPackageName:cc.rendererPackageName,rendererConfig:cc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=$e(e))?null:e.stateNode},findFiberByHostInstance:cc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var fc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fc.isDisabled&&fc.supportsFiber)try{Ii=fc.inject(lc),_i=fc}catch(me){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uc,t.createPortal=sc,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw Error(o(268,Object.keys(e)))}return e=null===(e=$e(t))?null:e.stateNode},t.flushSync=function(e,t){var n=Ps;if(0!==(48&n))return e(t);Ps|=1;try{if(e)return Wi(99,e.bind(null,t))}finally{Ps=n,Hi()}},t.hydrate=function(e,t,n){if(!ac(t))throw Error(o(200));return oc(null,e,t,!0,n)},t.render=function(e,t,n){if(!ac(t))throw Error(o(200));return oc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!ac(e))throw Error(o(40));return!!e._reactRootContainer&&(wu((function(){oc(null,null,e,!1,(function(){e._reactRootContainer=null,e[ei]=null}))})),!0)},t.unstable_batchedUpdates=ku,t.unstable_createPortal=function(e,t){return sc(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ac(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return oc(e,t,n,!1,r)},t.version="17.0.2"},5749:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(2610)},5443:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,k=n?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case f:case a:case s:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case h:case m:case v:case u:return e;default:return t}}case i:return t}}}function x(e){return w(e)===f}t.AsyncMode=l,t.ConcurrentMode=f,t.ContextConsumer=c,t.ContextProvider=u,t.Element=r,t.ForwardRef=h,t.Fragment=a,t.Lazy=m,t.Memo=v,t.Portal=i,t.Profiler=s,t.StrictMode=o,t.Suspense=d,t.isAsyncMode=function(e){return x(e)||w(e)===l},t.isConcurrentMode=x,t.isContextConsumer=function(e){return w(e)===c},t.isContextProvider=function(e){return w(e)===u},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return w(e)===h},t.isFragment=function(e){return w(e)===a},t.isLazy=function(e){return w(e)===m},t.isMemo=function(e){return w(e)===v},t.isPortal=function(e){return w(e)===i},t.isProfiler=function(e){return w(e)===s},t.isStrictMode=function(e){return w(e)===o},t.isSuspense=function(e){return w(e)===d},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===f||e===s||e===o||e===d||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===v||e.$$typeof===u||e.$$typeof===c||e.$$typeof===h||e.$$typeof===g||e.$$typeof===b||e.$$typeof===k||e.$$typeof===y)},t.typeOf=w},9479:function(e,t,n){"use strict";e.exports=n(5443)},4618:function(e,t,n){"use strict";n.r(t),n.d(t,{BrowserRouter:function(){return l},HashRouter:function(){return f},Link:function(){return y},MemoryRouter:function(){return r.VA},NavLink:function(){return k},Prompt:function(){return r.NL},Redirect:function(){return r.l_},Route:function(){return r.AW},Router:function(){return r.F0},StaticRouter:function(){return r.gx},Switch:function(){return r.rs},generatePath:function(){return r.Gn},matchPath:function(){return r.LX},useHistory:function(){return r.k6},useLocation:function(){return r.TH},useParams:function(){return r.UO},useRouteMatch:function(){return r.$B},withRouter:function(){return r.EN}});var r=n(2461),i=n(1665),a=n(969),o=n(7828),s=n(7896),u=n(1461),c=n(5704),l=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).history=(0,o.lX)(t.props),t}return(0,i.Z)(t,e),t.prototype.render=function(){return a.createElement(r.F0,{history:this.history,children:this.props.children})},t}(a.Component);var f=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).history=(0,o.q_)(t.props),t}return(0,i.Z)(t,e),t.prototype.render=function(){return a.createElement(r.F0,{history:this.history,children:this.props.children})},t}(a.Component);var h=function(e,t){return"function"===typeof e?e(t):e},d=function(e,t){return"string"===typeof e?(0,o.ob)(e,null,null,t):e},p=function(e){return e},v=a.forwardRef;"undefined"===typeof v&&(v=p);var m=v((function(e,t){var n=e.innerRef,r=e.navigate,i=e.onClick,o=(0,u.Z)(e,["innerRef","navigate","onClick"]),c=o.target,l=(0,s.Z)({},o,{onClick:function(e){try{i&&i(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||c&&"_self"!==c||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),r())}});return l.ref=p!==v&&t||n,a.createElement("a",l)}));var y=v((function(e,t){var n=e.component,i=void 0===n?m:n,l=e.replace,f=e.to,y=e.innerRef,g=(0,u.Z)(e,["component","replace","to","innerRef"]);return a.createElement(r.s6.Consumer,null,(function(e){e||(0,c.Z)(!1);var n=e.history,r=d(h(f,e.location),e.location),u=r?n.createHref(r):"",m=(0,s.Z)({},g,{href:u,navigate:function(){var t=h(f,e.location),r=(0,o.Ep)(e.location)===(0,o.Ep)(d(t));(l||r?n.replace:n.push)(t)}});return p!==v?m.ref=t||y:m.innerRef=y,a.createElement(i,m)}))})),g=function(e){return e},b=a.forwardRef;"undefined"===typeof b&&(b=g);var k=b((function(e,t){var n=e["aria-current"],i=void 0===n?"page":n,o=e.activeClassName,l=void 0===o?"active":o,f=e.activeStyle,p=e.className,v=e.exact,m=e.isActive,k=e.location,w=e.sensitive,x=e.strict,I=e.style,_=e.to,E=e.innerRef,A=(0,u.Z)(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return a.createElement(r.s6.Consumer,null,(function(e){e||(0,c.Z)(!1);var n=k||e.location,o=d(h(_,n),n),u=o.pathname,T=u&&u.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),S=T?(0,r.LX)(n.pathname,{path:T,exact:v,sensitive:w,strict:x}):null,O=!!(m?m(S,n):S),C="function"===typeof p?p(O):p,N="function"===typeof I?I(O):I;O&&(C=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e})).join(" ")}(C,l),N=(0,s.Z)({},N,f));var P=(0,s.Z)({"aria-current":O&&i||null,className:C,style:N,to:o},A);return g!==b?P.ref=t||E:P.innerRef=E,a.createElement(y,P)}))}))},2461:function(e,t,n){"use strict";n.d(t,{VA:function(){return _},NL:function(){return A},l_:function(){return C},AW:function(){return R},F0:function(){return I},gx:function(){return q},rs:function(){return j},s6:function(){return x},Gn:function(){return O},LX:function(){return D},k6:function(){return K},TH:function(){return Q},UO:function(){return W},$B:function(){return G},EN:function(){return B}});var r=n(1665),i=n(969),a=n(7828),o=n(4974),s=n.n(o),u=1073741823,c="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{};function l(e){var t=[];return{on:function(e){t.push(e)},off:function(e){t=t.filter((function(t){return t!==e}))},get:function(){return e},set:function(n,r){e=n,t.forEach((function(t){return t(e,r)}))}}}var f=i.createContext||function(e,t){var n,a,o="__create-react-context-"+function(){var e="__global_unique_id__";return c[e]=(c[e]||0)+1}()+"__",f=function(e){function n(){var t;return(t=e.apply(this,arguments)||this).emitter=l(t.props.value),t}(0,r.Z)(n,e);var i=n.prototype;return i.getChildContext=function(){var e;return(e={})[o]=this.emitter,e},i.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var n,r=this.props.value,i=e.value;((a=r)===(o=i)?0!==a||1/a===1/o:a!==a&&o!==o)?n=0:(n="function"===typeof t?t(r,i):u,0!==(n|=0)&&this.emitter.set(e.value,n))}var a,o},i.render=function(){return this.props.children},n}(i.Component);f.childContextTypes=((n={})[o]=s().object.isRequired,n);var h=function(t){function n(){var e;return(e=t.apply(this,arguments)||this).state={value:e.getValue()},e.onUpdate=function(t,n){0!==((0|e.observedBits)&n)&&e.setState({value:e.getValue()})},e}(0,r.Z)(n,t);var i=n.prototype;return i.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=void 0===t||null===t?u:t},i.componentDidMount=function(){this.context[o]&&this.context[o].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=void 0===e||null===e?u:e},i.componentWillUnmount=function(){this.context[o]&&this.context[o].off(this.onUpdate)},i.getValue=function(){return this.context[o]?this.context[o].get():e},i.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},n}(i.Component);return h.contextTypes=((a={})[o]=s().object,a),{Provider:f,Consumer:h}},h=f,d=n(5704),p=n(7896),v=n(1599),m=n.n(v),y=(n(9479),n(1461)),g=n(7814),b=n.n(g),k=function(e){var t=h();return t.displayName=e,t},w=k("Router-History"),x=k("Router"),I=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={location:t.history.location},n._isMounted=!1,n._pendingLocation=null,t.staticContext||(n.unlisten=t.history.listen((function(e){n._pendingLocation=e}))),n}(0,r.Z)(t,e),t.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var n=t.prototype;return n.componentDidMount=function(){var e=this;this._isMounted=!0,this.unlisten&&this.unlisten(),this.props.staticContext||(this.unlisten=this.props.history.listen((function(t){e._isMounted&&e.setState({location:t})}))),this._pendingLocation&&this.setState({location:this._pendingLocation})},n.componentWillUnmount=function(){this.unlisten&&(this.unlisten(),this._isMounted=!1,this._pendingLocation=null)},n.render=function(){return i.createElement(x.Provider,{value:{history:this.props.history,location:this.state.location,match:t.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},i.createElement(w.Provider,{children:this.props.children||null,value:this.props.history}))},t}(i.Component);var _=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).history=(0,a.PP)(t.props),t}return(0,r.Z)(t,e),t.prototype.render=function(){return i.createElement(I,{history:this.history,children:this.props.children})},t}(i.Component);var E=function(e){function t(){return e.apply(this,arguments)||this}(0,r.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.onMount&&this.props.onMount.call(this,this)},n.componentDidUpdate=function(e){this.props.onUpdate&&this.props.onUpdate.call(this,this,e)},n.componentWillUnmount=function(){this.props.onUnmount&&this.props.onUnmount.call(this,this)},n.render=function(){return null},t}(i.Component);function A(e){var t=e.message,n=e.when,r=void 0===n||n;return i.createElement(x.Consumer,null,(function(e){if(e||(0,d.Z)(!1),!r||e.staticContext)return null;var n=e.history.block;return i.createElement(E,{onMount:function(e){e.release=n(t)},onUpdate:function(e,r){r.message!==t&&(e.release(),e.release=n(t))},onUnmount:function(e){e.release()},message:t})}))}var T={},S=0;function O(e,t){return void 0===e&&(e="/"),void 0===t&&(t={}),"/"===e?e:function(e){if(T[e])return T[e];var t=m().compile(e);return S<1e4&&(T[e]=t,S++),t}(e)(t,{pretty:!0})}function C(e){var t=e.computedMatch,n=e.to,r=e.push,o=void 0!==r&&r;return i.createElement(x.Consumer,null,(function(e){e||(0,d.Z)(!1);var r=e.history,s=e.staticContext,u=o?r.push:r.replace,c=(0,a.ob)(t?"string"===typeof n?O(n,t.params):(0,p.Z)({},n,{pathname:O(n.pathname,t.params)}):n);return s?(u(c),null):i.createElement(E,{onMount:function(){u(c)},onUpdate:function(e,t){var n=(0,a.ob)(t.to);(0,a.Hp)(n,(0,p.Z)({},c,{key:n.key}))||u(c)},to:n})}))}var N={},P=0;function D(e,t){void 0===t&&(t={}),("string"===typeof t||Array.isArray(t))&&(t={path:t});var n=t,r=n.path,i=n.exact,a=void 0!==i&&i,o=n.strict,s=void 0!==o&&o,u=n.sensitive,c=void 0!==u&&u;return[].concat(r).reduce((function(t,n){if(!n&&""!==n)return null;if(t)return t;var r=function(e,t){var n=""+t.end+t.strict+t.sensitive,r=N[n]||(N[n]={});if(r[e])return r[e];var i=[],a={regexp:m()(e,i,t),keys:i};return P<1e4&&(r[e]=a,P++),a}(n,{end:a,strict:s,sensitive:c}),i=r.regexp,o=r.keys,u=i.exec(e);if(!u)return null;var l=u[0],f=u.slice(1),h=e===l;return a&&!h?null:{path:n,url:"/"===n&&""===l?"/":l,isExact:h,params:o.reduce((function(e,t,n){return e[t.name]=f[n],e}),{})}}),null)}var R=function(e){function t(){return e.apply(this,arguments)||this}return(0,r.Z)(t,e),t.prototype.render=function(){var e=this;return i.createElement(x.Consumer,null,(function(t){t||(0,d.Z)(!1);var n=e.props.location||t.location,r=e.props.computedMatch?e.props.computedMatch:e.props.path?D(n.pathname,e.props):t.match,a=(0,p.Z)({},t,{location:n,match:r}),o=e.props,s=o.children,u=o.component,c=o.render;return Array.isArray(s)&&function(e){return 0===i.Children.count(e)}(s)&&(s=null),i.createElement(x.Provider,{value:a},a.match?s?"function"===typeof s?s(a):s:u?i.createElement(u,a):c?c(a):null:"function"===typeof s?s(a):null)}))},t}(i.Component);function L(e){return"/"===e.charAt(0)?e:"/"+e}function M(e,t){if(!e)return t;var n=L(e);return 0!==t.pathname.indexOf(n)?t:(0,p.Z)({},t,{pathname:t.pathname.substr(n.length)})}function F(e){return"string"===typeof e?e:(0,a.Ep)(e)}function U(e){return function(){(0,d.Z)(!1)}}function V(){}var q=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handlePush=function(e){return t.navigateTo(e,"PUSH")},t.handleReplace=function(e){return t.navigateTo(e,"REPLACE")},t.handleListen=function(){return V},t.handleBlock=function(){return V},t}(0,r.Z)(t,e);var n=t.prototype;return n.navigateTo=function(e,t){var n=this.props,r=n.basename,i=void 0===r?"":r,o=n.context,s=void 0===o?{}:o;s.action=t,s.location=function(e,t){return e?(0,p.Z)({},t,{pathname:L(e)+t.pathname}):t}(i,(0,a.ob)(e)),s.url=F(s.location)},n.render=function(){var e=this.props,t=e.basename,n=void 0===t?"":t,r=e.context,o=void 0===r?{}:r,s=e.location,u=void 0===s?"/":s,c=(0,y.Z)(e,["basename","context","location"]),l={createHref:function(e){return L(n+F(e))},action:"POP",location:M(n,(0,a.ob)(u)),push:this.handlePush,replace:this.handleReplace,go:U(),goBack:U(),goForward:U(),listen:this.handleListen,block:this.handleBlock};return i.createElement(I,(0,p.Z)({},c,{history:l,staticContext:o}))},t}(i.Component);var j=function(e){function t(){return e.apply(this,arguments)||this}return(0,r.Z)(t,e),t.prototype.render=function(){var e=this;return i.createElement(x.Consumer,null,(function(t){t||(0,d.Z)(!1);var n,r,a=e.props.location||t.location;return i.Children.forEach(e.props.children,(function(e){if(null==r&&i.isValidElement(e)){n=e;var o=e.props.path||e.props.from;r=o?D(a.pathname,(0,p.Z)({},e.props,{path:o})):t.match}})),r?i.cloneElement(n,{location:a,computedMatch:r}):null}))},t}(i.Component);function B(e){var t="withRouter("+(e.displayName||e.name)+")",n=function(t){var n=t.wrappedComponentRef,r=(0,y.Z)(t,["wrappedComponentRef"]);return i.createElement(x.Consumer,null,(function(t){return t||(0,d.Z)(!1),i.createElement(e,(0,p.Z)({},r,t,{ref:n}))}))};return n.displayName=t,n.WrappedComponent=e,b()(n,e)}var z=i.useContext;function K(){return z(w)}function Q(){return z(x).location}function W(){var e=z(x).match;return e?e.params:{}}function G(e){var t=Q(),n=z(x).match;return e?D(t.pathname,e):n}},9690:function(e){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},1599:function(e,t,n){var r=n(9690);e.exports=d,e.exports.parse=a,e.exports.compile=function(e,t){return s(a(e,t),t)},e.exports.tokensToFunction=s,e.exports.tokensToRegExp=h;var i=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function a(e,t){for(var n,r=[],a=0,o=0,s="",l=t&&t.delimiter||"/";null!=(n=i.exec(e));){var f=n[0],h=n[1],d=n.index;if(s+=e.slice(o,d),o=d+f.length,h)s+=h[1];else{var p=e[o],v=n[2],m=n[3],y=n[4],g=n[5],b=n[6],k=n[7];s&&(r.push(s),s="");var w=null!=v&&null!=p&&p!==v,x="+"===b||"*"===b,I="?"===b||"*"===b,_=n[2]||l,E=y||g;r.push({name:m||a++,prefix:v||"",delimiter:_,optional:I,repeat:x,partial:w,asterisk:!!k,pattern:E?c(E):k?".*":"[^"+u(_)+"]+?"})}}return o<e.length&&(s+=e.substr(o)),s&&r.push(s),r}function o(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function s(e,t){for(var n=new Array(e.length),i=0;i<e.length;i++)"object"===typeof e[i]&&(n[i]=new RegExp("^(?:"+e[i].pattern+")$",f(t)));return function(t,i){for(var a="",s=t||{},u=(i||{}).pretty?o:encodeURIComponent,c=0;c<e.length;c++){var l=e[c];if("string"!==typeof l){var f,h=s[l.name];if(null==h){if(l.optional){l.partial&&(a+=l.prefix);continue}throw new TypeError('Expected "'+l.name+'" to be defined')}if(r(h)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but received `'+JSON.stringify(h)+"`");if(0===h.length){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var d=0;d<h.length;d++){if(f=u(h[d]),!n[c].test(f))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'", but received `'+JSON.stringify(f)+"`");a+=(0===d?l.prefix:l.delimiter)+f}}else{if(f=l.asterisk?encodeURI(h).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):u(h),!n[c].test(f))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but received "'+f+'"');a+=l.prefix+f}}else a+=l}return a}}function u(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function c(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function l(e,t){return e.keys=t,e}function f(e){return e&&e.sensitive?"":"i"}function h(e,t,n){r(t)||(n=t||n,t=[]);for(var i=(n=n||{}).strict,a=!1!==n.end,o="",s=0;s<e.length;s++){var c=e[s];if("string"===typeof c)o+=u(c);else{var h=u(c.prefix),d="(?:"+c.pattern+")";t.push(c),c.repeat&&(d+="(?:"+h+d+")*"),o+=d=c.optional?c.partial?h+"("+d+")?":"(?:"+h+"("+d+"))?":h+"("+d+")"}}var p=u(n.delimiter||"/"),v=o.slice(-p.length)===p;return i||(o=(v?o.slice(0,-p.length):o)+"(?:"+p+"(?=$))?"),o+=a?"$":i&&v?"":"(?="+p+"|$)",l(new RegExp("^"+o,f(n)),t)}function d(e,t,n){return r(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return l(e,t)}(e,t):r(e)?function(e,t,n){for(var r=[],i=0;i<e.length;i++)r.push(d(e[i],t,n).source);return l(new RegExp("(?:"+r.join("|")+")",f(n)),t)}(e,t,n):function(e,t,n){return h(a(e,n),t,n)}(e,t,n)}},4999:function(e,t,n){"use strict";n(3545);var r=n(969),i=60103;if(t.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var a=Symbol.for;i=a("react.element"),t.Fragment=a("react.fragment")}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s=Object.prototype.hasOwnProperty,u={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)s.call(t,r)&&!u.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:o.current}}t.jsx=c,t.jsxs=c},3949:function(e,t,n){"use strict";var r=n(3545),i=60103,a=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var o=60109,s=60110,u=60112;t.Suspense=60113;var c=60115,l=60116;if("function"===typeof Symbol&&Symbol.for){var f=Symbol.for;i=f("react.element"),a=f("react.portal"),t.Fragment=f("react.fragment"),t.StrictMode=f("react.strict_mode"),t.Profiler=f("react.profiler"),o=f("react.provider"),s=f("react.context"),u=f("react.forward_ref"),t.Suspense=f("react.suspense"),c=f("react.memo"),l=f("react.lazy")}var h="function"===typeof Symbol&&Symbol.iterator;function d(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v={};function m(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}function y(){}function g(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(d(85));this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=m.prototype;var b=g.prototype=new y;b.constructor=g,r(b,m.prototype),b.isPureReactComponent=!0;var k={current:null},w=Object.prototype.hasOwnProperty,x={key:!0,ref:!0,__self:!0,__source:!0};function I(e,t,n){var r,a={},o=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)w.call(t,r)&&!x.hasOwnProperty(r)&&(a[r]=t[r]);var u=arguments.length-2;if(1===u)a.children=n;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(r in u=e.defaultProps)void 0===a[r]&&(a[r]=u[r]);return{$$typeof:i,type:e,key:o,ref:s,props:a,_owner:k.current}}function _(e){return"object"===typeof e&&null!==e&&e.$$typeof===i}var E=/\/+/g;function A(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function T(e,t,n,r,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case i:case a:u=!0}}if(u)return o=o(u=e),e=""===r?"."+A(u,0):r,Array.isArray(o)?(n="",null!=e&&(n=e.replace(E,"$&/")+"/"),T(o,t,n,"",(function(e){return e}))):null!=o&&(_(o)&&(o=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,n+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(E,"$&/")+"/")+e)),t.push(o)),1;if(u=0,r=""===r?".":r+":",Array.isArray(e))for(var c=0;c<e.length;c++){var l=r+A(s=e[c],c);u+=T(s,t,n,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(s=e.next()).done;)u+=T(s=s.value,t,n,l=r+A(s,c++),o);else if("object"===s)throw t=""+e,Error(d(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return u}function S(e,t,n){if(null==e)return e;var r=[],i=0;return T(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function O(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var C={current:null};function N(){var e=C.current;if(null===e)throw Error(d(321));return e}var P={ReactCurrentDispatcher:C,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:k,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:S,forEach:function(e,t,n){S(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return S(e,(function(){t++})),t},toArray:function(e){return S(e,(function(e){return e}))||[]},only:function(e){if(!_(e))throw Error(d(143));return e}},t.Component=m,t.PureComponent=g,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(d(267,e));var a=r({},e.props),o=e.key,s=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,u=k.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)w.call(t,l)&&!x.hasOwnProperty(l)&&(a[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)a.children=n;else if(1<l){c=Array(l);for(var f=0;f<l;f++)c[f]=arguments[f+2];a.children=c}return{$$typeof:i,type:e.type,key:o,ref:s,props:a,_owner:u}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:s,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=I,t.createFactory=function(e){var t=I.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=_,t.lazy=function(e){return{$$typeof:l,_payload:{_status:-1,_result:e},_init:O}},t.memo=function(e,t){return{$$typeof:c,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return N().useCallback(e,t)},t.useContext=function(e,t){return N().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return N().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return N().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return N().useLayoutEffect(e,t)},t.useMemo=function(e,t){return N().useMemo(e,t)},t.useReducer=function(e,t,n){return N().useReducer(e,t,n)},t.useRef=function(e){return N().useRef(e)},t.useState=function(e){return N().useState(e)},t.version="17.0.2"},969:function(e,t,n){"use strict";e.exports=n(3949)},7574:function(e,t,n){"use strict";e.exports=n(4999)},384:function(e,t){"use strict";var n,r,i,a;if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var c=null,l=null,f=function e(){if(null!==c)try{var n=t.unstable_now();c(!0,n),c=null}catch(r){throw setTimeout(e,0),r}};n=function(e){null!==c?setTimeout(n,0,e):(c=e,setTimeout(f,0))},r=function(e,t){l=setTimeout(e,t)},i=function(){clearTimeout(l)},t.unstable_shouldYield=function(){return!1},a=t.unstable_forceFrameRate=function(){}}else{var h=window.setTimeout,d=window.clearTimeout;if("undefined"!==typeof console){var p=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof p&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var v=!1,m=null,y=-1,g=5,b=0;t.unstable_shouldYield=function(){return t.unstable_now()>=b},a=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):g=0<e?Math.floor(1e3/e):5};var k=new MessageChannel,w=k.port2;k.port1.onmessage=function(){if(null!==m){var e=t.unstable_now();b=e+g;try{m(!0,e)?w.postMessage(null):(v=!1,m=null)}catch(n){throw w.postMessage(null),n}}else v=!1},n=function(e){m=e,v||(v=!0,w.postMessage(null))},r=function(e,n){y=h((function(){e(t.unstable_now())}),n)},i=function(){d(y),y=-1}}function x(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<E(i,t)))break e;e[r]=t,e[n]=i,n=r}}function I(e){return void 0===(e=e[0])?null:e}function _(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var a=2*(r+1)-1,o=e[a],s=a+1,u=e[s];if(void 0!==o&&0>E(o,n))void 0!==u&&0>E(u,o)?(e[r]=u,e[s]=n,r=s):(e[r]=o,e[a]=n,r=a);else{if(!(void 0!==u&&0>E(u,n)))break e;e[r]=u,e[s]=n,r=s}}}return t}return null}function E(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var A=[],T=[],S=1,O=null,C=3,N=!1,P=!1,D=!1;function R(e){for(var t=I(T);null!==t;){if(null===t.callback)_(T);else{if(!(t.startTime<=e))break;_(T),t.sortIndex=t.expirationTime,x(A,t)}t=I(T)}}function L(e){if(D=!1,R(e),!P)if(null!==I(A))P=!0,n(M);else{var t=I(T);null!==t&&r(L,t.startTime-e)}}function M(e,n){P=!1,D&&(D=!1,i()),N=!0;var a=C;try{for(R(n),O=I(A);null!==O&&(!(O.expirationTime>n)||e&&!t.unstable_shouldYield());){var o=O.callback;if("function"===typeof o){O.callback=null,C=O.priorityLevel;var s=o(O.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?O.callback=s:O===I(A)&&_(A),R(n)}else _(A);O=I(A)}if(null!==O)var u=!0;else{var c=I(T);null!==c&&r(L,c.startTime-n),u=!1}return u}finally{O=null,C=a,N=!1}}var F=a;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){P||N||(P=!0,n(M))},t.unstable_getCurrentPriorityLevel=function(){return C},t.unstable_getFirstCallbackNode=function(){return I(A)},t.unstable_next=function(e){switch(C){case 1:case 2:case 3:var t=3;break;default:t=C}var n=C;C=t;try{return e()}finally{C=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=F,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=C;C=e;try{return t()}finally{C=n}},t.unstable_scheduleCallback=function(e,a,o){var s=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:S++,callback:a,priorityLevel:e,startTime:o,expirationTime:u=o+u,sortIndex:-1},o>s?(e.sortIndex=o,x(T,e),null===I(A)&&e===I(T)&&(D?i():D=!0,r(L,o-s))):(e.sortIndex=u,x(A,e),P||N||(P=!0,n(M))),e},t.unstable_wrapCallback=function(e){var t=C;return function(){var n=C;C=t;try{return e.apply(this,arguments)}finally{C=n}}}},8019:function(e,t,n){"use strict";e.exports=n(384)},5704:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r="Invariant failed";function i(e,t){if(!e)throw new Error(r)}},7896:function(e,t,n){"use strict";function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}n.d(t,{Z:function(){return r}})},1665:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(8960);function i(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,(0,r.Z)(e,t)}},1461:function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}n.d(t,{Z:function(){return r}})},8960:function(e,t,n){"use strict";function r(e,t){return r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},r(e,t)}n.d(t,{Z:function(){return r}})}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}n.m=e,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".efc765f1.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="@meddbriefer/debriefer:";n.l=function(r,i,a,o){if(e[r])e[r].push(i);else{var s,u;if(void 0!==a)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var f=c[l];if(f.getAttribute("src")==r||f.getAttribute("data-webpack")==t+a){s=f;break}}s||(u=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+a),s.src=r),e[r]=[i];var h=function(t,n){s.onerror=s.onload=null,clearTimeout(d);var i=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach((function(e){return e(n)})),t)return t(n)},d=setTimeout(h.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=h.bind(null,s.onerror),s.onload=h.bind(null,s.onload),u&&document.head.appendChild(s)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},n.p="./",function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=a);var o=n.p+n.u(t),s=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",s.name="ChunkLoadError",s.type=a,s.request=o,i[1](s)}}),"chunk-"+t,t)}};var t=function(t,r){var i,a,o=r[0],s=r[1],u=r[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(u)u(n)}for(t&&t(r);c<o.length;c++)a=o[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunk_meddbriefer_debriefer=self.webpackChunk_meddbriefer_debriefer||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return j},SDK_VERSION:function(){return tt},_DEFAULT_ENTRY_NAME:function(){return Be},_addComponent:function(){return We},_addOrOverwriteComponent:function(){return Ge},_apps:function(){return Ke},_clearComponents:function(){return Xe},_components:function(){return Qe},_getProvider:function(){return Ye},_registerComponent:function(){return He},_removeServiceInstance:function(){return Je},deleteApp:function(){return at},getApp:function(){return rt},getApps:function(){return it},initializeApp:function(){return nt},onLog:function(){return ut},registerVersion:function(){return st},setLogLevel:function(){return ct}});var t=n(969),r=n(5749),i=n(4618),a=n(2461),o=n(19);function s(e){if(Array.isArray(e))return e}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){if(e){if("string"===typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function l(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function f(e,t){return s(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(u){s=!0,i=u}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}}(e,t)||c(e,t)||l()}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function m(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=c(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var g=n(8960);function b(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&(0,g.Z)(e,t)}function k(e){return k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},k(e)}function w(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function x(e){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(e)}function I(e,t){if(t&&("object"===x(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return y(e)}function _(e){var t=w();return function(){var n,r=k(e);if(t){var i=k(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return I(this,n)}}function E(e,t,n){return E=w()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&(0,g.Z)(i,n.prototype),i},E.apply(null,arguments)}function A(e){var t="function"===typeof Map?new Map:void 0;return A=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return E(e,arguments,k(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),(0,g.Z)(n,e)},A(e)}var T=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},S={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,s=o?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=a>>2,f=(3&a)<<4|s>>4,h=(15&s)<<2|c>>6,d=63&c;u||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(T(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var s=e[n++],u=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&u)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==s||null==u)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==s){var l=o<<4&240|s>>2;if(r.push(l),64!==u){var f=s<<6&192|u;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},O=function(e){return function(e){var t=T(e);return S.encodeByteArray(t,!0)}(e).replace(/\./g,"")},C=function(e){try{return S.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function N(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=N(e[n],t[n]));return e}var P=function(){function e(){var t=this;d(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return v(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function D(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[O(JSON.stringify({alg:"none",type:"JWT"})),O(JSON.stringify(a)),""].join(".")}function R(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function L(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(R())}function M(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}function F(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function U(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function V(){var e=R();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function q(){return"object"===typeof indexedDB}var j=function(e){b(n,e);var t=_(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(y(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(y(a),B.prototype.create),a}return v(n)}(A(Error)),B=function(){function e(t,n,r){d(this,e),this.service=t,this.serviceName=n,this.errors=r}return v(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?z(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new j(n,a,t);return o}}]),e}();function z(e,t){return e.replace(K,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var K=/\{\$([^}]+)}/g;function Q(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function W(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var s=e[o],u=t[o];if(G(s)&&G(u)){if(!W(s,u))return!1}else if(s!==u)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function G(e){return null!==e&&"object"===typeof e}function H(e){for(var t=[],n=function(){var e=f(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function Y(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=f(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function J(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function X(e,t){var n=new Z(e,t);return n.subscribe.bind(n)}var Z=function(){function e(t,n){var r=this;d(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return v(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=m(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=$),void 0===r.error&&(r.error=$),void 0===r.complete&&(r.complete=$);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function $(){}function ee(e){return e&&e._delegate?e._delegate:e}function te(){te=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(T){s=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof f?t:f,a=Object.create(i.prototype),o=new _(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return A()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=k(o,n);if(s){if(s===l)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=c(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,o),a}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(T){return{type:"throw",arg:T}}}e.wrap=u;var l={};function f(){}function h(){}function d(){}var p={};s(p,i,(function(){return this}));var v=Object.getPrototypeOf,m=v&&v(v(E([])));m&&m!==t&&n.call(m,i)&&(p=m);var y=d.prototype=f.prototype=Object.create(p);function g(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function r(i,a,o,s){var u=c(e[i],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==x(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,o,s)}),(function(e){r("throw",e,o,s)})):t.resolve(f).then((function(e){l.value=e,o(l)}),(function(e){return r("throw",e,o,s)}))}s(u.arg)}var i;this._invoke=function(e,n){function a(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(a,a):a()}}function k(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,k(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=c(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,l;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function E(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:A}}function A(){return{value:void 0,done:!0}}return h.prototype=d,s(y,"constructor",d),s(d,"constructor",h),h.displayName=s(d,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,s(e,o,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},g(b.prototype),s(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new b(u(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},g(y),s(y,o,"Generator"),s(y,i,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=E,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(I),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;I(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:E(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},e}function ne(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function re(e){return function(e){if(Array.isArray(e))return u(e)}(e)||ne(e)||c(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ie(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function ae(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){ie(a,r,i,o,s,"next",e)}function s(e){ie(a,r,i,o,s,"throw",e)}o(void 0)}))}}var oe=function(){function e(t,n,r){d(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return v(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),se="[DEFAULT]",ue=function(){function e(t,n){d(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return v(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new P;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:se})}catch(u){}var t,n=m(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=f(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var s=this.getOrInitializeService({instanceIdentifier:o});a.resolve(s)}catch(u){}}}catch(c){n.e(c)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=ae(te().mark((function e(){var t;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(re(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),re(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=m(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var s=f(i.value,2),u=s[0],c=s[1],l=this.normalizeInstanceIdentifier(u);r===l&&c.resolve(a)}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=m(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(lx){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===se?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(lx){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se;return this.component?this.component.multipleInstances?e:se:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var ce,le,fe=function(){function e(t){d(this,e),this.name=t,this.providers=new Map}return v(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new ue(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),he=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(le||(le={}));var de={debug:le.DEBUG,verbose:le.VERBOSE,info:le.INFO,warn:le.WARN,error:le.ERROR,silent:le.SILENT},pe=le.INFO,ve=(h(ce={},le.DEBUG,"log"),h(ce,le.VERBOSE,"log"),h(ce,le.INFO,"info"),h(ce,le.WARN,"warn"),h(ce,le.ERROR,"error"),ce),me=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=ve[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),s=2;s<a;s++)o[s-2]=arguments[s];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},ye=function(){function e(t){d(this,e),this.name=t,this._logLevel=pe,this._logHandler=me,this._userLogHandler=null,he.push(this)}return v(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in le))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?de[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,le.DEBUG].concat(t)),this._logHandler.apply(this,[this,le.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,le.VERBOSE].concat(t)),this._logHandler.apply(this,[this,le.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,le.INFO].concat(t)),this._logHandler.apply(this,[this,le.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,le.WARN].concat(t)),this._logHandler.apply(this,[this,le.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,le.ERROR].concat(t)),this._logHandler.apply(this,[this,le.ERROR].concat(t))}}]),e}();function ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ge(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ke,we;var xe=new WeakMap,Ie=new WeakMap,_e=new WeakMap,Ee=new WeakMap,Ae=new WeakMap;var Te={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Ie.get(e);if("objectStoreNames"===t)return e.objectStoreNames||_e.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ce(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function Se(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(we||(we=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Ne(this),n),Ce(xe.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ce(e.apply(Ne(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[Ne(this),t].concat(r));return _e.set(a,t.sort?t.sort():[t]),Ce(a)}}function Oe(e){return"function"===typeof e?Se(e):(e instanceof IDBTransaction&&function(e){if(!Ie.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));Ie.set(e,t)}}(e),t=e,(ke||(ke=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((function(e){return t instanceof e}))?new Proxy(e,Te):e);var t}function Ce(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(Ce(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&xe.set(t,e)})).catch((function(){})),Ae.set(t,e),t}(e);if(Ee.has(e))return Ee.get(e);var t=Oe(e);return t!==e&&(Ee.set(e,t),Ae.set(t,e)),t}var Ne=function(e){return Ae.get(e)};var Pe,De,Re=["get","getKey","getAll","getAllKeys","count"],Le=["put","add","delete","clear"],Me=new Map;function Fe(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(Me.get(t))return Me.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=Le.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||Re.includes(n))){var a=function(){var e=ae(te().mark((function e(t){var a,o,s,u,c,l,f=arguments;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),s=o.store,u=f.length,c=new Array(u>1?u-1:0),l=1;l<u;l++)c[l-1]=f[l];return r&&(s=s.index(c.shift())),e.next=6,Promise.all([(a=s)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return Me.set(t,a),a}}}Te=function(e){return be(be({},e),{},{get:function(t,n,r){return Fe(t,n)||e.get(t,n,r)},has:function(t,n){return!!Fe(t,n)||e.has(t,n)}})}(Te);var Ue=function(){function e(t){d(this,e),this.container=t}return v(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var Ve="@firebase/app",qe="0.7.25",je=new ye("@firebase/app"),Be="[DEFAULT]",ze=(h(Pe={},Ve,"fire-core"),h(Pe,"@firebase/app-compat","fire-core-compat"),h(Pe,"@firebase/analytics","fire-analytics"),h(Pe,"@firebase/analytics-compat","fire-analytics-compat"),h(Pe,"@firebase/app-check","fire-app-check"),h(Pe,"@firebase/app-check-compat","fire-app-check-compat"),h(Pe,"@firebase/auth","fire-auth"),h(Pe,"@firebase/auth-compat","fire-auth-compat"),h(Pe,"@firebase/database","fire-rtdb"),h(Pe,"@firebase/database-compat","fire-rtdb-compat"),h(Pe,"@firebase/functions","fire-fn"),h(Pe,"@firebase/functions-compat","fire-fn-compat"),h(Pe,"@firebase/installations","fire-iid"),h(Pe,"@firebase/installations-compat","fire-iid-compat"),h(Pe,"@firebase/messaging","fire-fcm"),h(Pe,"@firebase/messaging-compat","fire-fcm-compat"),h(Pe,"@firebase/performance","fire-perf"),h(Pe,"@firebase/performance-compat","fire-perf-compat"),h(Pe,"@firebase/remote-config","fire-rc"),h(Pe,"@firebase/remote-config-compat","fire-rc-compat"),h(Pe,"@firebase/storage","fire-gcs"),h(Pe,"@firebase/storage-compat","fire-gcs-compat"),h(Pe,"@firebase/firestore","fire-fst"),h(Pe,"@firebase/firestore-compat","fire-fst-compat"),h(Pe,"fire-js","fire-js"),h(Pe,"firebase","fire-js-all"),Pe),Ke=new Map,Qe=new Map;function We(e,t){try{e.container.addComponent(t)}catch(n){je.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Ge(e,t){e.container.addOrOverwriteComponent(t)}function He(e){var t=e.name;if(Qe.has(t))return je.debug("There were multiple attempts to register component ".concat(t,".")),!1;Qe.set(t,e);var n,r=m(Ke.values());try{for(r.s();!(n=r.n()).done;){We(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function Ye(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Je(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Be;Ye(e,t).clearInstance(n)}function Xe(){Qe.clear()}var Ze=(h(De={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),h(De,"bad-app-name","Illegal App name: '{$appName}"),h(De,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),h(De,"app-deleted","Firebase App named '{$appName}' already deleted"),h(De,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),h(De,"invalid-log-argument","First argument to `onLog` must be null or a function."),h(De,"storage-open","Error thrown when opening storage. Original error: {$originalErrorMessage}."),h(De,"storage-get","Error thrown when reading from storage. Original error: {$originalErrorMessage}."),h(De,"storage-set","Error thrown when writing to storage. Original error: {$originalErrorMessage}."),h(De,"storage-delete","Error thrown when deleting from storage. Original error: {$originalErrorMessage}."),De),$e=new B("app","Firebase",Ze),et=function(){function e(t,n,r){var i=this;d(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new oe("app",(function(){return i}),"PUBLIC"))}return v(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw $e.create("app-deleted",{appName:this._name})}}]),e}(),tt="9.8.2";function nt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==typeof t){var n=t;t={name:n}}var r=Object.assign({name:Be,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw $e.create("bad-app-name",{appName:String(i)});var a=Ke.get(i);if(a){if(W(e,a.options)&&W(r,a.config))return a;throw $e.create("duplicate-app",{appName:i})}var o,s=new fe(i),u=m(Qe.values());try{for(u.s();!(o=u.n()).done;){var c=o.value;s.addComponent(c)}}catch(f){u.e(f)}finally{u.f()}var l=new et(e,r,s);return Ke.set(i,l),l}function rt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be,t=Ke.get(e);if(!t)throw $e.create("no-app",{appName:e});return t}function it(){return Array.from(Ke.values())}function at(e){return ot.apply(this,arguments)}function ot(){return(ot=ae(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!Ke.has(n)){e.next=6;break}return Ke.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function st(e,t,n){var r,i=null!==(r=ze[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var s=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&s.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&s.push("and"),o&&s.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void je.warn(s.join(" "))}He(new oe("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function ut(e,t){if(null!==e&&"function"!==typeof e)throw $e.create("invalid-log-argument");!function(e,t){var n,r=m(he);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=de[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var s=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:le[n].toLowerCase(),message:s,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function ct(e){var t;t=e,he.forEach((function(e){e.setLogLevel(t)}))}var lt="firebase-heartbeat-store",ft=null;function ht(){return ft||(ft=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,s=indexedDB.open(e,t),u=Ce(s);return i&&s.addEventListener("upgradeneeded",(function(e){i(Ce(s.result),e.oldVersion,e.newVersion,Ce(s.transaction))})),r&&s.addEventListener("blocked",(function(){return r()})),u.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),u}("firebase-heartbeat-database",1,{upgrade:function(e,t){if(0===t)e.createObjectStore(lt)}}).catch((function(e){throw $e.create("storage-open",{originalErrorMessage:e.message})}))),ft}function dt(e){return pt.apply(this,arguments)}function pt(){return pt=ae(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ht();case 3:return n=e.sent,e.abrupt("return",n.transaction(lt).objectStore(lt).get(yt(t)));case 7:throw e.prev=7,e.t0=e.catch(0),$e.create("storage-get",{originalErrorMessage:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),pt.apply(this,arguments)}function vt(e,t){return mt.apply(this,arguments)}function mt(){return mt=ae(te().mark((function e(t,n){var r,i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ht();case 3:return r=e.sent,i=r.transaction(lt,"readwrite"),a=i.objectStore(lt),e.next=8,a.put(n,yt(t));case 8:return e.abrupt("return",i.done);case 11:throw e.prev=11,e.t0=e.catch(0),$e.create("storage-set",{originalErrorMessage:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),mt.apply(this,arguments)}function yt(e){return"".concat(e.name,"!").concat(e.options.appId)}var gt=function(){function e(t){var n=this;d(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new It(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return v(e,[{key:"triggerHeartbeat",value:function(){var e=ae(te().mark((function e(){var t,n,r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=bt(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=ae(te().mark((function e(){var t,n,r,i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=bt(),n=kt(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=O(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function bt(){return(new Date).toISOString().substring(0,10)}function kt(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=m(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),_t(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),_t(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var s=o();if("break"===s)break}}catch(u){a.e(u)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var wt,xt,It=function(){function e(t){d(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return v(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=ae(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(q()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=ae(te().mark((function e(){var t;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,dt(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=ae(te().mark((function e(t){var n,r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",vt(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=ae(te().mark((function e(t){var n,r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",vt(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(re(r.heartbeats),re(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function _t(e){return O(JSON.stringify({version:2,heartbeats:e})).length}wt="",He(new oe("platform-logger",(function(e){return new Ue(e)}),"PRIVATE")),He(new oe("heartbeat",(function(e){return new gt(e)}),"PRIVATE")),st(Ve,qe,wt),st(Ve,qe,"esm2017"),st("fire-js","");var Et=function(){function e(t,n){var r=this;d(this,e),this._delegate=t,this.firebase=n,We(t,new oe("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return v(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),at(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Be;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Be;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){We(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){Ge(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),At=(h(xt={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),h(xt,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),xt),Tt=new B("app-compat","Firebase",At);var St=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=nt(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(Q(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:st,setLogLevel:ct,onLog:ut,apps:null,SDK_VERSION:tt,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(He(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw Tt.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&N(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!Q(n,e=e||Be))throw Tt.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(Et);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){N(n,e)},createSubscribe:X,ErrorFactory:B,deepExtend:N}),n}(),Ot=new ye("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){Ot.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Ct=self.firebase.SDK_VERSION;Ct&&Ct.indexOf("LITE")>=0&&Ot.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Nt=St;!function(e){st("@firebase/app-compat","0.1.26",e)}();function Pt(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=k(e)););return e}function Dt(){return Dt="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=Pt(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Dt.apply(this,arguments)}Nt.registerVersion("firebase","9.8.2","app-compat");function Rt(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var Lt;Object.create;var Mt="facebook.com",Ft="github.com",Ut="google.com",Vt="password",qt="twitter.com",jt="EMAIL_SIGNIN",Bt="PASSWORD_RESET",zt="RECOVER_EMAIL",Kt="REVERT_SECOND_FACTOR_ADDITION",Qt="VERIFY_AND_CHANGE_EMAIL",Wt="VERIFY_EMAIL";function Gt(){return h({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var Ht=function(){var e;return h(e={},"admin-restricted-operation","This operation is restricted to administrators only."),h(e,"argument-error",""),h(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),h(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),h(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),h(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),h(e,"cordova-not-ready","Cordova framework is not ready."),h(e,"cors-unsupported","This browser is not supported."),h(e,"credential-already-in-use","This credential is already associated with a different user account."),h(e,"custom-token-mismatch","The custom token corresponds to a different audience."),h(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),h(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),h(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),h(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),h(e,"email-already-in-use","The email address is already in use by another account."),h(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),h(e,"expired-action-code","The action code has expired."),h(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),h(e,"internal-error","An internal AuthError has occurred."),h(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),h(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),h(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),h(e,"invalid-auth-event","An internal AuthError has occurred."),h(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),h(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),h(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),h(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),h(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),h(e,"invalid-email","The email address is badly formatted."),h(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),h(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),h(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),h(e,"invalid-credential","The supplied auth credential is malformed or has expired."),h(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),h(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),h(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),h(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),h(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),h(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),h(e,"wrong-password","The password is invalid or the user does not have a password."),h(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),h(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),h(e,"invalid-provider-id","The specified provider ID is invalid."),h(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),h(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),h(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),h(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),h(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),h(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),h(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),h(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),h(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),h(e,"missing-continue-uri","A continue URL must be provided in the request."),h(e,"missing-iframe-start","An internal AuthError has occurred."),h(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),h(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),h(e,"missing-multi-factor-info","No second factor identifier is provided."),h(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),h(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),h(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),h(e,"app-deleted","This instance of FirebaseApp has been deleted."),h(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),h(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),h(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),h(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),h(e,"no-auth-event","An internal AuthError has occurred."),h(e,"no-such-provider","User was not linked to an account with the given provider."),h(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),h(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),h(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),h(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),h(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),h(e,"provider-already-linked","User can only be linked to one identity for the given provider."),h(e,"quota-exceeded","The project's quota for this operation has been exceeded."),h(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),h(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),h(e,"rejected-credential","The request contains malformed or mismatching credentials."),h(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),h(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),h(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),h(e,"timeout","The operation has timed out."),h(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),h(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),h(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),h(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),h(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),h(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),h(e,"unverified-email","The operation requires a verified email."),h(e,"user-cancelled","The user did not grant your application the permissions it requested."),h(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),h(e,"user-disabled","The user account has been disabled by an administrator."),h(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),h(e,"user-signed-out",""),h(e,"weak-password","The password must be 6 characters long or more."),h(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),h(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},Yt=Gt,Jt=new B("auth","Firebase",Gt()),Xt=new ye("@firebase/auth");function Zt(e){if(Xt.logLevel<=le.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Xt.error.apply(Xt,["Auth (".concat(tt,"): ").concat(e)].concat(n))}}function $t(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw rn.apply(void 0,[e].concat(n))}function en(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return rn.apply(void 0,[e].concat(n))}function tn(e,t,n){var r=Object.assign(Object.assign({},Yt()),h({},t,n));return new B("auth","Firebase",r).create(t,{appName:e.name})}function nn(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&$t(e,"argument-error"),tn(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function rn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=re(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(re(o)))}return Jt.create.apply(Jt,[e].concat(n))}function an(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw rn.apply(void 0,[t].concat(r))}}function on(e){var t="INTERNAL ASSERTION FAILED: "+e;throw Zt(t),new Error(t)}function sn(e,t){e||on(t)}var un=new Map;function cn(e){sn(e instanceof Function,"Expected a class definition");var t=un.get(e);return t?(sn(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,un.set(e,t),t)}function ln(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function fn(){return"http:"===hn()||"https:"===hn()}function hn(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var dn=function(){function e(t,n){d(this,e),this.shortDelay=t,this.longDelay=n,sn(n>t,"Short delay should be less than long delay!"),this.isMobile=L()||U()}return v(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(fn()||F()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function pn(e,t){sn(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var vn=function(){function e(){d(this,e)}return v(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void on("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void on("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void on("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),mn=(h(Lt={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),h(Lt,"MISSING_CUSTOM_TOKEN","internal-error"),h(Lt,"INVALID_IDENTIFIER","invalid-email"),h(Lt,"MISSING_CONTINUE_URI","internal-error"),h(Lt,"INVALID_PASSWORD","wrong-password"),h(Lt,"MISSING_PASSWORD","internal-error"),h(Lt,"EMAIL_EXISTS","email-already-in-use"),h(Lt,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),h(Lt,"INVALID_IDP_RESPONSE","invalid-credential"),h(Lt,"INVALID_PENDING_TOKEN","invalid-credential"),h(Lt,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),h(Lt,"MISSING_REQ_TYPE","internal-error"),h(Lt,"EMAIL_NOT_FOUND","user-not-found"),h(Lt,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),h(Lt,"EXPIRED_OOB_CODE","expired-action-code"),h(Lt,"INVALID_OOB_CODE","invalid-action-code"),h(Lt,"MISSING_OOB_CODE","internal-error"),h(Lt,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),h(Lt,"INVALID_ID_TOKEN","invalid-user-token"),h(Lt,"TOKEN_EXPIRED","user-token-expired"),h(Lt,"USER_NOT_FOUND","user-token-expired"),h(Lt,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),h(Lt,"INVALID_CODE","invalid-verification-code"),h(Lt,"INVALID_SESSION_INFO","invalid-verification-id"),h(Lt,"INVALID_TEMPORARY_PROOF","invalid-credential"),h(Lt,"MISSING_SESSION_INFO","missing-verification-id"),h(Lt,"SESSION_EXPIRED","code-expired"),h(Lt,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),h(Lt,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),h(Lt,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),h(Lt,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),h(Lt,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),h(Lt,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),h(Lt,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),h(Lt,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),h(Lt,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),h(Lt,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),h(Lt,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),Lt),yn=new dn(3e4,6e4);function gn(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function bn(e,t,n,r){return kn.apply(this,arguments)}function kn(){return kn=ae(te().mark((function e(t,n,r,i){var a,o=arguments;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",wn(t,a,ae(te().mark((function e(){var a,o,s,u;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),s=H(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(u=e.sent)["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",vn.fetch()(En(t,t.config.apiHost,r,s),Object.assign({method:n,headers:u,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),kn.apply(this,arguments)}function wn(e,t,n){return xn.apply(this,arguments)}function xn(){return xn=ae(te().mark((function e(t,n,r){var i,a,o,s,u,c,l,h,d,p;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},mn),n),e.prev=2,a=new An(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(s=e.sent))){e.next=13;break}throw Tn(t,"account-exists-with-different-credential",s);case 13:if(!o.ok||"errorMessage"in s){e.next=17;break}return e.abrupt("return",s);case 17:if(u=o.ok?s.errorMessage:s.error.message,c=u.split(" : "),l=f(c,2),h=l[0],d=l[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==h){e.next=23;break}throw Tn(t,"credential-already-in-use",s);case 23:if("EMAIL_EXISTS"!==h){e.next=27;break}throw Tn(t,"email-already-in-use",s);case 27:if("USER_DISABLED"!==h){e.next=29;break}throw Tn(t,"user-disabled",s);case 29:if(p=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-"),!d){e.next=34;break}throw tn(t,p,d);case 34:$t(t,p);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof j)){e.next=41;break}throw e.t0;case 41:$t(t,"network-request-failed");case 42:case"end":return e.stop()}}),e,null,[[2,37]])}))),xn.apply(this,arguments)}function In(e,t,n,r){return _n.apply(this,arguments)}function _n(){return _n=ae(te().mark((function e(t,n,r,i){var a,o,s=arguments;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>4&&void 0!==s[4]?s[4]:{},e.next=3,bn(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&$t(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),_n.apply(this,arguments)}function En(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?pn(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var An=function(){function e(t){var n=this;d(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(en(n.auth,"network-request-failed"))}),yn.get())}))}return v(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function Tn(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=en(e,t,r);return i.customData._tokenResponse=n,i}function Sn(e,t){return On.apply(this,arguments)}function On(){return On=ae(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",bn(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)}))),On.apply(this,arguments)}function Cn(e,t){return Nn.apply(this,arguments)}function Nn(){return Nn=ae(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",bn(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Nn.apply(this,arguments)}function Pn(e,t){return Dn.apply(this,arguments)}function Dn(){return Dn=ae(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",bn(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)}))),Dn.apply(this,arguments)}function Rn(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function Ln(){return Ln=ae(te().mark((function e(t){var n,r,i,a,o,s,u=arguments;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]&&u[1],r=ee(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,an((a=Fn(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,s=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:Rn(Mn(a.auth_time)),issuedAtTime:Rn(Mn(a.iat)),expirationTime:Rn(Mn(a.exp)),signInProvider:s||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),Ln.apply(this,arguments)}function Mn(e){return 1e3*Number(e)}function Fn(e){var t=f(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return Zt("JWT malformed, contained fewer than 3 sections"),null;try{var a=C(r);return a?JSON.parse(a):(Zt("Failed to decode base64 JWT payload"),null)}catch(o){return Zt("Caught error parsing JWT payload as JSON",o),null}}function Un(e,t){return Vn.apply(this,arguments)}function Vn(){return Vn=ae(te().mark((function e(t,n){var r=arguments;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof j&&qn(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),Vn.apply(this,arguments)}function qn(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var jn=function(){function e(t){d(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return v(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(ae(te().mark((function t(){return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=ae(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),Bn=function(){function e(t,n){d(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return v(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=Rn(this.lastLoginAt),this.creationTime=Rn(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function zn(e){return Kn.apply(this,arguments)}function Kn(){return Kn=ae(te().mark((function e(t){var n,r,i,a,o,s,u,c,l,f,h;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,Un(t,Pn(r,{idToken:i}));case 6:an(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),s=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?Gn(o.providerUserInfo):[],u=Wn(t.providerData,s),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===u||void 0===u?void 0:u.length),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Bn(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),Kn.apply(this,arguments)}function Qn(){return(Qn=ae(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ee(t),e.next=3,zn(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wn(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(re(n),re(t))}function Gn(e){return e.map((function(e){var t=e.providerId,n=Rt(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function Hn(e,t){return Yn.apply(this,arguments)}function Yn(){return Yn=ae(te().mark((function e(t,n){var r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wn(t,{},ae(te().mark((function e(){var r,i,a,o,s,u;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=H({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,s=En(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(u=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",vn.fetch()(s,{method:"POST",headers:u,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)}))),Yn.apply(this,arguments)}var Jn=function(){function e(){d(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return v(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){an(e.idToken,"internal-error"),an("undefined"!==typeof e.idToken,"internal-error"),an("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=Fn(e);return an(t,"internal-error"),an("undefined"!==typeof t.exp,"internal-error"),an("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=ae(te().mark((function e(t){var n,r=arguments;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],an(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=ae(te().mark((function e(t,n){var r,i,a,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Hn(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return on("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(an("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(an("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(an("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function Xn(e,t){an("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var Zn=function(){function e(t){d(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=Rt(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new jn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?re(a.providerData):[],this.metadata=new Bn(a.createdAt||void 0,a.lastLoginAt||void 0)}return v(e,[{key:"getIdToken",value:function(){var e=ae(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Un(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(an(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return Ln.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return Qn.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(an(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){an(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=ae(te().mark((function e(t){var n,r,i=arguments;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,zn(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=ae(te().mark((function e(){var t;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,Un(this,Sn(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,s,u,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(s=n.tenantId)&&void 0!==s?s:void 0,m=null!==(u=n._redirectEventId)&&void 0!==u?u:void 0,y=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,b=n.uid,k=n.emailVerified,w=n.isAnonymous,x=n.providerData,I=n.stsTokenManager;an(b&&I,t,"internal-error");var _=Jn.fromJSON(this.name,I);an("string"===typeof b,t,"internal-error"),Xn(f,t.name),Xn(h,t.name),an("boolean"===typeof k,t,"internal-error"),an("boolean"===typeof w,t,"internal-error"),Xn(d,t.name),Xn(p,t.name),Xn(v,t.name),Xn(m,t.name),Xn(y,t.name),Xn(g,t.name);var E=new e({uid:b,auth:t,email:h,emailVerified:k,displayName:f,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:_,createdAt:y,lastLoginAt:g});return x&&Array.isArray(x)&&(E.providerData=x.map((function(e){return Object.assign({},e)}))),m&&(E._redirectEventId=m),E}},{key:"_fromIdTokenResponse",value:function(){var t=ae(te().mark((function t(n,r){var i,a,o,s=arguments;return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=s.length>2&&void 0!==s[2]&&s[2],(a=new Jn).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,zn(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),$n=function(){function e(){d(this,e),this.type="NONE",this.storage={}}return v(e,[{key:"_isAvailable",value:function(){var e=ae(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=ae(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=ae(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=ae(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();$n.type="NONE";var er=$n;function tr(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var nr=function(){function e(t,n,r){d(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=tr(this.userKey,a.apiKey,o),this.fullPersistenceKey=tr("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return v(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=ae(te().mark((function e(){var t;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?Zn._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=ae(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=ae(te().mark((function t(n,r){var i,a,o,s,u,c,l,f,h,d,p,v=arguments;return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(cn(er),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=ae(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||cn(er),s=tr(i,n.config.apiKey,n.name),u=null,c=m(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return f=l.value,t.prev=14,t.next=17,f._get(s);case 17:if(!(h=t.sent)){t.next=23;break}return d=Zn._fromJSON(n,h),f!==o&&(u=d),o=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!u){t.next=44;break}return t.next=44,o._set(s,u.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=ae(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(s);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function rr(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(sr(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(ir(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(cr(t))return"Blackberry";if(lr(t))return"Webos";if(ar(t))return"Safari";if((t.includes("chrome/")||or(t))&&!t.includes("edge/"))return"Chrome";if(ur(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function ir(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R();return/firefox\//i.test(e)}function ar(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function or(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R();return/crios\//i.test(e)}function sr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R();return/iemobile/i.test(e)}function ur(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R();return/android/i.test(e)}function cr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R();return/blackberry/i.test(e)}function lr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R();return/webos/i.test(e)}function fr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R();return/iphone|ipad|ipod/i.test(e)}function hr(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R();return fr(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function dr(){return V()&&10===document.documentMode}function pr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R();return fr(e)||ur(e)||lr(e)||cr(e)||/windows phone/i.test(e)||sr(e)}function vr(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=rr(R());break;case"Worker":t="".concat(rr(R()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(tt,"/").concat(r)}var mr=function(){function e(t){d(this,e),this.auth=t,this.queue=[]}return v(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=ae(te().mark((function e(t){var n,r,i,a,o,s,u;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:n=[],e.prev=3,r=m(this.queue),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=14;break}return a=i.value,e.next=11,a(t);case 11:a.onAbort&&n.push(a.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),n.reverse(),o=m(n);try{for(o.s();!(s=o.n()).done;){u=s.value;try{u()}catch(c){}}}catch(l){o.e(l)}finally{o.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:e.t1.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),yr=function(){function e(t,n,r){d(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new br(this),this.idTokenSubscription=new br(this),this.beforeStateQueue=new mr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Jt,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return v(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=cn(t)),this._initializationPromise=this.queue(ae(te().mark((function r(){var i,a;return te().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,nr.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=ae(te().mark((function e(){var t;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=ae(te().mark((function e(t){var n,r,i,a,o,s,u;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,s=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:u=e.sent,o&&o!==s||!(null===u||void 0===u?void 0:u.user)||(i=u.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return an(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=ae(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=ae(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,zn(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=ae(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=ae(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?ee(t):null)&&an(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=ae(te().mark((function e(t){var n,r=this,i=arguments;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&an(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(ae(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=ae(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(ae(te().mark((function n(){return te().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(cn(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new B("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=ae(te().mark((function e(t,n){var r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=ae(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return an(n=t&&cn(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,nr.create(this,[cn(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=ae(te().mark((function e(t){var n,r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(ae(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=ae(te().mark((function e(t){var n=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(ae(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return an(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=ae(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,!t){e.next=7;break}return e.next=5,this.assertedPersistence.setCurrentUser(t);case 5:e.next=9;break;case 7:return e.next=9,this.assertedPersistence.removeCurrentUser();case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return an(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=vr(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=ae(te().mark((function e(){var t,n,r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=h({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function gr(e){return ee(e)}var br=function(){function e(t){var n=this;d(this,e),this.auth=t,this.observer=null,this.addObserver=X((function(e){return n.observer=e}))}return v(e,[{key:"next",get:function(){return an(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function kr(e,t,n){var r=gr(e);an(r._canInitEmulator,r,"emulator-config-failed"),an(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=wr(t),o=function(e){var t=wr(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:xr(r.substr(a.length+1))}}var o=f(r.split(":"),2);return{host:o[0],port:xr(o[1])}}(t),s=o.host,u=o.port,c=null===u?"":":".concat(u);r.config.emulator={url:"".concat(a,"//").concat(s).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:u,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function wr(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function xr(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var Ir=function(){function e(t,n){d(this,e),this.providerId=t,this.signInMethod=n}return v(e,[{key:"toJSON",value:function(){return on("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return on("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return on("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return on("not implemented")}}]),e}();function _r(e,t){return Er.apply(this,arguments)}function Er(){return Er=ae(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",bn(t,"POST","/v1/accounts:resetPassword",gn(t,n)));case 1:case"end":return e.stop()}}),e)}))),Er.apply(this,arguments)}function Ar(e,t){return Tr.apply(this,arguments)}function Tr(){return Tr=ae(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",bn(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Tr.apply(this,arguments)}function Sr(e,t){return Or.apply(this,arguments)}function Or(){return Or=ae(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",bn(t,"POST","/v1/accounts:update",gn(t,n)));case 1:case"end":return e.stop()}}),e)}))),Or.apply(this,arguments)}function Cr(e,t){return Nr.apply(this,arguments)}function Nr(){return Nr=ae(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",In(t,"POST","/v1/accounts:signInWithPassword",gn(t,n)));case 1:case"end":return e.stop()}}),e)}))),Nr.apply(this,arguments)}function Pr(e,t){return Dr.apply(this,arguments)}function Dr(){return Dr=ae(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",bn(t,"POST","/v1/accounts:sendOobCode",gn(t,n)));case 1:case"end":return e.stop()}}),e)}))),Dr.apply(this,arguments)}function Rr(e,t){return Lr.apply(this,arguments)}function Lr(){return Lr=ae(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Pr(t,n));case 1:case"end":return e.stop()}}),e)}))),Lr.apply(this,arguments)}function Mr(e,t){return Fr.apply(this,arguments)}function Fr(){return Fr=ae(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Pr(t,n));case 1:case"end":return e.stop()}}),e)}))),Fr.apply(this,arguments)}function Ur(e,t){return Vr.apply(this,arguments)}function Vr(){return Vr=ae(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Pr(t,n));case 1:case"end":return e.stop()}}),e)}))),Vr.apply(this,arguments)}function qr(e,t){return jr.apply(this,arguments)}function jr(){return jr=ae(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Pr(t,n));case 1:case"end":return e.stop()}}),e)}))),jr.apply(this,arguments)}function Br(e,t){return zr.apply(this,arguments)}function zr(){return zr=ae(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",In(t,"POST","/v1/accounts:signInWithEmailLink",gn(t,n)));case 1:case"end":return e.stop()}}),e)}))),zr.apply(this,arguments)}function Kr(e,t){return Qr.apply(this,arguments)}function Qr(){return Qr=ae(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",In(t,"POST","/v1/accounts:signInWithEmailLink",gn(t,n)));case 1:case"end":return e.stop()}}),e)}))),Qr.apply(this,arguments)}var Wr=function(e){b(n,e);var t=_(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return d(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return v(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=ae(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Cr(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Br(t,{email:this._email,oobCode:this._password}));case 5:$t(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=ae(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Ar(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Kr(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:$t(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(Ir);function Gr(e,t){return Hr.apply(this,arguments)}function Hr(){return Hr=ae(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",In(t,"POST","/v1/accounts:signInWithIdp",gn(t,n)));case 1:case"end":return e.stop()}}),e)}))),Hr.apply(this,arguments)}var Yr=function(e){b(n,e);var t=_(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return v(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return Gr(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Gr(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Gr(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=H(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):$t("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=Rt(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(Ir);function Jr(e,t){return Xr.apply(this,arguments)}function Xr(){return Xr=ae(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",bn(t,"POST","/v1/accounts:sendVerificationCode",gn(t,n)));case 1:case"end":return e.stop()}}),e)}))),Xr.apply(this,arguments)}function Zr(){return Zr=ae(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",In(t,"POST","/v1/accounts:signInWithPhoneNumber",gn(t,n)));case 1:case"end":return e.stop()}}),e)}))),Zr.apply(this,arguments)}function $r(){return $r=ae(te().mark((function e(t,n){var r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,In(t,"POST","/v1/accounts:signInWithPhoneNumber",gn(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw Tn(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),$r.apply(this,arguments)}var ei=h({},"USER_NOT_FOUND","user-not-found");function ti(){return ti=ae(te().mark((function e(t,n){var r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",In(t,"POST","/v1/accounts:signInWithPhoneNumber",gn(t,r),ei));case 2:case"end":return e.stop()}}),e)}))),ti.apply(this,arguments)}var ni=function(e){b(n,e);var t=_(n);function n(e){var r;return d(this,n),(r=t.call(this,"phone","phone")).params=e,r}return v(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return Zr.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return $r.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return ti.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(Ir);var ri=function(){function e(t){var n,r,i,a,o,s;d(this,e);var u=Y(J(t)),c=null!==(n=u.apiKey)&&void 0!==n?n:null,l=null!==(r=u.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=u.mode)&&void 0!==i?i:null);an(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=u.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=u.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(s=u.tenantId)&&void 0!==s?s:null}return v(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=Y(J(e)).link,n=t?Y(J(t)).deep_link_id:null,r=Y(J(e)).deep_link_id;return(r?Y(J(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(lx){return null}}}]),e}();var ii=function(){function e(){d(this,e),this.providerId=e.PROVIDER_ID}return v(e,null,[{key:"credential",value:function(e,t){return Wr._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=ri.parseLink(t);return an(n,"argument-error"),Wr._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();ii.PROVIDER_ID="password",ii.EMAIL_PASSWORD_SIGN_IN_METHOD="password",ii.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var ai=function(){function e(t){d(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return v(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),oi=function(e){b(n,e);var t=_(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).scopes=[],e}return v(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return re(this.scopes)}}]),n}(ai),si=function(e){b(n,e);var t=_(n);function n(){return d(this,n),t.apply(this,arguments)}return v(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return an(e.idToken||e.accessToken,"argument-error"),Yr._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return an("providerId"in t&&"signInMethod"in t,"argument-error"),Yr._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,s=t.nonce,u=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!u)return null;try{return new n(u)._credential({idToken:r,accessToken:i,nonce:s,pendingToken:o})}catch(c){return null}}}]),n}(oi),ui=function(e){b(n,e);var t=_(n);function n(){return d(this,n),t.call(this,"facebook.com")}return v(n,null,[{key:"credential",value:function(e){return Yr._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(lx){return null}}}]),n}(oi);ui.FACEBOOK_SIGN_IN_METHOD="facebook.com",ui.PROVIDER_ID="facebook.com";var ci=function(e){b(n,e);var t=_(n);function n(){var e;return d(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return v(n,null,[{key:"credential",value:function(e,t){return Yr._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(lx){return null}}}]),n}(oi);ci.GOOGLE_SIGN_IN_METHOD="google.com",ci.PROVIDER_ID="google.com";var li=function(e){b(n,e);var t=_(n);function n(){return d(this,n),t.call(this,"github.com")}return v(n,null,[{key:"credential",value:function(e){return Yr._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(lx){return null}}}]),n}(oi);li.GITHUB_SIGN_IN_METHOD="github.com",li.PROVIDER_ID="github.com";var fi=function(e){b(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return v(n,[{key:"_getIdTokenResponse",value:function(e){return Gr(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Gr(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Gr(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(Ir),hi=function(e){b(n,e);var t=_(n);function n(e){return d(this,n),an(e.startsWith("saml."),"argument-error"),t.call(this,e)}return v(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=fi.fromJSON(e);return an(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return fi._create(r,n)}catch(i){return null}}}]),n}(ai),di=function(e){b(n,e);var t=_(n);function n(){return d(this,n),t.call(this,"twitter.com")}return v(n,null,[{key:"credential",value:function(e,t){return Yr._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(lx){return null}}}]),n}(oi);function pi(e,t){return vi.apply(this,arguments)}function vi(){return vi=ae(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",In(t,"POST","/v1/accounts:signUp",gn(t,n)));case 1:case"end":return e.stop()}}),e)}))),vi.apply(this,arguments)}di.TWITTER_SIGN_IN_METHOD="twitter.com",di.PROVIDER_ID="twitter.com";var mi=function(){function e(t){d(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return v(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=ae(te().mark((function t(n,r,i){var a,o,s,u,c=arguments;return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,Zn._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,s=yi(i),u=new e({user:o,providerId:s,_tokenResponse:i,operationType:r}),t.abrupt("return",u);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=ae(te().mark((function t(n,r,i){var a;return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=yi(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function yi(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function gi(){return gi=ae(te().mark((function e(t){var n,r,i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=gr(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new mi({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,pi(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,mi._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),gi.apply(this,arguments)}var bi=function(e){b(n,e);var t=_(n);function n(e,r,i,a){var o,s;return d(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(y(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return v(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(j);function ki(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw bi._fromErrorAndOperation(e,n,t,r);throw n}))}function wi(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function xi(e,t){return Ii.apply(this,arguments)}function Ii(){return Ii=ae(te().mark((function e(t,n){var r,i,a,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ee(t),e.next=3,Ai(!0,r,n);case 3:return e.t0=Cn,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=wi(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),Ii.apply(this,arguments)}function _i(e,t){return Ei.apply(this,arguments)}function Ei(){return Ei=ae(te().mark((function e(t,n){var r,i,a=arguments;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=Un,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",mi._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),Ei.apply(this,arguments)}function Ai(e,t,n){return Ti.apply(this,arguments)}function Ti(){return(Ti=ae(te().mark((function e(t,n,r){var i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zn(n);case 2:i=wi(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",an(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Si(e,t){return Oi.apply(this,arguments)}function Oi(){return Oi=ae(te().mark((function e(t,n){var r,i,a,o,s,u,c=arguments;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,Un(t,ki(i,a,n,t),r);case 6:return an((o=e.sent).idToken,i,"internal-error"),an(s=Fn(o.idToken),i,"internal-error"),u=s.sub,an(t.uid===u,i,"user-mismatch"),e.abrupt("return",mi._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&$t(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),Oi.apply(this,arguments)}function Ci(e,t){return Ni.apply(this,arguments)}function Ni(){return Ni=ae(te().mark((function e(t,n){var r,i,a,o,s=arguments;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i="signIn",e.next=4,ki(t,i,n);case 4:return a=e.sent,e.next=7,mi._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),Ni.apply(this,arguments)}function Pi(e,t){return Di.apply(this,arguments)}function Di(){return Di=ae(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ci(gr(t),n));case 1:case"end":return e.stop()}}),e)}))),Di.apply(this,arguments)}function Ri(e,t){return Li.apply(this,arguments)}function Li(){return(Li=ae(te().mark((function e(t,n){var r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ee(t),e.next=3,Ai(!1,r,n.providerId);case 3:return e.abrupt("return",_i(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Mi(e,t){return Fi.apply(this,arguments)}function Fi(){return(Fi=ae(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Si(ee(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ui(e,t){return Vi.apply(this,arguments)}function Vi(){return Vi=ae(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",In(t,"POST","/v1/accounts:signInWithCustomToken",gn(t,n)));case 1:case"end":return e.stop()}}),e)}))),Vi.apply(this,arguments)}function qi(){return qi=ae(te().mark((function e(t,n){var r,i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=gr(t),e.next=3,Ui(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,mi._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)}))),qi.apply(this,arguments)}var ji=function(){function e(t,n){d(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return v(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?Bi._fromServerResponse(e,t):$t(e,"internal-error")}}]),e}(),Bi=function(e){b(n,e);var t=_(n);function n(e){var r;return d(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return v(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(ji);function zi(e,t,n){var r;an((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),an("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(an(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(an(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function Ki(){return Ki=ae(te().mark((function e(t,n,r){var i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ee(t),a={requestType:"PASSWORD_RESET",email:n},r&&zi(i,a,r),e.next=5,Mr(i,a);case 5:case"end":return e.stop()}}),e)}))),Ki.apply(this,arguments)}function Qi(){return Qi=ae(te().mark((function e(t,n,r){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_r(ee(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)}))),Qi.apply(this,arguments)}function Wi(){return Wi=ae(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Sr(ee(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)}))),Wi.apply(this,arguments)}function Gi(e,t){return Hi.apply(this,arguments)}function Hi(){return Hi=ae(te().mark((function e(t,n){var r,i,a,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ee(t),e.next=3,_r(r,{oobCode:n});case 3:i=e.sent,an(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return an(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:an(i.mfaInfo,r,"internal-error");case 13:an(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=ji._fromServerResponse(gr(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)}))),Hi.apply(this,arguments)}function Yi(){return Yi=ae(te().mark((function e(t,n){var r,i;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Gi(ee(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)}))),Yi.apply(this,arguments)}function Ji(e,t,n){return Xi.apply(this,arguments)}function Xi(){return Xi=ae(te().mark((function e(t,n,r){var i,a,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=gr(t),e.next=3,pi(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,mi._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)}))),Xi.apply(this,arguments)}function Zi(){return Zi=ae(te().mark((function e(t,n,r){var i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ee(t),a={requestType:"EMAIL_SIGNIN",email:n},an(r.handleCodeInApp,i,"argument-error"),r&&zi(i,a,r),e.next=6,Ur(i,a);case 6:case"end":return e.stop()}}),e)}))),Zi.apply(this,arguments)}function $i(){return $i=ae(te().mark((function e(t,n,r){var i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ee(t),an((a=ii.credentialWithLink(n,r||ln()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",Pi(i,a));case 4:case"end":return e.stop()}}),e)}))),$i.apply(this,arguments)}function ea(e,t){return ta.apply(this,arguments)}function ta(){return ta=ae(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",bn(t,"POST","/v1/accounts:createAuthUri",gn(t,n)));case 1:case"end":return e.stop()}}),e)}))),ta.apply(this,arguments)}function na(){return na=ae(te().mark((function e(t,n){var r,i,a,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=fn()?ln():"http://localhost",i={identifier:n,continueUri:r},e.next=4,ea(ee(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)}))),na.apply(this,arguments)}function ra(){return(ra=ae(te().mark((function e(t,n){var r,i,a,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ee(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&zi(r.auth,a,n),e.next=8,Rr(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ia(){return(ia=ae(te().mark((function e(t,n,r){var i,a,o,s;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ee(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&zi(i.auth,o,r),e.next=8,qr(i.auth,o);case 8:if(s=e.sent,s.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function aa(e,t){return oa.apply(this,arguments)}function oa(){return oa=ae(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",bn(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),oa.apply(this,arguments)}function sa(){return(sa=ae(te().mark((function e(t,n){var r,i,a,o,s,u,c;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=ee(t),e.next=6,a.getIdToken();case 6:return o=e.sent,s={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,Un(a,aa(a.auth,s));case 10:return u=e.sent,a.displayName=u.displayName||null,a.photoURL=u.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(u);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ua(e,t,n){return ca.apply(this,arguments)}function ca(){return ca=ae(te().mark((function e(t,n,r){var i,a,o,s;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,Un(t,Ar(i,o));case 9:return s=e.sent,e.next=12,t._updateTokensIfNecessary(s,!0);case 12:case"end":return e.stop()}}),e)}))),ca.apply(this,arguments)}var la=v((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};d(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),fa=function(e){b(n,e);var t=_(n);function n(e,r,i,a){var o;return d(this,n),(o=t.call(this,e,r,i)).username=a,o}return v(n)}(la),ha=function(e){b(n,e);var t=_(n);function n(e,r){return d(this,n),t.call(this,e,"facebook.com",r)}return v(n)}(la),da=function(e){b(n,e);var t=_(n);function n(e,r){return d(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return v(n)}(fa),pa=function(e){b(n,e);var t=_(n);function n(e,r){return d(this,n),t.call(this,e,"google.com",r)}return v(n)}(la),va=function(e){b(n,e);var t=_(n);function n(e,r,i){return d(this,n),t.call(this,e,"twitter.com",r,i)}return v(n)}(fa);function ma(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=Fn(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new la(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new ha(a,i);case"github.com":return new da(a,i);case"google.com":return new pa(a,i);case"twitter.com":return new va(a,i,e.screenName||null);case"custom":case"anonymous":return new la(a,null);default:return new la(a,r,i)}}(n)}var ya=function(){function e(t,n){d(this,e),this.type=t,this.credential=n}return v(e,[{key:"toJSON",value:function(){return{multiFactorSession:h({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t){return new e("enroll",t)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),ga=function(){function e(t,n,r){d(this,e),this.session=t,this.hints=n,this.signInResolver=r}return v(e,[{key:"resolveSignIn",value:function(){var e=ae(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=gr(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return ji._fromServerResponse(r,e)}));an(i.mfaPendingCredential,r,"internal-error");var o=ya._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=ae(te().mark((function e(t){var a,s,u;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,s=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,mi._fromIdTokenResponse(r,n.operationType,s);case 11:return u=e.sent,e.next=14,r._updateCurrentUser(u.user);case 14:return e.abrupt("return",u);case 15:return an(n.user,r,"internal-error"),e.abrupt("return",mi._forOperation(n.user,n.operationType,s));case 17:$t(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function ba(e,t){return bn(e,"POST","/v2/accounts/mfaEnrollment:start",gn(e,t))}function ka(e,t){return bn(e,"POST","/v2/accounts/mfaEnrollment:withdraw",gn(e,t))}var wa=function(){function e(t){var n=this;d(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return ji._fromServerResponse(t.auth,e)})))}))}return v(e,[{key:"getSession",value:function(){var e=ae(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=ya,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=ae(te().mark((function e(t,n){var r,i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,Un(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=ae(te().mark((function e(t){var n,r,i;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.next=6,Un(this.user,ka(this.user.auth,{idToken:r,mfaEnrollmentId:n}));case 6:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=10,this.user._updateTokensIfNecessary(i);case 10:return e.prev=10,e.next=13,this.user.reload();case 13:e.next=19;break;case 15:if(e.prev=15,e.t0=e.catch(10),e.t0.code==="auth/".concat("user-token-expired")){e.next=19;break}throw e.t0;case 19:case"end":return e.stop()}}),e,this,[[10,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),xa=new WeakMap;var Ia="__sak",_a=function(){function e(t,n){d(this,e),this.storageRetriever=t,this.type=n}return v(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(Ia,"1"),this.storage.removeItem(Ia),Promise.resolve(!0)):Promise.resolve(!1)}catch(lx){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var Ea=function(e){b(n,e);var t=_(n);function n(){var e;return d(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=R();return ar(e)||fr(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=pr(),e._shouldAllowMigration=!0,e}return v(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);dr()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=ae(te().mark((function e(t,r){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Dt(k(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=ae(te().mark((function e(t){var r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Dt(k(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=ae(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Dt(k(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(_a);Ea.type="LOCAL";var Aa=Ea,Ta=function(e){b(n,e);var t=_(n);function n(){return d(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return v(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(_a);Ta.type="SESSION";var Sa=Ta;function Oa(e){return Promise.all(e.map(function(){var e=ae(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var Ca=function(){function e(t){d(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return v(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=ae(te().mark((function e(t){var n,r,i,a,o,s,u,c;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(s=this.handlersMap[a])||void 0===s?void 0:s.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),u=Array.from(s).map(function(){var e=ae(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,Oa(u);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function Na(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Ca.receivers=[];var Pa=function(){function e(t){d(this,e),this.target=t,this.handlers=new Set}return v(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=ae(te().mark((function e(t,n){var r,i,a,o,s=this,u=arguments;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>2&&void 0!==u[2]?u[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,u){var c=Na("",20);i.port1.start();var l=setTimeout((function(){u(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){u(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),u(new Error("invalid_response"))}}},s.handlers.add(o),i.port1.addEventListener("message",o.onMessage),s.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&s.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function Da(){return window}function Ra(){return"undefined"!==typeof Da().WorkerGlobalScope&&"function"===typeof Da().importScripts}function La(){return Ma.apply(this,arguments)}function Ma(){return(Ma=ae(te().mark((function e(){var t;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function Fa(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var Ua="firebaseLocalStorageDb",Va="firebaseLocalStorage",qa="fbase_key",ja=function(){function e(t){d(this,e),this.request=t}return v(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function Ba(e,t){return e.transaction([Va],t?"readwrite":"readonly").objectStore(Va)}function za(){var e=indexedDB.deleteDatabase(Ua);return new ja(e).toPromise()}function Ka(){var e=indexedDB.open(Ua,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(Va,{keyPath:qa})}catch(r){n(r)}})),e.addEventListener("success",ae(te().mark((function n(){var r;return te().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(Va)){n.next=12;break}return r.close(),n.next=5,za();case 5:return n.t0=t,n.next=8,Ka();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function Qa(e,t,n){return Wa.apply(this,arguments)}function Wa(){return Wa=ae(te().mark((function e(t,n,r){var i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Ba(t,!0).put((h(i={},qa,n),h(i,"value",r),i)),e.abrupt("return",new ja(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),Wa.apply(this,arguments)}function Ga(e,t){return Ha.apply(this,arguments)}function Ha(){return Ha=ae(te().mark((function e(t,n){var r,i;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ba(t,!1).get(n),e.next=3,new ja(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),Ha.apply(this,arguments)}function Ya(e,t){var n=Ba(e,!0).delete(t);return new ja(n).toPromise()}var Ja=function(){function e(){d(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return v(e,[{key:"_openDb",value:function(){var e=ae(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,Ka();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=ae(te().mark((function e(t){var n,r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=ae(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ra()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=ae(te().mark((function e(){var t=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=Ca._getInstance(Ra()?self:null),this.receiver._subscribe("keyChanged",function(){var e=ae(te().mark((function e(n,r){var i;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=ae(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=ae(te().mark((function e(){var t,n,r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,La();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new Pa(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=ae(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&Fa()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=ae(te().mark((function e(){var t;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,Ka();case 5:return t=e.sent,e.next=8,Qa(t,Ia,"1");case 8:return e.next=10,Ya(t,Ia);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=ae(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=ae(te().mark((function e(t,n){var r=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(ae(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return Qa(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=ae(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return Ga(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=ae(te().mark((function e(t){var n=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(ae(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return Ya(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=ae(te().mark((function e(){var t,n,r,i,a,o,s,u,c,l,f;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=Ba(e,!1).getAll();return new ja(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=m(t);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.fbase_key,u=o.value,r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(u)&&(this.notifyListeners(s,u),n.push(s))}catch(h){i.e(h)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(ae(te().mark((function t(){return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();Ja.type="LOCAL";var Xa=Ja;function Za(e,t){return bn(e,"POST","/v2/accounts/mfaSignIn:start",gn(e,t))}function $a(e){return eo.apply(this,arguments)}function eo(){return eo=ae(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bn(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)}))),eo.apply(this,arguments)}function to(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=en("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function no(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var ro=1e12,io=function(){function e(t){d(this,e),this.auth=t,this.counter=ro,this._widgets=new Map}return v(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new ao(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||ro;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||ro;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=ae(te().mark((function e(t){var n,r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||ro,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),ao=function(){function e(t,n,r){var i=this;d(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;an(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return v(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var oo=no("rcb"),so=new dn(3e4,6e4),uo="https://www.google.com/recaptcha/api.js?",co=function(){function e(){d(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Da().grecaptcha}return v(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return an(lo(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(Da().grecaptcha):new Promise((function(r,i){var a=Da().setTimeout((function(){i(en(e,"network-request-failed"))}),so.get());Da()[oo]=function(){Da().clearTimeout(a),delete Da()[oo];var o=Da().grecaptcha;if(o){var s=o.render;o.render=function(e,n){var r=s(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(en(e,"internal-error"))},to("".concat(uo,"?").concat(H({onload:oo,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(en(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){return!!Da().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();function lo(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}var fo=function(){function e(){d(this,e)}return v(e,[{key:"load",value:function(){var e=ae(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new io(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),ho="recaptcha",po={theme:"light",type:"image"},vo=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},po),r=arguments.length>2?arguments[2]:void 0;d(this,e),this.parameters=n,this.type=ho,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=gr(r),this.isInvisible="invisible"===this.parameters.size,an("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;an(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new fo:new co,this.validateStartingState()}return v(e,[{key:"verify",value:function(){var e=ae(te().mark((function e(){var t,n,r,i=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){an(!this.parameters.sitekey,this.auth,"argument-error"),an(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),an("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=Da()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){an(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=ae(te().mark((function e(){var t,n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=ae(te().mark((function e(){var t;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return an(fn()&&!Ra(),this.auth,"internal-error"),e.next=3,mo();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,$a(this.auth);case 8:an(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return an(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function mo(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var yo=function(){function e(t,n){d(this,e),this.verificationId=t,this.onConfirmation=n}return v(e,[{key:"confirm",value:function(e){var t=ni._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function go(){return go=ae(te().mark((function e(t,n,r){var i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=gr(t),e.next=3,xo(i,n,ee(r));case 3:return a=e.sent,e.abrupt("return",new yo(a,(function(e){return Pi(i,e)})));case 5:case"end":return e.stop()}}),e)}))),go.apply(this,arguments)}function bo(e,t,n){return ko.apply(this,arguments)}function ko(){return(ko=ae(te().mark((function e(t,n,r){var i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ee(t),e.next=3,Ai(!1,i,"phone");case 3:return e.next=5,xo(i.auth,n,ee(r));case 5:return a=e.sent,e.abrupt("return",new yo(a,(function(e){return Ri(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wo(){return(wo=ae(te().mark((function e(t,n,r){var i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ee(t),e.next=3,xo(i.auth,n,ee(r));case 3:return a=e.sent,e.abrupt("return",new yo(a,(function(e){return Mi(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xo(e,t,n){return Io.apply(this,arguments)}function Io(){return Io=ae(te().mark((function e(t,n,r){var i,a,o,s,u,c,l,f,h;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,an("string"===typeof a,t,"argument-error"),an(r.type===ho,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(s=o.session,!("phoneNumber"in o)){e.next=17;break}return an("enroll"===s.type,t,"internal-error"),e.next=13,ba(t,{idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return u=e.sent,e.abrupt("return",u.phoneSessionInfo.sessionInfo);case 17:return an("signin"===s.type,t,"internal-error"),an(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,Za(t,{mfaPendingCredential:s.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,Jr(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),Io.apply(this,arguments)}function _o(){return(_o=ae(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_i(ee(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Eo=function(){function e(t){d(this,e),this.providerId=e.PROVIDER_ID,this.auth=gr(t)}return v(e,[{key:"verifyPhoneNumber",value:function(e,t){return xo(this.auth,e,ee(t))}}],[{key:"credential",value:function(e,t){return ni._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?ni._fromTokenResponse(n,r):null}}]),e}();function Ao(e,t){return t?cn(t):(an(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Eo.PROVIDER_ID="phone",Eo.PHONE_SIGN_IN_METHOD="phone";var To=function(e){b(n,e);var t=_(n);function n(e){var r;return d(this,n),(r=t.call(this,"custom","custom")).params=e,r}return v(n,[{key:"_getIdTokenResponse",value:function(e){return Gr(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return Gr(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return Gr(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(Ir);function So(e){return Ci(e.auth,new To(e),e.bypassAuthState)}function Oo(e){var t=e.auth,n=e.user;return an(n,t,"internal-error"),Si(n,new To(e),e.bypassAuthState)}function Co(e){return No.apply(this,arguments)}function No(){return No=ae(te().mark((function e(t){var n,r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,an(r=t.user,n,"internal-error"),e.abrupt("return",_i(r,new To(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)}))),No.apply(this,arguments)}var Po=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];d(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return v(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=ae(te().mark((function t(n,r){return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=ae(te().mark((function e(t){var n,r,i,a,o,s,u;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,s=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return u={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(s)(u);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return So;case"linkViaPopup":case"linkViaRedirect":return Co;case"reauthViaPopup":case"reauthViaRedirect":return Oo;default:$t(this.auth,"internal-error")}}},{key:"resolve",value:function(e){sn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){sn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),Do=new dn(2e3,1e4);function Ro(e,t,n){return Lo.apply(this,arguments)}function Lo(){return Lo=ae(te().mark((function e(t,n,r){var i,a,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=gr(t),nn(t,n,ai),a=Ao(i,r),o=new Vo(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),Lo.apply(this,arguments)}function Mo(){return(Mo=ae(te().mark((function e(t,n,r){var i,a,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return nn((i=ee(t)).auth,n,ai),a=Ao(i.auth,r),o=new Vo(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fo(e,t,n){return Uo.apply(this,arguments)}function Uo(){return(Uo=ae(te().mark((function e(t,n,r){var i,a,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return nn((i=ee(t)).auth,n,ai),a=Ao(i.auth,r),o=new Vo(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Vo=function(e){b(n,e);var t=_(n);function n(e,r,i,a,o){var s;return d(this,n),(s=t.call(this,e,r,a,o)).provider=i,s.authWindow=null,s.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=y(s),s}return v(n,[{key:"executeNotNull",value:function(){var e=ae(te().mark((function e(){var t;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return an(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=ae(te().mark((function e(){var t,n=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return sn(1===this.filter.length,"Popup operations only handle one event"),t=Na(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(en(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(en(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(en(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,Do.get())}()}}]),n}(Po);Vo.currentPopupAction=null;var qo=new Map,jo=function(e){b(n,e);var t=_(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return d(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return v(n,[{key:"execute",value:function(){var e=ae(te().mark((function e(){var t,r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=qo.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,Bo(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,Dt(k(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:qo.set(this.auth._key(),t);case 21:return this.bypassAuthState||qo.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=ae(te().mark((function e(t){var r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",Dt(k(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",Dt(k(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=ae(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(Po);function Bo(e,t){return zo.apply(this,arguments)}function zo(){return zo=ae(te().mark((function e(t,n){var r,i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ho(n),i=Go(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),zo.apply(this,arguments)}function Ko(e,t){return Qo.apply(this,arguments)}function Qo(){return Qo=ae(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Go(t)._set(Ho(n),"true"));case 1:case"end":return e.stop()}}),e)}))),Qo.apply(this,arguments)}function Wo(e,t){qo.set(e._key(),t)}function Go(e){return cn(e._redirectPersistence)}function Ho(e){return tr("pendingRedirect",e.config.apiKey,e.name)}function Yo(e,t,n){return function(e,t,n){return Jo.apply(this,arguments)}(e,t,n)}function Jo(){return Jo=ae(te().mark((function e(t,n,r){var i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=gr(t),nn(t,n,ai),a=Ao(i,r),e.next=5,Ko(a,i);case 5:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 6:case"end":return e.stop()}}),e)}))),Jo.apply(this,arguments)}function Xo(e,t,n){return function(e,t,n){return Zo.apply(this,arguments)}(e,t,n)}function Zo(){return(Zo=ae(te().mark((function e(t,n,r){var i,a,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return nn((i=ee(t)).auth,n,ai),a=Ao(i.auth,r),e.next=5,Ko(a,i.auth);case 5:return e.next=7,as(i);case 7:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $o(e,t,n){return function(e,t,n){return es.apply(this,arguments)}(e,t,n)}function es(){return(es=ae(te().mark((function e(t,n,r){var i,a,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return nn((i=ee(t)).auth,n,ai),a=Ao(i.auth,r),e.next=5,Ai(!1,i,n.providerId);case 5:return e.next=7,Ko(a,i.auth);case 7:return e.next=9,as(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ts(e,t){return ns.apply(this,arguments)}function ns(){return ns=ae(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gr(t)._initializationPromise;case 2:return e.abrupt("return",rs(t,n,!1));case 3:case"end":return e.stop()}}),e)}))),ns.apply(this,arguments)}function rs(e,t){return is.apply(this,arguments)}function is(){return is=ae(te().mark((function e(t,n){var r,i,a,o,s,u=arguments;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i=gr(t),a=Ao(i,n),o=new jo(i,a,r),e.next=6,o.execute();case 6:if(!(s=e.sent)||r){e.next=13;break}return delete s.user._redirectEventId,e.next=11,i._persistUserIfCurrent(s.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",s);case 14:case"end":return e.stop()}}),e)}))),is.apply(this,arguments)}function as(e){return os.apply(this,arguments)}function os(){return(os=ae(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Na("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ss=function(){function e(t){d(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return v(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return cs(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!cs(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(en(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(us(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(us(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function us(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function cs(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function ls(e){return fs.apply(this,arguments)}function fs(){return fs=ae(te().mark((function e(t){var n,r=arguments;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",bn(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),fs.apply(this,arguments)}var hs=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ds=/^https?/;function ps(){return ps=ae(te().mark((function e(t){var n,r,i,a,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,ls(t);case 4:n=e.sent,r=n.authorizedDomains,i=m(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!vs(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:$t(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])}))),ps.apply(this,arguments)}function vs(e){var t=ln(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!ds.test(r))return!1;if(hs.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var ms=new dn(3e4,6e4);function ys(){var e=Da().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=re(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var gs=null;function bs(e){return gs=gs||function(e){return new Promise((function(t,n){var r,i,a;function o(){ys(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){ys(),n(en(e,"network-request-failed"))},timeout:ms.get()})}if(null===(i=null===(r=Da().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=Da().gapi)||void 0===a?void 0:a.load)){var s=no("iframefcb");return Da()[s]=function(){gapi.load?o():n(en(e,"network-request-failed"))},to("https://apis.google.com/js/api.js?onload=".concat(s)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw gs=null,e}))}(e),gs}var ks=new dn(5e3,15e3),ws={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},xs=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Is(e){var t=e.config;an(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?pn(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:tt},i=xs.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(H(r).slice(1))}function _s(e){return Es.apply(this,arguments)}function Es(){return Es=ae(te().mark((function e(t){var n,r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bs(t);case 2:return n=e.sent,an(r=Da().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:Is(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ws,dontclear:!0},(function(e){return new Promise(function(){var n=ae(te().mark((function n(r,i){var a,o,s;return te().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=function(){Da().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=en(t,"network-request-failed"),o=Da().setTimeout((function(){i(a)}),ks.get()),e.ping(s).then(s,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),Es.apply(this,arguments)}var As={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Ts="_blank",Ss="http://localhost",Os=function(){function e(t){d(this,e),this.window=t,this.associatedEvent=null}return v(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function Cs(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),s="",u=Object.assign(Object.assign({},As),{width:r.toString(),height:i.toString(),top:a,left:o}),c=R().toLowerCase();n&&(s=or(c)?Ts:n),ir(c)&&(t=t||Ss,u.scrollbars="yes");var l=Object.entries(u).reduce((function(e,t){var n=f(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(hr(c)&&"_self"!==s)return Ns(t||"",s),new Os(null);var h=window.open(t||"",s,l);an(h,e,"popup-blocked");try{h.focus()}catch(d){}return new Os(h)}function Ns(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var Ps="__/auth/handler",Ds="emulator/auth/handler";function Rs(e,t,n,r,i,a){an(e.config.authDomain,e,"auth-domain-config-required"),an(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:tt,eventId:i};if(t instanceof ai){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var s=0,u=Object.entries(a||{});s<u.length;s++){var c=f(u[s],2),l=c[0],h=c[1];o[l]=h}}if(t instanceof oi){var d=t.getScopes().filter((function(e){return""!==e}));d.length>0&&(o.scopes=d.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var p=o,v=0,m=Object.keys(p);v<m.length;v++){var y=m[v];void 0===p[y]&&delete p[y]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Ps);return pn(t,Ds)}(e),"?").concat(H(p).slice(1))}var Ls="webStorageSupport",Ms=function(){function e(){d(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Sa,this._completeRedirectFn=rs,this._overrideRedirectResult=Wo}return v(e,[{key:"_openPopup",value:function(){var e=ae(te().mark((function e(t,n,r,i){var a,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return sn(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=Rs(t,n,r,ln(),i),e.abrupt("return",Cs(t,o,Na()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=ae(te().mark((function e(t,n,r,i){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=Rs(t,n,r,ln(),i),Da().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(sn(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=ae(te().mark((function e(t){var n,r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_s(t);case 2:return n=e.sent,r=new ss(t),n.register("authEvent",(function(e){return an(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(Ls,{type:Ls},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),$t(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return ps.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return pr()||ar()||fr()}}]),e}(),Fs=Ms,Us=function(){function e(t){d(this,e),this.factorId=t}return v(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return on("unexpected MultiFactorSessionType")}}}]),e}(),Vs=function(e){b(n,e);var t=_(n);function n(e){var r;return d(this,n),(r=t.call(this,"phone")).credential=e,r}return v(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return bn(e,"POST","/v2/accounts/mfaEnrollment:finalize",gn(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return bn(e,"POST","/v2/accounts/mfaSignIn:finalize",gn(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(Us),qs=function(){function e(){d(this,e)}return v(e,null,[{key:"assertion",value:function(e){return Vs._fromCredential(e)}}]),e}();qs.FACTOR_ID="phone";var js,Bs="@firebase/auth",zs="0.20.2",Ks=function(){function e(t){d(this,e),this.auth=t,this.internalListeners=new Map}return v(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=ae(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){an(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();function Qs(){return window}js="Browser",He(new oe("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,s=a.authDomain;return function(e,t){an(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),an(!(null===s||void 0===s?void 0:s.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:s,clientPlatform:js,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vr(js)},i=new yr(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(cn);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),He(new oe("auth-internal",(function(e){return function(e){return new Ks(e)}(gr(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),st(Bs,zs,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(js)),st(Bs,zs,"esm2017");function Ws(e,t,n){return Gs.apply(this,arguments)}function Gs(){return Gs=ae(te().mark((function e(t,n,r){var i,a,o,s,u;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Qs(),o=a.BuildInfo,sn(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,$s(n.sessionId);case 4:return s=e.sent,u={},fr()?u.ibi=o.packageName:ur()?u.apn=o.packageName:$t(t,"operation-not-supported-in-this-environment"),o.displayName&&(u.appDisplayName=o.displayName),u.sessionId=s,e.abrupt("return",Rs(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,u));case 10:case"end":return e.stop()}}),e)}))),Gs.apply(this,arguments)}function Hs(){return Hs=ae(te().mark((function e(t){var n,r,i;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Qs(),r=n.BuildInfo,i={},fr()?i.iosBundleId=r.packageName:ur()?i.androidPackageName=r.packageName:$t(t,"operation-not-supported-in-this-environment"),e.next=5,ls(t,i);case 5:case"end":return e.stop()}}),e)}))),Hs.apply(this,arguments)}function Ys(e){var t=Qs().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function Js(e,t,n){return Xs.apply(this,arguments)}function Xs(){return Xs=ae(te().mark((function e(t,n,r){var i,a,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Qs(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var s=null;function u(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){s||(s=window.setTimeout((function(){i(en(t,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(u),document.addEventListener("resume",c,!1),ur()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(u),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),s&&window.clearTimeout(s)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),Xs.apply(this,arguments)}function Zs(e){var t,n,r,i,a,o,s,u,c,l,f=Qs();an("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),an("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),an("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),an("function"===typeof(null===(u=null===(s=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===s?void 0:s.browsertab)||void 0===u?void 0:u.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),an("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function $s(e){return eu.apply(this,arguments)}function eu(){return(eu=ae(te().mark((function e(t){var n,r,i;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=tu(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tu(e){if(sn(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var nu=function(e){b(n,e);var t=_(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return v(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),Dt(k(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=ae(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(ss);function ru(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:uu(),postBody:null,tenantId:e.tenantId,error:en(e,"no-auth-event")}}function iu(e,t){return cu()._set(lu(e),t)}function au(e){return ou.apply(this,arguments)}function ou(){return ou=ae(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,cu()._get(lu(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,cu()._remove(lu(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),ou.apply(this,arguments)}function su(e,t){var n,r,i=function(e){var t=fu(e),n=t.link?decodeURIComponent(t.link):void 0,r=fu(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return fu(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=fu(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,s=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],u=s?en(s):null;return u?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:u,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function uu(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function cu(){return cn(Aa)}function lu(e){return tr("authEvent",e.config.apiKey,e.name)}function fu(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t,n=e.split("?"),r=s(t=n)||ne(t)||c(t)||l();r[0];return Y(r.slice(1).join("?"))}var hu=function(){function e(){d(this,e),this._redirectPersistence=Sa,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=rs,this._overrideRedirectResult=Wo}return v(e,[{key:"_initialize",value:function(){var e=ae(te().mark((function e(t){var n,r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new nu(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){$t(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=ae(te().mark((function e(t,n,r,i){var a,o,s,u;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Zs(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),qo.clear(),e.next=10,this._originValidation(t);case 10:return o=ru(t,r,i),e.next=13,iu(t,o);case 13:return e.next=15,Ws(t,o,n);case 15:return s=e.sent,e.next=18,Ys(s);case 18:return u=e.sent,e.abrupt("return",Js(t,a,u));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Hs.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=Qs(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(ae(te().mark((function n(){return te().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,au(e);case 2:t.onEvent(pu());case 3:case"end":return n.stop()}}),n)}))),500),s=function(){var n=ae(te().mark((function n(r){var i,a;return te().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,au(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=su(i,r.url)),t.onEvent(a||pu());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,s);var u=i,c="".concat(a.packageName.toLowerCase(),"://");Qs().handleOpenURL=function(){var e=ae(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&s({url:t}),"function"===typeof u)try{u(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),du=hu;function pu(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:en("no-auth-event")}}function vu(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function mu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R();return!("file:"!==vu()&&"ionic:"!==vu()&&"capacitor:"!==vu()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function yu(){return V()&&11===(null===document||void 0===document?void 0:document.documentMode)}function gu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R();return/Edge\/\d+/.test(e)}function bu(){try{var e=self.localStorage,t=Na();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R();return yu()||gu(e)}()||q()}catch(n){return ku()&&q()}return!1}function ku(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function wu(){return("http:"===vu()||"https:"===vu()||F()||mu())&&!(U()||M())&&bu()&&!ku()}function xu(){return mu()&&"undefined"!==typeof document}function Iu(){return _u.apply(this,arguments)}function _u(){return(_u=ae(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(xu()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),1e3);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Eu={LOCAL:"local",NONE:"none",SESSION:"session"},Au=an,Tu="persistence";function Su(e,t){Au(Object.values(Eu).includes(t),e,"invalid-persistence-type"),U()?Au(t!==Eu.SESSION,e,"unsupported-persistence-type"):M()?Au(t===Eu.NONE,e,"unsupported-persistence-type"):ku()?Au(t===Eu.NONE||t===Eu.LOCAL&&q(),e,"unsupported-persistence-type"):Au(t===Eu.NONE||bu(),e,"unsupported-persistence-type")}function Ou(e){return Cu.apply(this,arguments)}function Cu(){return Cu=ae(te().mark((function e(t){var n,r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=Nu(),r=tr(Tu,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)}))),Cu.apply(this,arguments)}function Nu(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var Pu=an,Du=function(){function e(){d(this,e),this.browserResolver=cn(Fs),this.cordovaResolver=cn(du),this.underlyingResolver=null,this._redirectPersistence=Sa,this._completeRedirectFn=rs,this._overrideRedirectResult=Wo}return v(e,[{key:"_initialize",value:function(){var e=ae(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=ae(te().mark((function e(t,n,r,i){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=ae(te().mark((function e(t,n,r,i){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return xu()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return Pu(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=ae(te().mark((function e(){var t;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Iu();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Ru(e){return e.unwrap()}function Lu(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===t.code)t.resolver=new qu(e,function(e,t){var n,r=ee(e),i=t;return an(t.customData.operationType,r,"argument-error"),an(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),ga._fromError(r,i)}(e,t));else if(r){var i=Mu(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function Mu(e){var t=(e instanceof j?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof j)&&"temporaryProof"in t&&"phoneNumber"in t)return Eo.credentialFromResult(e);var n,r=t.providerId;if(!r||r===Vt)return null;switch(r){case Ut:n=ci;break;case Mt:n=ui;break;case Ft:n=li;break;case qt:n=di;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,s=t.pendingToken,u=t.nonce;return a||o||i||s?s?r.startsWith("saml.")?fi._create(r,s):Yr._fromParams({providerId:r,signInMethod:r,pendingToken:s,idToken:i,accessToken:a}):new si(r).credential({idToken:i,accessToken:a,rawNonce:u}):null}return e instanceof j?n.credentialFromError(e):n.credentialFromResult(e)}function Fu(e,t){return t.catch((function(t){throw t instanceof j&&Lu(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,Mu(t)),additionalUserInfo:ma(e),user:ju.getOrCreate(r)}}))}function Uu(e,t){return Vu.apply(this,arguments)}function Vu(){return Vu=ae(te().mark((function e(t,n){var r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return Fu(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)}))),Vu.apply(this,arguments)}var qu=function(){function e(t,n){d(this,e),this.resolver=n,this.auth=t.wrapped()}return v(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return Fu(Ru(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),ju=function(){function e(t){d(this,e),this._delegate=t,this.multiFactor=function(e){var t=ee(e);return xa.has(t)||xa.set(t,wa._fromUser(t)),xa.get(t)}(t)}return v(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=ae(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fu(this.auth,Ri(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=ae(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Uu(this.auth,bo(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=ae(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fu(this.auth,Fo(this._delegate,t,Du)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=ae(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ou(gr(this.auth));case 2:return e.abrupt("return",$o(this._delegate,t,Du));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=ae(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fu(this.auth,Mi(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return Uu(this.auth,function(e,t,n){return wo.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return Fu(this.auth,function(e,t,n){return Mo.apply(this,arguments)}(this._delegate,e,Du))}},{key:"reauthenticateWithRedirect",value:function(){var e=ae(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ou(gr(this.auth));case 2:return e.abrupt("return",Xo(this._delegate,t,Du));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return ra.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=ae(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xi(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return ua(ee(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return ua(ee(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return _o.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return sa.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return ia.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();ju.USER_MAP=new WeakMap;var Bu=an,zu=function(){function e(t,n){if(d(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;Bu(r,"invalid-api-key",{appName:t.name}),Bu(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?Du:void 0;this._delegate=n.initialize({options:{persistence:Qu(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(Ht),this.linkUnderlyingAuth()}return v(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?ju.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){kr(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return Wi.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return Gi(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return Qi.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=ae(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fu(this._delegate,Ji(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return na.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=ri.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=ae(te().mark((function e(){var t;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Bu(wu(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,ts(this._delegate,Du);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",Fu(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){gr(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=Ku(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=Ku(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return Zi.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return Ki.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=ae(te().mark((function e(t){var n,r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Su(this._delegate,t),e.t0=t,e.next=e.t0===Eu.SESSION?4:e.t0===Eu.LOCAL?6:e.t0===Eu.NONE?11:13;break;case 4:return n=Sa,e.abrupt("break",14);case 6:return e.next=8,cn(Xa)._isAvailable();case 8:return r=e.sent,n=r?Xa:Aa,e.abrupt("break",14);case 11:return n=er,e.abrupt("break",14);case 13:return e.abrupt("return",$t("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return Fu(this._delegate,function(e){return gi.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return Fu(this._delegate,Pi(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return Fu(this._delegate,function(e,t){return qi.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return Fu(this._delegate,function(e,t,n){return Pi(ee(e),ii.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return Fu(this._delegate,function(e,t,n){return $i.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return Uu(this._delegate,function(e,t,n){return go.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=ae(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Bu(wu(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",Fu(this._delegate,Ro(this._delegate,t,Du)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=ae(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Bu(wu(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Ou(this._delegate);case 3:return e.abrupt("return",Yo(this._delegate,t,Du));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return Yi.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function Ku(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&ju.getOrCreate(e))},error:t,complete:n}}function Qu(e,t){var n=function(e,t){var n=Nu();if(!n)return[];var r=tr(Tu,e,t);switch(n.getItem(r)){case Eu.NONE:return[er];case Eu.LOCAL:return[Xa,Sa];case Eu.SESSION:return[Sa];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(Xa)||n.push(Xa),"undefined"!==typeof window)for(var r=0,i=[Aa,Sa];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(er)||n.push(er),n}zu.Persistence=Eu;var Wu=function(){function e(){d(this,e),this.providerId="phone",this._delegate=new Eo(Ru(Nt.auth()))}return v(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return Eo.credential(e,t)}}]),e}();Wu.PHONE_SIGN_IN_METHOD=Eo.PHONE_SIGN_IN_METHOD,Wu.PROVIDER_ID=Eo.PROVIDER_ID;var Gu,Hu=an,Yu=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Nt.app();d(this,e),Hu(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new vo(t,n,i.auth()),this.type=this._delegate.type}return v(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();(Gu=Nt).INTERNAL.registerComponent(new oe("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new zu(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:jt,PASSWORD_RESET:Bt,RECOVER_EMAIL:zt,REVERT_SECOND_FACTOR_ADDITION:Kt,VERIFY_AND_CHANGE_EMAIL:Qt,VERIFY_EMAIL:Wt}},EmailAuthProvider:ii,FacebookAuthProvider:ui,GithubAuthProvider:li,GoogleAuthProvider:ci,OAuthProvider:si,SAMLAuthProvider:hi,PhoneAuthProvider:Wu,PhoneMultiFactorGenerator:qs,RecaptchaVerifier:Yu,TwitterAuthProvider:di,Auth:zu,AuthCredential:Ir,Error:j}).setInstantiationMode("LAZY").setMultipleInstances(!1)),Gu.registerVersion("@firebase/auth-compat","0.2.15");var Ju,Xu="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},Zu={},$u=$u||{},ec=Xu||self;function tc(){}function nc(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function rc(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var ic="closure_uid_"+(1e9*Math.random()>>>0),ac=0;function oc(e,t,n){return e.call.apply(e.bind,arguments)}function sc(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function uc(e,t,n){return(uc=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?oc:sc).apply(null,arguments)}function cc(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function lc(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function fc(){this.s=this.s,this.o=this.o}var hc={};fc.prototype.s=!1,fc.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,ic)&&e[ic]||(e[ic]=++ac)}(this);delete hc[e]}},fc.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var dc=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},pc=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};function vc(e){return Array.prototype.concat.apply([],arguments)}function mc(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function yc(e){return/^[\s\xa0]*$/.test(e)}var gc,bc=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function kc(e,t){return-1!=e.indexOf(t)}function wc(e,t){return e<t?-1:e>t?1:0}e:{var xc=ec.navigator;if(xc){var Ic=xc.userAgent;if(Ic){gc=Ic;break e}}gc=""}function _c(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Ec(e){var t={};for(var n in e)t[n]=e[n];return t}var Ac="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Tc(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<Ac.length;a++)n=Ac[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Sc(e){return Sc[" "](e),e}Sc[" "]=tc;var Oc,Cc=kc(gc,"Opera"),Nc=kc(gc,"Trident")||kc(gc,"MSIE"),Pc=kc(gc,"Edge"),Dc=Pc||Nc,Rc=kc(gc,"Gecko")&&!(kc(gc.toLowerCase(),"webkit")&&!kc(gc,"Edge"))&&!(kc(gc,"Trident")||kc(gc,"MSIE"))&&!kc(gc,"Edge"),Lc=kc(gc.toLowerCase(),"webkit")&&!kc(gc,"Edge");function Mc(){var e=ec.document;return e?e.documentMode:void 0}e:{var Fc="",Uc=function(){var e=gc;return Rc?/rv:([^\);]+)(\)|;)/.exec(e):Pc?/Edge\/([\d\.]+)/.exec(e):Nc?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Lc?/WebKit\/(\S+)/.exec(e):Cc?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Uc&&(Fc=Uc?Uc[1]:""),Nc){var Vc=Mc();if(null!=Vc&&Vc>parseFloat(Fc)){Oc=String(Vc);break e}}Oc=Fc}var qc,jc={};function Bc(){return function(e){var t=jc;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=bc(String(Oc)).split("."),n=bc("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=wc(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||wc(0==a[2].length,0==o[2].length)||wc(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(ec.document&&Nc){var zc=Mc();qc=zc||(parseInt(Oc,10)||void 0)}else qc=void 0;var Kc=qc,Qc=function(){if(!ec.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{ec.addEventListener("test",tc,t),ec.removeEventListener("test",tc,t)}catch(n){}return e}();function Wc(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function Gc(e,t){if(Wc.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Rc){e:{try{Sc(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Hc[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Gc.Z.h.call(this)}}Wc.prototype.h=function(){this.defaultPrevented=!0},lc(Gc,Wc);var Hc={2:"touch",3:"pen",4:"mouse"};Gc.prototype.h=function(){Gc.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Yc="closure_listenable_"+(1e6*Math.random()|0),Jc=0;function Xc(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++Jc,this.ca=this.fa=!1}function Zc(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function $c(e){this.src=e,this.g={},this.h=0}function el(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=dc(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(Zc(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function tl(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ca&&a.listener==t&&a.capture==!!n&&a.ia==r)return i}return-1}$c.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=tl(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new Xc(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var nl="closure_lm_"+(1e6*Math.random()|0),rl={};function il(e,t,n,r,i){if(r&&r.once)return ol(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)il(e,t[a],n,r,i);return null}return n=dl(n),e&&e[Yc]?e.N(t,n,rc(r)?!!r.capture:!!r,i):al(e,t,n,!1,r,i)}function al(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=rc(i)?!!i.capture:!!i,s=fl(e);if(s||(e[nl]=s=new $c(e)),(n=s.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=ll;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Qc||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(cl(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function ol(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)ol(e,t[a],n,r,i);return null}return n=dl(n),e&&e[Yc]?e.O(t,n,rc(r)?!!r.capture:!!r,i):al(e,t,n,!0,r,i)}function sl(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)sl(e,t[a],n,r,i);else r=rc(r)?!!r.capture:!!r,n=dl(n),e&&e[Yc]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=tl(a=e.g[t],n,r,i))&&(Zc(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=fl(e))&&(t=e.g[t.toString()],e=-1,t&&(e=tl(t,n,r,i)),(n=-1<e?t[e]:null)&&ul(n))}function ul(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[Yc])el(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(cl(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=fl(t))?(el(n,e),0==n.h&&(n.src=null,t[nl]=null)):Zc(e)}}}function cl(e){return e in rl?rl[e]:rl[e]="on"+e}function ll(e,t){if(e.ca)e=!0;else{t=new Gc(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&ul(e),e=n.call(r,t)}return e}function fl(e){return(e=e[nl])instanceof $c?e:null}var hl="__closure_events_fn_"+(1e9*Math.random()>>>0);function dl(e){return"function"===typeof e?e:(e[hl]||(e[hl]=function(t){return e.handleEvent(t)}),e[hl])}function pl(){fc.call(this),this.i=new $c(this),this.P=this,this.I=null}function vl(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new Wc(t,e);else if(t instanceof Wc)t.target=t.target||e;else{var i=t;Tc(t=new Wc(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=ml(o,r,!0,t)&&i}if(i=ml(o=t.g=e,r,!0,t)&&i,i=ml(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=ml(o=t.g=n[a],r,!1,t)&&i}function ml(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ca&&o.capture==n){var s=o.listener,u=o.ia||o.src;o.fa&&el(e.i,o),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}lc(pl,fc),pl.prototype[Yc]=!0,pl.prototype.removeEventListener=function(e,t,n,r){sl(this,e,t,n,r)},pl.prototype.M=function(){if(pl.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Zc(n[r]);delete t.g[e],t.h--}}this.I=null},pl.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},pl.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var yl=ec.JSON.stringify;function gl(){var e=Al,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var bl,kl=function(){function e(){d(this,e),this.h=this.g=null}return v(e,[{key:"add",value:function(e,t){var n=wl.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),wl=new(function(){function e(t,n){d(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return v(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new xl}),(function(e){return e.reset()})),xl=function(){function e(){d(this,e),this.next=this.g=this.h=null}return v(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function Il(e){ec.setTimeout((function(){throw e}),0)}function _l(e,t){bl||function(){var e=ec.Promise.resolve(void 0);bl=function(){e.then(Tl)}}(),El||(bl(),El=!0),Al.add(e,t)}var El=!1,Al=new kl;function Tl(){for(var e;e=gl();){try{e.h.call(e.g)}catch(n){Il(n)}var t=wl;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}El=!1}function Sl(e,t){pl.call(this),this.h=e||1,this.g=t||ec,this.j=uc(this.kb,this),this.l=Date.now()}function Ol(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function Cl(e,t,n){if("function"===typeof e)n&&(e=uc(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=uc(e.handleEvent,e)}return 2147483647<Number(t)?-1:ec.setTimeout(e,t||0)}function Nl(e){e.g=Cl((function(){e.g=null,e.i&&(e.i=!1,Nl(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}lc(Sl,pl),(Ju=Sl.prototype).da=!1,Ju.S=null,Ju.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),vl(this,"tick"),this.da&&(Ol(this),this.start()))}},Ju.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ju.M=function(){Sl.Z.M.call(this),Ol(this),delete this.g};var Pl=function(e){b(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return v(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:Nl(this)}},{key:"M",value:function(){Dt(k(n.prototype),"M",this).call(this),this.g&&(ec.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(fc);function Dl(e){fc.call(this),this.h=e,this.g={}}lc(Dl,fc);var Rl=[];function Ll(e,t,n,r){Array.isArray(n)||(n&&(Rl[0]=n.toString()),n=Rl);for(var i=0;i<n.length;i++){var a=il(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function Ml(e){_c(e.g,(function(e,t){this.g.hasOwnProperty(t)&&ul(e)}),e),e.g={}}function Fl(){this.g=!0}function Ul(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return yl(n)}catch(s){return t}}(e,n)+(r?" "+r:"")}))}Dl.prototype.M=function(){Dl.Z.M.call(this),Ml(this)},Dl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Fl.prototype.Aa=function(){this.g=!1},Fl.prototype.info=function(){};var Vl={},ql=null;function jl(){return ql=ql||new pl}function Bl(e){Wc.call(this,Vl.Ma,e)}function zl(e){var t=jl();vl(t,new Bl(t,e))}function Kl(e,t){Wc.call(this,Vl.STAT_EVENT,e),this.stat=t}function Ql(e){var t=jl();vl(t,new Kl(t,e))}function Wl(e,t){Wc.call(this,Vl.Na,e),this.size=t}function Gl(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return ec.setTimeout((function(){e()}),t)}Vl.Ma="serverreachability",lc(Bl,Wc),Vl.STAT_EVENT="statevent",lc(Kl,Wc),Vl.Na="timingevent",lc(Wl,Wc);var Hl={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Yl={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Jl(){}function Xl(e){return e.h||(e.h=e.i())}function Zl(){}Jl.prototype.h=null;var $l,ef={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function tf(){Wc.call(this,"d")}function nf(){Wc.call(this,"c")}function rf(){}function af(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new Dl(this),this.P=sf,e=Dc?125:void 0,this.W=new Sl(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new of}function of(){this.i=null,this.g="",this.h=!1}lc(tf,Wc),lc(nf,Wc),lc(rf,Jl),rf.prototype.g=function(){return new XMLHttpRequest},rf.prototype.i=function(){return{}},$l=new rf;var sf=45e3,uf={},cf={};function lf(e,t,n){e.K=1,e.v=Df(Tf(t)),e.s=n,e.U=!0,ff(e,null)}function ff(e,t){e.F=Date.now(),vf(e),e.A=Tf(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),Wf(n.h,"t",r),e.C=0,n=e.l.H,e.h=new of,e.g=Hh(e.l,n?t:null,!e.s),0<e.O&&(e.L=new Pl(uc(e.Ia,e,e.g),e.O)),Ll(e.V,e.g,"readystatechange",e.gb),t=e.H?Ec(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),zl(1),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",s=a.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function hf(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function df(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=pf(e,n))==cf){4==t&&(e.o=4,Ql(14),i=!1),Ul(e.j,e.m,null,"[Incomplete Response]");break}if(r==uf){e.o=4,Ql(15),Ul(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Ul(e.j,e.m,r,null),kf(e,r)}hf(e)&&r!=cf&&r!=uf&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Ql(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),qh(t),t.L=!0,Ql(11))):(Ul(e.j,e.m,n,"[Invalid Chunked Response]"),bf(e),gf(e))}function pf(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?cf:(n=Number(t.substring(n,r)),isNaN(n)?uf:(r+=1)+n>t.length?cf:(t=t.substr(r,n),e.C=r+n,t))}function vf(e){e.Y=Date.now()+e.P,mf(e,e.P)}function mf(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Gl(uc(e.eb,e),t)}function yf(e){e.B&&(ec.clearTimeout(e.B),e.B=null)}function gf(e){0==e.l.G||e.I||zh(e.l,e)}function bf(e){yf(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,Ol(e.W),Ml(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function kf(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||eh(n.i,e)))if(n.I=e.N,!e.J&&eh(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;Bh(n),Nh(n)}Vh(n),Ql(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=Gl(uc(n.ab,n),6e3));if(1>=$f(n.i)&&n.ka){try{n.ka()}catch(a){}n.ka=void 0}}else Qh(n,11)}else if((e.J||n.g==e)&&Bh(n),!yc(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.U=a[0],a=a[1],2==n.G)if("c"==a[0]){n.J=a[1],n.la=a[2];var o=a[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var s=a[4];null!=s&&(n.za=s,n.h.info("SVER="+n.za));var u=a[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;!f.g&&(kc(l,"spdy")||kc(l,"quic")||kc(l,"h2"))&&(f.j=f.l,f.g=new Set,f.h&&(th(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.sa=h,Pf(r.F,r.D,h))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=Gh(r,r.H?r.la:null,r.W),d.J){nh(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(yf(p),vf(p)),r.g=d}else Uh(r);0<n.l.length&&Rh(n)}else"stop"!=a[0]&&"close"!=a[0]||Qh(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Qh(n,7):Ch(n):"noop"!=a[0]&&n.j&&n.j.wa(a),n.A=0)}zl(4)}catch(a){}}function wf(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(nc(e)||"string"===typeof e)pc(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(nc(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(nc(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}}function xf(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof xf)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function If(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];_f(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)_f(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function _f(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(Ju=af.prototype).setTimeout=function(e){this.P=e},Ju.gb=function(e){e=e.target;var t=this.L;t&&3==Eh(e)?t.l():this.Ia(e)},Ju.Ia=function(e){try{if(e==this.g)e:{var t=Eh(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||Dc||this.g&&(this.h.h||this.g.ga()||Ah(this.g)))){this.I||4!=t||7==n||zl(8==n||0>=r?3:2),yf(this);var i=this.g.ba();this.N=i;t:if(hf(this)){var a=Ah(this.g);e="";var o=a.length,s=4==Eh(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){bf(this),gf(this);var u="";break t}this.h.i=new ec.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:s&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!yc(c)){var f=c;break t}}f=null}if(!(i=f)){this.i=!1,this.o=3,Ql(12),bf(this),gf(this);break e}Ul(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,kf(this,i)}this.U?(df(this,t,u),Dc&&this.i&&3==t&&(Ll(this.V,this.W,"tick",this.fb),this.W.start())):(Ul(this.j,this.m,u,null),kf(this,u)),4==t&&bf(this),this.i&&!this.I&&(4==t?zh(this.l,this):(this.i=!1,vf(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,Ql(12)):(this.o=0,Ql(13)),bf(this),gf(this)}}}catch(t){}},Ju.fb=function(){if(this.g){var e=Eh(this.g),t=this.g.ga();this.C<t.length&&(yf(this),df(this,e,t),this.i&&4!=e&&vf(this))}},Ju.cancel=function(){this.I=!0,bf(this)},Ju.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(zl(3),Ql(17)),bf(this),this.o=2,gf(this)):mf(this,this.Y-e)},(Ju=xf.prototype).R=function(){If(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},Ju.T=function(){return If(this),this.g.concat()},Ju.get=function(e,t){return _f(this.h,e)?this.h[e]:t},Ju.set=function(e,t){_f(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},Ju.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}};var Ef=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Af(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof Af){this.g=void 0!==t?t:e.g,Sf(this,e.j),this.s=e.s,Of(this,e.i),Cf(this,e.m),this.l=e.l,t=e.h;var n=new Bf;n.i=t.i,t.g&&(n.g=new xf(t.g),n.h=t.h),Nf(this,n),this.o=e.o}else e&&(n=String(e).match(Ef))?(this.g=!!t,Sf(this,n[1]||"",!0),this.s=Rf(n[2]||""),Of(this,n[3]||"",!0),Cf(this,n[4]),this.l=Rf(n[5]||"",!0),Nf(this,n[6]||"",!0),this.o=Rf(n[7]||"")):(this.g=!!t,this.h=new Bf(null,this.g))}function Tf(e){return new Af(e)}function Sf(e,t,n){e.j=n?Rf(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Of(e,t,n){e.i=n?Rf(t,!0):t}function Cf(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Nf(e,t,n){t instanceof Bf?(e.h=t,function(e,t){t&&!e.j&&(zf(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Kf(this,t),Wf(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=Lf(t,qf)),e.h=new Bf(t,e.g))}function Pf(e,t,n){e.h.set(t,n)}function Df(e){return Pf(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Rf(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Lf(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Mf),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Mf(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Af.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Lf(t,Ff,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Lf(t,Ff,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(Lf(n,"/"==n.charAt(0)?Vf:Uf,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Lf(n,jf)),e.join("")};var Ff=/[#\/\?@]/g,Uf=/[#\?:]/g,Vf=/[#\?]/g,qf=/[#\?@]/g,jf=/#/g;function Bf(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function zf(e){e.g||(e.g=new xf,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Kf(e,t){zf(e),t=Gf(e,t),_f(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,_f((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&If(e)))}function Qf(e,t){return zf(e),t=Gf(e,t),_f(e.g.h,t)}function Wf(e,t,n){Kf(e,t),0<n.length&&(e.i=null,e.g.set(Gf(e,t),mc(n)),e.h+=n.length)}function Gf(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Ju=Bf.prototype).add=function(e,t){zf(this),this.i=null,e=Gf(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Ju.forEach=function(e,t){zf(this),this.g.forEach((function(n,r){pc(n,(function(n){e.call(t,n,r,this)}),this)}),this)},Ju.T=function(){zf(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Ju.R=function(e){zf(this);var t=[];if("string"===typeof e)Qf(this,e)&&(t=vc(t,this.g.get(Gf(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=vc(t,e[n])}return t},Ju.set=function(e,t){return zf(this),this.i=null,Qf(this,e=Gf(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Ju.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},Ju.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.i=e.join("&")};var Hf=v((function e(t,n){d(this,e),this.h=t,this.g=n}));function Yf(e){this.l=e||Xf,ec.PerformanceNavigationTiming?e=0<(e=ec.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(ec.g&&ec.g.Ea&&ec.g.Ea()&&ec.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Jf,Xf=10;function Zf(e){return!!e.h||!!e.g&&e.g.size>=e.j}function $f(e){return e.h?1:e.g?e.g.size:0}function eh(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function th(e,t){e.g?e.g.add(t):e.h=t}function nh(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function rh(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=m(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return mc(e.i)}function ih(){}function ah(){this.g=new ih}function oh(e,t,n){var r=n||"";try{wf(e,(function(e,n){var i=e;rc(e)&&(i=yl(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function sh(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function uh(e){this.l=e.$b||null,this.j=e.ib||!1}function ch(e,t){pl.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=lh,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Yf.prototype.cancel=function(){if(this.i=rh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=m(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},ih.prototype.stringify=function(e){return ec.JSON.stringify(e,void 0)},ih.prototype.parse=function(e){return ec.JSON.parse(e,void 0)},lc(uh,Jl),uh.prototype.g=function(){return new ch(this.l,this.j)},uh.prototype.i=(Jf={},function(){return Jf}),lc(ch,pl);var lh=0;function fh(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function hh(e){e.readyState=4,e.l=null,e.j=null,e.A=null,dh(e)}function dh(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Ju=ch.prototype).open=function(e,t){if(this.readyState!=lh)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,dh(this)},Ju.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||ec).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},Ju.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,hh(this)),this.readyState=lh},Ju.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,dh(this)),this.g&&(this.readyState=3,dh(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof ec.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;fh(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},Ju.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?hh(this):dh(this),3==this.readyState&&fh(this)}},Ju.Ua=function(e){this.g&&(this.response=this.responseText=e,hh(this))},Ju.Ta=function(e){this.g&&(this.response=e,hh(this))},Ju.ha=function(){this.g&&hh(this)},Ju.setRequestHeader=function(e,t){this.v.append(e,t)},Ju.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Ju.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(ch.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var ph=ec.JSON.parse;function vh(e){pl.call(this),this.headers=new xf,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=mh,this.K=this.L=!1}lc(vh,pl);var mh="",yh=/^https?$/i,gh=["POST","PUT"];function bh(e){return"content-type"==e.toLowerCase()}function kh(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,wh(e),Ih(e)}function wh(e){e.D||(e.D=!0,vl(e,"complete"),vl(e,"error"))}function xh(e){if(e.h&&"undefined"!=typeof $u&&(!e.C[1]||4!=Eh(e)||2!=e.ba()))if(e.v&&4==Eh(e))Cl(e.Fa,0,e);else if(vl(e,"readystatechange"),4==Eh(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(Ef)[1]||null;if(!a&&ec.self&&ec.self.location){var o=ec.self.location.protocol;a=o.substr(0,o.length-1)}i=!yh.test(a?a.toLowerCase():"")}t=i}if(t)vl(e,"complete"),vl(e,"success");else{e.m=6;try{var s=2<Eh(e)?e.g.statusText:""}catch(u){s=""}e.j=s+" ["+e.ba()+"]",wh(e)}}finally{Ih(e)}}}function Ih(e,t){if(e.g){_h(e);var n=e.g,r=e.C[0]?tc:null;e.g=null,e.C=null,t||vl(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function _h(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(ec.clearTimeout(e.A),e.A=null)}function Eh(e){return e.g?e.g.readyState:0}function Ah(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case mh:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Th(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return _c(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Pf(e,t,n))}function Sh(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Oh(e){this.za=0,this.l=[],this.h=new Fl,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Sh("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Sh("baseRetryDelayMs",5e3,e),this.$a=Sh("retryDelaySeedMs",1e4,e),this.Ya=Sh("forwardChannelMaxRetries",2,e),this.ra=Sh("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new Yf(e&&e.concurrentRequestLimit),this.Ca=new ah,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function Ch(e){if(Ph(e),3==e.G){var t=e.V++,n=Tf(e.F);Pf(n,"SID",e.J),Pf(n,"RID",t),Pf(n,"TYPE","terminate"),Mh(e,n),(t=new af(e,e.h,t,void 0)).K=2,t.v=Df(Tf(n)),n=!1,ec.navigator&&ec.navigator.sendBeacon&&(n=ec.navigator.sendBeacon(t.v.toString(),"")),!n&&ec.Image&&((new Image).src=t.v,n=!0),n||(t.g=Hh(t.l,null),t.g.ea(t.v)),t.F=Date.now(),vf(t)}Wh(e)}function Nh(e){e.g&&(qh(e),e.g.cancel(),e.g=null)}function Ph(e){Nh(e),e.u&&(ec.clearTimeout(e.u),e.u=null),Bh(e),e.i.cancel(),e.m&&("number"===typeof e.m&&ec.clearTimeout(e.m),e.m=null)}function Dh(e,t){e.l.push(new Hf(e.Za++,t)),3==e.G&&Rh(e)}function Rh(e){Zf(e.i)||e.m||(e.m=!0,_l(e.Ha,e),e.C=0)}function Lh(e,t){var n;n=t?t.m:e.V++;var r=Tf(e.F);Pf(r,"SID",e.J),Pf(r,"RID",n),Pf(r,"AID",e.U),Mh(e,r),e.o&&e.s&&Th(r,e.o,e.s),n=new af(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=Fh(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),th(e.i,n),lf(n,r,t)}function Mh(e,t){e.j&&wf({},(function(e,n){Pf(t,n,e)}))}function Fh(e,t,n){n=Math.min(e.l.length,n);var r=e.j?uc(e.j.Oa,e.j,e):null;e:for(var i=e.l,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var s=!0,u=0;u<n;u++){var c=i[u].h,l=i[u].g;if(0>(c-=a))a=Math.max(0,i[u].h-100),s=!1;else try{oh(l,o,"req"+c+"_")}catch(xd){r&&r(l)}}if(s){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function Uh(e){e.g||e.u||(e.Y=1,_l(e.Ga,e),e.A=0)}function Vh(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=Gl(uc(e.Ga,e),Kh(e,e.A)),e.A++,!0)}function qh(e){null!=e.B&&(ec.clearTimeout(e.B),e.B=null)}function jh(e){e.g=new af(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=Tf(e.oa);Pf(t,"RID","rpc"),Pf(t,"SID",e.J),Pf(t,"CI",e.N?"0":"1"),Pf(t,"AID",e.U),Mh(e,t),Pf(t,"TYPE","xmlhttp"),e.o&&e.s&&Th(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=Df(Tf(t)),n.s=null,n.U=!0,ff(n,e)}function Bh(e){null!=e.v&&(ec.clearTimeout(e.v),e.v=null)}function zh(e,t){var n=null;if(e.g==t){Bh(e),qh(e),e.g=null;var r=2}else{if(!eh(e.i,t))return;n=t.D,nh(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;vl(r=jl(),new Wl(r,n,t,i)),Rh(e)}else Uh(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!($f(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=Gl(uc(e.Ha,e,t),Kh(e,e.C)),e.C++,!0))}(e,t)||2==r&&Vh(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Qh(e,5);break;case 4:Qh(e,10);break;case 3:Qh(e,6);break;default:Qh(e,2)}}function Kh(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function Qh(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=uc(e.jb,e);n||(n=new Af("//www.google.com/images/cleardot.gif"),ec.location&&"http"==ec.location.protocol||Sf(n,"https"),Df(n)),function(e,t){var n=new Fl;if(ec.Image){var r=new Image;r.onload=cc(sh,n,r,"TestLoadImage: loaded",!0,t),r.onerror=cc(sh,n,r,"TestLoadImage: error",!1,t),r.onabort=cc(sh,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=cc(sh,n,r,"TestLoadImage: timeout",!1,t),ec.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Ql(2);e.G=0,e.j&&e.j.va(t),Wh(e),Ph(e)}function Wh(e){e.G=0,e.I=-1,e.j&&(0==rh(e.i).length&&0==e.l.length||(e.i.i.length=0,mc(e.l),e.l.length=0),e.j.ua())}function Gh(e,t,n){var r=function(e){return e instanceof Af?Tf(e):new Af(e,void 0)}(n);if(""!=r.i)t&&Of(r,t+"."+r.i),Cf(r,r.m);else{var i=ec.location;r=function(e,t,n,r){var i=new Af(null,void 0);return e&&Sf(i,e),t&&Of(i,t),n&&Cf(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&_c(e.aa,(function(e,t){Pf(r,t,e)})),t=e.D,n=e.sa,t&&n&&Pf(r,t,n),Pf(r,"VER",e.ma),Mh(e,r),r}function Hh(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new vh(new uh({ib:!0})):new vh(e.qa)).L=e.H,t}function Yh(){}function Jh(){if(Nc&&!(10<=Number(Kc)))throw Error("Environmental error: no available transport.")}function Xh(e,t){pl.call(this),this.g=new Oh(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!yc(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!yc(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new ed(this)}function Zh(e){tf.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function $h(){nf.call(this),this.status=1}function ed(e){this.g=e}(Ju=vh.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():$l.g(),this.C=this.u?Xl(this.u):Xl($l),this.g.onreadystatechange=uc(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(a){return void kh(this,a)}e=n||"";var i=new xf(this.headers);r&&wf(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=bh,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.T()),n=ec.FormData&&e instanceof ec.FormData,!(0<=dc(gh,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{_h(this),0<this.B&&((this.K=function(e){return Nc&&Bc()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=uc(this.pa,this)):this.A=Cl(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(a){kh(this,a)}},Ju.pa=function(){"undefined"!=typeof $u&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,vl(this,"timeout"),this.abort(8))},Ju.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,vl(this,"complete"),vl(this,"abort"),Ih(this))},Ju.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ih(this,!0)),vh.Z.M.call(this)},Ju.Fa=function(){this.s||(this.F||this.v||this.l?xh(this):this.cb())},Ju.cb=function(){xh(this)},Ju.ba=function(){try{return 2<Eh(this)?this.g.status:-1}catch(Jf){return-1}},Ju.ga=function(){try{return this.g?this.g.responseText:""}catch(Jf){return""}},Ju.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),ph(t)}},Ju.Da=function(){return this.m},Ju.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(Ju=Oh.prototype).ma=8,Ju.G=1,Ju.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},Ju.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new af(this,this.h,e,void 0),n=this.s;if(this.P&&(n?Tc(n=Ec(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var a=this.l[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Fh(this,t,r),Pf(i=Tf(this.F),"RID",e),Pf(i,"CVER",22),this.D&&Pf(i,"X-HTTP-Session-Id",this.D),Mh(this,i),this.o&&n&&Th(i,this.o,n),th(this.i,t),this.Ra&&Pf(i,"TYPE","init"),this.ja?(Pf(i,"$req",r),Pf(i,"SID","null"),t.$=!0,lf(t,i,null)):lf(t,i,r),this.G=2}}else 3==this.G&&(e?Lh(this,e):0==this.l.length||Zf(this.i)||Lh(this))},Ju.Ga=function(){if(this.u=null,jh(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=Gl(uc(this.bb,this),e)}},Ju.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Ql(10),Nh(this),jh(this))},Ju.ab=function(){null!=this.v&&(this.v=null,Nh(this),Vh(this),Ql(19))},Ju.jb=function(e){e?(this.h.info("Successfully pinged google.com"),Ql(2)):(this.h.info("Failed to ping google.com"),Ql(1))},(Ju=Yh.prototype).xa=function(){},Ju.wa=function(){},Ju.va=function(){},Ju.ua=function(){},Ju.Oa=function(){},Jh.prototype.g=function(e,t){return new Xh(e,t)},lc(Xh,pl),Xh.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),_l(uc(e.hb,e,t))),Ql(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=Gh(e,null,e.W),Rh(e)},Xh.prototype.close=function(){Ch(this.g)},Xh.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,Dh(this.g,t)}else this.v?((t={}).__data__=yl(e),Dh(this.g,t)):Dh(this.g,e)},Xh.prototype.M=function(){this.g.j=null,delete this.j,Ch(this.g),delete this.g,Xh.Z.M.call(this)},lc(Zh,tf),lc($h,nf),lc(ed,Yh),ed.prototype.xa=function(){vl(this.g,"a")},ed.prototype.wa=function(e){vl(this.g,new Zh(e))},ed.prototype.va=function(e){vl(this.g,new $h(e))},ed.prototype.ua=function(){vl(this.g,"b")},Jh.prototype.createWebChannel=Jh.prototype.g,Xh.prototype.send=Xh.prototype.u,Xh.prototype.open=Xh.prototype.m,Xh.prototype.close=Xh.prototype.close,Hl.NO_ERROR=0,Hl.TIMEOUT=8,Hl.HTTP_ERROR=6,Yl.COMPLETE="complete",Zl.EventType=ef,ef.OPEN="a",ef.CLOSE="b",ef.ERROR="c",ef.MESSAGE="d",pl.prototype.listen=pl.prototype.N,vh.prototype.listenOnce=vh.prototype.O,vh.prototype.getLastError=vh.prototype.La,vh.prototype.getLastErrorCode=vh.prototype.Da,vh.prototype.getStatus=vh.prototype.ba,vh.prototype.getResponseJson=vh.prototype.Qa,vh.prototype.getResponseText=vh.prototype.ga,vh.prototype.send=vh.prototype.ea;var td=Zu.createWebChannelTransport=function(){return new Jh},nd=Zu.getStatEventTarget=function(){return jl()},rd=Zu.ErrorCode=Hl,id=Zu.EventType=Yl,ad=Zu.Event=Vl,od=Zu.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},sd=Zu.FetchXmlHttpFactory=uh,ud=Zu.WebChannel=Zl,cd=Zu.XhrIo=vh,ld="@firebase/firestore",fd=function(){function e(t){d(this,e),this.uid=t}return v(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();fd.UNAUTHENTICATED=new fd(null),fd.GOOGLE_CREDENTIALS=new fd("google-credentials-uid"),fd.FIRST_PARTY=new fd("first-party-uid"),fd.MOCK_USER=new fd("mock-user");var hd="9.8.0",dd=new ye("@firebase/firestore");function pd(){return dd.logLevel}function vd(e){if(dd.logLevel<=le.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(gd);dd.debug.apply(dd,["Firestore (".concat(hd,"): ").concat(e)].concat(re(i)))}}function md(e){if(dd.logLevel<=le.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(gd);dd.error.apply(dd,["Firestore (".concat(hd,"): ").concat(e)].concat(re(i)))}}function yd(e){if(dd.logLevel<=le.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(gd);dd.warn.apply(dd,["Firestore (".concat(hd,"): ").concat(e)].concat(re(i)))}}function gd(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function bd(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(hd,") INTERNAL ASSERTION FAILED: ")+e;throw md(t),new Error(t)}function kd(e,t){e||bd()}function wd(e,t){return e}var xd={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Id=function(e){b(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return v(n)}(j),_d=v((function e(){var t=this;d(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),Ed=v((function e(t,n){d(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),Ad=function(){function e(){d(this,e)}return v(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(fd.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),Td=function(){function e(t){d(this,e),this.token=t,this.changeListener=null}return v(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),Sd=function(){function e(t){d(this,e),this.t=t,this.currentUser=fd.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return v(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new _d;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new _d,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(ae(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},s=function(e){vd("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return s(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?s(e):(vd("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new _d)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(vd("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(kd("string"==typeof n.accessToken),new Ed(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return kd(null===e||"string"==typeof e),new fd(e)}}]),e}(),Od=v((function e(t,n,r){d(this,e),this.type="FirstParty",this.user=fd.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);var i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)})),Cd=function(){function e(t,n,r){d(this,e),this.h=t,this.l=n,this.m=r}return v(e,[{key:"getToken",value:function(){return Promise.resolve(new Od(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(fd.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),Nd=v((function e(t){d(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),Pd=function(){function e(t){d(this,e),this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}return v(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&vd("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.p;return n.p=e.token,vd("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){vd("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.g.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.g.getImmediate({optional:!0});e?i(e):vd("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(kd("string"==typeof t.token),e.p=t.token,new Nd(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}(),Dd=function(){function e(t,n){var r=this;d(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.I(e)},this.T=function(e){return n.writeSequenceNumber(e)})}return v(e,[{key:"I",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.T&&this.T(e),e}}]),e}();function Rd(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}Dd.A=-1;var Ld=function(){function e(){d(this,e)}return v(e,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=Rd(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function Md(e,t){return e<t?-1:e>t?1:0}function Fd(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function Ud(e){return e+"\0"}var Vd=function(){function e(t,n){if(d(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new Id(xd.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Id(xd.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Id(xd.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Id(xd.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return v(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Md(this.nanoseconds,e.nanoseconds):Md(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),qd=function(){function e(t){d(this,e),this.timestamp=t}return v(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Vd(0,0))}},{key:"max",value:function(){return new e(new Vd(253402300799,999999999))}}]),e}();function jd(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Bd(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function zd(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var Kd=function(){function e(t,n,r){d(this,e),void 0===n?n=0:n>t.length&&bd(),void 0===r?r=t.length-n:r>t.length-n&&bd(),this.segments=t,this.offset=n,this.len=r}return v(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),Qd=function(e){b(n,e);var t=_(n);function n(){return d(this,n),t.apply(this,arguments)}return v(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var s=o[a];if(s.indexOf("//")>=0)throw new Id(xd.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push.apply(e,re(s.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Kd),Wd=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Gd=function(e){b(n,e);var t=_(n);function n(){return d(this,n),t.apply(this,arguments)}return v(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return Wd.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new Id(xd.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new Id(xd.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Id(xd.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===s?(o=!o,i++):"."!==s||o?(r+=s,i++):(a(),i++)}if(a(),o)throw new Id(xd.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Kd),Hd=function(){function e(t){d(this,e),this.fields=t,t.sort(Gd.comparator)}return v(e,[{key:"covers",value:function(e){var t,n=m(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return Fd(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}]),e}();var Yd=function(e){function t(e){d(this,t),this.binaryString=e}return v(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Md(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();Yd.EMPTY_BYTE_STRING=new Yd("");var Jd=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Xd(e){if(kd(!!e),"string"==typeof e){var t=0,n=Jd.exec(e);if(kd(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Zd(e.seconds),nanos:Zd(e.nanos)}}function Zd(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function $d(e){return"string"==typeof e?Yd.fromBase64String(e):Yd.fromUint8Array(e)}function ep(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function tp(e){var t=e.mapValue.fields.__previous_value__;return ep(t)?tp(t):t}function np(e){var t=Xd(e.mapValue.fields.__local_write_time__.timestampValue);return new Vd(t.seconds,t.nanos)}var rp=v((function e(t,n,r,i,a,o,s,u){d(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=u})),ip=function(){function e(t,n){d(this,e),this.projectId=t,this.database=n||"(default)"}return v(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function ap(e){return null==e}function op(e){return 0===e&&1/e==-1/0}function sp(e){return"number"==typeof e&&Number.isInteger(e)&&!op(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var up=function(){function e(t){d(this,e),this.path=t}return v(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===Qd.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(Qd.fromString(t))}},{key:"fromName",value:function(t){return new e(Qd.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(Qd.emptyPath())}},{key:"comparator",value:function(e,t){return Qd.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new Qd(t.slice()))}}]),e}(),cp={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},lp={nullValue:"NULL_VALUE"};function fp(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?ep(e)?4:Ep(e)?9007199254740991:10:bd()}function hp(e,t){if(e===t)return!0;var n=fp(e);if(n!==fp(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return np(e).isEqual(np(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Xd(e.timestampValue),r=Xd(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return $d(e.bytesValue).isEqual($d(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Zd(e.geoPointValue.latitude)===Zd(t.geoPointValue.latitude)&&Zd(e.geoPointValue.longitude)===Zd(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Zd(e.integerValue)===Zd(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Zd(e.doubleValue),r=Zd(t.doubleValue);return n===r?op(n)===op(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Fd(e.arrayValue.values||[],t.arrayValue.values||[],hp);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(jd(n)!==jd(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!hp(n[i],r[i])))return!1;return!0}(e,t);default:return bd()}}function dp(e,t){return void 0!==(e.values||[]).find((function(e){return hp(e,t)}))}function pp(e,t){if(e===t)return 0;var n=fp(e),r=fp(t);if(n!==r)return Md(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Md(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Zd(e.integerValue||e.doubleValue),r=Zd(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return vp(e.timestampValue,t.timestampValue);case 4:return vp(np(e),np(t));case 5:return Md(e.stringValue,t.stringValue);case 6:return function(e,t){var n=$d(e),r=$d(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=Md(n[i],r[i]);if(0!==a)return a}return Md(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Md(Zd(e.latitude),Zd(t.latitude));return 0!==n?n:Md(Zd(e.longitude),Zd(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=pp(n[i],r[i]);if(a)return a}return Md(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===cp.mapValue&&t===cp.mapValue)return 0;if(e===cp.mapValue)return 1;if(t===cp.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var s=Md(r[o],a[o]);if(0!==s)return s;var u=pp(n[r[o]],i[a[o]]);if(0!==u)return u}return Md(r.length,a.length)}(e.mapValue,t.mapValue);default:throw bd()}}function vp(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Md(e,t);var n=Xd(e),r=Xd(t),i=Md(n.seconds,r.seconds);return 0!==i?i:Md(n.nanos,r.nanos)}function mp(e){return yp(e)}function yp(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Xd(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?$d(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,up.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=m(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=yp(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=m(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(yp(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):bd();var t,n}function gp(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function bp(e){return!!e&&"integerValue"in e}function kp(e){return!!e&&"arrayValue"in e}function wp(e){return!!e&&"nullValue"in e}function xp(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Ip(e){return!!e&&"mapValue"in e}function _p(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Bd(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=_p(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=_p(e.arrayValue.values[r]);return n}return Object.assign({},e)}function Ep(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Ap(e){return"nullValue"in e?lp:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?gp(ip.empty(),up.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:bd()}function Tp(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?gp(ip.empty(),up.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?cp:bd()}function Sp(e,t){var n=pp(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Op(e,t){var n=pp(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var Cp=function(){function e(t){d(this,e),this.value=t}return v(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!Ip(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=_p(t)}},{key:"setAll",value:function(e){var t=this,n=Gd.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=_p(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());Ip(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return hp(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];Ip(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Bd(t,(function(t,n){return e[t]=n}));var r,i=m(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(_p(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function Np(e){var t=[];return Bd(e.fields,(function(e,n){var r=new Gd([e]);if(Ip(n)){var i=Np(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=m(i);try{for(o.s();!(a=o.n()).done;){var s=a.value;t.push(r.child(s))}}catch(u){o.e(u)}finally{o.f()}}}else t.push(r)})),new Hd(t)}var Pp=function(){function e(t,n,r,i,a,o){d(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.data=a,this.documentState=o}return v(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=Cp.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=Cp.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,qd.min(),qd.min(),Cp.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,qd.min(),r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,qd.min(),Cp.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,qd.min(),Cp.empty(),2)}}]),e}(),Dp=v((function e(t,n,r,i){d(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function Rp(e){return e.fields.find((function(e){return 2===e.kind}))}function Lp(e){return e.fields.filter((function(e){return 2!==e.kind}))}Dp.UNKNOWN_ID=-1;var Mp=v((function e(t,n){d(this,e),this.fieldPath=t,this.kind=n})),Fp=function(){function e(t,n){d(this,e),this.sequenceNumber=t,this.offset=n}return v(e,null,[{key:"empty",value:function(){return new e(0,qp.min())}}]),e}();function Up(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=qd.fromTimestamp(1e9===r?new Vd(n+1,0):new Vd(n,r));return new qp(i,up.empty(),t)}function Vp(e){return new qp(e.readTime,e.key,-1)}var qp=function(){function e(t,n,r){d(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return v(e,null,[{key:"min",value:function(){return new e(qd.min(),up.empty(),-1)}},{key:"max",value:function(){return new e(qd.max(),up.empty(),-1)}}]),e}();function jp(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=up.comparator(e.documentKey,t.documentKey))?n:Md(e.largestBatchId,t.largestBatchId)}var Bp=function(){function e(t,n){d(this,e),this.comparator=t,this.root=n||Kp.EMPTY}return v(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Kp.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Kp.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new zp(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new zp(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new zp(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new zp(this.root,e,this.comparator,!0)}}]),e}(),zp=function(){function e(t,n,r,i){d(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return v(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Kp=function(){function e(t,n,r,i,a){d(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return v(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw bd();if(this.right.isRed())throw bd();var e=this.left.check();if(e!==this.right.check())throw bd();return e+(this.isRed()?0:1)}}]),e}();Kp.EMPTY=null,Kp.RED=!0,Kp.BLACK=!1,Kp.EMPTY=new(function(){function e(){d(this,e),this.size=0}return v(e,[{key:"key",get:function(){throw bd()}},{key:"value",get:function(){throw bd()}},{key:"color",get:function(){throw bd()}},{key:"left",get:function(){throw bd()}},{key:"right",get:function(){throw bd()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Kp(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var Qp=function(){function e(t){d(this,e),this.comparator=t,this.data=new Bp(this.comparator)}return v(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Wp(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Wp(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),Wp=function(){function e(t){d(this,e),this.iter=t}return v(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function Gp(e){return e.hasNext()?e.getNext():void 0}var Hp=v((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;d(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=s,this.P=null}));function Yp(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new Hp(e,t,n,r,i,a,o)}function Jp(e){var t=wd(e);if(null===t.P){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return(t=e).field.canonicalString()+t.op.toString()+mp(t.value);var t})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),ap(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return mp(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return mp(e)})).join(",")),t.P=n}return t.P}function Xp(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!dv(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!hp(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!vv(e.startAt,t.startAt)&&vv(e.endAt,t.endAt)}function Zp(e){return up.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function $p(e,t){return e.filters.filter((function(e){return e instanceof nv&&e.field.isEqual(t)}))}function ev(e,t,n){var r,i=lp,a=!0,o=m($p(e,t));try{for(o.s();!(r=o.n()).done;){var s=r.value,u=lp,c=!0;switch(s.op){case"<":case"<=":u=Ap(s.value);break;case"==":case"in":case">=":u=s.value;break;case">":u=s.value,c=!1;break;case"!=":case"not-in":u=lp}Sp({value:i,inclusive:a},{value:u,inclusive:c})<0&&(i=u,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Sp({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function tv(e,t,n){var r,i=cp,a=!0,o=m($p(e,t));try{for(o.s();!(r=o.n()).done;){var s=r.value,u=cp,c=!0;switch(s.op){case">=":case">":u=Tp(s.value),c=!1;break;case"==":case"in":case"<=":u=s.value;break;case"<":u=s.value,c=!1;break;case"!=":case"not-in":u=cp}Op({value:i,inclusive:a},{value:u,inclusive:c})>0&&(i=u,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Op({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var nv=function(e){b(n,e);var t=_(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return v(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(pp(t,this.value)):null!==t&&fp(this.value)===fp(t)&&this.v(pp(t,this.value))}},{key:"v",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return bd()}}},{key:"S",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new rv(e,t,r):"array-contains"===t?new sv(e,r):"in"===t?new uv(e,r):"not-in"===t?new cv(e,r):"array-contains-any"===t?new lv(e,r):new n(e,t,r)}},{key:"V",value:function(e,t,n){return"in"===t?new iv(e,n):new av(e,n)}}]),n}(function(){return v((function e(){d(this,e)}))}()),rv=function(e){b(n,e);var t=_(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this,e,r,i)).key=up.fromName(i.referenceValue),a}return v(n,[{key:"matches",value:function(e){var t=up.comparator(e.key,this.key);return this.v(t)}}]),n}(nv),iv=function(e){b(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,"in",r)).keys=ov("in",r),i}return v(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(nv),av=function(e){b(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,"not-in",r)).keys=ov("not-in",r),i}return v(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(nv);function ov(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return up.fromName(e.referenceValue)}))}var sv=function(e){b(n,e);var t=_(n);function n(e,r){return d(this,n),t.call(this,e,"array-contains",r)}return v(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return kp(t)&&dp(t.arrayValue,this.value)}}]),n}(nv),uv=function(e){b(n,e);var t=_(n);function n(e,r){return d(this,n),t.call(this,e,"in",r)}return v(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&dp(this.value.arrayValue,t)}}]),n}(nv),cv=function(e){b(n,e);var t=_(n);function n(e,r){return d(this,n),t.call(this,e,"not-in",r)}return v(n,[{key:"matches",value:function(e){if(dp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!dp(this.value.arrayValue,t)}}]),n}(nv),lv=function(e){b(n,e);var t=_(n);function n(e,r){return d(this,n),t.call(this,e,"array-contains-any",r)}return v(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!kp(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return dp(t.value.arrayValue,e)}))}}]),n}(nv),fv=v((function e(t,n){d(this,e),this.position=t,this.inclusive=n})),hv=v((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";d(this,e),this.field=t,this.dir=n}));function dv(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function pv(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?up.comparator(up.fromName(o.referenceValue),n.key):pp(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function vv(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!hp(e.position[n],t.position[n]))return!1;return!0}var mv=v((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;d(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=s,this.endAt=u,this.D=null,this.C=null,this.startAt,this.endAt}));function yv(e,t,n,r,i,a,o,s){return new mv(e,t,n,r,i,a,o,s)}function gv(e){return new mv(e)}function bv(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function kv(e){var t,n=m(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.S())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function wv(e){return null!==e.collectionGroup}function xv(e){var t=wd(e);if(null===t.D){t.D=[];var n=kv(t),r=bv(t);if(null!==n&&null===r)n.isKeyField()||t.D.push(new hv(n)),t.D.push(new hv(Gd.keyField(),"asc"));else{var i,a=!1,o=m(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var s=i.value;t.D.push(s),s.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var u=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.D.push(new hv(Gd.keyField(),u))}}}return t.D}function Iv(e){var t=wd(e);if(!t.C)if("F"===t.limitType)t.C=Yp(t.path,t.collectionGroup,xv(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=m(xv(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new hv(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var s=t.endAt?new fv(t.endAt.position,t.endAt.inclusive):null,u=t.startAt?new fv(t.startAt.position,t.startAt.inclusive):null;t.C=Yp(t.path,t.collectionGroup,r,t.filters,t.limit,s,u)}return t.C}function _v(e,t,n){return new mv(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Ev(e,t){return Xp(Iv(e),Iv(t))&&e.limitType===t.limitType}function Av(e){return"".concat(Jp(Iv(e)),"|lt:").concat(e.limitType)}function Tv(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(mp(t.value));var t})).join(", "),"]")),ap(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return mp(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return mp(e)})).join(",")),"Target(".concat(t,")")}(Iv(e)),"; limitType=").concat(e.limitType,")")}function Sv(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):up.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=m(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=m(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=pv(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,xv(e),t))&&!(e.endAt&&!function(e,t,n){var r=pv(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,xv(e),t))}(e,t)}function Ov(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Cv(e){return function(t,n){var r,i=!1,a=m(xv(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,s=Nv(o,t,n);if(0!==s)return s;i=i||o.field.isKeyField()}}catch(u){a.e(u)}finally{a.f()}return 0}}function Nv(e,t,n){var r=e.field.isKeyField()?up.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?pp(r,i):bd()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return bd()}}function Pv(e,t){if(e.N){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:op(t)?"-0":t}}function Dv(e){return{integerValue:""+e}}function Rv(e,t){return sp(t)?Dv(t):Pv(e,t)}var Lv=v((function e(){d(this,e),this._=void 0}));function Mv(e,t,n){return e instanceof Vv?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof qv?jv(e,t):e instanceof Bv?zv(e,t):function(e,t){var n=Uv(e,t),r=Qv(n)+Qv(e.k);return bp(n)&&bp(e.k)?Dv(r):Pv(e.M,r)}(e,t)}function Fv(e,t,n){return e instanceof qv?jv(e,t):e instanceof Bv?zv(e,t):n}function Uv(e,t){return e instanceof Kv?bp(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var Vv=function(e){b(n,e);var t=_(n);function n(){return d(this,n),t.apply(this,arguments)}return v(n)}(Lv),qv=function(e){b(n,e);var t=_(n);function n(e){var r;return d(this,n),(r=t.call(this)).elements=e,r}return v(n)}(Lv);function jv(e,t){var n,r=Wv(t),i=m(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return hp(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Bv=function(e){b(n,e);var t=_(n);function n(e){var r;return d(this,n),(r=t.call(this)).elements=e,r}return v(n)}(Lv);function zv(e,t){var n,r=Wv(t),i=m(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!hp(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Kv=function(e){b(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).M=e,i.k=r,i}return v(n)}(Lv);function Qv(e){return Zd(e.integerValue||e.doubleValue)}function Wv(e){return kp(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var Gv=v((function e(t,n){d(this,e),this.field=t,this.transform=n}));var Hv=v((function e(t,n){d(this,e),this.version=t,this.transformResults=n})),Yv=function(){function e(t,n){d(this,e),this.updateTime=t,this.exists=n}return v(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function Jv(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var Xv=v((function e(){d(this,e)}));function Zv(e,t,n){e instanceof rm?function(e,t,n){var r=e.value.clone(),i=om(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof im?function(e,t,n){if(Jv(e.precondition,t)){var r=om(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(am(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function $v(e,t,n){e instanceof rm?function(e,t,n){if(Jv(e.precondition,t)){var r=e.value.clone(),i=sm(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(nm(t),r).setHasLocalMutations()}}(e,t,n):e instanceof im?function(e,t,n){if(Jv(e.precondition,t)){var r=sm(e.fieldTransforms,n,t),i=t.data;i.setAll(am(e)),i.setAll(r),t.convertToFoundDocument(nm(t),i).setHasLocalMutations()}}(e,t,n):function(e,t){Jv(e.precondition,t)&&t.convertToNoDocument(qd.min())}(e,t)}function em(e,t){var n,r=null,i=m(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),s=Uv(a.transform,o||null);null!=s&&(null==r&&(r=Cp.empty()),r.set(a.field,s))}}catch(u){i.e(u)}finally{i.f()}return r||null}function tm(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Fd(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof qv&&t instanceof qv||e instanceof Bv&&t instanceof Bv?Fd(e.elements,t.elements,hp):e instanceof Kv&&t instanceof Kv?hp(e.k,t.k):e instanceof Vv&&t instanceof Vv}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function nm(e){return e.isFoundDocument()?e.version:qd.min()}var rm=function(e){b(n,e);var t=_(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return d(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return v(n)}(Xv),im=function(e){b(n,e);var t=_(n);function n(e,r,i,a){var o,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return d(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=s,o.type=1,o}return v(n)}(Xv);function am(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function om(e,t,n){var r=new Map;kd(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,s=t.data.field(a.field);r.set(a.field,Fv(o,s,n[i]))}return r}function sm(e,t,n){var r,i=new Map,a=m(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=o.transform,u=n.data.field(o.field);i.set(o.field,Mv(s,u,t))}}catch(c){a.e(c)}finally{a.f()}return i}var um,cm,lm=function(e){b(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return v(n)}(Xv),fm=function(e){b(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return v(n)}(Xv),hm=v((function e(t){d(this,e),this.count=t}));function dm(e){switch(e){default:return bd();case xd.CANCELLED:case xd.UNKNOWN:case xd.DEADLINE_EXCEEDED:case xd.RESOURCE_EXHAUSTED:case xd.INTERNAL:case xd.UNAVAILABLE:case xd.UNAUTHENTICATED:return!1;case xd.INVALID_ARGUMENT:case xd.NOT_FOUND:case xd.ALREADY_EXISTS:case xd.PERMISSION_DENIED:case xd.FAILED_PRECONDITION:case xd.ABORTED:case xd.OUT_OF_RANGE:case xd.UNIMPLEMENTED:case xd.DATA_LOSS:return!0}}function pm(e){if(void 0===e)return md("GRPC error has no .code"),xd.UNKNOWN;switch(e){case um.OK:return xd.OK;case um.CANCELLED:return xd.CANCELLED;case um.UNKNOWN:return xd.UNKNOWN;case um.DEADLINE_EXCEEDED:return xd.DEADLINE_EXCEEDED;case um.RESOURCE_EXHAUSTED:return xd.RESOURCE_EXHAUSTED;case um.INTERNAL:return xd.INTERNAL;case um.UNAVAILABLE:return xd.UNAVAILABLE;case um.UNAUTHENTICATED:return xd.UNAUTHENTICATED;case um.INVALID_ARGUMENT:return xd.INVALID_ARGUMENT;case um.NOT_FOUND:return xd.NOT_FOUND;case um.ALREADY_EXISTS:return xd.ALREADY_EXISTS;case um.PERMISSION_DENIED:return xd.PERMISSION_DENIED;case um.FAILED_PRECONDITION:return xd.FAILED_PRECONDITION;case um.ABORTED:return xd.ABORTED;case um.OUT_OF_RANGE:return xd.OUT_OF_RANGE;case um.UNIMPLEMENTED:return xd.UNIMPLEMENTED;case um.DATA_LOSS:return xd.DATA_LOSS;default:return bd()}}(cm=um||(um={}))[cm.OK=0]="OK",cm[cm.CANCELLED=1]="CANCELLED",cm[cm.UNKNOWN=2]="UNKNOWN",cm[cm.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",cm[cm.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",cm[cm.NOT_FOUND=5]="NOT_FOUND",cm[cm.ALREADY_EXISTS=6]="ALREADY_EXISTS",cm[cm.PERMISSION_DENIED=7]="PERMISSION_DENIED",cm[cm.UNAUTHENTICATED=16]="UNAUTHENTICATED",cm[cm.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",cm[cm.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",cm[cm.ABORTED=10]="ABORTED",cm[cm.OUT_OF_RANGE=11]="OUT_OF_RANGE",cm[cm.UNIMPLEMENTED=12]="UNIMPLEMENTED",cm[cm.INTERNAL=13]="INTERNAL",cm[cm.UNAVAILABLE=14]="UNAVAILABLE",cm[cm.DATA_LOSS=15]="DATA_LOSS";var vm=function(){function e(t,n){d(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return v(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=m(n);try{for(i.s();!(r=i.n()).done;){var a=f(r.value,2),o=a[0],s=a[1];if(this.equalsFn(o,e))return s}}catch(u){i.e(u)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Bd(this.inner,(function(t,n){var r,i=m(n);try{for(i.s();!(r=i.n()).done;){var a=f(r.value,2),o=a[0],s=a[1];e(o,s)}}catch(u){i.e(u)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return zd(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),mm=new Bp(up.comparator);function ym(){return mm}var gm=new Bp(up.comparator);function bm(){for(var e=gm,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function km(){return new vm((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var wm=new Bp(up.comparator),xm=new Qp(up.comparator);function Im(){for(var e=xm,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var _m=new Qp(Md);function Em(){return _m}var Am=function(){function e(t,n,r,i,a){d(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return v(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,Tm.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(qd.min(),r,Em(),ym(),Im())}}]),e}(),Tm=function(){function e(t,n,r,i,a){d(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return v(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(Yd.EMPTY_BYTE_STRING,n,Im(),Im(),Im())}}]),e}(),Sm=v((function e(t,n,r,i){d(this,e),this.O=t,this.removedTargetIds=n,this.key=r,this.F=i})),Om=v((function e(t,n){d(this,e),this.targetId=t,this.$=n})),Cm=v((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Yd.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;d(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),Nm=function(){function e(){d(this,e),this.B=0,this.L=Rm(),this.U=Yd.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}return v(e,[{key:"current",get:function(){return this.q}},{key:"resumeToken",get:function(){return this.U}},{key:"G",get:function(){return 0!==this.B}},{key:"j",get:function(){return this.K}},{key:"W",value:function(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}},{key:"H",value:function(){var e=Im(),t=Im(),n=Im();return this.L.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:bd()}})),new Tm(this.U,this.q,e,t,n)}},{key:"J",value:function(){this.K=!1,this.L=Rm()}},{key:"Y",value:function(e,t){this.K=!0,this.L=this.L.insert(e,t)}},{key:"X",value:function(e){this.K=!0,this.L=this.L.remove(e)}},{key:"Z",value:function(){this.B+=1}},{key:"tt",value:function(){this.B-=1}},{key:"et",value:function(){this.K=!0,this.q=!0}}]),e}(),Pm=function(){function e(t){d(this,e),this.nt=t,this.st=new Map,this.it=ym(),this.rt=Dm(),this.ot=new Qp(Md)}return v(e,[{key:"ut",value:function(e){var t,n=m(e.O);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.F&&e.F.isFoundDocument()?this.at(r,e.F):this.ct(r,e.key,e.F)}}catch(s){n.e(s)}finally{n.f()}var i,a=m(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.ct(o,e.key,e.F)}}catch(s){a.e(s)}finally{a.f()}}},{key:"ht",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.lt(n);switch(e.state){case 0:t.ft(n)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||t.removeTarget(n);break;case 3:t.ft(n)&&(r.et(),r.W(e.resumeToken));break;case 4:t.ft(n)&&(t.dt(n),r.W(e.resumeToken));break;default:bd()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((function(e,r){n.ft(r)&&t(r)}))}},{key:"_t",value:function(e){var t=e.targetId,n=e.$.count,r=this.wt(t);if(r){var i=r.target;if(Zp(i))if(0===n){var a=new up(i.path);this.ct(t,a,Pp.newNoDocument(a,qd.min()))}else kd(1===n);else this.gt(t)!==n&&(this.dt(t),this.ot=this.ot.add(t))}}},{key:"yt",value:function(e){var t=this,n=new Map;this.st.forEach((function(r,i){var a=t.wt(i);if(a){if(r.current&&Zp(a.target)){var o=new up(a.target.path);null!==t.it.get(o)||t.It(i,o)||t.ct(i,o,Pp.newNoDocument(o,e))}r.j&&(n.set(i,r.H()),r.J())}}));var r=Im();this.rt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.wt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.it.forEach((function(t,n){return n.setReadTime(e)}));var i=new Am(e,n,this.ot,this.it,r);return this.it=ym(),this.rt=Dm(),this.ot=new Qp(Md),i}},{key:"at",value:function(e,t){if(this.ft(e)){var n=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,n),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}}},{key:"ct",value:function(e,t,n){if(this.ft(e)){var r=this.lt(e);this.It(e,t)?r.Y(t,1):r.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),n&&(this.it=this.it.insert(t,n))}}},{key:"removeTarget",value:function(e){this.st.delete(e)}},{key:"gt",value:function(e){var t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Z",value:function(e){this.lt(e).Z()}},{key:"lt",value:function(e){var t=this.st.get(e);return t||(t=new Nm,this.st.set(e,t)),t}},{key:"Tt",value:function(e){var t=this.rt.get(e);return t||(t=new Qp(Md),this.rt=this.rt.insert(e,t)),t}},{key:"ft",value:function(e){var t=null!==this.wt(e);return t||vd("WatchChangeAggregator","Detected inactive target",e),t}},{key:"wt",value:function(e){var t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}},{key:"dt",value:function(e){var t=this;this.st.set(e,new Nm),this.nt.getRemoteKeysForTarget(e).forEach((function(n){t.ct(e,n,null)}))}},{key:"It",value:function(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}]),e}();function Dm(){return new Bp(up.comparator)}function Rm(){return new Bp(up.comparator)}var Lm={asc:"ASCENDING",desc:"DESCENDING"},Mm={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Fm=v((function e(t,n){d(this,e),this.databaseId=t,this.N=n}));function Um(e,t){return e.N?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Vm(e,t){return e.N?t.toBase64():t.toUint8Array()}function qm(e,t){return Um(e,t.toTimestamp())}function jm(e){return kd(!!e),qd.fromTimestamp(function(e){var t=Xd(e);return new Vd(t.seconds,t.nanos)}(e))}function Bm(e,t){return function(e){return new Qd(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function zm(e){var t=Qd.fromString(e);return kd(hy(t)),t}function Km(e,t){return Bm(e.databaseId,t.path)}function Qm(e,t){var n=zm(t);if(n.get(1)!==e.databaseId.projectId)throw new Id(xd.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Id(xd.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new up(Ym(n))}function Wm(e,t){return Bm(e.databaseId,t)}function Gm(e){var t=zm(e);return 4===t.length?Qd.emptyPath():Ym(t)}function Hm(e){return new Qd(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Ym(e){return kd(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Jm(e,t,n){return{name:Km(e,t),fields:n.value.mapValue.fields}}function Xm(e,t,n){var r=Qm(e,t.name),i=jm(t.updateTime),a=new Cp({mapValue:{fields:t.fields}}),o=Pp.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function Zm(e,t){return"found"in t?function(e,t){kd(!!t.found),t.found.name,t.found.updateTime;var n=Qm(e,t.found.name),r=jm(t.found.updateTime),i=new Cp({mapValue:{fields:t.found.fields}});return Pp.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){kd(!!t.missing),kd(!!t.readTime);var n=Qm(e,t.missing),r=jm(t.readTime);return Pp.newNoDocument(n,r)}(e,t):bd()}function $m(e,t){var n;if(t instanceof rm)n={update:Jm(e,t.key,t.value)};else if(t instanceof lm)n={delete:Km(e,t.key)};else if(t instanceof im)n={update:Jm(e,t.key,t.data),updateMask:fy(t.fieldMask)};else{if(!(t instanceof fm))return bd();n={verify:Km(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Vv)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof qv)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Bv)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Kv)return{fieldPath:t.field.canonicalString(),increment:n.k};throw bd()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:qm(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:bd()}(e,t.precondition)),n}function ey(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?Yv.updateTime(jm(e.updateTime)):void 0!==e.exists?Yv.exists(e.exists):Yv.none()}(t.currentDocument):Yv.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)kd("REQUEST_TIME"===t.setToServerValue),n=new Vv;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new qv(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new Bv(i)}else"increment"in t?n=new Kv(e,t.increment):bd();var a=Gd.fromServerFormat(t.fieldPath);return new Gv(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=Qm(e,t.update.name),a=new Cp({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new Hd(t.map((function(e){return Gd.fromServerFormat(e)})))}(t.updateMask);return new im(i,a,o,n,r)}return new rm(i,a,n,r)}if(t.delete){var s=Qm(e,t.delete);return new lm(s,n)}if(t.verify){var u=Qm(e,t.verify);return new fm(u,n)}return bd()}function ty(e,t){return{documents:[Wm(e,t.path)]}}function ny(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Wm(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Wm(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(xp(e.value))return{unaryFilter:{field:sy(e.field),op:"IS_NAN"}};if(wp(e.value))return{unaryFilter:{field:sy(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(xp(e.value))return{unaryFilter:{field:sy(e.field),op:"IS_NOT_NAN"}};if(wp(e.value))return{unaryFilter:{field:sy(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:sy(e.field),op:oy(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:sy(e.field),direction:ay(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,s=function(e,t){return e.N||ap(t)?t:{value:t}}(e,t.limit);return null!==s&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function ry(e){var t=Gm(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){kd(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=iy(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(e){return function(e){return new hv(uy(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var u=null;n.limit&&(u=function(e){var t;return ap(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new fv(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new fv(n,t)}(n.endAt)),yv(t,i,s,o,u,"F",c,l)}function iy(e){return e?void 0!==e.unaryFilter?[ly(e)]:void 0!==e.fieldFilter?[cy(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return iy(e)})).reduce((function(e,t){return e.concat(t)})):bd():[]}function ay(e){return Lm[e]}function oy(e){return Mm[e]}function sy(e){return{fieldPath:e.canonicalString()}}function uy(e){return Gd.fromServerFormat(e.fieldPath)}function cy(e){return nv.create(uy(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return bd()}}(e.fieldFilter.op),e.fieldFilter.value)}function ly(e){switch(e.unaryFilter.op){case"IS_NAN":var t=uy(e.unaryFilter.field);return nv.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=uy(e.unaryFilter.field);return nv.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=uy(e.unaryFilter.field);return nv.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=uy(e.unaryFilter.field);return nv.create(i,"!=",{nullValue:"NULL_VALUE"});default:return bd()}}function fy(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function hy(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function dy(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=vy(t)),t=py(e.get(n),t);return vy(t)}function py(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function vy(e){return e+"\x01\x01"}function my(e){var t=e.length;if(kd(t>=2),2===t)return kd("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Qd.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&bd(),e.charAt(o+1)){case"\x01":var s=e.substring(a,o),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:bd()}a=o+2}return new Qd(r)}var yy=["userId","batchId"];function gy(e,t){return[e,dy(t)]}function by(e,t,n){return[e,dy(t),n]}var ky={},wy=["prefixPath","collectionGroup","readTime","documentId"],xy=["prefixPath","collectionGroup","documentId"],Iy=["collectionGroup","readTime","prefixPath","documentId"],_y=["canonicalId","targetId"],Ey=["targetId","path"],Ay=["path","targetId"],Ty=["collectionId","parent"],Sy=["indexId","uid"],Oy=["uid","sequenceNumber"],Cy=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Ny=["indexId","uid","orderedDocumentKey"],Py=["userId","collectionPath","documentId"],Dy=["userId","collectionPath","largestBatchId"],Ry=["userId","collectionGroup","largestBatchId"],Ly=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),My=[].concat(re(Ly),["documentOverlays"]),Fy=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Uy=[].concat(Fy,["indexConfiguration","indexState","indexEntries"]),Vy="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",qy=function(){function e(){d(this,e),this.onCommittedListeners=[]}return v(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}(),jy=function(){function e(t){var n=this;d(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return v(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&bd(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=m(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}}]),e}(),By=function(){function e(t,n){var r=this;d(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.At=new _d,this.transaction.oncomplete=function(){r.At.resolve()},this.transaction.onabort=function(){n.error?r.At.reject(new Qy(t,n.error)):r.At.resolve()},this.transaction.onerror=function(e){var n=Jy(e.target.error);r.At.reject(new Qy(t,n))}}return v(e,[{key:"Rt",get:function(){return this.At.promise}},{key:"abort",value:function(e){e&&this.At.reject(e),this.aborted||(vd("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"bt",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new Gy(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new Qy(n,t)}}}]),e}(),zy=function(){function e(t,n,r){d(this,e),this.name=t,this.version=n,this.Pt=r,12.2===e.Vt(R())&&md("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return v(e,[{key:"Nt",value:function(){var e=ae(te().mark((function e(t){var n=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return vd("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Qy(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Id(xd.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new Id(xd.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new Qy(t,n))},i.onupgradeneeded=function(e){vd("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.Pt.kt(t,i.transaction,e.oldVersion,n.version).next((function(){vd("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.Mt&&(this.db.onversionchange=function(e){return n.Mt(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ot",value:function(e){this.Mt=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=ae(te().mark((function e(t,n,r,i){var a,o,s,u,c=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(te().mark((function e(){var n,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Nt(t);case 2:return c.db=e.sent,n=By.open(c.db,t,a?"readonly":"readwrite",r),o=i(n).next((function(e){return n.bt(),e})).catch((function(e){return n.abort(e),jy.reject(e)})).toPromise(),o.catch((function(){})),e.next=7,n.Rt;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(s=e.t0)){e.next=8;break}return e.abrupt("return",s.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),u="FirebaseError"!==e.t1.name&&o<3,vd("SimpleDb","Transaction failed with error:",e.t1.message,"Retrying:",u),this.close(),u){e.next=15;break}return e.abrupt("return",Promise.reject(e.t1));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return vd("SimpleDb","Removing database:",e),Hy(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"vt",value:function(){if(!q())return!1;if(e.St())return!0;var t=R(),n=e.Vt(t),r=0<n&&n<10,i=e.Dt(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"St",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.Ct)}},{key:"xt",value:function(e,t){return e.store(t)}},{key:"Vt",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"Dt",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),Ky=function(){function e(t){d(this,e),this.Ft=t,this.$t=!1,this.Bt=null}return v(e,[{key:"isDone",get:function(){return this.$t}},{key:"Lt",get:function(){return this.Bt}},{key:"cursor",set:function(e){this.Ft=e}},{key:"done",value:function(){this.$t=!0}},{key:"Ut",value:function(e){this.Bt=e}},{key:"delete",value:function(){return Hy(this.Ft.delete())}}]),e}(),Qy=function(e){b(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this,xd.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return v(n)}(Id);function Wy(e){return"IndexedDbTransactionError"===e.name}var Gy=function(){function e(t){d(this,e),this.store=t}return v(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(vd("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(vd("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Hy(n)}},{key:"add",value:function(e){return vd("SimpleDb","ADD",this.store.name,e,e),Hy(this.store.add(e))}},{key:"get",value:function(e){var t=this;return Hy(this.store.get(e)).next((function(n){return void 0===n&&(n=null),vd("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return vd("SimpleDb","DELETE",this.store.name,e),Hy(this.store.delete(e))}},{key:"count",value:function(){return vd("SimpleDb","COUNT",this.store.name),Hy(this.store.count())}},{key:"qt",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.Kt(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new jy((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"Gt",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new jy((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"Qt",value:function(e,t){vd("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.jt=!1;var r=this.cursor(n);return this.Kt(r,(function(e,t,n){return n.delete()}))}},{key:"Wt",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.Kt(r,t)}},{key:"zt",value:function(e){var t=this.cursor({});return new jy((function(n,r){t.onerror=function(e){var t=Jy(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"Kt",value:function(e,t){var n=[];return new jy((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new Ky(i),o=t(i.primaryKey,i.value,a);if(o instanceof jy){var s=o.catch((function(e){return a.done(),jy.reject(e)}));n.push(s)}a.isDone?r():null===a.Lt?i.continue():i.continue(a.Lt)}else r()}})).next((function(){return jy.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.jt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function Hy(e){return new jy((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=Jy(e.target.error);n(t)}}))}var Yy=!1;function Jy(e){var t=zy.Vt(R());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new Id("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Yy||(Yy=!0,setTimeout((function(){throw r}),0)),r}}return e}var Xy=function(e){b(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).Ht=e,i.currentSequenceNumber=r,i}return v(n)}(qy);function Zy(e,t){var n=wd(e);return zy.xt(n.Ht,t)}var $y=function(){function e(t,n,r,i){d(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return v(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&Zv(i,e,n[r])}}},{key:"applyToLocalView",value:function(e){var t,n=m(this.baseMutations);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.key.isEqual(e.key)&&$v(r,e,this.localWriteTime)}}catch(s){n.e(s)}finally{n.f()}var i,a=m(this.mutations);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.key.isEqual(e.key)&&$v(o,e,this.localWriteTime)}}catch(s){a.e(s)}finally{a.f()}}},{key:"applyToLocalDocumentSet",value:function(e){var t=this;this.mutations.forEach((function(n){var r=e.get(n.key),i=r;t.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(qd.min())}))}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Im())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&Fd(this.mutations,e.mutations,(function(e,t){return tm(e,t)}))&&Fd(this.baseMutations,e.baseMutations,(function(e,t){return tm(e,t)}))}}]),e}(),eg=function(){function e(t,n,r,i){d(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return v(e,null,[{key:"from",value:function(t,n,r){kd(t.mutations.length===r.length);for(var i=wm,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),tg=function(){function e(t,n){d(this,e),this.largestBatchId=t,this.mutation=n}return v(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),ng=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:qd.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:qd.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Yd.EMPTY_BYTE_STRING;d(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return v(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),rg=v((function e(t){d(this,e),this.Jt=t}));function ig(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:ag(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Km(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Um(e,t.version.toTimestamp())}}(e.Jt,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:og(t.version)};else{if(!t.isUnknownDocument())return bd();r.unknownDocument={path:n.path.toArray(),version:og(t.version)}}return r}function ag(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function og(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function sg(e){var t=new Vd(e.seconds,e.nanoseconds);return qd.fromTimestamp(t)}function ug(e,t){for(var n=(t.baseMutations||[]).map((function(t){return ey(e.Jt,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return ey(e.Jt,t)})),s=Vd.fromMillis(t.localWriteTimeMs);return new $y(t.batchId,s,n,o)}function cg(e){var t,n,r=sg(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?sg(e.lastLimboFreeSnapshotVersion):qd.min();return void 0!==e.query.documents?(kd(1===(n=e.query).documents.length),t=Iv(gv(Gm(n.documents[0])))):t=function(e){return Iv(ry(e))}(e.query),new ng(t,e.targetId,0,e.lastListenSequenceNumber,r,i,Yd.fromBase64String(e.resumeToken))}function lg(e,t){var n,r=og(t.snapshotVersion),i=og(t.lastLimboFreeSnapshotVersion);n=Zp(t.target)?ty(e.Jt,t.target):ny(e.Jt,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Jp(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function fg(e){var t=ry({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?_v(t,t.limit,"L"):t}function hg(e,t){return new tg(t.largestBatchId,ey(e.Jt,t.overlayMutation))}function dg(e,t){var n=t.path.lastSegment();return[e,dy(t.path.popLast()),n]}var pg=function(){function e(){d(this,e)}return v(e,[{key:"getBundleMetadata",value:function(e,t){return vg(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:sg(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return vg(e).put({bundleId:(n=t).id,createTime:og(jm(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return mg(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:fg(t.bundledQuery),readTime:sg(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return mg(e).put(function(e){return{name:e.name,readTime:og(jm(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function vg(e){return Zy(e,"bundles")}function mg(e){return Zy(e,"namedQueries")}var yg=function(){function e(t,n){d(this,e),this.M=t,this.userId=n}return v(e,[{key:"getOverlay",value:function(e,t){var n=this;return gg(e).get(dg(this.userId,t)).next((function(e){return e?hg(n.M,e):null}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new tg(t,a);i.push(r.Xt(e,o))})),jy.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(dy(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(gg(e).Qt("collectionPathOverlayIndex",i))})),jy.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=km(),a=dy(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return gg(e).qt("collectionPathOverlayIndex",o).next((function(e){var t,n=m(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=hg(r.M,a);i.set(o.getKey(),o)}}catch(s){n.e(s)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=km(),s=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return gg(e).Wt({index:"collectionGroupOverlayIndex",range:s},(function(e,t,n){var s=hg(a.M,t);o.size()<r||s.largestBatchId===i?(o.set(s.getKey(),s),i=s.largestBatchId):n.done()})).next((function(){return o}))}},{key:"Xt",value:function(e,t){return gg(e).put(function(e,t,n){var r=f(dg(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:$m(e.Jt,n.mutation)}}(this.M,this.userId,t))}}],[{key:"Yt",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function gg(e){return Zy(e,"documentOverlays")}var bg=function(){function e(){d(this,e)}return v(e,[{key:"Zt",value:function(e,t){this.te(e,t),t.ee()}},{key:"te",value:function(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Zd(e.integerValue));else if("doubleValue"in e){var n=Zd(e.doubleValue);isNaN(n)?this.ne(t,13):(this.ne(t,15),op(n)?t.se(0):t.se(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie("".concat(r.seconds||"")),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue($d(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ne(t,45),t.se(i.latitude||0),t.se(i.longitude||0)}else"mapValue"in e?Ep(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):bd()}},{key:"re",value:function(e,t){this.ne(t,25),this.le(e,t)}},{key:"le",value:function(e,t){t.ie(e)}},{key:"ce",value:function(e,t){var n=e.fields||{};this.ne(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.re(a,t),this.te(n[a],t)}}},{key:"he",value:function(e,t){var n=e.values||[];this.ne(t,50);var r,i=m(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.te(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"ae",value:function(e,t){var n=this;this.ne(t,37),up.fromName(e).path.forEach((function(e){n.ne(t,60),n.le(e,t)}))}},{key:"ne",value:function(e,t){e.se(t)}},{key:"oe",value:function(e){e.se(2)}}]),e}();function kg(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function wg(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=kg(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}bg.fe=new bg;var xg=function(){function e(){d(this,e),this.buffer=new Uint8Array(1024),this.position=0}return v(e,[{key:"de",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this._e(n.value),n=t.next();this.we()}},{key:"me",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.ge(n.value),n=t.next();this.ye()}},{key:"pe",value:function(e){var t,n=m(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this._e(i);else if(i<2048)this._e(960|i>>>6),this._e(128|63&i);else if(r<"\ud800"||"\udbff"<r)this._e(480|i>>>12),this._e(128|63&i>>>6),this._e(128|63&i);else{var a=r.codePointAt(0);this._e(240|a>>>18),this._e(128|63&a>>>12),this._e(128|63&a>>>6),this._e(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.we()}},{key:"Ie",value:function(e){var t,n=m(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.ge(i);else if(i<2048)this.ge(960|i>>>6),this.ge(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.ge(480|i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i);else{var a=r.codePointAt(0);this.ge(240|a>>>18),this.ge(128|63&a>>>12),this.ge(128|63&a>>>6),this.ge(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.ye()}},{key:"Te",value:function(e){var t=this.Ee(e),n=wg(t);this.Ae(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Re",value:function(e){var t=this.Ee(e),n=wg(t);this.Ae(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"be",value:function(){this.Pe(255),this.Pe(255)}},{key:"Ve",value:function(){this.ve(255),this.ve(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Se",value:function(){return this.buffer.slice(0,this.position)}},{key:"Ee",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"_e",value:function(e){var t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}},{key:"ge",value:function(e){var t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}},{key:"we",value:function(){this.Pe(0),this.Pe(1)}},{key:"ye",value:function(){this.ve(0),this.ve(1)}},{key:"Pe",value:function(e){this.Ae(1),this.buffer[this.position++]=e}},{key:"ve",value:function(e){this.Ae(1),this.buffer[this.position++]=~e}},{key:"Ae",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),Ig=function(){function e(t){d(this,e),this.De=t}return v(e,[{key:"ue",value:function(e){this.De.de(e)}},{key:"ie",value:function(e){this.De.pe(e)}},{key:"se",value:function(e){this.De.Te(e)}},{key:"ee",value:function(){this.De.be()}}]),e}(),_g=function(){function e(t){d(this,e),this.De=t}return v(e,[{key:"ue",value:function(e){this.De.me(e)}},{key:"ie",value:function(e){this.De.Ie(e)}},{key:"se",value:function(e){this.De.Re(e)}},{key:"ee",value:function(){this.De.Ve()}}]),e}(),Eg=function(){function e(){d(this,e),this.De=new xg,this.Ce=new Ig(this.De),this.xe=new _g(this.De)}return v(e,[{key:"seed",value:function(e){this.De.seed(e)}},{key:"Ne",value:function(e){return 0===e?this.Ce:this.xe}},{key:"Se",value:function(){return this.De.Se()}},{key:"reset",value:function(){this.De.reset()}}]),e}(),Ag=function(){function e(t,n,r,i){d(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return v(e,[{key:"ke",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function Tg(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=Sg(e.arrayValue,t.arrayValue))?n:0!==(n=Sg(e.directionalValue,t.directionalValue))?n:up.comparator(e.documentKey,t.documentKey)}function Sg(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var Og=function(){function e(t){d(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Me=t.orderBy,this.Oe=[];var n,r=m(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.S()?this.Fe=i:this.Oe.push(i)}}catch(a){r.e(a)}finally{r.f()}}return v(e,[{key:"$e",value:function(e){var t=Rp(e);if(void 0!==t&&!this.Be(t))return!1;for(var n=Lp(e),r=0,i=0;r<n.length&&this.Be(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Fe){var a=n[r];if(!this.Le(this.Fe,a)||!this.Ue(this.Me[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Me.length||!this.Ue(this.Me[i++],o))return!1}return!0}},{key:"Be",value:function(e){var t,n=m(this.Oe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.Le(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"Le",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"Ue",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}(),Cg=function(){function e(){d(this,e),this.qe=new Ng}return v(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.qe.add(t),jy.resolve()}},{key:"getCollectionParents",value:function(e,t){return jy.resolve(this.qe.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return jy.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return jy.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return jy.resolve(null)}},{key:"getIndexType",value:function(e,t){return jy.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return jy.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return jy.resolve(null)}},{key:"getMinOffset",value:function(e,t){return jy.resolve(qp.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return jy.resolve()}},{key:"updateIndexEntries",value:function(e,t){return jy.resolve()}}]),e}(),Ng=function(){function e(){d(this,e),this.index={}}return v(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Qp(Qd.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Qp(Qd.comparator)).toArray()}}]),e}(),Pg=new Uint8Array(0),Dg=function(){function e(t,n){d(this,e),this.user=t,this.databaseId=n,this.Ke=new Ng,this.Ge=new vm((function(e){return Jp(e)}),(function(e,t){return Xp(e,t)})),this.uid=t.uid||""}return v(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Ke.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.Ke.add(t)}));var a={collectionId:r,parent:dy(i)};return Rg(e).put(a)}return jy.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Ud(t),""],!1,!0);return Rg(e).qt(r).next((function(e){var r,i=m(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(my(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=Mg(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);return delete r.indexId,n.add(r).next()}},{key:"deleteFieldIndex",value:function(e,t){var n=Mg(e),r=Fg(e),i=Lg(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=Lg(e),i=!0,a=new Map;return jy.forEach(this.Qe(t),(function(t){return n.je(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=Im(),o=[];return jy.forEach(a,(function(i,a){var s;vd("IndexedDbIndexManager","Using index ".concat((s=i,"id=".concat(s.indexId,"|cg=").concat(s.collectionGroup,"|f=").concat(s.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(Jp(t)));var u=function(e,t){var n=Rp(t);if(void 0===n)return null;var r,i=m($p(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=m(Lp(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,s=m($p(e,o.fieldPath));try{for(s.s();!(a=s.n()).done;){var u=a.value;switch(u.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),u.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),u.value),Array.from(r.values())}}}catch(c){s.e(c)}finally{s.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=m(Lp(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,s=0===o.kind?ev(e,o.fieldPath,e.startAt):tv(e,o.fieldPath,e.startAt);r.push(s.value),i&&(i=s.inclusive)}}catch(u){a.e(u)}finally{a.f()}return new fv(r,i)}(a,i),f=function(e,t){var n,r=[],i=!0,a=m(Lp(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,s=0===o.kind?tv(e,o.fieldPath,e.endAt):ev(e,o.fieldPath,e.endAt);r.push(s.value),i&&(i=s.inclusive)}}catch(u){a.e(u)}finally{a.f()}return new fv(r,i)}(a,i),h=n.We(i,a,l),d=n.We(i,a,f),p=n.ze(i,a,c),v=n.He(i.indexId,u,h,l.inclusive,d,f.inclusive,p);return jy.forEach(v,(function(n){return r.Gt(n,t.limit).next((function(t){t.forEach((function(t){var n=up.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return jy.resolve(null)}))}},{key:"Qe",value:function(e){var t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}},{key:"He",value:function(e,t,n,r,i,a,o){for(var s=this,u=(null!=t?t.length:1)*Math.max(n.length,i.length),c=u/(null!=t?t.length:1),l=[],f=function(u){var f=t?s.Je(t[u/c]):Pg,h=s.Ye(e,f,n[u%c],r),d=s.Xe(e,f,i[u%c],a),p=o.map((function(t){return s.Ye(e,f,t,!0)}));l.push.apply(l,re(s.createRange(h,d,p)))},h=0;h<u;++h)f(h);return l}},{key:"Ye",value:function(e,t,n,r){var i=new Ag(e,up.empty(),t,n);return r?i:i.ke()}},{key:"Xe",value:function(e,t,n,r){var i=new Ag(e,up.empty(),t,n);return r?i.ke():i}},{key:"je",value:function(e,t){var n=new Og(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=m(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.$e(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2;return jy.forEach(this.Qe(t),(function(t){return n.je(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new Qp(Gd.comparator),r=!1,i=m(e.filters);try{for(i.s();!(t=i.n()).done;){var a=t.value;a.field.isKeyField()||("array-contains"===a.op||"array-contains-any"===a.op?r=!0:n=n.add(a.field))}}catch(c){i.e(c)}finally{i.f()}var o,s=m(e.orderBy);try{for(s.s();!(o=s.n()).done;){var u=o.value;u.field.isKeyField()||(n=n.add(u.field))}}catch(c){s.e(c)}finally{s.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return r}))}},{key:"Ze",value:function(e,t){var n,r=new Eg,i=m(Lp(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var s=r.Ne(a.kind);bg.fe.Zt(o,s)}}catch(u){i.e(u)}finally{i.f()}return r.Se()}},{key:"Je",value:function(e){var t=new Eg;return bg.fe.Zt(e,t.Ne(0)),t.Se()}},{key:"tn",value:function(e,t){var n=new Eg;return bg.fe.Zt(gp(this.databaseId,t),n.Ne(function(e){var t=Lp(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Se()}},{key:"ze",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new Eg);var i,a=0,o=m(Lp(e));try{for(o.s();!(i=o.n()).done;){var s,u=i.value,c=n[a++],l=m(r);try{for(l.s();!(s=l.n()).done;){var f=s.value;if(this.en(t,u.fieldPath)&&kp(c))r=this.nn(r,u,c);else{var h=f.Ne(u.kind);bg.fe.Zt(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.sn(r)}},{key:"We",value:function(e,t,n){return this.ze(e,t,n.position)}},{key:"sn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Se();return t}},{key:"nn",value:function(e,t,n){var r,i=re(e),a=[],o=m(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var s,u=r.value,c=m(i);try{for(c.s();!(s=c.n()).done;){var l=s.value,f=new Eg;f.seed(l.Se()),bg.fe.Zt(u,f.Ne(t.kind)),a.push(f)}}catch(h){c.e(h)}finally{c.f()}}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"en",value:function(e,t){return!!e.filters.find((function(e){return e instanceof nv&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=Mg(e),i=Fg(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next((function(e){var t=[];return jy.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new Fp(t.sequenceNumber,new qp(sg(t.readTime),new up(my(t.documentKey)),t.largestBatchId)):Fp.empty(),r=e.fields.map((function(e){var t=f(e,2),n=t[0],r=t[1];return new Mp(Gd.fromServerFormat(n),r)}));return new Dp(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Md(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=Mg(e),a=Fg(e);return this.rn(e).next((function(e){return i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return jy.forEach(t,(function(t){return a.put(function(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:og(r.readTime),documentKey:dy(r.documentKey.path),largestBatchId:r.largestBatchId}}(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return jy.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?jy.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),jy.forEach(a,(function(r){return n.on(e,t,r).next((function(t){var a=n.un(i,r);return t.isEqual(a)?jy.resolve():n.an(e,i,r,t,a)}))}))}))}))}},{key:"cn",value:function(e,t,n,r){return Lg(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.tn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"hn",value:function(e,t,n,r){return Lg(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.tn(n,t.key),t.key.path.toArray()])}},{key:"on",value:function(e,t,n){var r=Lg(e),i=new Qp(Tg);return r.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.tn(n,t)])},(function(e,r){i=i.add(new Ag(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"un",value:function(e,t){var n=new Qp(Tg),r=this.Ze(t,e);if(null==r)return n;var i=Rp(t);if(null!=i){var a=e.data.field(i.fieldPath);if(kp(a)){var o,s=m(a.arrayValue.values||[]);try{for(s.s();!(o=s.n()).done;){var u=o.value;n=n.add(new Ag(t.indexId,e.key,this.Je(u),r))}}catch(c){s.e(c)}finally{s.f()}}}else n=n.add(new Ag(t.indexId,e.key,Pg,r));return n}},{key:"an",value:function(e,t,n,r,i){var a=this;vd("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),s=Gp(a),u=Gp(o);s||u;){var c=!1,l=!1;if(s&&u){var f=n(s,u);f<0?l=!0:f>0&&(c=!0)}else null!=s?l=!0:c=!0;c?(r(u),u=Gp(o)):l?(i(s),s=Gp(a)):(s=Gp(a),u=Gp(o))}}(r,i,Tg,(function(r){o.push(a.cn(e,t,n,r))}),(function(r){o.push(a.hn(e,t,n,r))})),jy.waitFor(o)}},{key:"rn",value:function(e){var t=1;return Fg(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return Tg(e,t)})).filter((function(e,t,n){return!t||0!==Tg(e,n[t-1])}));var r=[];r.push(e);var i,a=m(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,s=Tg(o,e),u=Tg(o,t);if(0===s)r[0]=e.ke();else if(s>0&&u<0)r.push(o),r.push(o.ke());else if(u>0)break}}catch(f){a.e(f)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2)c.push(IDBKeyRange.bound([r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,Pg,[]],[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,Pg,[]]));return c}},{key:"getMinOffset",value:function(e,t){var n,r=this;return jy.forEach(this.Qe(t),(function(t){return r.je(e,t).next((function(e){e?(!n||jp(e.indexState.offset,n)<0)&&(n=e.indexState.offset):n=qp.min()}))})).next((function(){return n}))}}]),e}();function Rg(e){return Zy(e,"collectionParents")}function Lg(e){return Zy(e,"indexEntries")}function Mg(e){return Zy(e,"indexConfiguration")}function Fg(e){return Zy(e,"indexState")}var Ug={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Vg=function(){function e(t,n,r){d(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return v(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function qg(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),s=0,u=r.Wt({range:o},(function(e,t,n){return s++,n.delete()}));a.push(u.next((function(){kd(1===s)})));var c,l=[],f=m(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=by(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return jy.waitFor(a).next((function(){return l}))}function jg(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw bd();t=e.noDocument}return JSON.stringify(t).length}Vg.DEFAULT_COLLECTION_PERCENTILE=10,Vg.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vg.DEFAULT=new Vg(41943040,Vg.DEFAULT_COLLECTION_PERCENTILE,Vg.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vg.DISABLED=new Vg(-1,0,0);var Bg=function(){function e(t,n,r,i){d(this,e),this.userId=t,this.M=n,this.indexManager=r,this.referenceDelegate=i,this.ln={}}return v(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Kg(e).Wt({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=Qg(e),o=Kg(e);return o.add({}).next((function(s){kd("number"==typeof s);var u,c=new $y(s,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return $m(e.Jt,t)})),i=n.mutations.map((function(t){return $m(e.Jt,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.M,i.userId,c),f=[],h=new Qp((function(e,t){return Md(e.canonicalString(),t.canonicalString())})),d=m(r);try{for(d.s();!(u=d.n()).done;){var p=u.value,v=by(i.userId,p.key.path,s);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,ky))}}catch(y){d.e(y)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.ln[s]=c.keys()})),jy.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return Kg(e).get(t).next((function(e){return e?(kd(e.userId===n.userId),ug(n.M,e)):null}))}},{key:"fn",value:function(e,t){var n=this;return this.ln[t]?jy.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.ln[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return Kg(e).Wt({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(kd(t.batchId>=r),a=ug(n.M,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Kg(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Kg(e).qt("userMutationsIndex",n).next((function(e){return e.map((function(e){return ug(t.M,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=gy(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Qg(e).Wt({range:i},(function(r,i,o){var s=f(r,3),u=s[0],c=s[1],l=s[2],h=my(c);if(u===n.userId&&t.path.isEqual(h))return Kg(e).get(l).next((function(e){if(!e)throw bd();kd(e.userId===n.userId),a.push(ug(n.M,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Qp(Md),i=[];return t.forEach((function(t){var a=gy(n.userId,t.path),o=IDBKeyRange.lowerBound(a),s=Qg(e).Wt({range:o},(function(e,i,a){var o=f(e,3),s=o[0],u=o[1],c=o[2],l=my(u);s===n.userId&&t.path.isEqual(l)?r=r.add(c):a.done()}));i.push(s)})),jy.waitFor(i).next((function(){return n.dn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=gy(this.userId,r),o=IDBKeyRange.lowerBound(a),s=new Qp(Md);return Qg(e).Wt({range:o},(function(e,t,a){var o=f(e,3),u=o[0],c=o[1],l=o[2],h=my(c);u===n.userId&&r.isPrefixOf(h)?h.length===i&&(s=s.add(l)):a.done()})).next((function(){return n.dn(e,s)}))}},{key:"dn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(Kg(e).get(t).next((function(e){if(null===e)throw bd();kd(e.userId===n.userId),r.push(ug(n.M,e))})))})),jy.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return qg(e.Ht,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n._n(t.batchId)})),jy.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"_n",value:function(e){delete this.ln[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return jy.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return Qg(e).Wt({range:r},(function(e,n,r){if(e[0]===t.userId){var a=my(e[1]);i.push(a)}else r.done()})).next((function(){kd(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return zg(e,this.userId,t)}},{key:"wn",value:function(e){var t=this;return Wg(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"Yt",value:function(t,n,r,i){return kd(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function zg(e,t,n){var r=gy(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return Qg(e).Wt({range:a,jt:!0},(function(e,n,r){var a=f(e,3),s=a[0],u=a[1];a[2];s===t&&u===i&&(o=!0),r.done()})).next((function(){return o}))}function Kg(e){return Zy(e,"mutations")}function Qg(e){return Zy(e,"documentMutations")}function Wg(e){return Zy(e,"mutationQueues")}var Gg=function(){function e(t){d(this,e),this.mn=t}return v(e,[{key:"next",value:function(){return this.mn+=2,this.mn}}],[{key:"gn",value:function(){return new e(0)}},{key:"yn",value:function(){return new e(-1)}}]),e}(),Hg=function(){function e(t,n){d(this,e),this.referenceDelegate=t,this.M=n}return v(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.pn(e).next((function(n){var r=new Gg(n.highestTargetId);return n.highestTargetId=r.next(),t.In(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.pn(e).next((function(e){return qd.fromTimestamp(new Vd(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.pn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.pn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.In(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Tn(e,t).next((function(){return n.pn(e).next((function(r){return r.targetCount+=1,n.En(t,r),n.In(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Tn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return Yg(e).delete(t.targetId)})).next((function(){return n.pn(e)})).next((function(t){return kd(t.targetCount>0),t.targetCount-=1,n.In(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return Yg(e).Wt((function(o,s){var u=cg(s);u.sequenceNumber<=t&&null===n.get(u.targetId)&&(i++,a.push(r.removeTargetData(e,u)))})).next((function(){return jy.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return Yg(e).Wt((function(e,n){var r=cg(n);t(r)}))}},{key:"pn",value:function(e){return Jg(e).get("targetGlobalKey").next((function(e){return kd(null!==e),e}))}},{key:"In",value:function(e,t){return Jg(e).put("targetGlobalKey",t)}},{key:"Tn",value:function(e,t){return Yg(e).put(lg(this.M,t))}},{key:"En",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.pn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=Jp(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Yg(e).Wt({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=cg(n);Xp(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=Xg(e);return t.forEach((function(t){var o=dy(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),jy.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=Xg(e);return jy.forEach(t,(function(t){var a=dy(t.path);return jy.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=Xg(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Xg(e),i=Im();return r.Wt({range:n,jt:!0},(function(e,t,n){var r=my(e[1]),a=new up(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=dy(t.path),r=IDBKeyRange.bound([n],[Ud(n)],!1,!0),i=0;return Xg(e).Wt({index:"documentTargetsIndex",jt:!0,range:r},(function(e,t,n){var r=f(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"Et",value:function(e,t){return Yg(e).get(t).next((function(e){return e?cg(e):null}))}}]),e}();function Yg(e){return Zy(e,"targets")}function Jg(e){return Zy(e,"targetGlobal")}function Xg(e){return Zy(e,"targetDocuments")}function Zg(e){return $g.apply(this,arguments)}function $g(){return $g=ae(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===xd.FAILED_PRECONDITION&&t.message===Vy){e.next=2;break}throw t;case 2:vd("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),$g.apply(this,arguments)}function eb(e,t){var n=f(e,2),r=n[0],i=n[1],a=f(t,2),o=a[0],s=a[1],u=Md(r,o);return 0===u?Md(i,s):u}var tb=function(){function e(t){d(this,e),this.An=t,this.buffer=new Qp(eb),this.Rn=0}return v(e,[{key:"bn",value:function(){return++this.Rn}},{key:"Pn",value:function(e){var t=[e,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();eb(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),nb=function(){function e(t,n){d(this,e),this.garbageCollector=t,this.asyncQueue=n,this.Vn=!1,this.vn=null}return v(e,[{key:"start",value:function(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}},{key:"stop",value:function(){this.vn&&(this.vn.cancel(),this.vn=null)}},{key:"started",get:function(){return null!==this.vn}},{key:"Sn",value:function(e){var t=this,n=this.Vn?3e5:6e4;vd("LruGarbageCollector","Garbage collection scheduled in ".concat(n,"ms")),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,ae(te().mark((function n(){return te().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.vn=null,t.Vn=!0,n.prev=1,n.next=4,e.collectGarbage(t.garbageCollector);case 4:n.next=14;break;case 6:if(n.prev=6,n.t0=n.catch(1),!Wy(n.t0)){n.next=12;break}vd("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n.t0),n.next=14;break;case 12:return n.next=14,Zg(n.t0);case 14:return n.next=16,t.Sn(e);case 16:case"end":return n.stop()}}),n,null,[[1,6]])}))))}}]),e}(),rb=function(){function e(t,n){d(this,e),this.Dn=t,this.params=n}return v(e,[{key:"calculateTargetCount",value:function(e,t){return this.Dn.Cn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return jy.resolve(Dd.A);var r=new tb(t);return this.Dn.forEachTarget(e,(function(e){return r.Pn(e.sequenceNumber)})).next((function(){return n.Dn.xn(e,(function(e){return r.Pn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.Dn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.Dn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(vd("LruGarbageCollector","Garbage collection skipped; disabled"),jy.resolve(Ug)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(vd("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),Ug):n.Nn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.Dn.getCacheSize(e)}},{key:"Nn",value:function(e,t){var n,r,i,a,o,s,u,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(vd("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,s=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return u=Date.now(),pd()<=le.DEBUG&&vd("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(s-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(u-s)+"ms\n"+"Total Duration: ".concat(u-l,"ms")),jy.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),ib=function(){function e(t,n){d(this,e),this.db=t,this.garbageCollector=function(e,t){return new rb(e,t)}(this,n)}return v(e,[{key:"Cn",value:function(e){var t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"kn",value:function(e){var t=0;return this.xn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"xn",value:function(e,t){return this.Mn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return ab(e,n)}},{key:"removeReference",value:function(e,t,n){return ab(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return ab(e,t)}},{key:"On",value:function(e,t){return function(e,t){var n=!1;return Wg(e).zt((function(r){return zg(e,r,t).next((function(e){return e&&(n=!0),jy.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Mn(e,(function(o,s){if(s<=t){var u=n.On(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,qd.min()),Xg(e).delete([0,dy(o.path)])}))}));i.push(u)}})).next((function(){return jy.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return ab(e,t)}},{key:"Mn",value:function(e,t){var n,r=Xg(e),i=Dd.A;return r.Wt({index:"documentTargetsIndex"},(function(e,r){var a=f(e,2),o=a[0],s=(a[1],r.path),u=r.sequenceNumber;0===o?(i!==Dd.A&&t(new up(my(n)),i),i=u,n=s):i=Dd.A})).next((function(){i!==Dd.A&&t(new up(my(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function ab(e,t){return Xg(e).put(function(e,t){return{targetId:0,path:dy(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var ob=function(){function e(){d(this,e),this.changes=new vm((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return v(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,Pp.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?jy.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),sb=function(){function e(t){d(this,e),this.M=t}return v(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return lb(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return lb(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],ag(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Fn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=Pp.newInvalidDocument(t);return lb(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(fb(t))},(function(e,i){r=n.$n(t,i)})).next((function(){return r}))}},{key:"Bn",value:function(e,t){var n=this,r={size:0,document:Pp.newInvalidDocument(t)};return lb(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(fb(t))},(function(e,i){r={document:n.$n(t,i),size:jg(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=ym();return this.Ln(e,t,(function(e,t){var i=n.$n(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"Un",value:function(e,t){var n=this,r=ym(),i=new Bp(up.comparator);return this.Ln(e,t,(function(e,t){var a=n.$n(e,t);r=r.insert(e,a),i=i.insert(e,jg(t))})).next((function(){return{documents:r,qn:i}}))}},{key:"Ln",value:function(e,t,n){if(t.isEmpty())return jy.resolve();var r=new Qp(db);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(fb(r.first()),fb(r.last())),a=r.getIterator(),o=a.getNext();return lb(e).Wt({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=up.fromSegments([].concat(re(t.prefixPath),[t.collectionGroup,t.documentId]));o&&db(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.Ut(fb(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getAllFromCollection",value:function(e,t,n){var r=this,i=[t.popLast().toArray(),t.lastSegment(),ag(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return lb(e).qt(IDBKeyRange.bound(i,a,!0)).next((function(e){var t,n=ym(),i=m(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=r.$n(up.fromSegments(a.prefixPath.concat(a.collectionGroup,a.documentId)),a);n=n.insert(o.key,o)}}catch(s){i.e(s)}finally{i.f()}return n}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=ym(),o=hb(t,n),s=hb(t,qp.max());return lb(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,s,!0)},(function(e,t,n){var o=i.$n(up.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new ub(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return cb(e).get("remoteDocumentGlobalKey").next((function(e){return kd(!!e),e}))}},{key:"Fn",value:function(e,t){return cb(e).put("remoteDocumentGlobalKey",t)}},{key:"$n",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=Xm(e.Jt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=up.fromSegments(t.noDocument.path),i=sg(t.noDocument.readTime);n=Pp.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return bd();var a=up.fromSegments(t.unknownDocument.path),o=sg(t.unknownDocument.version);n=Pp.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new Vd(e[0],e[1]);return qd.fromTimestamp(t)}(t.readTime)),n}(this.M,t);if(!n.isNoDocument()||!n.version.isEqual(qd.min()))return n}return Pp.newInvalidDocument(e)}}]),e}(),ub=function(e){b(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).Kn=e,i.trackRemovals=r,i.Gn=new vm((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return v(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new Qp((function(e,t){return Md(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var s=t.Gn.get(a);if(n.push(t.Kn.removeEntry(e,a,s.readTime)),o.isValidDocument()){var u=ig(t.Kn.M,o);i=i.add(a.path.popLast());var c=jg(u);r+=c-s.size,n.push(t.Kn.addEntry(e,a,u))}else if(r-=s.size,t.trackRemovals){var l=ig(t.Kn.M,o.convertToNoDocument(qd.min()));n.push(t.Kn.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.Kn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.Kn.updateMetadata(e,r)),jy.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.Kn.Bn(e,t).next((function(e){return n.Gn.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.Kn.Un(e,t).next((function(e){var t=e.documents;return e.qn.forEach((function(e,r){n.Gn.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(ob);function cb(e){return Zy(e,"remoteDocumentGlobal")}function lb(e){return Zy(e,"remoteDocumentsV14")}function fb(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function hb(e,t){var n=t.documentKey.path.toArray();return[e,ag(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function db(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=Md(n[a],r[a]))return i;return(i=Md(n.length,r.length))||((i=Md(n[n.length-2],r[r.length-2]))||Md(n[n.length-1],r[r.length-1]))}var pb=function(){function e(t){d(this,e),this.M=t}return v(e,[{key:"kt",value:function(e,t,n,r){var i=this,a=new By("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",yy,{unique:!0}),e.createObjectStore("documentMutations")}(e),vb(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=jy.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),vb(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:qd.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").qt().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",yy,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return jy.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Qn(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.jn(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Wn(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.zn(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.Hn(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:Py});t.createIndex("collectionPathOverlayIndex",Dy,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Ry,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:wy});t.createIndex("documentKeyIndex",xy),t.createIndex("collectionGroupIndex",Iy)}(e)})).next((function(){return i.Jn(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){!function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Sy}).createIndex("sequenceNumberIndex",Oy,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Cy}).createIndex("documentKeyIndex",Ny,{unique:!1})}(e)}))),o}},{key:"jn",value:function(e){var t=0;return e.store("remoteDocuments").Wt((function(e,n){t+=jg(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Qn",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.qt().next((function(n){return jy.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",i).next((function(r){return jy.forEach(r,(function(r){kd(r.userId===n.userId);var i=ug(t.M,r);return qg(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Wn",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.Wt((function(n,i){var a=new Qd(n),o=function(e){return[0,dy(e)]}(a);r.push(t.get(o).next((function(n){return n?jy.resolve():function(n){return t.put({targetId:0,path:dy(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return jy.waitFor(r)}))}))}},{key:"zn",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:Ty});var n=t.store("collectionParents"),r=new Ng,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:dy(i)})}};return t.store("remoteDocuments").Wt({jt:!0},(function(e,t){var n=new Qd(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").Wt({jt:!0},(function(e,t){var n=f(e,3),r=(n[0],n[1]),a=(n[2],my(r));return i(a.popLast())}))}))}},{key:"Hn",value:function(e){var t=this,n=e.store("targets");return n.Wt((function(e,r){var i=cg(r),a=lg(t.M,i);return n.put(a)}))}},{key:"Jn",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.Wt((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new up(Qd.fromString(i.document.name).popFirst(5)):i.noDocument?up.fromSegments(i.noDocument.path):i.unknownDocument?up.fromSegments(i.unknownDocument.path):bd()).path.toArray(),s={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(s))})).next((function(){return jy.waitFor(r)}))}}]),e}();function vb(e){e.createObjectStore("targetDocuments",{keyPath:Ey}).createIndex("documentTargetsIndex",Ay,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",_y,{unique:!0}),e.createObjectStore("targetGlobal")}var mb="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",yb=function(){function e(t,n,r,i,a,o,s,u,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:13;if(d(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Yn=a,this.window=o,this.document=s,this.Xn=c,this.Zn=l,this.ts=f,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=function(e){return Promise.resolve()},!e.vt())throw new Id(xd.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ib(this,i),this.hs=n+"main",this.M=new rg(u),this.ls=new zy(this.hs,this.ts,new pb(this.M)),this.fs=new Hg(this.referenceDelegate,this.M),this.ds=function(e){return new sb(e)}(this.M),this._s=new pg,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===l&&md("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return v(e,[{key:"start",value:function(){var e=this;return this.gs().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new Id(xd.FAILED_PRECONDITION,mb);return e.ys(),e.ps(),e.Is(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.fs.getHighestSequenceNumber(t)}))})).then((function(t){e.es=new Dd(t,e.Xn)})).then((function(){e.ns=!0})).catch((function(t){return e.ls&&e.ls.close(),Promise.reject(t)}))}},{key:"Ts",value:function(e){var t=this;return this.cs=function(){var n=ae(te().mark((function n(r){return te().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ls.Ot(function(){var t=ae(te().mark((function t(n){return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget(ae(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.gs();case 4:case"end":return e.stop()}}),e)})))))}},{key:"gs",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return bb(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.Es(t).next((function(t){t||(e.isPrimary=!1,e.Yn.enqueueRetryable((function(){return e.cs(!1)})))}))})).next((function(){return e.As(t)})).next((function(n){return e.isPrimary&&!n?e.Rs(t).next((function(){return!1})):!!n&&e.bs(t).next((function(){return!0}))}))})).catch((function(t){if(Wy(t))return vd("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return vd("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Yn.enqueueRetryable((function(){return e.cs(t)})),e.isPrimary=t}))}},{key:"Es",value:function(e){var t=this;return gb(e).get("owner").next((function(e){return jy.resolve(t.Ps(e))}))}},{key:"Vs",value:function(e){return bb(e).delete(this.clientId)}},{key:"vs",value:function(){var e=ae(te().mark((function e(){var t,n,r,i,a=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.Ss(this.us,18e5)){e.next=6;break}return this.us=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=Zy(e,"clientMetadata");return t.qt().next((function(e){var n=a.Ds(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return jy.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.ws){n=m(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.ws.removeItem(this.Cs(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Is",value:function(){var e=this;this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.gs().then((function(){return e.vs()})).then((function(){return e.Is()}))}))}},{key:"Ps",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"As",value:function(e){var t=this;return this.Zn?jy.resolve(!0):gb(e).get("owner").next((function(n){if(null!==n&&t.Ss(n.leaseTimestampMs,5e3)&&!t.xs(n.ownerId)){if(t.Ps(n)&&t.networkEnabled)return!0;if(!t.Ps(n)){if(!n.allowTabSynchronization)throw new Id(xd.FAILED_PRECONDITION,mb);return!1}}return!(!t.networkEnabled||!t.inForeground)||bb(e).qt().next((function(e){return void 0===t.Ds(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&vd("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=ae(te().mark((function e(){var t=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.ns=!1,this.Ns(),this.os&&(this.os.cancel(),this.os=null),this.ks(),this.Ms(),e.next=7,this.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new Xy(e,Dd.A);return t.Rs(n).next((function(){return t.Vs(n)}))}));case 7:this.ls.close(),this.Os();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ds",value:function(e,t){var n=this;return e.filter((function(e){return n.Ss(e.updateTimeMs,t)&&!n.xs(e.clientId)}))}},{key:"Fs",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return bb(t).qt().next((function(t){return e.Ds(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.ns}},{key:"getMutationQueue",value:function(e,t){return Bg.Yt(e,this.M,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.fs}},{key:"getRemoteDocumentCache",value:function(){return this.ds}},{key:"getIndexManager",value:function(e){return new Dg(e,this.M.Jt.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return yg.Yt(this.M,e)}},{key:"getBundleCache",value:function(){return this._s}},{key:"runTransaction",value:function(e,t,n){var r=this;vd("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",s=14===(i=this.ts)?Uy:13===i?Fy:12===i?My:11===i?Ly:void bd();return this.ls.runTransaction(e,o,s,(function(i){return a=new Xy(i,r.es?r.es.next():Dd.A),"readwrite-primary"===t?r.Es(a).next((function(e){return!!e||r.As(a)})).next((function(t){if(!t)throw md("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Yn.enqueueRetryable((function(){return r.cs(!1)})),new Id(xd.FAILED_PRECONDITION,Vy);return n(a)})).next((function(e){return r.bs(a).next((function(){return e}))})):r.$s(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"$s",value:function(e){var t=this;return gb(e).get("owner").next((function(e){if(null!==e&&t.Ss(e.leaseTimestampMs,5e3)&&!t.xs(e.ownerId)&&!t.Ps(e)&&!(t.Zn||t.allowTabSynchronization&&e.allowTabSynchronization))throw new Id(xd.FAILED_PRECONDITION,mb)}))}},{key:"bs",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return gb(e).put("owner",t)}},{key:"Rs",value:function(e){var t=this,n=gb(e);return n.get("owner").next((function(e){return t.Ps(e)?(vd("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):jy.resolve()}))}},{key:"Ss",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(md("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"ys",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=function(){e.Yn.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.gs()}))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}},{key:"ks",value:function(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}},{key:"ps",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=function(){t.Ns(),!M()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&t.Yn.enterRestrictedMode(!0),t.Yn.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.ss))}},{key:"Ms",value:function(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}},{key:"xs",value:function(e){var t;try{var n=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return vd("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return md("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Ns",value:function(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(lc){md("Failed to set zombie client id.",lc)}}},{key:"Os",value:function(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(lc){}}},{key:"Cs",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"vt",value:function(){return zy.vt()}}]),e}();function gb(e){return Zy(e,"owner")}function bb(e){return Zy(e,"clientMetadata")}function kb(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var wb=function(){function e(t,n,r){d(this,e),this.ds=t,this.Bs=n,this.indexManager=r}return v(e,[{key:"Ls",value:function(e,t){var n=this;return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.Us(e,t,r)}))}},{key:"Us",value:function(e,t,n){return this.ds.getEntry(e,t).next((function(e){var t,r=m(n);try{for(r.s();!(t=r.n()).done;){t.value.applyToLocalView(e)}}catch(i){r.e(i)}finally{r.f()}return e}))}},{key:"qs",value:function(e,t){e.forEach((function(e,n){var r,i=m(t);try{for(i.s();!(r=i.n()).done;){r.value.applyToLocalView(n)}}catch(a){i.e(a)}finally{i.f()}}))}},{key:"Ks",value:function(e,t){var n=this;return this.ds.getEntries(e,t).next((function(t){return n.Gs(e,t).next((function(){return t}))}))}},{key:"Gs",value:function(e,t){var n=this;return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){return n.qs(t,e)}))}},{key:"Qs",value:function(e,t,n){return function(e){return up.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.js(e,t.path):wv(t)?this.Ws(e,t,n):this.zs(e,t,n)}},{key:"js",value:function(e,t){return this.Ls(e,new up(t)).next((function(e){var t=bm();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"Ws",value:function(e,t,n){var r=this,i=t.collectionGroup,a=bm();return this.indexManager.getCollectionParents(e,i).next((function(o){return jy.forEach(o,(function(o){var s=function(e,t){return new mv(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.zs(e,s,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"zs",value:function(e,t,n){var r,i=this;return this.ds.getAllFromCollection(e,t.path,n).next((function(n){return r=n,i.Bs.getAllMutationBatchesAffectingQuery(e,t)})).next((function(e){var t,n=m(e);try{for(n.s();!(t=n.n()).done;){var i,a=t.value,o=m(a.mutations);try{for(o.s();!(i=o.n()).done;){var s=i.value,u=s.key,c=r.get(u);null==c&&(c=Pp.newInvalidDocument(u),r=r.insert(u,c)),$v(s,c,a.localWriteTime),c.isFoundDocument()||(r=r.remove(u))}}catch(l){o.e(l)}finally{o.f()}}}catch(l){n.e(l)}finally{n.f()}})).next((function(){return r.forEach((function(e,n){Sv(t,n)||(r=r.remove(e))})),r}))}}]),e}(),xb=function(){function e(t,n,r,i){d(this,e),this.targetId=t,this.fromCache=n,this.Hs=r,this.Js=i}return v(e,null,[{key:"Ys",value:function(t,n){var r,i=Im(),a=Im(),o=m(n.docChanges);try{for(o.s();!(r=o.n()).done;){var s=r.value;switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}}}catch(u){o.e(u)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),Ib=function(){function e(){d(this,e),this.Xs=!1}return v(e,[{key:"initialize",value:function(e,t){this.Zs=e,this.indexManager=t,this.Xs=!0}},{key:"Qs",value:function(e,t,n,r){var i=this;return this.ti(e,t).next((function(a){return a||i.ei(e,t,r,n)})).next((function(n){return n||i.ni(e,t)}))}},{key:"ti",value:function(e,t){return jy.resolve(null)}},{key:"ei",value:function(e,t,n,r){var i=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||r.isEqual(qd.min())?this.ni(e,t):this.Zs.Ks(e,n).next((function(a){var o=i.si(t,a);return i.ii(t,o,n,r)?i.ni(e,t):(pd()<=le.DEBUG&&vd("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Tv(t)),i.ri(e,o,t,Up(r,-1)))}))}},{key:"si",value:function(e,t){var n=new Qp(Cv(e));return t.forEach((function(t,r){Sv(e,r)&&(n=n.add(r))})),n}},{key:"ii",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"ni",value:function(e,t){return pd()<=le.DEBUG&&vd("QueryEngine","Using full collection scan to execute query:",Tv(t)),this.Zs.Qs(e,t,qp.min())}},{key:"ri",value:function(e,t,n,r){return this.Zs.Qs(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),_b=function(){function e(t,n,r,i){d(this,e),this.persistence=t,this.oi=n,this.M=i,this.ui=new Bp(Md),this.ai=new vm((function(e){return Jp(e)}),Xp),this.ci=new Map,this.hi=t.getRemoteDocumentCache(),this.fs=t.getTargetCache(),this._s=t.getBundleCache(),this.li(r)}return v(e,[{key:"li",value:function(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.fi=new wb(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.ui)}))}}]),e}();function Eb(e,t,n,r){return new _b(e,t,n,r)}function Ab(e,t){return Tb.apply(this,arguments)}function Tb(){return Tb=ae(te().mark((function e(t,n){var r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=wd(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.Bs.getAllMutationBatches(e).next((function(i){return t=i,r.li(n),r.Bs.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],s=Im(),u=m(t);try{for(u.s();!(i=u.n()).done;){var c=i.value;a.push(c.batchId);var l,f=m(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;s=s.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){u.e(k)}finally{u.f()}var d,p=m(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var y,g=m(v.mutations);try{for(g.s();!(y=g.n()).done;){var b=y.value;s=s.add(b.key)}}catch(k){g.e(k)}finally{g.f()}}}catch(k){p.e(k)}finally{p.f()}return r.fi.Ks(e,s).next((function(e){return{di:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),Tb.apply(this,arguments)}function Sb(e,t){var n=wd(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.hi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=jy.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);kd(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.Bs.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.Bs.performConsistencyCheck(e)})).next((function(){return n.fi.Ks(e,r)}))}))}function Ob(e){var t=wd(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.fs.getLastRemoteSnapshotVersion(e)}))}function Cb(e,t){var n=wd(e),r=t.snapshotVersion,i=n.ui;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.hi.newChangeBuffer({trackRemovals:!0});i=n.ui;var o=[];t.targetChanges.forEach((function(a,s){var u=i.get(s);if(u){o.push(n.fs.removeMatchingKeys(e,a.removedDocuments,s).next((function(){return n.fs.addMatchingKeys(e,a.addedDocuments,s)})));var c=u.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(s)?c=c.withResumeToken(Yd.EMPTY_BYTE_STRING,qd.min()).withLastLimboFreeSnapshotVersion(qd.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(s,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(u,c,a)&&o.push(n.fs.updateTargetData(e,c))}}));var s=ym();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Nb(e,a,t.documentUpdates).next((function(e){s=e}))),!r.isEqual(qd.min())){var u=n.fs.getLastRemoteSnapshotVersion(e).next((function(t){return n.fs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(u)}return jy.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.fi.Gs(e,s)})).next((function(){return s}))})).then((function(e){return n.ui=i,e}))}function Nb(e,t,n){var r=Im();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=ym();return n.forEach((function(n,i){var a=e.get(n);i.isNoDocument()&&i.version.isEqual(qd.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!a.isValidDocument()||i.version.compareTo(a.version)>0||0===i.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):vd("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",i.version)})),r}))}function Pb(e,t){var n=wd(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.Bs.getNextMutationBatchAfterBatchId(e,t)}))}function Db(e,t){var n=wd(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.fs.getTargetData(e,t).next((function(i){return i?(r=i,jy.resolve(r)):n.fs.allocateTargetId(e).next((function(i){return r=new ng(t,i,0,e.currentSequenceNumber),n.fs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.ui.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ui=n.ui.insert(e.targetId,e),n.ai.set(t,e.targetId)),e}))}function Rb(e,t,n){return Lb.apply(this,arguments)}function Lb(){return Lb=ae(te().mark((function e(t,n,r){var i,a,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=wd(t),a=i.ui.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Wy(e.t1)){e.next=12;break}throw e.t1;case 12:vd("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.ui=i.ui.remove(n),i.ai.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),Lb.apply(this,arguments)}function Mb(e,t,n){var r=wd(e),i=qd.min(),a=Im();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=wd(e),i=r.ai.get(n);return void 0!==i?jy.resolve(r.ui.get(i)):r.fs.getTargetData(t,n)}(r,e,Iv(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.oi.Qs(e,t,n?i:qd.min(),n?a:Im())})).next((function(e){return Vb(r,Ov(t),e),{documents:e,_i:a}}))}))}function Fb(e,t){var n=wd(e),r=wd(n.fs),i=n.ui.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.Et(e,t).next((function(e){return e?e.target:null}))}))}function Ub(e,t){var n=wd(e),r=n.ci.get(t)||qd.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.hi.getAllFromCollectionGroup(e,t,Up(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return Vb(n,t,e),e}))}function Vb(e,t,n){var r=qd.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.ci.set(t,r)}function qb(e,t,n,r){return jb.apply(this,arguments)}function jb(){return jb=ae(te().mark((function e(t,n,r,i){var a,o,s,u,c,l,f,h,d,p;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=wd(t),o=Im(),s=ym(),u=m(r);try{for(u.s();!(c=u.n()).done;)l=c.value,f=n.wi(l.metadata.name),l.document&&(o=o.add(f)),(h=n.mi(l)).setReadTime(n.gi(l.metadata.readTime)),s=s.insert(f,h)}catch(v){u.e(v)}finally{u.f()}return d=a.hi.newChangeBuffer({trackRemovals:!0}),e.next=7,Db(a,function(e){return Iv(gv(Qd.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return Nb(e,d,s).next((function(t){return d.apply(e),t})).next((function(t){return a.fs.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.fs.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.fi.Gs(e,t)})).next((function(){return t}))}))})));case 9:case"end":return e.stop()}}),e)}))),jb.apply(this,arguments)}function Bb(e,t){return zb.apply(this,arguments)}function zb(){return zb=ae(te().mark((function e(t,n){var r,i,a,o=arguments;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:Im(),e.next=3,Db(t,Iv(fg(n.bundledQuery)));case 3:return i=e.sent,a=wd(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=jm(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a._s.saveNamedQuery(e,n);var o=i.withResumeToken(Yd.EMPTY_BYTE_STRING,t);return a.ui=a.ui.insert(o.targetId,o),a.fs.updateTargetData(e,o).next((function(){return a.fs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.fs.addMatchingKeys(e,r,i.targetId)})).next((function(){return a._s.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),zb.apply(this,arguments)}var Kb=function(){function e(t){d(this,e),this.M=t,this.yi=new Map,this.pi=new Map}return v(e,[{key:"getBundleMetadata",value:function(e,t){return jy.resolve(this.yi.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.yi.set(t.id,{id:(n=t).id,version:n.version,createTime:jm(n.createTime)}),jy.resolve()}},{key:"getNamedQuery",value:function(e,t){return jy.resolve(this.pi.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.pi.set(t.name,function(e){return{name:e.name,query:fg(e.bundledQuery),readTime:jm(e.readTime)}}(t)),jy.resolve()}}]),e}(),Qb=function(){function e(){d(this,e),this.overlays=new Bp(up.comparator),this.Ii=new Map}return v(e,[{key:"getOverlay",value:function(e,t){return jy.resolve(this.overlays.get(t))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.Xt(e,t,i)})),jy.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.Ii.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.Ii.delete(n)),jy.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=km(),i=t.length+1,a=new up(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var s=o.getNext().value,u=s.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===i&&s.largestBatchId>n&&r.set(s.getKey(),s)}return jy.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new Bp((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var s=i.get(o.largestBatchId);null===s&&(s=km(),i=i.insert(o.largestBatchId,s)),s.set(o.getKey(),o)}}for(var u=km(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return u.set(e,t)})),!(u.size()>=r)););return jy.resolve(u)}},{key:"Xt",value:function(e,t,n){if(null!==n){var r=this.overlays.get(n.key);if(null!==r){var i=this.Ii.get(r.largestBatchId).delete(n.key);this.Ii.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new tg(t,n));var a=this.Ii.get(t);void 0===a&&(a=Im(),this.Ii.set(t,a)),this.Ii.set(t,a.add(n.key))}}}]),e}(),Wb=function(){function e(){d(this,e),this.Ti=new Qp(Gb.Ei),this.Ai=new Qp(Gb.Ri)}return v(e,[{key:"isEmpty",value:function(){return this.Ti.isEmpty()}},{key:"addReference",value:function(e,t){var n=new Gb(e,t);this.Ti=this.Ti.add(n),this.Ai=this.Ai.add(n)}},{key:"bi",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.Pi(new Gb(e,t))}},{key:"Vi",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"vi",value:function(e){var t=this,n=new up(new Qd([])),r=new Gb(n,e),i=new Gb(n,e+1),a=[];return this.Ai.forEachInRange([r,i],(function(e){t.Pi(e),a.push(e.key)})),a}},{key:"Si",value:function(){var e=this;this.Ti.forEach((function(t){return e.Pi(t)}))}},{key:"Pi",value:function(e){this.Ti=this.Ti.delete(e),this.Ai=this.Ai.delete(e)}},{key:"Di",value:function(e){var t=new up(new Qd([])),n=new Gb(t,e),r=new Gb(t,e+1),i=Im();return this.Ai.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new Gb(e,0),n=this.Ti.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),Gb=function(){function e(t,n){d(this,e),this.key=t,this.Ci=n}return v(e,null,[{key:"Ei",value:function(e,t){return up.comparator(e.key,t.key)||Md(e.Ci,t.Ci)}},{key:"Ri",value:function(e,t){return Md(e.Ci,t.Ci)||up.comparator(e.key,t.key)}}]),e}(),Hb=function(){function e(t,n){d(this,e),this.indexManager=t,this.referenceDelegate=n,this.Bs=[],this.xi=1,this.Ni=new Qp(Gb.Ei)}return v(e,[{key:"checkEmpty",value:function(e){return jy.resolve(0===this.Bs.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.xi;this.xi++,this.Bs.length>0&&this.Bs[this.Bs.length-1];var a=new $y(i,t,n,r);this.Bs.push(a);var o,s=m(r);try{for(s.s();!(o=s.n()).done;){var u=o.value;this.Ni=this.Ni.add(new Gb(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast())}}catch(c){s.e(c)}finally{s.f()}return jy.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return jy.resolve(this.ki(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.Mi(n),i=r<0?0:r;return jy.resolve(this.Bs.length>i?this.Bs[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return jy.resolve(0===this.Bs.length?-1:this.xi-1)}},{key:"getAllMutationBatches",value:function(e){return jy.resolve(this.Bs.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new Gb(t,0),i=new Gb(t,Number.POSITIVE_INFINITY),a=[];return this.Ni.forEachInRange([r,i],(function(e){var t=n.ki(e.Ci);a.push(t)})),jy.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Qp(Md);return t.forEach((function(e){var t=new Gb(e,0),i=new Gb(e,Number.POSITIVE_INFINITY);n.Ni.forEachInRange([t,i],(function(e){r=r.add(e.Ci)}))})),jy.resolve(this.Oi(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;up.isDocumentKey(i)||(i=i.child(""));var a=new Gb(new up(i),0),o=new Qp(Md);return this.Ni.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Ci)),!0)}),a),jy.resolve(this.Oi(o))}},{key:"Oi",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.ki(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;kd(0===this.Fi(t.batchId,"removed")),this.Bs.shift();var r=this.Ni;return jy.forEach(t.mutations,(function(i){var a=new Gb(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.Ni=r}))}},{key:"_n",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new Gb(t,0),r=this.Ni.firstAfterOrEqual(n);return jy.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.Bs.length,jy.resolve()}},{key:"Fi",value:function(e,t){return this.Mi(e)}},{key:"Mi",value:function(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}},{key:"ki",value:function(e){var t=this.Mi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}]),e}(),Yb=function(){function e(t){d(this,e),this.$i=t,this.docs=new Bp(up.comparator),this.size=0}return v(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.$i(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return jy.resolve(n?n.document.mutableCopy():Pp.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=ym();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():Pp.newInvalidDocument(e))})),jy.resolve(r)}},{key:"getAllFromCollection",value:function(e,t,n){for(var r=ym(),i=new up(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),s=o.key,u=o.value.document;if(!t.isPrefixOf(s.path))break;s.path.length>t.length+1||jp(Vp(u),n)<=0||(r=r.insert(u.key,u.mutableCopy()))}return jy.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){bd()}},{key:"Bi",value:function(e,t){return jy.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new Jb(this)}},{key:"getSize",value:function(e){return jy.resolve(this.size)}}]),e}(),Jb=function(e){b(n,e);var t=_(n);function n(e){var r;return d(this,n),(r=t.call(this)).Kn=e,r}return v(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.Kn.addEntry(e,i)):t.Kn.removeEntry(r)})),jy.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Kn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Kn.getEntries(e,t)}}]),n}(ob),Xb=function(){function e(t){d(this,e),this.persistence=t,this.Li=new vm((function(e){return Jp(e)}),Xp),this.lastRemoteSnapshotVersion=qd.min(),this.highestTargetId=0,this.Ui=0,this.qi=new Wb,this.targetCount=0,this.Ki=Gg.gn()}return v(e,[{key:"forEachTarget",value:function(e,t){return this.Li.forEach((function(e,n){return t(n)})),jy.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return jy.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return jy.resolve(this.Ui)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Ki.next(),jy.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ui&&(this.Ui=t),jy.resolve()}},{key:"Tn",value:function(e){this.Li.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Ki=new Gg(t),this.highestTargetId=t),e.sequenceNumber>this.Ui&&(this.Ui=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Tn(t),this.targetCount+=1,jy.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Tn(t),jy.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Li.delete(t.target),this.qi.vi(t.targetId),this.targetCount-=1,jy.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Li.forEach((function(o,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.Li.delete(o),a.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)})),jy.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return jy.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Li.get(t)||null;return jy.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.qi.bi(t,n),jy.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.qi.Vi(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),jy.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.qi.vi(t),jy.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.qi.Di(t);return jy.resolve(n)}},{key:"containsKey",value:function(e,t){return jy.resolve(this.qi.containsKey(t))}}]),e}(),Zb=function(){function e(t,n){var r=this;d(this,e),this.Gi={},this.overlays={},this.es=new Dd(0),this.ns=!1,this.ns=!0,this.referenceDelegate=t(this),this.fs=new Xb(this),this.indexManager=new Cg,this.ds=new Yb((function(e){return r.referenceDelegate.Qi(e)})),this.M=new rg(n),this._s=new Kb(this.M)}return v(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.ns=!1,Promise.resolve()}},{key:"started",get:function(){return this.ns}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new Qb,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Gi[e.toKey()];return n||(n=new Hb(t,this.referenceDelegate),this.Gi[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.fs}},{key:"getRemoteDocumentCache",value:function(){return this.ds}},{key:"getBundleCache",value:function(){return this._s}},{key:"runTransaction",value:function(e,t,n){var r=this;vd("MemoryPersistence","Starting transaction:",e);var i=new $b(this.es.next());return this.referenceDelegate.ji(),n(i).next((function(e){return r.referenceDelegate.Wi(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"zi",value:function(e,t){return jy.or(Object.values(this.Gi).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),$b=function(e){b(n,e);var t=_(n);function n(e){var r;return d(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return v(n)}(qy),ek=function(){function e(t){d(this,e),this.persistence=t,this.Hi=new Wb,this.Ji=null}return v(e,[{key:"Xi",get:function(){if(this.Ji)return this.Ji;throw bd()}},{key:"addReference",value:function(e,t,n){return this.Hi.addReference(n,t),this.Xi.delete(n.toString()),jy.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Hi.removeReference(n,t),this.Xi.add(n.toString()),jy.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Xi.add(t.toString()),jy.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Hi.vi(t.targetId).forEach((function(e){return n.Xi.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Xi.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"ji",value:function(){this.Ji=new Set}},{key:"Wi",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return jy.forEach(this.Xi,(function(r){var i=up.fromPath(r);return t.Zi(e,i).next((function(e){e||n.removeEntry(i,qd.min())}))})).next((function(){return t.Ji=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Zi(e,t).next((function(e){e?n.Xi.delete(t.toString()):n.Xi.add(t.toString())}))}},{key:"Qi",value:function(e){return 0}},{key:"Zi",value:function(e,t){var n=this;return jy.or([function(){return jy.resolve(n.Hi.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.zi(e,t)}])}}],[{key:"Yi",value:function(t){return new e(t)}}]),e}();function tk(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function nk(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function rk(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var ik=function(){function e(t,n,r,i){d(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return v(e,[{key:"er",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"tr",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new Id(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(md("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),ak=function(){function e(t,n,r){d(this,e),this.targetId=t,this.state=n,this.error=r}return v(e,[{key:"er",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"tr",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Id(i.error.code,i.error.message))),a?new e(t,i.state,r):(md("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),ok=function(){function e(t,n){d(this,e),this.clientId=t,this.activeTargetIds=n}return v(e,null,[{key:"tr",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Em(),o=0;i&&o<r.activeTargetIds.length;++o)i=sp(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(md("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),sk=function(){function e(t,n){d(this,e),this.clientId=t,this.onlineState=n}return v(e,null,[{key:"tr",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(md("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),uk=function(){function e(){d(this,e),this.activeTargetIds=Em()}return v(e,[{key:"nr",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"sr",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"er",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),ck=function(){function e(t,n,r,i,a){d(this,e),this.window=t,this.Yn=n,this.persistenceKey=r,this.ir=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new Bp(Md),this.started=!1,this.cr=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.hr=tk(this.persistenceKey,this.ir),this.lr=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ar=this.ar.insert(this.ir,new uk),this.dr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this._r=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.wr=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.mr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.gr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}return v(e,[{key:"start",value:function(){var e=ae(te().mark((function e(){var t,n,r,i,a,o,s,u,c,l,f,h=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Fs();case 2:t=e.sent,n=m(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.ir){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(tk(this.persistenceKey,i)))&&(o=ok.tr(i,a))&&(this.ar=this.ar.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.yr(),(s=this.storage.getItem(this.mr))&&(u=this.pr(s))&&this.Ir(u),c=m(this.cr);try{for(c.s();!(l=c.n()).done;)f=l.value,this.ur(f)}catch(d){c.e(d)}finally{c.f()}this.cr=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.lr,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.Tr(this.ar)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.ar.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Er(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Er(e,t,n),this.Ar(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(rk(this.persistenceKey,e));if(n){var r=ak.tr(e,n);r&&(t=r.state)}}return this.Rr.nr(e),this.yr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Rr.sr(e),this.yr()}},{key:"isLocalQueryTarget",value:function(e){return this.Rr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(rk(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.br(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Ar(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Pr(e)}},{key:"notifyBundleLoaded",value:function(e){this.Vr(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return vd("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){vd("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){vd("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"ur",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(vd("SharedClientState","EVENT",n.key,n.newValue),n.key===this.hr)return void md("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable(ae(te().mark((function e(){var r,i,a,o,s,u,c;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.dr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.vr(n.key),e.abrupt("return",t.Sr(r,null));case 6:if(!(i=t.Dr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Sr(i.clientId,i));case 9:e.next=41;break;case 11:if(!t._r.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Cr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Nr(a));case 16:e.next=41;break;case 18:if(!t.wr.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.kr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Mr(o));case 23:e.next=41;break;case 25:if(n.key!==t.mr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(s=t.pr(n.newValue))){e.next=30;break}return e.abrupt("return",t.Ir(s));case 30:e.next=41;break;case 32:if(n.key!==t.lr){e.next=37;break}u=function(e){var t=Dd.A;if(null!=e)try{var n=JSON.parse(e);kd("number"==typeof n),t=n}catch(e){md("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),u!==Dd.A&&t.sequenceNumberHandler(u),e.next=41;break;case 37:if(n.key!==t.gr){e.next=41;break}return c=t.Or(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Fr(e)})));case 41:e.next=44;break;case 43:t.cr.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Rr",get:function(){return this.ar.get(this.ir)}},{key:"yr",value:function(){this.setItem(this.hr,this.Rr.er())}},{key:"Er",value:function(e,t,n){var r=new ik(this.currentUser,e,t,n),i=nk(this.persistenceKey,this.currentUser,e);this.setItem(i,r.er())}},{key:"Ar",value:function(e){var t=nk(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Pr",value:function(e){var t={clientId:this.ir,onlineState:e};this.storage.setItem(this.mr,JSON.stringify(t))}},{key:"br",value:function(e,t,n){var r=rk(this.persistenceKey,e),i=new ak(e,t,n);this.setItem(r,i.er())}},{key:"Vr",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.gr,t)}},{key:"vr",value:function(e){var t=this.dr.exec(e);return t?t[1]:null}},{key:"Dr",value:function(e,t){var n=this.vr(e);return ok.tr(n,t)}},{key:"Cr",value:function(e,t){var n=this._r.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return ik.tr(new fd(i),r,t)}},{key:"kr",value:function(e,t){var n=this.wr.exec(e),r=Number(n[1]);return ak.tr(r,t)}},{key:"pr",value:function(e){return sk.tr(e)}},{key:"Or",value:function(e){return JSON.parse(e)}},{key:"Nr",value:function(){var e=ae(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.$r(t.batchId,t.state,t.error));case 2:vd("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Mr",value:function(e){return this.syncEngine.Br(e.targetId,e.state,e.error)}},{key:"Sr",value:function(e,t){var n=this,r=t?this.ar.insert(e,t):this.ar.remove(e),i=this.Tr(this.ar),a=this.Tr(r),o=[],s=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||s.push(e)})),this.syncEngine.Lr(o,s).then((function(){n.ar=r}))}},{key:"Ir",value:function(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"Tr",value:function(e){var t=Em();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"vt",value:function(e){return!(!e||!e.localStorage)}}]),e}(),lk=function(){function e(){d(this,e),this.Ur=new uk,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return v(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Ur.nr(e),this.qr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.qr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Ur.sr(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Ur.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.qr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Ur.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Ur.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Ur=new uk,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),fk=function(){function e(){d(this,e)}return v(e,[{key:"Kr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),hk=function(){function e(){var t=this;d(this,e),this.Gr=function(){return t.Qr()},this.jr=function(){return t.Wr()},this.zr=[],this.Hr()}return v(e,[{key:"Kr",value:function(e){this.zr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}},{key:"Hr",value:function(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}},{key:"Qr",value:function(){vd("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=m(this.zr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Wr",value:function(){vd("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=m(this.zr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"vt",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),dk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},pk=function(){function e(t){d(this,e),this.Jr=t.Jr,this.Yr=t.Yr}return v(e,[{key:"Xr",value:function(e){this.Zr=e}},{key:"eo",value:function(e){this.no=e}},{key:"onMessage",value:function(e){this.so=e}},{key:"close",value:function(){this.Yr()}},{key:"send",value:function(e){this.Jr(e)}},{key:"io",value:function(){this.Zr()}},{key:"ro",value:function(e){this.no(e)}},{key:"oo",value:function(e){this.so(e)}}]),e}(),vk=function(e){b(n,e);var t=_(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return v(n,[{key:"fo",value:function(e,t,n,r){return new Promise((function(i,a){var o=new cd;o.listenOnce(id.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case rd.NO_ERROR:var t=o.getResponseJson();vd("Connection","XHR received:",JSON.stringify(t)),i(t);break;case rd.TIMEOUT:vd("Connection",'RPC "'+e+'" timed out'),a(new Id(xd.DEADLINE_EXCEEDED,"Request time out"));break;case rd.HTTP_ERROR:var n=o.getStatus();if(vd("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var s=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(xd).indexOf(t)>=0?t:xd.UNKNOWN}(r.status);a(new Id(s,r.message))}else a(new Id(xd.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new Id(xd.UNAVAILABLE,"Connection failed."));break;default:bd()}}finally{vd("Connection",'RPC "'+e+'" completed.')}}));var s=JSON.stringify(r);o.send(t,"POST",s,n,15)}))}},{key:"wo",value:function(e,t,n){var r=[this.uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=td(),a=nd(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new sd({})),this.lo(o.initMessageHeaders,t,n),L()||U()||R().indexOf("Electron/")>=0||V()||R().indexOf("MSAppHost/")>=0||F()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=r.join("");vd("Connection","Creating WebChannel: "+s,o);var u=i.createWebChannel(s,o),c=!1,l=!1,f=new pk({Jr:function(e){l?vd("Connection","Not sending because WebChannel is closed:",e):(c||(vd("Connection","Opening WebChannel transport."),u.open(),c=!0),vd("Connection","WebChannel sending:",e),u.send(e))},Yr:function(){return u.close()}}),h=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return h(u,ud.EventType.OPEN,(function(){l||vd("Connection","WebChannel transport opened.")})),h(u,ud.EventType.CLOSE,(function(){l||(l=!0,vd("Connection","WebChannel transport closed"),f.ro())})),h(u,ud.EventType.ERROR,(function(e){l||(l=!0,yd("Connection","WebChannel transport errored:",e),f.ro(new Id(xd.UNAVAILABLE,"The operation could not be completed")))})),h(u,ud.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];kd(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){vd("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=um[e];if(void 0!==t)return pm(t)}(a),s=i.message;void 0===o&&(o=xd.INTERNAL,s="Unknown error status: "+a+" with message "+i.message),l=!0,f.ro(new Id(o,s)),u.close()}else vd("Connection","WebChannel received:",n),f.oo(n)}})),h(a,ad.STAT_EVENT,(function(e){e.stat===od.PROXY?vd("Connection","Detected buffering proxy"):e.stat===od.NOPROXY&&vd("Connection","Detected no buffering proxy")})),setTimeout((function(){f.io()}),0),f}}]),n}(function(){function e(t){d(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.uo=n+"://"+t.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return v(e,[{key:"co",value:function(e,t,n,r,i){var a=this.ho(e,t);vd("RestConnection","Sending: ",a,n);var o={};return this.lo(o,r,i),this.fo(e,a,o,n).then((function(e){return vd("RestConnection","Received: ",e),e}),(function(t){throw yd("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"_o",value:function(e,t,n,r,i){return this.co(e,t,n,r,i)}},{key:"lo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+hd,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"ho",value:function(e,t){var n=dk[e];return"".concat(this.uo,"/v1/").concat(t,":").concat(n)}}]),e}());function mk(){return"undefined"!=typeof window?window:null}function yk(){return"undefined"!=typeof document?document:null}function gk(e){return new Fm(e,!0)}var bk=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;d(this,e),this.Yn=t,this.timerId=n,this.mo=r,this.yo=i,this.po=a,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}return v(e,[{key:"reset",value:function(){this.Io=0}},{key:"Ao",value:function(){this.Io=this.po}},{key:"Ro",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,n-r);i>0&&vd("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Io," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.To=this.Yn.enqueueAfterDelay(this.timerId,i,(function(){return t.Eo=Date.now(),e()})),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}},{key:"Po",value:function(){null!==this.To&&(this.To.skipDelay(),this.To=null)}},{key:"cancel",value:function(){null!==this.To&&(this.To.cancel(),this.To=null)}},{key:"bo",value:function(){return(Math.random()-.5)*this.Io}}]),e}(),kk=function(){function e(t,n,r,i,a,o,s,u){d(this,e),this.Yn=t,this.Vo=r,this.vo=i,this.So=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=u,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new bk(t,n)}return v(e,[{key:"ko",value:function(){return 1===this.state||5===this.state||this.Mo()}},{key:"Mo",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Oo()}},{key:"stop",value:function(){var e=ae(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.ko(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Fo",value:function(){this.state=0,this.No.reset()}},{key:"$o",value:function(){var e=this;this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,(function(){return e.Bo()})))}},{key:"Lo",value:function(e){this.Uo(),this.stream.send(e)}},{key:"Bo",value:function(){var e=ae(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Mo()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Uo",value:function(){this.Co&&(this.Co.cancel(),this.Co=null)}},{key:"qo",value:function(){this.xo&&(this.xo.cancel(),this.xo=null)}},{key:"close",value:function(){var e=ae(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Uo(),this.qo(),this.No.cancel(),this.Do++,4!==t?this.No.reset():n&&n.code===xd.RESOURCE_EXHAUSTED?(md(n.toString()),md("Using maximum backoff delay to prevent overloading the backend."),this.No.Ao()):n&&n.code===xd.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Ko(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.eo(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Ko",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Go(this.Do),n=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=f(t,2),i=r[0],a=r[1];e.Do===n&&e.Qo(i,a)}),(function(n){t((function(){var t=new Id(xd.UNKNOWN,"Fetching auth token failed: "+n.message);return e.jo(t)}))}))}},{key:"Qo",value:function(e,t){var n=this,r=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Xr((function(){r((function(){return n.state=2,n.xo=n.Yn.enqueueAfterDelay(n.vo,1e4,(function(){return n.Mo()&&(n.state=3),Promise.resolve()})),n.listener.Xr()}))})),this.stream.eo((function(e){r((function(){return n.jo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Oo",value:function(){var e=this;this.state=5,this.No.Ro(ae(te().mark((function t(){return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"jo",value:function(e){return vd("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Go",value:function(e){var t=this;return function(n){t.Yn.enqueueAndForget((function(){return t.Do===e?n():(vd("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),wk=function(e){b(n,e);var t=_(n);function n(e,r,i,a,o,s){var u;return d(this,n),(u=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,s)).M=o,u}return v(n,[{key:"Wo",value:function(e,t){return this.So.wo("Listen",e,t)}},{key:"onMessage",value:function(e){this.No.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:bd()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.N?(kd(void 0===t||"string"==typeof t),Yd.fromBase64String(t||"")):(kd(void 0===t||t instanceof Uint8Array),Yd.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,s=o&&function(e){var t=void 0===e.code?xd.UNKNOWN:pm(e.code);return new Id(t,e.message||"")}(o);n=new Cm(r,i,a,s||null)}else if("documentChange"in t){t.documentChange;var u=t.documentChange;u.document,u.document.name,u.document.updateTime;var c=Qm(e,u.document.name),l=jm(u.document.updateTime),f=new Cp({mapValue:{fields:u.document.fields}}),h=Pp.newFoundDocument(c,l,f),d=u.targetIds||[],p=u.removedTargetIds||[];n=new Sm(d,p,h.key,h)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var m=Qm(e,v.document),y=v.readTime?jm(v.readTime):qd.min(),g=Pp.newNoDocument(m,y),b=v.removedTargetIds||[];n=new Sm([],b,g.key,g)}else if("documentRemove"in t){t.documentRemove;var k=t.documentRemove;k.document;var w=Qm(e,k.document),x=k.removedTargetIds||[];n=new Sm([],x,w,null)}else{if(!("filter"in t))return bd();t.filter;var I=t.filter;I.targetId;var _=I.count||0,E=new hm(_),A=I.targetId;n=new Om(A,E)}return n}(this.M,e),n=function(e){if(!("targetChange"in e))return qd.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?qd.min():t.readTime?jm(t.readTime):qd.min()}(e);return this.listener.zo(t,n)}},{key:"Ho",value:function(e){var t={};t.database=Hm(this.M),t.addTarget=function(e,t){var n,r=t.target;return(n=Zp(r)?{documents:ty(e,r)}:{query:ny(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=Vm(e,t.resumeToken):t.snapshotVersion.compareTo(qd.min())>0&&(n.readTime=Um(e,t.snapshotVersion.toTimestamp())),n}(this.M,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return bd()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.M,e);n&&(t.labels=n),this.Lo(t)}},{key:"Jo",value:function(e){var t={};t.database=Hm(this.M),t.removeTarget=e,this.Lo(t)}}]),n}(kk),xk=function(e){b(n,e);var t=_(n);function n(e,r,i,a,o,s){var u;return d(this,n),(u=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,s)).M=o,u.Yo=!1,u}return v(n,[{key:"Xo",get:function(){return this.Yo}},{key:"start",value:function(){this.Yo=!1,this.lastStreamToken=void 0,Dt(k(n.prototype),"start",this).call(this)}},{key:"Ko",value:function(){this.Yo&&this.Zo([])}},{key:"Wo",value:function(e,t){return this.So.wo("Write",e,t)}},{key:"onMessage",value:function(e){if(kd(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();var t=function(e,t){return e&&e.length>0?(kd(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?jm(e.updateTime):jm(t);return n.isEqual(qd.min())&&(n=jm(t)),new Hv(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=jm(e.commitTime);return this.listener.tu(n,t)}return kd(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}},{key:"nu",value:function(){var e={};e.database=Hm(this.M),this.Lo(e)}},{key:"Zo",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return $m(t.M,e)}))};this.Lo(n)}}]),n}(kk),Ik=function(e){b(n,e);var t=_(n);function n(e,r,i,a){var o;return d(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.So=i,o.M=a,o.su=!1,o}return v(n,[{key:"iu",value:function(){if(this.su)throw new Id(xd.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"co",value:function(e,t,n){var r=this;return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=f(i,2),o=a[0],s=a[1];return r.So.co(e,t,n,o,s)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===xd.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Id(xd.UNKNOWN,e.toString())}))}},{key:"_o",value:function(e,t,n){var r=this;return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=f(i,2),o=a[0],s=a[1];return r.So._o(e,t,n,o,s)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===xd.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Id(xd.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.su=!0}}]),n}(function(){return v((function e(){d(this,e)}))}()),_k=function(){function e(t,n){d(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}return v(e,[{key:"au",value:function(){var e=this;0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.ou=null,e.hu("Backend didn't respond within 10 seconds."),e.cu("Offline"),Promise.resolve()})))}},{key:"lu",value:function(e){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.cu("Offline")))}},{key:"set",value:function(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.cu(e)}},{key:"cu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"hu",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.uu?(md(t),this.uu=!1):vd("OnlineStateTracker",t)}},{key:"fu",value:function(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}]),e}(),Ek=v((function e(t,n,r,i,a){var o=this;d(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=a,this.gu.Kr((function(e){r.enqueueAndForget(ae(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=Mk(o),!e.t0){e.next=5;break}return vd("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=ae(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=wd(t)).wu.add(4),e.next=4,Sk(n);case 4:return n.yu.set("Unknown"),n.wu.delete(4),e.next=8,Ak(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.yu=new _k(r,i)}));function Ak(e){return Tk.apply(this,arguments)}function Tk(){return Tk=ae(te().mark((function e(t){var n,r,i;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Mk(t)){e.next=18;break}n=m(t.mu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),Tk.apply(this,arguments)}function Sk(e){return Ok.apply(this,arguments)}function Ok(){return Ok=ae(te().mark((function e(t){var n,r,i;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=m(t.mu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),Ok.apply(this,arguments)}function Ck(e,t){var n=wd(e);n._u.has(t.targetId)||(n._u.set(t.targetId,t),Lk(n)?Rk(n):fw(n).Mo()&&Pk(n,t))}function Nk(e,t){var n=wd(e),r=fw(n);n._u.delete(t),r.Mo()&&Dk(n,t),0===n._u.size&&(r.Mo()?r.$o():Mk(n)&&n.yu.set("Unknown"))}function Pk(e,t){e.pu.Z(t.targetId),fw(e).Ho(t)}function Dk(e,t){e.pu.Z(t),fw(e).Jo(t)}function Rk(e){e.pu=new Pm({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},Et:function(t){return e._u.get(t)||null}}),fw(e).start(),e.yu.au()}function Lk(e){return Mk(e)&&!fw(e).ko()&&e._u.size>0}function Mk(e){return 0===wd(e).wu.size}function Fk(e){e.pu=void 0}function Uk(e){return Vk.apply(this,arguments)}function Vk(){return Vk=ae(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t._u.forEach((function(e,n){Pk(t,e)}));case 1:case"end":return e.stop()}}),e)}))),Vk.apply(this,arguments)}function qk(e,t){return jk.apply(this,arguments)}function jk(){return jk=ae(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Fk(t),Lk(t)?(t.yu.lu(n),Rk(t)):t.yu.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),jk.apply(this,arguments)}function Bk(e,t,n){return zk.apply(this,arguments)}function zk(){return zk=ae(te().mark((function e(t,n,r){var i;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.yu.set("Online"),!(n instanceof Cm&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=ae(te().mark((function e(t,n){var r,i,a,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=m(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t._u.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t._u.delete(o),t.pu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),vd("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,Kk(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof Sm?t.pu.ut(n):n instanceof Om?t.pu._t(n):t.pu.ht(n),r.isEqual(qd.min())){e.next=29;break}return e.prev=14,e.next=17,Ob(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.pu.yt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e._u.get(r);i&&e._u.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e._u.get(t);if(n){e._u.set(t,n.withResumeToken(Yd.EMPTY_BYTE_STRING,n.snapshotVersion)),Dk(e,t);var r=new ng(n.target,t,1,n.sequenceNumber);Pk(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),vd("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,Kk(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),zk.apply(this,arguments)}function Kk(e,t,n){return Qk.apply(this,arguments)}function Qk(){return Qk=ae(te().mark((function e(t,n,r){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Wy(n)){e.next=2;break}throw n;case 2:return t.wu.add(1),e.next=5,Sk(t);case 5:t.yu.set("Offline"),r||(r=function(){return Ob(t.localStore)}),t.asyncQueue.enqueueRetryable(ae(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return vd("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.wu.delete(1),e.next=6,Ak(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),Qk.apply(this,arguments)}function Wk(e,t){return t().catch((function(n){return Kk(e,n,t)}))}function Gk(e){return Hk.apply(this,arguments)}function Hk(){return Hk=ae(te().mark((function e(t){var n,r,i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=wd(t),r=hw(n),i=n.du.length>0?n.du[n.du.length-1].batchId:-1;case 2:if(!Yk(n)){e.next=19;break}return e.prev=3,e.next=6,Pb(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.du.length&&r.$o(),e.abrupt("break",19);case 10:i=a.batchId,Jk(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,Kk(n,e.t0);case 17:e.next=2;break;case 19:Xk(n)&&Zk(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),Hk.apply(this,arguments)}function Yk(e){return Mk(e)&&e.du.length<10}function Jk(e,t){e.du.push(t);var n=hw(e);n.Mo()&&n.Xo&&n.Zo(t.mutations)}function Xk(e){return Mk(e)&&!hw(e).ko()&&e.du.length>0}function Zk(e){hw(e).start()}function $k(e){return ew.apply(this,arguments)}function ew(){return ew=ae(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:hw(t).nu();case 1:case"end":return e.stop()}}),e)}))),ew.apply(this,arguments)}function tw(e){return nw.apply(this,arguments)}function nw(){return nw=ae(te().mark((function e(t){var n,r,i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=hw(t),r=m(t.du);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Zo(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),nw.apply(this,arguments)}function rw(e,t,n){return iw.apply(this,arguments)}function iw(){return iw=ae(te().mark((function e(t,n,r){var i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.du.shift(),a=eg.from(i,n,r),e.next=3,Wk(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,Gk(t);case 5:case"end":return e.stop()}}),e)}))),iw.apply(this,arguments)}function aw(e,t){return ow.apply(this,arguments)}function ow(){return ow=ae(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&hw(t).Xo,!e.t0){e.next=4;break}return e.next=4,function(){var e=ae(te().mark((function e(t,n){var r,i;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!dm(i=n.code)||i===xd.ABORTED){e.next=7;break}return r=t.du.shift(),hw(t).Fo(),e.next=5,Wk(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,Gk(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:Xk(t)&&Zk(t);case 5:case"end":return e.stop()}}),e)}))),ow.apply(this,arguments)}function sw(e,t){return uw.apply(this,arguments)}function uw(){return uw=ae(te().mark((function e(t,n){var r,i;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=wd(t)).asyncQueue.verifyOperationInProgress(),vd("RemoteStore","RemoteStore received new credentials"),i=Mk(r),r.wu.add(3),e.next=6,Sk(r);case 6:return i&&r.yu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.wu.delete(3),e.next=12,Ak(r);case 12:case"end":return e.stop()}}),e)}))),uw.apply(this,arguments)}function cw(e,t){return lw.apply(this,arguments)}function lw(){return lw=ae(te().mark((function e(t,n){var r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=wd(t),!n){e.next=7;break}return r.wu.delete(2),e.next=5,Ak(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.wu.add(2),e.next=12,Sk(r);case 12:r.yu.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),lw.apply(this,arguments)}function fw(e){return e.Iu||(e.Iu=function(e,t,n){var r=wd(e);return r.iu(),new wk(t,r.So,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{Xr:Uk.bind(null,e),eo:qk.bind(null,e),zo:Bk.bind(null,e)}),e.mu.push(function(){var t=ae(te().mark((function t(n){return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.Iu.Fo(),Lk(e)?Rk(e):e.yu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.Iu.stop();case 6:Fk(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Iu}function hw(e){return e.Tu||(e.Tu=function(e,t,n){var r=wd(e);return r.iu(),new xk(t,r.So,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{Xr:$k.bind(null,e),eo:aw.bind(null,e),eu:tw.bind(null,e),tu:rw.bind(null,e)}),e.mu.push(function(){var t=ae(te().mark((function t(n){return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Tu.Fo(),t.next=4,Gk(e);case 4:t.next=9;break;case 6:return t.next=8,e.Tu.stop();case 8:e.du.length>0&&(vd("RemoteStore","Stopping write stream with ".concat(e.du.length," pending writes")),e.du=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Tu}var dw=function(){function e(t,n,r,i,a){d(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new _d,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return v(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Id(xd.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function pw(e,t){if(md("AsyncQueue","".concat(t,": ").concat(e)),Wy(e))return new Id(xd.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var vw=function(){function e(t){d(this,e),this.comparator=t?function(e,n){return t(e,n)||up.comparator(e.key,n.key)}:function(e,t){return up.comparator(e.key,t.key)},this.keyedMap=bm(),this.sortedSet=new Bp(this.comparator)}return v(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),mw=function(){function e(){d(this,e),this.Eu=new Bp(up.comparator)}return v(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Eu.get(t);n?0!==e.type&&3===n.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==n.type?this.Eu=this.Eu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Eu=this.Eu.remove(t):1===e.type&&2===n.type?this.Eu=this.Eu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):bd():this.Eu=this.Eu.insert(t,e)}},{key:"Au",value:function(){var e=[];return this.Eu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),yw=function(){function e(t,n,r,i,a,o,s,u){d(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=u}return v(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ev(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach((function(e){a.push({type:0,doc:e})})),new e(t,n,vw.emptySet(n),a,r,i,!0,!1)}}]),e}(),gw=v((function e(){d(this,e),this.Ru=void 0,this.listeners=[]})),bw=v((function e(){d(this,e),this.queries=new vm((function(e){return Av(e)}),Ev),this.onlineState="Unknown",this.bu=new Set}));function kw(e,t){return ww.apply(this,arguments)}function ww(){return ww=ae(te().mark((function e(t,n){var r,i,a,o,s;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=wd(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new gw),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Ru=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),s=pw(e.t0,"Initialization of query '".concat(Tv(n.query),"' failed")),e.abrupt("return",void n.onError(s));case 13:r.queries.set(i,o),o.listeners.push(n),n.Pu(r.onlineState),o.Ru&&n.Vu(o.Ru)&&Aw(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),ww.apply(this,arguments)}function xw(e,t){return Iw.apply(this,arguments)}function Iw(){return Iw=ae(te().mark((function e(t,n){var r,i,a,o,s;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=wd(t),i=n.query,a=!1,(o=r.queries.get(i))&&(s=o.listeners.indexOf(n))>=0&&(o.listeners.splice(s,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),Iw.apply(this,arguments)}function _w(e,t){var n,r=wd(e),i=!1,a=m(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,s=o.query,u=r.queries.get(s);if(u){var c,l=m(u.listeners);try{for(l.s();!(c=l.n()).done;){c.value.Vu(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}u.Ru=o}}}catch(f){a.e(f)}finally{a.f()}i&&Aw(r)}function Ew(e,t,n){var r=wd(e),i=r.queries.get(t);if(i){var a,o=m(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(s){o.e(s)}finally{o.f()}}r.queries.delete(t)}function Aw(e){e.bu.forEach((function(e){e.next()}))}var Tw=function(){function e(t,n,r){d(this,e),this.query=t,this.vu=n,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}return v(e,[{key:"Vu",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=m(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new yw(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.Su?this.Cu(e)&&(this.vu.next(e),a=!0):this.xu(e,this.onlineState)&&(this.Nu(e),a=!0),this.Du=e,a}},{key:"onError",value:function(e){this.vu.error(e)}},{key:"Pu",value:function(e){this.onlineState=e;var t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}},{key:"xu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.ku||!n)&&(!e.docs.isEmpty()||"Offline"===t)}},{key:"Cu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Nu",value:function(e){e=yw.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.vu.next(e)}}]),e}(),Sw=function(){function e(t,n){d(this,e),this.payload=t,this.byteLength=n}return v(e,[{key:"Mu",value:function(){return"metadata"in this.payload}}]),e}(),Ow=function(){function e(t){d(this,e),this.M=t}return v(e,[{key:"wi",value:function(e){return Qm(this.M,e)}},{key:"mi",value:function(e){return e.metadata.exists?Xm(this.M,e.document,!1):Pp.newNoDocument(this.wi(e.metadata.name),this.gi(e.metadata.readTime))}},{key:"gi",value:function(e){return jm(e)}}]),e}(),Cw=function(){function e(t,n,r){d(this,e),this.Ou=t,this.localStore=n,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Nw(t)}return v(e,[{key:"Fu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;var n=Qd.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"$u",value:function(e){var t,n=new Map,r=new Ow(this.M),i=m(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,s=r.wi(a.metadata.name),u=m(a.metadata.queries);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=(n.get(c)||Im()).add(s);n.set(c,l)}}catch(f){u.e(f)}finally{u.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=ae(te().mark((function e(){var t,n,r,i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qb(this.localStore,new Ow(this.M),this.documents,this.Ou.id);case 2:t=e.sent,n=this.$u(this.documents),r=m(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,Bb(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Bu:this.collectionGroups,Lu:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function Nw(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var Pw=v((function e(t){d(this,e),this.key=t})),Dw=v((function e(t){d(this,e),this.key=t})),Rw=function(){function e(t,n){d(this,e),this.query=t,this.Uu=n,this.qu=null,this.current=!1,this.Ku=Im(),this.mutatedKeys=Im(),this.Gu=Cv(t),this.Qu=new vw(this.Gu)}return v(e,[{key:"ju",get:function(){return this.Uu}},{key:"Wu",value:function(e,t){var n=this,r=t?t.zu:new mw,i=t?t.Qu:this.Qu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,s=!1,u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=Sv(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Hu(l,f)||(r.track({type:2,doc:f}),p=!0,(u&&n.Gu(f,u)>0||c&&n.Gu(f,c)<0)&&(s=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(s=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Qu:o,zu:r,ii:s,mutatedKeys:a}}},{key:"Hu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;var a=e.zu.Au();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return bd()}};return n(e)-n(t)}(e.type,t.type)||r.Gu(e.doc,t.doc)})),this.Ju(n);var o=t?this.Yu():[],s=0===this.Ku.size&&this.current?1:0,u=s!==this.qu;return this.qu=s,0!==a.length||u?{snapshot:new yw(this.query,e.Qu,i,a,e.mutatedKeys,0===s,u,!1),Xu:o}:{Xu:o}}},{key:"Pu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new mw,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}},{key:"Zu",value:function(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}},{key:"Ju",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Uu=t.Uu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Uu=t.Uu.delete(e)})),this.current=e.current)}},{key:"Yu",value:function(){var e=this;if(!this.current)return[];var t=this.Ku;this.Ku=Im(),this.Qu.forEach((function(t){e.Zu(t.key)&&(e.Ku=e.Ku.add(t.key))}));var n=[];return t.forEach((function(t){e.Ku.has(t)||n.push(new Dw(t))})),this.Ku.forEach((function(e){t.has(e)||n.push(new Pw(e))})),n}},{key:"ta",value:function(e){this.Uu=e._i,this.Ku=Im();var t=this.Wu(e.documents);return this.applyChanges(t,!0)}},{key:"ea",value:function(){return yw.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}]),e}(),Lw=v((function e(t,n,r){d(this,e),this.query=t,this.targetId=n,this.view=r})),Mw=v((function e(t){d(this,e),this.key=t,this.na=!1})),Fw=function(){function e(t,n,r,i,a,o){d(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.sa={},this.ia=new vm((function(e){return Av(e)}),Ev),this.ra=new Map,this.oa=new Set,this.ua=new Bp(up.comparator),this.aa=new Map,this.ca=new Wb,this.ha={},this.la=new Map,this.fa=Gg.yn(),this.onlineState="Unknown",this.da=void 0}return v(e,[{key:"isPrimaryClient",get:function(){return!0===this.da}}]),e}();function Uw(e,t){return Vw.apply(this,arguments)}function Vw(){return Vw=ae(te().mark((function e(t,n){var r,i,a,o,s,u;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Nx(t),!(o=r.ia.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.ea(),e.next=15;break;case 6:return e.next=8,Db(r.localStore,Iv(n));case 8:return s=e.sent,r.isPrimaryClient&&Ck(r.remoteStore,s),u=r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.targetId,e.next=14,qw(r,n,i,"current"===u);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),Vw.apply(this,arguments)}function qw(e,t,n,r){return jw.apply(this,arguments)}function jw(){return jw=ae(te().mark((function e(t,n,r,i){var a,o,s,u,c,l;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._a=function(e,n,r){return function(){var e=ae(te().mark((function e(t,n,r,i){var a,o,s;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Wu(r),e.t0=a.ii,!e.t0){e.next=6;break}return e.next=5,Mb(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Wu(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),s=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(sx(t,n.targetId,s.Xu),s.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,Mb(t.localStore,n,!0);case 3:return a=e.sent,o=new Rw(n,a._i),s=o.Wu(a.documents),u=Tm.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),c=o.applyChanges(s,t.isPrimaryClient,u),sx(t,r,c.Xu),l=new Lw(n,r,o),e.abrupt("return",(t.ia.set(n,l),t.ra.has(r)?t.ra.get(r).push(n):t.ra.set(r,[n]),c.snapshot));case 11:case"end":return e.stop()}}),e)}))),jw.apply(this,arguments)}function Bw(e,t){return zw.apply(this,arguments)}function zw(){return zw=ae(te().mark((function e(t,n){var r,i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=wd(t),i=r.ia.get(n),!((a=r.ra.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.ra.set(i.targetId,a.filter((function(e){return!Ev(e,n)}))),void r.ia.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,Rb(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),Nk(r.remoteStore,i.targetId),ax(r,i.targetId)})).catch(Zg);case 9:e.next=14;break;case 11:return ax(r,i.targetId),e.next=14,Rb(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),zw.apply(this,arguments)}function Kw(e,t,n){return Qw.apply(this,arguments)}function Qw(){return Qw=ae(te().mark((function e(t,n,r){var i,a,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Px(t),e.prev=1,e.next=4,function(e,t){var n,r=wd(e),i=Vd.now(),a=t.reduce((function(e,t){return e.add(t.key)}),Im());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(e){return r.fi.Ks(e,a).next((function(a){n=a;var o,s=[],u=m(t);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=em(c,n.get(c.key));null!=l&&s.push(new im(c.key,l,Np(l.value.mapValue),Yv.exists(!0)))}}catch(f){u.e(f)}finally{u.f()}return r.Bs.addMutationBatch(e,i,s,t)}))})).then((function(e){return e.applyToLocalDocumentSet(n),{batchId:e.batchId,changes:n}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.ha[e.currentUser.toKey()];r||(r=new Bp(Md)),r=r.insert(t,n),e.ha[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,lx(i,a.changes);case 9:return e.next=11,Gk(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=pw(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),Qw.apply(this,arguments)}function Ww(e,t){return Gw.apply(this,arguments)}function Gw(){return Gw=ae(te().mark((function e(t,n){var r,i;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=wd(t),e.prev=1,e.next=4,Cb(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.aa.get(t);n&&(kd(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.na=!0:e.modifiedDocuments.size>0?kd(n.na):e.removedDocuments.size>0&&(kd(n.na),n.na=!1))})),e.next=8,lx(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Zg(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),Gw.apply(this,arguments)}function Hw(e,t,n){var r=wd(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.ia.forEach((function(e,n){var r=n.view.Pu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=wd(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=m(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Pu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&Aw(n)}(r.eventManager,t),i.length&&r.sa.zo(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function Yw(e,t,n){return Jw.apply(this,arguments)}function Jw(){return Jw=ae(te().mark((function e(t,n,r){var i,a,o,s,u,c;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=wd(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.aa.get(n),!(o=a&&a.key)){e.next=14;break}return s=(s=new Bp(up.comparator)).insert(o,Pp.newNoDocument(o,qd.min())),u=Im().add(o),c=new Am(qd.min(),new Map,new Qp(Md),s,u),e.next=9,Ww(i,c);case 9:i.ua=i.ua.remove(o),i.aa.delete(n),cx(i),e.next=16;break;case 14:return e.next=16,Rb(i.localStore,n,!1).then((function(){return ax(i,n,r)})).catch(Zg);case 16:case"end":return e.stop()}}),e)}))),Jw.apply(this,arguments)}function Xw(e,t){return Zw.apply(this,arguments)}function Zw(){return Zw=ae(te().mark((function e(t,n){var r,i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=wd(t),i=n.batch.batchId,e.prev=1,e.next=4,Sb(r.localStore,n);case 4:return a=e.sent,ix(r,i,null),rx(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,lx(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Zg(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),Zw.apply(this,arguments)}function $w(e,t,n){return ex.apply(this,arguments)}function ex(){return ex=ae(te().mark((function e(t,n,r){var i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=wd(t),e.prev=1,e.next=4,function(e,t){var n=wd(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.Bs.lookupMutationBatch(e,t).next((function(t){return kd(null!==t),r=t.keys(),n.Bs.removeMutationBatch(e,t)})).next((function(){return n.Bs.performConsistencyCheck(e)})).next((function(){return n.fi.Ks(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,ix(i,n,r),rx(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,lx(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Zg(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),ex.apply(this,arguments)}function tx(e,t){return nx.apply(this,arguments)}function nx(){return nx=ae(te().mark((function e(t,n){var r,i,a,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Mk((r=wd(t)).remoteStore)||vd("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=wd(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.Bs.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.la.get(i)||[]).push(n),r.la.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=pw(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),nx.apply(this,arguments)}function rx(e,t){(e.la.get(t)||[]).forEach((function(e){e.resolve()})),e.la.delete(t)}function ix(e,t,n){var r=wd(e),i=r.ha[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.ha[r.currentUser.toKey()]=i}}function ax(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=m(e.ra.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.ia.delete(a),n&&e.sa.wa(a,n)}}catch(o){i.e(o)}finally{i.f()}e.ra.delete(t),e.isPrimaryClient&&e.ca.vi(t).forEach((function(t){e.ca.containsKey(t)||ox(e,t)}))}function ox(e,t){e.oa.delete(t.path.canonicalString());var n=e.ua.get(t);null!==n&&(Nk(e.remoteStore,n),e.ua=e.ua.remove(t),e.aa.delete(n),cx(e))}function sx(e,t,n){var r,i=m(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof Pw?(e.ca.addReference(a.key,t),ux(e,a)):a instanceof Dw?(vd("SyncEngine","Document no longer in limbo: "+a.key),e.ca.removeReference(a.key,t),e.ca.containsKey(a.key)||ox(e,a.key)):bd()}}catch(o){i.e(o)}finally{i.f()}}function ux(e,t){var n=t.key,r=n.path.canonicalString();e.ua.get(n)||e.oa.has(r)||(vd("SyncEngine","New document in limbo: "+n),e.oa.add(r),cx(e))}function cx(e){for(;e.oa.size>0&&e.ua.size<e.maxConcurrentLimboResolutions;){var t=e.oa.values().next().value;e.oa.delete(t);var n=new up(Qd.fromString(t)),r=e.fa.next();e.aa.set(r,new Mw(n)),e.ua=e.ua.insert(n,r),Ck(e.remoteStore,new ng(Iv(gv(n.path)),r,2,Dd.A))}}function lx(e,t,n){return fx.apply(this,arguments)}function fx(){return fx=ae(te().mark((function e(t,n,r){var i,a,o,s;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=wd(t),a=[],o=[],s=[],e.t0=i.ia.isEmpty(),e.t0){e.next=9;break}return i.ia.forEach((function(e,t){s.push(i._a(t,n,r).then((function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),a.push(e);var n=xb.Ys(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(s);case 6:return i.sa.zo(a),e.next=9,function(){var e=ae(te().mark((function e(t,n){var r,i,a,o,s,u,c,l;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=wd(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return jy.forEach(n,(function(t){return jy.forEach(t.Hs,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return jy.forEach(t.Js,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Wy(e.t0)){e.next=10;break}throw e.t0;case 10:vd("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=m(n);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.targetId,o.fromCache||(u=r.ui.get(s),c=u.snapshotVersion,l=u.withLastLimboFreeSnapshotVersion(c),r.ui=r.ui.insert(s,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),fx.apply(this,arguments)}function hx(e,t){return dx.apply(this,arguments)}function dx(){return dx=ae(te().mark((function e(t,n){var r,i;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=wd(t)).currentUser.isEqual(n)){e.next=11;break}return vd("SyncEngine","User change. New user:",n.toKey()),e.next=5,Ab(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.la.forEach((function(e){e.forEach((function(e){e.reject(new Id(xd.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.la.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,lx(r,i.di);case 11:case"end":return e.stop()}}),e)}))),dx.apply(this,arguments)}function px(e,t){var n=wd(e),r=n.aa.get(t);if(r&&r.na)return Im().add(r.key);var i=Im(),a=n.ra.get(t);if(!a)return i;var o,s=m(a);try{for(s.s();!(o=s.n()).done;){var u=o.value,c=n.ia.get(u);i=i.unionWith(c.view.ju)}}catch(l){s.e(l)}finally{s.f()}return i}function vx(e,t){return mx.apply(this,arguments)}function mx(){return mx=ae(te().mark((function e(t,n){var r,i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=wd(t),e.next=3,Mb(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.ta(i),e.abrupt("return",(r.isPrimaryClient&&sx(r,n.targetId,a.Xu),a));case 6:case"end":return e.stop()}}),e)}))),mx.apply(this,arguments)}function yx(e,t){return gx.apply(this,arguments)}function gx(){return gx=ae(te().mark((function e(t,n){var r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=wd(t),e.abrupt("return",Ub(r.localStore,n).then((function(e){return lx(r,e)})));case 2:case"end":return e.stop()}}),e)}))),gx.apply(this,arguments)}function bx(e,t,n,r){return kx.apply(this,arguments)}function kx(){return kx=ae(te().mark((function e(t,n,r,i){var a,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=wd(t),e.next=3,function(e,t){var n=wd(e),r=wd(n.Bs);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.fn(e,t).next((function(t){return t?n.fi.Ks(e,t):jy.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,Gk(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(ix(a,n,i||null),rx(a,n),function(e,t){wd(wd(e).Bs)._n(t)}(a.localStore,n)):bd();case 11:return e.next=13,lx(a,o);case 13:e.next=16;break;case 15:vd("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),kx.apply(this,arguments)}function wx(e,t){return xx.apply(this,arguments)}function xx(){return xx=ae(te().mark((function e(t,n){var r,i,a,o,s,u,c,l;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Nx(r=wd(t)),Px(r),!0!==n||!0===r.da){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,Ix(r,i.toArray());case 5:return a=e.sent,r.da=!0,e.next=9,cw(r.remoteStore,!0);case 9:o=m(a);try{for(o.s();!(s=o.n()).done;)u=s.value,Ck(r.remoteStore,u)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.da){e.next=25;break}return c=[],l=Promise.resolve(),r.ra.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return ax(r,t),Rb(r.localStore,t,!0)})),Nk(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,Ix(r,c);case 21:return function(e){var t=wd(e);t.aa.forEach((function(e,n){Nk(t.remoteStore,n)})),t.ca.Si(),t.aa=new Map,t.ua=new Bp(up.comparator)}(r),r.da=!1,e.next=25,cw(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),xx.apply(this,arguments)}function Ix(e,t,n){return _x.apply(this,arguments)}function _x(){return _x=ae(te().mark((function e(t,n,r){var i,a,o,s,u,c,l,f,h,d,p,v,y,g;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=wd(t),a=[],o=[],s=m(n),e.prev=2,s.s();case 4:if((u=s.n()).done){e.next=45;break}if(c=u.value,l=void 0,!(f=i.ra.get(c))||0===f.length){e.next=34;break}return e.next=11,Db(i.localStore,Iv(f[0]));case 11:l=e.sent,h=m(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return p=d.value,v=i.ia.get(p),e.next=20,vx(i,v);case 20:(y=e.sent).snapshot&&o.push(y.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,Fb(i.localStore,c);case 36:return g=e.sent,e.next=39,Db(i.localStore,g);case 39:return l=e.sent,e.next=42,qw(i,Ex(g),c,!1);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),s.e(e.t1);case 50:return e.prev=50,s.f(),e.finish(50);case 53:return e.abrupt("return",(i.sa.zo(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),_x.apply(this,arguments)}function Ex(e){return yv(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Ax(e){var t=wd(e);return wd(wd(t.localStore).persistence).Fs()}function Tx(e,t,n,r){return Sx.apply(this,arguments)}function Sx(){return Sx=ae(te().mark((function e(t,n,r,i){var a,o,s,u;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=wd(t)).da){e.next=3;break}return e.abrupt("return",void vd("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.ra.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,Ub(a.localStore,Ov(o[0]));case 10:return s=e.sent,u=Am.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=14,lx(a,s,u);case 14:return e.abrupt("break",20);case 15:return e.next=17,Rb(a.localStore,n,!0);case 17:return ax(a,n,i),e.abrupt("break",20);case 19:bd();case 20:case"end":return e.stop()}}),e)}))),Sx.apply(this,arguments)}function Ox(e,t,n){return Cx.apply(this,arguments)}function Cx(){return Cx=ae(te().mark((function e(t,n,r){var i,a,o,s,u,c,l,f,h;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=Nx(t)).da){e.next=45;break}a=m(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(s=o.value,!i.ra.has(s)){e.next=10;break}return vd("SyncEngine","Adding an already active target "+s),e.abrupt("continue",19);case 10:return e.next=12,Fb(i.localStore,s);case 12:return u=e.sent,e.next=15,Db(i.localStore,u);case 15:return c=e.sent,e.next=18,qw(i,Ex(u),c.targetId,!1);case 18:Ck(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=m(r),e.prev=30,h=te().mark((function e(){var t;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.ra.has(t),!e.t0){e.next=5;break}return e.next=5,Rb(i.localStore,t,!1).then((function(){Nk(i.remoteStore,t),ax(i,t)})).catch(Zg);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),Cx.apply(this,arguments)}function Nx(e){var t=wd(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Ww.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=px.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Yw.bind(null,t),t.sa.zo=_w.bind(null,t.eventManager),t.sa.wa=Ew.bind(null,t.eventManager),t}function Px(e){var t=wd(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Xw.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=$w.bind(null,t),t}function Dx(e,t,n){var r=wd(e);(function(){var e=ae(te().mark((function e(t,n,r){var i,a,o,s,u;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=wd(e),r=jm(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n._s.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(Nw(i)),a=new Cw(i,t.localStore,n.M),e.next=15,n.ma();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.Fu(o);case 19:return(s=e.sent)&&r._updateProgress(s),e.next=23,n.ma();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return u=e.sent,e.next=31,lx(t,u.Lu,void 0);case 31:return e.next=33,function(e,t){var n=wd(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n._s.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(u.progress),e.abrupt("return",Promise.resolve(u.Bu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(yd("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var Rx=function(){function e(){d(this,e),this.synchronizeTabs=!1}return v(e,[{key:"initialize",value:function(){var e=ae(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.M=gk(t.databaseInfo.databaseId),this.sharedClientState=this.ga(t),this.persistence=this.ya(t),e.next=5,this.persistence.start();case 5:this.gcScheduler=this.pa(t),this.localStore=this.Ia(t);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"pa",value:function(e){return null}},{key:"Ia",value:function(e){return Eb(this.persistence,new Ib,e.initialUser,this.M)}},{key:"ya",value:function(e){return new Zb(ek.Yi,this.M)}},{key:"ga",value:function(e){return new lk}},{key:"terminate",value:function(){var e=ae(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Lx=function(e){b(n,e);var t=_(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).Ta=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return v(n,[{key:"initialize",value:function(){var e=ae(te().mark((function e(t){var r=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Dt(k(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.Ta.initialize(this,t);case 4:return e.next=6,Px(this.Ta.syncEngine);case 6:return e.next=8,Gk(this.Ta.remoteStore);case 8:return e.next=10,this.persistence.Ts((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ia",value:function(e){return Eb(this.persistence,new Ib,e.initialUser,this.M)}},{key:"pa",value:function(e){var t=this.persistence.referenceDelegate.garbageCollector;return new nb(t,e.asyncQueue)}},{key:"ya",value:function(e){var t=kb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Vg.withCacheSize(this.cacheSizeBytes):Vg.DEFAULT;return new yb(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,mk(),yk(),this.M,this.sharedClientState,!!this.forceOwnership)}},{key:"ga",value:function(e){return new lk}}]),n}(Rx),Mx=function(e){b(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r,!1)).Ta=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return v(n,[{key:"initialize",value:function(){var e=ae(te().mark((function e(t){var r,i=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Dt(k(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.Ta.syncEngine,e.t0=this.sharedClientState instanceof ck,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={$r:bx.bind(null,r),Br:Tx.bind(null,r),Lr:Ox.bind(null,r),Fs:Ax.bind(null,r),Fr:yx.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.Ts(function(){var e=ae(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wx(i.Ta.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start(i.localStore):t||i.gcScheduler.stop());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"ga",value:function(e){var t=mk();if(!ck.vt(t))throw new Id(xd.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=kb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new ck(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(Lx),Fx=function(){function e(){d(this,e)}return v(e,[{key:"initialize",value:function(){var e=ae(te().mark((function e(t,n){var r=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return Hw(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=hx.bind(null,this.syncEngine),e.next=12,cw(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new bw}},{key:"createDatastore",value:function(e){var t,n=gk(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new vk(t));return function(e,t,n,r){return new Ik(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return Hw(o.syncEngine,e,0)},a=hk.vt()?new hk:new fk,new Ek(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var s=new Fw(e,t,n,r,i,a);return o&&(s.da=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=ae(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=wd(t),vd("RemoteStore","RemoteStore shutting down."),n.wu.add(5),e.next=5,Sk(n);case 5:n.gu.shutdown(),n.yu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function Ux(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return ae(te().mark((function r(){var i;return te().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return ae(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var Vx=function(){function e(t){d(this,e),this.observer=t,this.muted=!1}return v(e,[{key:"next",value:function(e){this.observer.next&&this.Ea(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}},{key:"Aa",value:function(){this.muted=!0}},{key:"Ea",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),qx=function(){function e(t,n){var r=this;d(this,e),this.Ra=t,this.M=n,this.metadata=new _d,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then((function(e){e&&e.Mu()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))}),(function(e){return r.metadata.reject(e)}))}return v(e,[{key:"close",value:function(){return this.Ra.cancel()}},{key:"getMetadata",value:function(){var e=ae(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ma",value:function(){var e=ae(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Pa());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Pa",value:function(){var e=ae(te().mark((function e(){var t,n,r,i;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Va();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.ba.decode(t),r=Number(n),isNaN(r)&&this.va("length string (".concat(n,") is not valid number")),e.next=9,this.Sa(r);case 9:return i=e.sent,e.abrupt("return",new Sw(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Da",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Va",value:function(){var e=ae(te().mark((function e(){var t,n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Da()<0)){e.next=7;break}return e.next=3,this.Ca();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Da())<0&&this.va("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Sa",value:function(){var e=ae(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Ca();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.va("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.ba.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"va",value:function(e){throw this.Ra.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Ca",value:function(){var e=ae(te().mark((function e(){var t,n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ra.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),jx=function(){function e(t){d(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return v(e,[{key:"lookup",value:function(){var e=ae(te().mark((function e(t){var n,r=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new Id(xd.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=ae(te().mark((function e(t,n){var r,i,a,o,s,u;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=wd(t),i=Hm(r.M)+"/documents",a={documents:n.map((function(e){return Km(r.M,e)}))},e.next=5,r._o("BatchGetDocuments",i,a);case 5:return o=e.sent,s=new Map,o.forEach((function(e){var t=Zm(r.M,e);s.set(t.key.toString(),t)})),u=[],e.abrupt("return",(n.forEach((function(e){var t=s.get(e.toString());kd(!!t),u.push(t)})),u));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new lm(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=ae(te().mark((function e(){var t,n=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=up.fromPath(t);n.mutations.push(new fm(r,n.precondition(r)))})),e.next=7,function(){var e=ae(te().mark((function e(t,n){var r,i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=wd(t),i=Hm(r.M)+"/documents",a={writes:n.map((function(e){return $m(r.M,e)}))},e.next=3,r.co("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw bd();t=qd.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Id(xd.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Yv.updateTime(t):Yv.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(qd.min()))throw new Id(xd.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Yv.updateTime(t)}return Yv.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),Bx=function(){function e(t,n,r,i,a){d(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.xa=r.maxAttempts,this.No=new bk(this.asyncQueue,"transaction_retry")}return v(e,[{key:"run",value:function(){this.xa-=1,this.Na()}},{key:"Na",value:function(){var e=this;this.No.Ro(ae(te().mark((function t(){var n,r;return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new jx(e.datastore),(r=e.ka(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Ma(t)}))}))})).catch((function(t){e.Ma(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"ka",value:function(e){try{var t=this.updateFunction(e);return!ap(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Ma",value:function(e){var t=this;this.xa>0&&this.Oa(e)?(this.xa-=1,this.asyncQueue.enqueueAndForget((function(){return t.Na(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"Oa",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!dm(t)}return!1}}]),e}(),zx=function(){function e(t,n,r,i){var a=this;d(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=fd.UNAUTHENTICATED,this.clientId=Ld.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=ae(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return vd("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return vd("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return v(e,[{key:"getConfiguration",value:function(){var e=ae(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new Id(xd.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new _d;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(ae(te().mark((function n(){var r;return te().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=pw(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function Kx(e,t){return Qx.apply(this,arguments)}function Qx(){return Qx=ae(te().mark((function e(t,n){var r,i;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),vd("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=ae(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,Ab(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),Qx.apply(this,arguments)}function Wx(e,t){return Gx.apply(this,arguments)}function Gx(){return Gx=ae(te().mark((function e(t,n){var r,i;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,Hx(t);case 3:return r=e.sent,vd("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return sw(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return sw(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),Gx.apply(this,arguments)}function Hx(e){return Yx.apply(this,arguments)}function Yx(){return Yx=ae(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return vd("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,Kx(t,new Rx);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),Yx.apply(this,arguments)}function Jx(e){return Xx.apply(this,arguments)}function Xx(){return Xx=ae(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return vd("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,Wx(t,new Fx);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),Xx.apply(this,arguments)}function Zx(e){return Hx(e).then((function(e){return e.persistence}))}function $x(e){return Hx(e).then((function(e){return e.localStore}))}function eI(e){return Jx(e).then((function(e){return e.remoteStore}))}function tI(e){return Jx(e).then((function(e){return e.syncEngine}))}function nI(e){return rI.apply(this,arguments)}function rI(){return rI=ae(te().mark((function e(t){var n,r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Jx(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=Uw.bind(null,n.syncEngine),r.onUnlisten=Bw.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),rI.apply(this,arguments)}function iI(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new _d;return e.asyncQueue.enqueueAndForget(ae(te().mark((function i(){return te().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Vx({next:function(a){t.enqueueAndForget((function(){return xw(e,o)}));var s=a.docs.has(n);!s&&a.fromCache?i.reject(new Id(xd.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&a.fromCache&&r&&"server"===r.source?i.reject(new Id(xd.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new Tw(gv(n.path),a,{includeMetadataChanges:!0,ku:!0});return kw(e,o)},i.next=3,nI(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function aI(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new _d;return e.asyncQueue.enqueueAndForget(ae(te().mark((function i(){return te().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Vx({next:function(n){t.enqueueAndForget((function(){return xw(e,o)})),n.fromCache&&"server"===r.source?i.reject(new Id(xd.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new Tw(n,a,{includeMetadataChanges:!0,ku:!0});return kw(e,o)},i.next=3,nI(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var oI=new Map;function sI(e,t,n){if(!n)throw new Id(xd.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function uI(e,t,n,r){if(!0===t&&!0===r)throw new Id(xd.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function cI(e){if(!up.isDocumentKey(e))throw new Id(xd.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function lI(e){if(up.isDocumentKey(e))throw new Id(xd.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function fI(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":bd()}function hI(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Id(xd.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=fI(e);throw new Id(xd.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function dI(e,t){if(t<=0)throw new Id(xd.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var pI=function(){function e(t){var n;if(d(this,e),void 0===t.host){if(void 0!==t.ssl)throw new Id(xd.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Id(xd.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,uI("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return v(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),vI=function(){function e(t,n,r){d(this,e),this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new pI({}),this._settingsFrozen=!1,t instanceof ip?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Id(xd.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ip(e.options.projectId)}(t))}return v(e,[{key:"app",get:function(){if(!this._app)throw new Id(xd.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new Id(xd.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new pI(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Ad;switch(e.type){case"gapi":var t=e.client;return kd(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new Cd(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new Id(xd.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=oI.get(e);t&&(vd("ComponentProvider","Removing Datastore"),oI.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function mI(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=hI(e,vI))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&yd("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,s;if("string"==typeof i.mockUserToken)o=i.mockUserToken,s=fd.MOCK_USER;else{o=D(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var u=i.mockUserToken.sub||i.mockUserToken.user_id;if(!u)throw new Id(xd.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");s=new fd(u)}e._authCredentials=new Td(new Ed(o,s))}}var yI=function(){function e(t,n,r){d(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return v(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new bI(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),gI=function(){function e(t,n,r){d(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return v(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),bI=function(e){b(n,e);var t=_(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this,e,r,gv(i)))._path=i,a.type="collection",a}return v(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new yI(this.firestore,null,new up(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(gI);function kI(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ee(e),sI("collection","path",t),e instanceof vI){var a=Qd.fromString.apply(Qd,[t].concat(r));return lI(a),new bI(e,null,a)}if(!(e instanceof yI||e instanceof bI))throw new Id(xd.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Qd.fromString.apply(Qd,[t].concat(r)));return lI(o),new bI(e.firestore,null,o)}function wI(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ee(e),1===arguments.length&&(t=Ld.R()),sI("doc","path",t),e instanceof vI){var a=Qd.fromString.apply(Qd,[t].concat(r));return cI(a),new yI(e,null,new up(a))}if(!(e instanceof yI||e instanceof bI))throw new Id(xd.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Qd.fromString.apply(Qd,[t].concat(r)));return cI(o),new yI(e.firestore,e instanceof bI?e.converter:null,new up(o))}function xI(e,t){return e=ee(e),t=ee(t),(e instanceof yI||e instanceof bI)&&(t instanceof yI||t instanceof bI)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function II(e,t){return e=ee(e),t=ee(t),e instanceof gI&&t instanceof gI&&e.firestore===t.firestore&&Ev(e._query,t._query)&&e.converter===t.converter}var _I=function(){function e(){var t=this;d(this,e),this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new bk(this,"async_queue_retry"),this.Qa=function(){var e=yk();e&&vd("AsyncQueue","Visibility state changed to "+e.visibilityState),t.No.Po()};var n=yk();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Qa)}return v(e,[{key:"isShuttingDown",get:function(){return this.Ba}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.ja(),this.Wa(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Ba){this.Ba=!0,this.Ka=e||!1;var t=yk();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Qa)}}},{key:"enqueue",value:function(e){var t=this;if(this.ja(),this.Ba)return new Promise((function(){}));var n=new _d;return this.Wa((function(){return t.Ba&&t.Ka?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.$a.push(e),t.za()}))}},{key:"za",value:function(){var e=ae(te().mark((function e(){var t=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.$a.length){e.next=14;break}return e.prev=1,e.next=4,this.$a[0]();case 4:this.$a.shift(),this.No.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Wy(e.t0)){e.next=12;break}throw e.t0;case 12:vd("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.$a.length>0&&this.No.Ro((function(){return t.za()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Wa",value:function(e){var t=this,n=this.Fa.then((function(){return t.qa=!0,e().catch((function(e){t.Ua=e,t.qa=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw md("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.qa=!1,e}))}));return this.Fa=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.ja(),this.Ga.indexOf(e)>-1&&(t=0);var i=dw.createAndSchedule(this,e,t,n,(function(e){return r.Ha(e)}));return this.La.push(i),i}},{key:"ja",value:function(){this.Ua&&bd()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Ja",value:function(){var e=ae(te().mark((function e(){var t;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Fa,e.next=3,t;case 3:if(t!==this.Fa){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ya",value:function(e){var t,n=m(this.La);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Xa",value:function(e){var t=this;return this.Ja().then((function(){t.La.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=m(t.La);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.Ja()}))}},{key:"Za",value:function(e){this.Ga.push(e)}},{key:"Ha",value:function(e){var t=this.La.indexOf(e);this.La.splice(t,1)}}]),e}();function EI(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=m(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var AI=function(){function e(){d(this,e),this._progressObserver={},this._taskCompletionResolver=new _d,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return v(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),TI=function(e){b(n,e);var t=_(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this,e,r,i)).type="firestore",a._queue=new _I,a._persistenceKey="name"in e?e.name:"[DEFAULT]",a}return v(n,[{key:"_terminate",value:function(){return this._firestoreClient||OI(this),this._firestoreClient.terminate()}}]),n}(vI);function SI(e){return e._firestoreClient||OI(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function OI(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new rp(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new zx(e._authCredentials,e._appCheckCredentials,e._queue,r)}function CI(e,t,n){var r=new _d;return e.asyncQueue.enqueue(ae(te().mark((function i(){return te().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,Kx(e,n);case 3:return i.next=5,Wx(e,t);case 5:r.resolve(),i.next=13;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===xd.FAILED_PRECONDITION||e.code===xd.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(i.t0)){i.next=12;break}throw i.t0;case 12:console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i.t0),r.reject(i.t0);case 13:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function NI(e){return function(e){return e.asyncQueue.enqueue(ae(te().mark((function t(){var n,r;return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Zx(e);case 2:return n=t.sent,t.next=5,eI(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=wd(e);return t.wu.delete(0),Ak(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(SI(e=hI(e,TI)))}function PI(e){return function(e){return e.asyncQueue.enqueue(ae(te().mark((function t(){var n,r;return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Zx(e);case 2:return n=t.sent,t.next=5,eI(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=ae(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=wd(t)).wu.add(0),e.next=4,Sk(n);case 4:n.yu.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(SI(e=hI(e,TI)))}function DI(e,t){var n=SI(e=hI(e,TI)),r=new AI;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new qx(e,t)}(function(e,t){if(e instanceof Uint8Array)return Ux(e,t);if(e instanceof ArrayBuffer)return Ux(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,gk(t));e.asyncQueue.enqueueAndForget(ae(te().mark((function t(){return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Dx,t.next=3,tI(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function RI(e,t){return function(e,t){return e.asyncQueue.enqueue(ae(te().mark((function n(){return te().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=wd(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n._s.getNamedQuery(e,t)}))},n.next=3,$x(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(SI(e=hI(e,TI)),t).then((function(t){return t?new gI(e,null,t.query):null}))}function LI(e){if(e._initialized||e._terminated)throw new Id(xd.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var MI=function(){function e(){d(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new Id(xd.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Gd(n)}return v(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var FI=function(){function e(t){d(this,e),this._byteString=t}return v(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Yd.fromBase64String(t))}catch(t){throw new Id(xd.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Yd.fromUint8Array(t))}}]),e}(),UI=v((function e(t){d(this,e),this._methodName=t})),VI=function(){function e(t,n){if(d(this,e),!isFinite(t)||t<-90||t>90)throw new Id(xd.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Id(xd.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return v(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Md(this._lat,e._lat)||Md(this._long,e._long)}}]),e}(),qI=/^__.*__$/,jI=function(){function e(t,n,r){d(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return v(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new im(e,this.data,this.fieldMask,t,this.fieldTransforms):new rm(e,this.data,t,this.fieldTransforms)}}]),e}(),BI=function(){function e(t,n,r){d(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return v(e,[{key:"toMutation",value:function(e,t){return new im(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function zI(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw bd()}}var KI=function(){function e(t,n,r,i,a,o){d(this,e),this.settings=t,this.databaseId=n,this.M=r,this.ignoreUndefinedProperties=i,void 0===a&&this.tc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return v(e,[{key:"path",get:function(){return this.settings.path}},{key:"ec",get:function(){return this.settings.ec}},{key:"nc",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"sc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.nc({path:n,ic:!1});return r.rc(e),r}},{key:"oc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.nc({path:n,ic:!1});return r.tc(),r}},{key:"uc",value:function(e){return this.nc({path:void 0,ic:!0})}},{key:"ac",value:function(e){return l_(e,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"tc",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.rc(this.path.get(e))}},{key:"rc",value:function(e){if(0===e.length)throw this.ac("Document fields must not be empty");if(zI(this.ec)&&qI.test(e))throw this.ac('Document fields cannot begin and end with "__"')}}]),e}(),QI=function(){function e(t,n,r){d(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.M=r||gk(t)}return v(e,[{key:"lc",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new KI({ec:e,methodName:t,hc:n,path:Gd.emptyPath(),ic:!1,cc:r},this.databaseId,this.M,this.ignoreUndefinedProperties)}}]),e}();function WI(e){var t=e._freezeSettings(),n=gk(e._databaseId);return new QI(e._databaseId,!!t.ignoreUndefinedProperties,n)}function GI(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.lc(a.merge||a.mergeFields?2:0,t,n,i);o_("Data must be an object, but it was:",o,r);var s,u,c=i_(r,o);if(a.merge)s=new Hd(o.fieldMask),u=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=m(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=l.value,p=s_(t,d,n);if(!o.contains(p))throw new Id(xd.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));f_(f,p)||f.push(p)}}catch(v){h.e(v)}finally{h.f()}s=new Hd(f),u=o.fieldTransforms.filter((function(e){return s.covers(e.field)}))}else s=null,u=o.fieldTransforms;return new jI(new Cp(c),s,u)}var HI=function(e){b(n,e);var t=_(n);function n(){return d(this,n),t.apply(this,arguments)}return v(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.ec)throw 1===e.ec?e.ac("".concat(this._methodName,"() can only appear at the top level of your update data")):e.ac("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(UI);function YI(e,t,n){return new KI({ec:3,hc:t.settings.hc,methodName:e._methodName,ic:n},t.databaseId,t.M,t.ignoreUndefinedProperties)}var JI=function(e){b(n,e);var t=_(n);function n(){return d(this,n),t.apply(this,arguments)}return v(n,[{key:"_toFieldTransform",value:function(e){return new Gv(e.path,new Vv)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(UI),XI=function(e){b(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e)).fc=r,i}return v(n,[{key:"_toFieldTransform",value:function(e){var t=YI(this,e,!0),n=this.fc.map((function(e){return r_(e,t)})),r=new qv(n);return new Gv(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(UI),ZI=function(e){b(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e)).fc=r,i}return v(n,[{key:"_toFieldTransform",value:function(e){var t=YI(this,e,!0),n=this.fc.map((function(e){return r_(e,t)})),r=new Bv(n);return new Gv(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(UI),$I=function(e){b(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e)).dc=r,i}return v(n,[{key:"_toFieldTransform",value:function(e){var t=new Kv(e.M,Rv(e.M,this.dc));return new Gv(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(UI);function e_(e,t,n,r){var i=e.lc(1,t,n);o_("Data must be an object, but it was:",i,r);var a=[],o=Cp.empty();Bd(r,(function(e,r){var s=c_(t,e,n);r=ee(r);var u=i.oc(s);if(r instanceof HI)a.push(s);else{var c=r_(r,u);null!=c&&(a.push(s),o.set(s,c))}}));var s=new Hd(a);return new BI(o,s,i.fieldTransforms)}function t_(e,t,n,r,i,a){var o=e.lc(1,t,n),s=[s_(t,r,n)],u=[i];if(a.length%2!=0)throw new Id(xd.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)s.push(s_(t,a[c])),u.push(a[c+1]);for(var l=[],f=Cp.empty(),h=s.length-1;h>=0;--h)if(!f_(l,s[h])){var d=s[h],p=u[h];p=ee(p);var v=o.oc(d);if(p instanceof HI)l.push(d);else{var m=r_(p,v);null!=m&&(l.push(d),f.set(d,m))}}var y=new Hd(l);return new BI(f,y,o.fieldTransforms)}function n_(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return r_(n,e.lc(r?4:3,t))}function r_(e,t){if(a_(e=ee(e)))return o_("Unsupported field value:",t,e),i_(e,t);if(e instanceof UI)return function(e,t){if(!zI(t.ec))throw t.ac("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.ac("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.ic&&4!==t.ec)throw t.ac("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=m(e);try{for(a.s();!(n=a.n()).done;){var o=r_(n.value,t.uc(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(s){a.e(s)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=ee(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Rv(t.M,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Vd.fromDate(e);return{timestampValue:Um(t.M,n)}}if(e instanceof Vd){var r=new Vd(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Um(t.M,r)}}if(e instanceof VI)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof FI)return{bytesValue:Vm(t.M,e._byteString)};if(e instanceof yI){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.ac("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:Bm(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.ac("Unsupported field value: ".concat(fI(e)))}(e,t)}function i_(e,t){var n={};return zd(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Bd(e,(function(e,r){var i=r_(r,t.sc(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function a_(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Vd||e instanceof VI||e instanceof FI||e instanceof yI||e instanceof UI)}function o_(e,t,n){if(!a_(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=fI(n);throw"an object"===r?t.ac(e+" a custom object"):t.ac(e+" "+r)}}function s_(e,t,n){if((t=ee(t))instanceof MI)return t._internalPath;if("string"==typeof t)return c_(e,t);throw l_("Field path arguments must be of type string or ",e,!1,void 0,n)}var u_=new RegExp("[~\\*/\\[\\]]");function c_(e,t,n){if(t.search(u_)>=0)throw l_("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return E(MI,re(t.split(".")))._internalPath}catch(r){throw l_("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function l_(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,s="Function ".concat(t,"() called with invalid data");n&&(s+=" (via `toFirestore()`)"),s+=". ";var u="";return(a||o)&&(u+=" (found",a&&(u+=" in field ".concat(r)),o&&(u+=" in document ".concat(i)),u+=")"),new Id(xd.INVALID_ARGUMENT,s+e+u)}function f_(e,t){return e.some((function(e){return e.isEqual(t)}))}var h_=function(){function e(t,n,r,i,a){d(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return v(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new yI(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new d_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(p_("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),d_=function(e){b(n,e);var t=_(n);function n(){return d(this,n),t.apply(this,arguments)}return v(n,[{key:"data",value:function(){return Dt(k(n.prototype),"data",this).call(this)}}]),n}(h_);function p_(e,t){return"string"==typeof t?c_(e,t):t instanceof MI?t._internalPath:t._delegate._internalPath}var v_=function(){function e(t,n){d(this,e),this.hasPendingWrites=t,this.fromCache=n}return v(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),m_=function(e){b(n,e);var t=_(n);function n(e,r,i,a,o,s){var u;return d(this,n),(u=t.call(this,e,r,i,a,s))._firestore=e,u._firestoreImpl=e,u.metadata=o,u}return v(n,[{key:"exists",value:function(){return Dt(k(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new y_(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(p_("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(h_),y_=function(e){b(n,e);var t=_(n);function n(){return d(this,n),t.apply(this,arguments)}return v(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Dt(k(n.prototype),"data",this).call(this,e)}}]),n}(m_),g_=function(){function e(t,n,r,i){d(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new v_(i.hasPendingWrites,i.fromCache),this.query=r}return v(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new y_(n._firestore,n._userDataWriter,r.key,r,new v_(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Id(xd.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new y_(e._firestore,e._userDataWriter,t.doc.key,t.doc,new v_(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new y_(e._firestore,e._userDataWriter,t.doc.key,t.doc,new v_(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:b_(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function b_(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return bd()}}function k_(e,t){return e instanceof m_&&t instanceof m_?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof g_&&t instanceof g_&&e._firestore===t._firestore&&II(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function w_(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Id(xd.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var x_=v((function e(){d(this,e)}));function I_(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var __=function(e){b(n,e);var t=_(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this))._c=e,a.wc=r,a.mc=i,a.type="where",a}return v(n,[{key:"_apply",value:function(e){var t=WI(e.firestore),n=function(e,t,n,r,i,a,o){var s;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new Id(xd.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){L_(o,a);var u,c=[],l=m(o);try{for(l.s();!(u=l.n()).done;){var f=u.value;c.push(R_(r,e,f))}}catch(d){l.e(d)}finally{l.f()}s={arrayValue:{values:c}}}else s=R_(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||L_(o,a),s=n_(n,"where",o,"in"===a||"not-in"===a);var h=nv.create(i,a,s);return function(e,t){if(t.S()){var n=kv(e);if(null!==n&&!n.isEqual(t.field))throw new Id(xd.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=bv(e);null!==r&&M_(e,t.field,r)}var i=function(e,t){var n,r=m(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(d){r.e(d)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new Id(xd.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Id(xd.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,h),h}(e._query,0,t,e.firestore._databaseId,this._c,this.wc,this.mc);return new gI(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new mv(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(x_);var E_=function(e){b(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this))._c=e,i.gc=r,i.type="orderBy",i}return v(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new Id(xd.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Id(xd.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new hv(t,n);return function(e,t){if(null===bv(e)){var n=kv(e);null!==n&&M_(e,n,t.field)}}(e,r),r}(e._query,this._c,this.gc);return new gI(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new mv(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(x_);var A_=function(e){b(n,e);var t=_(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).type=e,a.yc=r,a.Ic=i,a}return v(n,[{key:"_apply",value:function(e){return new gI(e.firestore,e.converter,_v(e._query,this.yc,this.Ic))}}]),n}(x_);var T_=function(e){b(n,e);var t=_(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).type=e,a.Tc=r,a.Ec=i,a}return v(n,[{key:"_apply",value:function(e){var t=D_(e,this.type,this.Tc,this.Ec);return new gI(e.firestore,e.converter,function(e,t){return new mv(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(x_);function S_(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new T_("startAt",t,!0)}function O_(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new T_("startAfter",t,!1)}var C_=function(e){b(n,e);var t=_(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).type=e,a.Tc=r,a.Ec=i,a}return v(n,[{key:"_apply",value:function(e){var t=D_(e,this.type,this.Tc,this.Ec);return new gI(e.firestore,e.converter,function(e,t){return new mv(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(x_);function N_(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new C_("endBefore",t,!1)}function P_(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new C_("endAt",t,!0)}function D_(e,t,n,r){if(n[0]=ee(n[0]),n[0]instanceof h_)return function(e,t,n,r,i){if(!r)throw new Id(xd.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],s=m(xv(e));try{for(s.s();!(a=s.n()).done;){var u=a.value;if(u.field.isKeyField())o.push(gp(t,r.key));else{var c=r.data.field(u.field);if(ep(c))throw new Id(xd.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new Id(xd.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){s.e(f)}finally{s.f()}return new fv(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=WI(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new Id(xd.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var s=[],u=0;u<i.length;u++){var c=i[u];if(o[u].field.isKeyField()){if("string"!=typeof c)throw new Id(xd.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!wv(e)&&-1!==c.indexOf("/"))throw new Id(xd.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(Qd.fromString(c));if(!up.isDocumentKey(l))throw new Id(xd.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new up(l);s.push(gp(t,f))}else{var h=n_(n,r,c);s.push(h)}}return new fv(s,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function R_(e,t,n){if("string"==typeof(n=ee(n))){if(""===n)throw new Id(xd.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!wv(t)&&-1!==n.indexOf("/"))throw new Id(xd.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(Qd.fromString(n));if(!up.isDocumentKey(r))throw new Id(xd.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return gp(e,new up(r))}if(n instanceof yI)return gp(e,n._key);throw new Id(xd.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(fI(n),"."))}function L_(e,t){if(!Array.isArray(e)||0===e.length)throw new Id(xd.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new Id(xd.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function M_(e,t,n){if(!n.isEqual(t))throw new Id(xd.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var F_={maxAttempts:5},U_=function(){function e(){d(this,e)}return v(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(fp(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Zd(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes($d(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw bd()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return Bd(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new VI(Zd(e.latitude),Zd(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=tp(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(np(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Xd(e);return new Vd(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=Qd.fromString(e);kd(hy(n));var r=new ip(n.get(1),n.get(3)),i=new up(n.popFirst(5));return r.isEqual(t)||md("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function V_(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var q_=function(e){b(n,e);var t=_(n);function n(e){var r;return d(this,n),(r=t.call(this)).firestore=e,r}return v(n,[{key:"convertBytes",value:function(e){return new FI(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new yI(this.firestore,null,t)}}]),n}(U_),j_=function(){function e(t,n){d(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=WI(t)}return v(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=B_(e,this._firestore),i=V_(r.converter,t,n),a=GI(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,Yv.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=B_(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return r="string"==typeof(t=ee(t))||t instanceof MI?t_(this._dataReader,"WriteBatch.update",i._key,t,n,o):e_(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,Yv.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=B_(e,this._firestore);return this._mutations=this._mutations.concat(new lm(t._key,Yv.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new Id(xd.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function B_(e,t){if((e=ee(e)).firestore!==t)throw new Id(xd.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var z_=function(e){b(n,e);var t=_(n);function n(e){var r;return d(this,n),(r=t.call(this)).firestore=e,r}return v(n,[{key:"convertBytes",value:function(e){return new FI(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new yI(this.firestore,null,t)}}]),n}(U_);function K_(e){e=hI(e,yI);var t=hI(e.firestore,TI),n=SI(t),r=new z_(t);return function(e,t){var n=new _d;return e.asyncQueue.enqueueAndForget(ae(te().mark((function r(){return te().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=ae(te().mark((function e(t,n,r){var i,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=wd(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.fi.Ls(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new Id(xd.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=pw(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,$x(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new m_(t,r,e._key,n,new v_(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function Q_(e){e=hI(e,gI);var t=hI(e.firestore,TI),n=SI(t),r=new z_(t);return function(e,t){var n=new _d;return e.asyncQueue.enqueueAndForget(ae(te().mark((function r(){return te().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=ae(te().mark((function e(t,n,r){var i,a,o,s,u;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Mb(t,n,!0);case 3:i=e.sent,a=new Rw(n,i._i),o=a.Wu(i.documents),s=a.applyChanges(o,!1),r.resolve(s.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),u=pw(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(u);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,$x(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new g_(t,r,e,n)}))}function W_(e,t,n){e=hI(e,yI);var r=hI(e.firestore,TI),i=V_(e.converter,t,n);return J_(r,[GI(WI(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Yv.none())])}function G_(e,t,n){e=hI(e,yI);for(var r=hI(e.firestore,TI),i=WI(r),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return J_(r,[("string"==typeof(t=ee(t))||t instanceof MI?t_(i,"updateDoc",e._key,t,n,o):e_(i,"updateDoc",e._key,t)).toMutation(e._key,Yv.exists(!0))])}function H_(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=ee(e);var s={includeMetadataChanges:!1},u=0;"object"!=typeof n[u]||EI(n[u])||(s=n[u],u++);var c,l,f,h={includeMetadataChanges:s.includeMetadataChanges};if(EI(n[u])){var d=n[u];n[u]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[u+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[u+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof yI)l=hI(e.firestore,TI),f=gv(e._key.path),c={next:function(t){n[u]&&n[u](X_(l,e,t))},error:n[u+1],complete:n[u+2]};else{var p=hI(e,gI);l=hI(p.firestore,TI),f=p._query;var v=new z_(l);c={next:function(e){n[u]&&n[u](new g_(l,v,p,e))},error:n[u+1],complete:n[u+2]},w_(e._query)}return function(e,t,n,r){var i=new Vx(r),a=new Tw(t,i,n);return e.asyncQueue.enqueueAndForget(ae(te().mark((function t(){return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=kw,t.next=3,nI(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Aa(),e.asyncQueue.enqueueAndForget(ae(te().mark((function t(){return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=xw,t.next=3,nI(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(SI(l),f,h,c)}function Y_(e,t){return function(e,t){var n=new Vx(t);return e.asyncQueue.enqueueAndForget(ae(te().mark((function t(){return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){wd(e).bu.add(t),t.next()},t.next=3,nI(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Aa(),e.asyncQueue.enqueueAndForget(ae(te().mark((function t(){return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){wd(e).bu.delete(t)},t.next=3,nI(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(SI(e=hI(e,TI)),EI(t)?t:{next:t})}function J_(e,t){return function(e,t){var n=new _d;return e.asyncQueue.enqueueAndForget(ae(te().mark((function r(){return te().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=Kw,r.next=3,tI(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(SI(e),t)}function X_(e,t,n){var r=n.docs.get(t._key),i=new z_(e);return new m_(e,i,t._key,r,new v_(n.hasPendingWrites,n.fromCache),t.converter)}var Z_=function(e){b(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r))._firestore=e,i}return v(n,[{key:"get",value:function(e){var t=this,r=B_(e,this._firestore),i=new z_(this._firestore);return Dt(k(n.prototype),"get",this).call(this,e).then((function(e){return new m_(t._firestore,i,r._key,e._document,new v_(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){d(this,e),this._firestore=t,this._transaction=n,this._dataReader=WI(t)}return v(e,[{key:"get",value:function(e){var t=this,n=B_(e,this._firestore),r=new q_(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return bd();var i=e[0];if(i.isFoundDocument())return new h_(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new h_(t._firestore,r,n._key,null,n.converter);throw bd()}))}},{key:"set",value:function(e,t,n){var r=B_(e,this._firestore),i=V_(r.converter,t,n),a=GI(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=B_(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return r="string"==typeof(t=ee(t))||t instanceof MI?t_(this._dataReader,"Transaction.update",i._key,t,n,o):e_(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=B_(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function $_(e,t,n){e=hI(e,TI);var r=Object.assign(Object.assign({},F_),n);return function(e){if(e.maxAttempts<1)throw new Id(xd.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new _d;return e.asyncQueue.enqueueAndForget(ae(te().mark((function i(){var a;return te().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,function(e){return Jx(e).then((function(e){return e.datastore}))}(e);case 2:a=i.sent,new Bx(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(SI(e),(function(n){return t(new Z_(e,n))}),r)}function eE(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new XI("arrayUnion",t)}function tE(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new ZI("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){hd=e}(tt),He(new oe("firestore",(function(e,n){var r=n.options,i=e.getProvider("app").getImmediate(),a=new TI(i,new Sd(e.getProvider("auth-internal")),new Pd(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a}),"PUBLIC")),st(ld,"3.4.9",e),st(ld,"3.4.9","esm2017")}();function nE(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Id("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function rE(){if("undefined"===typeof Uint8Array)throw new Id("unimplemented","Uint8Arrays are not available in this environment.")}function iE(){if("undefined"==typeof atob)throw new Id("unimplemented","Blobs are unavailable in Firestore in this environment.")}var aE=function(){function e(t){d(this,e),this._delegate=t}return v(e,[{key:"toBase64",value:function(){return iE(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return rE(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return iE(),new e(FI.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return rE(),new e(FI.fromUint8Array(t))}}]),e}();function oE(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=m(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var sE=function(){function e(){d(this,e)}return v(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){LI(e=hI(e,TI));var n=SI(e),r=e._freezeSettings(),i=new Fx;return CI(n,i,new Lx(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){LI(e=hI(e,TI));var t=SI(e),n=e._freezeSettings(),r=new Fx;return CI(t,r,new Mx(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new Id(xd.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new _d;return e._queue.enqueueAndForgetEvenWhileRestricted(ae(te().mark((function n(){return te().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=ae(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(zy.vt()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,zy.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(kb(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),uE=function(){function e(t,n,r){var i=this;d(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof ip||(this._appCompat=t)}return v(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||yd("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};mI(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return NI(this._delegate)}},{key:"disableNetwork",value:function(){return PI(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&uI("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new _d;return e.asyncQueue.enqueueAndForget(ae(te().mark((function n(){return te().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=tx,n.next=3,tI(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(SI(e=hI(e,TI)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return Y_(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new Id("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new xE(this,kI(this._delegate,e))}catch(t){throw pE(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new dE(this,wI(this._delegate,e))}catch(t){throw pE(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new bE(this,function(e,t){if(e=hI(e,vI),sI("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Id(xd.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new gI(e,null,function(e){return new mv(Qd.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw pE(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return $_(this._delegate,(function(n){return e(new lE(t,n))}))}},{key:"batch",value:function(){var e=this;return SI(this._delegate),new fE(new j_(this._delegate,(function(t){return J_(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return DI(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return RI(this._delegate,e).then((function(e){return e?new bE(t,e):null}))}}]),e}(),cE=function(e){b(n,e);var t=_(n);function n(e){var r;return d(this,n),(r=t.call(this)).firestore=e,r}return v(n,[{key:"convertBytes",value:function(e){return new aE(new FI(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return dE.forKey(t,this.firestore,null)}}]),n}(U_);var lE=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new cE(t)}return v(e,[{key:"get",value:function(e){var t=this,n=IE(e);return this._delegate.get(n).then((function(e){return new yE(t._firestore,new m_(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=IE(e);return n?(nE("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,s=IE(e);2===arguments.length?this._delegate.update(s,t):(o=this._delegate).update.apply(o,[s,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=IE(e);return this._delegate.delete(t),this}}]),e}(),fE=function(){function e(t){d(this,e),this._delegate=t}return v(e,[{key:"set",value:function(e,t,n){var r=IE(e);return n?(nE("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,s=IE(e);2===arguments.length?this._delegate.update(s,t):(o=this._delegate).update.apply(o,[s,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=IE(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),hE=function(){function e(t,n,r){d(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return v(e,[{key:"fromFirestore",value:function(e,t){var n=new y_(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new gE(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new cE(t),n),i.set(n,a)),a}}]),e}();hE.INSTANCES=new WeakMap;var dE=function(){function e(t,n){d(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new cE(t)}return v(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new xE(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new xE(this.firestore,kI(this._delegate,e))}catch(t){throw pE(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=ee(e))instanceof yI&&xI(this._delegate,e)}},{key:"set",value:function(e,t){t=nE("DocumentReference.set",t);try{return t?W_(this._delegate,e,t):W_(this._delegate,e)}catch(n){throw pE(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?G_(this._delegate,e):G_.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw pE(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return J_(hI(e.firestore,TI),[new lm(e._key,Yv.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=vE(n),a=mE(n,(function(t){return new yE(e.firestore,new m_(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return H_(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?K_(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=hI(e,yI);var t=hI(e.firestore,TI);return iI(SI(t),e._key,{source:"server"}).then((function(n){return X_(t,e,n)}))}(this._delegate):function(e){e=hI(e,yI);var t=hI(e.firestore,TI);return iI(SI(t),e._key).then((function(n){return X_(t,e,n)}))}(this._delegate),t.then((function(e){return new yE(n.firestore,new m_(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(hE.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new Id("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new yI(n._delegate,r,new up(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new yI(n._delegate,r,t))}}]),e}();function pE(e,t,n){return e.message=e.message.replace(t,n),e}function vE(e){var t,n=m(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!oE(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function mE(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=oE(e[0])?e[0]:oE(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var yE=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n}return v(e,[{key:"ref",get:function(){return new dE(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return k_(this._delegate,e._delegate)}}]),e}(),gE=function(e){b(n,e);var t=_(n);function n(){return d(this,n),t.apply(this,arguments)}return v(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||bd()}(void 0!==t),t}}]),n}(yE),bE=function(){function e(t,n){d(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new cE(t)}return v(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,I_(this._delegate,function(e,t,n){var r=t,i=p_("where",e);return new __(i,r,n)}(t,n,r)))}catch(i){throw pE(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,I_(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=p_("orderBy",e);return new E_(n,t)}(t,n)))}catch(r){throw pE(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,I_(this._delegate,function(e){return dI("limit",e),new A_("limit",e,"F")}(t)))}catch(n){throw pE(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,I_(this._delegate,function(e){return dI("limitToLast",e),new A_("limitToLast",e,"L")}(t)))}catch(n){throw pE(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,I_(this._delegate,S_.apply(void 0,arguments)))}catch(t){throw pE(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,I_(this._delegate,O_.apply(void 0,arguments)))}catch(t){throw pE(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,I_(this._delegate,N_.apply(void 0,arguments)))}catch(t){throw pE(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,I_(this._delegate,P_.apply(void 0,arguments)))}catch(t){throw pE(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return II(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?Q_(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=hI(e,gI);var t=hI(e.firestore,TI),n=SI(t),r=new z_(t);return aI(n,e._query,{source:"server"}).then((function(n){return new g_(t,r,e,n)}))}(this._delegate):function(e){e=hI(e,gI);var t=hI(e.firestore,TI),n=SI(t),r=new z_(t);return w_(e._query),aI(n,e._query).then((function(n){return new g_(t,r,e,n)}))}(this._delegate),t.then((function(e){return new wE(n.firestore,new g_(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=vE(n),a=mE(n,(function(t){return new wE(e.firestore,new g_(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return H_(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(hE.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),kE=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n}return v(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new gE(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),wE=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n}return v(e,[{key:"query",get:function(){return new bE(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new gE(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new kE(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new gE(n._firestore,r))}))}},{key:"isEqual",value:function(e){return k_(this._delegate,e._delegate)}}]),e}(),xE=function(e){b(n,e);var t=_(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return v(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new dE(this.firestore,e):null}},{key:"doc",value:function(e){try{return new dE(this.firestore,void 0===e?wI(this._delegate):wI(this._delegate,e))}catch(t){throw pE(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=hI(e.firestore,TI),r=wI(e),i=V_(e.converter,t);return J_(n,[GI(WI(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Yv.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new dE(t.firestore,e)}))}},{key:"isEqual",value:function(e){return xI(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(hE.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(bE);function IE(e){return hI(e,yI)}var _E=function(){function e(){d(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=E(MI,n)}return v(e,[{key:"isEqual",value:function(e){return(e=ee(e))instanceof MI&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(Gd.keyField().canonicalString())}}]),e}(),EE=function(){function e(t){d(this,e),this._delegate=t}return v(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new JI("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new HI("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=eE.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=tE.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new $I("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),AE={Firestore:uE,GeoPoint:VI,Timestamp:Vd,Blob:aE,Transaction:lE,WriteBatch:fE,DocumentReference:dE,DocumentSnapshot:yE,Query:bE,QueryDocumentSnapshot:gE,QuerySnapshot:wE,CollectionReference:xE,FieldPath:_E,FieldValue:EE,setLogLevel:function(e){!function(e){dd.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new oe("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},AE)))}(e,(function(e,t){return new uE(e,t,new sE)})),e.registerVersion("@firebase/firestore-compat","0.1.18")}(Nt);var TE,SE=function(e,t){var n=function(e){var t=Nt.apps.filter((function(t){return t.options.appId===e}));return 1===t.length?t[0]:null}(e.appId);return n||Nt.initializeApp(e,t)};"pam"==={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_APP_ENV?(console.log("using pjordan config"),TE=SE({apiKey:"AIzaSyB9eVT-fu4TOjxHoPAXqsnz9tCcbTJkTOw",authDomain:"pamdev-ea800.firebaseapp.com",projectId:"pamdev-ea800",storageBucket:"pamdev-ea800.appspot.com",messagingSenderId:"366450927885",appId:"1:366450927885:web:caa5f022ef1de182a0e844",measurementId:"G-JC5XZEPYT1"},"pam")):"scott"==={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_APP_ENV?(console.log("using scott config"),TE=SE({apiKey:"AIzaSyBEhbIdVW2F2vvvfvpNb2SsCDP9Yoc__z8",authDomain:"scottdev-f6528.firebaseapp.com",projectId:"scottdev-f6528",storageBucket:"scottdev-f6528.appspot.com",messagingSenderId:"447730403122",appId:"1:447730403122:web:1727020dbac4ad4cf6f92b"})):(console.log("using production config"),TE=SE({apiKey:"AIzaSyBOgWAbXUGckpad2sk0IUo00hZsV4WxG0E",authDomain:"meddbriefer-68cd4.firebaseapp.com",projectId:"meddbriefer-68cd4",storageBucket:"meddbriefer-68cd4.appspot.com",messagingSenderId:"1087114796018",appId:"1:1087114796018:web:679fbab38dbf78af0ce96b",measurementId:"G-Q7QZKC9KHW"},"production"));var OE=TE,CE=(OE.auth(),OE.firestore()),NE=(n(576),n(8807),"assessment"),PE="assessment-option",DE="assessment-with-options",RE="decision",LE="decision-option",ME="intervention",FE="phase",UE="required-action",VE="sub-phase",qE=Object.freeze({PHASE:FE,SUB_PHASE:VE,ASSESS:NE,AWO:DE,ASSESS_OPTION:PE,ASSESSO:PE,CL_HEADING:"checklist-heading",CL_PROMPT:"checklist-prompt",DECISION:RE,DECISION_OPTION:LE,DIST_PROMPT:"distinguishing-prompt",NESTED_CHECKLIST:"nested-checklist",REQUIRED:UE,REQURED:UE,INTERV:ME,PROMPT_SET:"prompt-set",PROMPT:"prompt",ANSWER:"answer"}),jE=Object.freeze({ONE:"one",OOM:"one-or-more",NONE:"none"}),BE=(Object.freeze({ONE:"One",OOM:"One or more",NONE:"None"}),Object.freeze({PHASE:"",SUB_PHASE:"",ANSWER:"answer-",ASSESS:"assess-",AWO:"assessment-with-options-",ASSESS_OPTION:"assess-option-",CL_PROMPT:"cl-prompt-",DECISION:"decision-",DECISION_OPTION:"decision-option-",INTERV:"intv-",PROMPT_SET:"prompt-set-",PROMPT:"prompt-",REQUIRED:"required-action-"}),Object.freeze({AW:"airway",BR:"breathing",BL:"bleeding",SH:"shock"}),Object.freeze({AW:"Airway",BR:"Breathing",BL:"Bleeding",SH:"Shock"}),[NE,DE,RE,UE]),zE=[PE,LE],KE=[NE,DE,RE,UE,ME,FE,VE],QE=(Object.freeze({NONE:"",MIN:"minimal",OPT:"optional",REQ:"required",CONTRA:"contraindicated",UNN:"unnecessary",IR:"irrelevant"}),n(1461));function WE(e,t){if(null==e)return{};var n,r,i=(0,QE.Z)(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var GE,HE,YE,JE=function(e,t){return e.reduce((function(e,n){return be(be({},e),{},h({},n[t],(e[n[t]]||[]).concat(n)))}),{})},XE=["id","name","version","datePublished","scenarioType","schemaVersion","info","vitalSigns","OPQRST","SAMPLE","assessmentFindings","checkListCorrectness","correctMedicationDosages","problems","solutions","actions","interventionVariantAnswers","checkListMetaData","medications","interventions","interventionPrompts","interventionPromptAnswers","interventionMenuCategories","interventionMenuItems"],ZE=["items"],$E=["subPhases","items"],eA=["options"],tA=["items"],nA=["options"],rA=["distPrompts","prompts"],iA=["answers"],aA=function(){function e(t){d(this,e);var n=t.id,r=t.name,i=t.version,a=t.datePublished,o=t.scenarioType,s=t.schemaVersion,u=t.info,c=t.vitalSigns,l=t.OPQRST,f=t.SAMPLE,h=t.assessmentFindings,p=t.checkListCorrectness,v=t.correctMedicationDosages,m=t.problems,y=t.solutions,g=t.actions,b=t.interventionVariantAnswers,k=t.checkListMetaData,w=t.medications,x=t.interventions,I=t.interventionPrompts,_=t.interventionPromptAnswers,E=t.interventionMenuCategories,A=t.interventionMenuItems;WE(t,XE);this.id=n,this.name=r,this.version=i,this.datePublished=a,this.scenarioType=o,this.schemaVersion=s,this.info=u,this.vitalSigns=c,this.OPQRST=l,this.SAMPLE=f,this.assessmentFindings=h,this.checkListCorrectness=p,this.correctMedicationDosages=v,this.problems=m,this.solutions=y,this.actions=g,this.interventionVariantAnswers=b,this._checkListMetaData=k,this.medications=w,this._interventions=x,this._interventionPrompts=I,this._interventionPromptAnswers=_,this._interventionMenuCategories=E,this._interventionMenuItems=A,this.phaseData=this.genPhaseData(),this.interventionMenus=this.genInterventionMenus(),this.systemInterventions=this.genSystemInterventions()}return v(e,[{key:"genSystemInterventions",value:function(){var e=this._interventions.filter((function(e){return!!e.system})).map((function(e){return{id:e.id,type:qE.INTERV,label:e.label,system:e.system}}));return JE(e,"system")}},{key:"genInterventionMenus",value:function(){var e=this;return this._interventionMenuCategories.map((function(t){var n=t.items,r=WE(t,ZE);return r.items=n.map((function(t){return e._interventionMenuItems.find((function(e){return e.id===t}))})),r}))}},{key:"genPhaseData",value:function(){var e=re(this._checkListMetaData).map((function(e){return delete e.promptID,delete e.relation,delete e.verboseLabel,e})),t=e.filter((function(e){return e.type===qE.PHASE})),n=e.filter((function(e){return e.type===qE.SUB_PHASE})),r=e.filter((function(e){return e.type===qE.DECISION_OPTION})),i=e.filter((function(e){return!t.includes(e)&&!n.includes(e)&&!r.includes(e)}));i.forEach((function(e){void 0===e.subPhase&&(e.subPhase=null)}));var a=JE(n,"phase");t.forEach((function(e){e.id in a&&(e.subPhases=a[e.id].map((function(e){return e.id})))}));var o=JE(r,"parentID");i.forEach((function(e){e.type===qE.DECISION&&(e.options=o[e.id].map((function(e){return e.id})))}));var s={};i.forEach((function(e){var t=e.subPhase?e.subPhase:e.phase;t===e.parentID?s[e.id]=1:s[e.id]=s[e.parentID]+1,e.type===qE.NESTED_CHECKLIST&&(e.type=qE.CL_HEADING),e.parentID=t,e.depth=s[e.id]}));var u=JE(i,"subPhase"),c=re(u.null),l=JE(c,"phase");t.forEach((function(e){e.id in l&&(e.items=l[e.id].map((function(e){return e.id})))})),delete u.null,n.forEach((function(e){var t=u[e.id].map((function(e){return e.id}));e.items=t}));var f=[];return t.forEach((function(e){var t=e.subPhases,a=e.items,o=WE(e,$E);void 0!==a?(o.items=a.map((function(e){var t=i.find((function(t){return t.id===e})),n=t.options,a=WE(t,eA);return void 0!==n&&(a.options=n.map((function(e){return r.find((function(t){return t.id===e}))}))),a})),f.push(o)):(o.subPhases=t.map((function(e){var t=n.find((function(t){return t.id===e})),a=t.items,o=WE(t,tA);return o.items=a.map((function(e){var t=i.find((function(t){return t.id===e})),n=t.options,a=WE(t,nA);return void 0!==n&&(a.options=n.map((function(e){return r.find((function(t){return t.id===e}))}))),a})),o})),f.push(o))})),f}},{key:"getChecklistItem",value:function(e){return this._checkListMetaData.find((function(t){return t.id===e}))}},{key:"getInterventionForm",value:function(e){return this.getIntervention(e,!0)}},{key:"getIntervention",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this._interventions.find((function(t){return t.id===e}));if(!r)return{};var i=r.distPrompts,a=r.prompts,o=WE(r,rA);return n?(o.distPrompts=i.map((function(e){return t.getPrompt(e,!0)})),o.prompts=a.map((function(e){return t.getPrompt(e,!0)})),o):(o.distPrompts=i,o.prompts=a,o)}},{key:"getPrompt",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this._interventionPrompts.find((function(t){return t.id===e}));if(!r)return{};var i=r.answers,a=WE(r,iA);return a.answers=n?i.map((function(e){return t.getAnswer(e)})):i,a}},{key:"getAnswer",value:function(e){return this._interventionPromptAnswers.find((function(t){return t.id===e}))}}]),e}(),oA=(qE.DIST_PROMPT,jE.ONE,qE.DIST_PROMPT,jE.OOM,qE.PROMPT,jE.ONE,qE.PROMPT,jE.ONE,qE.PROMPT,qE.PROMPT,jE.ONE,qE.PROMPT,jE.ONE,qE.PROMPT,jE.ONE,qE.PROMPT,jE.ONE,qE.PROMPT,jE.ONE,qE.PROMPT,jE.ONE,qE.PROMPT,jE.ONE,qE.PROMPT,jE.ONE,qE.PROMPT,jE.ONE,qE.PROMPT,jE.ONE,qE.PROMPT,jE.ONE,qE.PROMPT,jE.ONE,qE.PROMPT,jE.ONE,qE.PROMPT,jE.ONE,qE.PROMPT,jE.ONE,qE.PROMPT,jE.ONE,qE.PROMPT,jE.ONE,qE.PROMPT,jE.ONE,qE.PROMPT,jE.ONE,qE.PROMPT,jE.ONE,qE.PROMPT,jE.ONE,qE.PROMPT,jE.ONE,GE={depth:3,type:"intervention",id:"menu-item-nasotracheal-intubation",interventionID:"intv-nasotracheal-intubation"},h(GE,"interventionID","intv-nasotracheal-intubation"),h(GE,"interventionID","intv-nasotracheal-intubation"),h(GE,"intvCategoryID","intv-cat-airway"),HE={depth:4,type:"intervention",id:"menu-item-rapid-sequence-intubation",interventionID:"intv-rapid-sequence-intubation"},h(HE,"interventionID","intv-rapid-sequence-intubation"),h(HE,"interventionID","intv-rapid-sequence-intubation"),h(HE,"intvCategoryID","intv-cat-airway"),function(){var e=ae(te().mark((function e(t,n){var r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,sA(t,n);case 2:return r=e.sent,e.abrupt("return",new aA(r));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),sA=function(e,t){return e.collection("published-scenarios").doc(t).get().then((function(e){return e.data()}))},uA=function(){var e=ae(te().mark((function e(t,n,r){var i;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.collection(n).where("id","==","".concat(r)).get();case 2:return i=e.sent,e.abrupt("return",i.empty);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),cA=function(){var e=ae(te().mark((function e(t,n,r){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure you want to delete this file?")){e.next=3;break}return e.next=3,t.collection(n).doc(r).delete();case 3:case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),lA=function(e,t){return e.collection("debriefing-feedback-logs").doc(t).get().then((function(e){var t=e.data();return t.id=e.id,t}))},fA=n(7896),hA=n(4974),dA=n.n(hA),pA=n(5667),vA=n.n(pA);function mA(e,t){return void 0===e&&(e=""),void 0===t&&(t=YE),t?e.split(" ").map((function(e){return t[e]||e})).join(" "):e}var yA="object"===typeof window&&window.Element||function(){};dA().oneOfType([dA().string,dA().func,function(e,t,n){if(!(e[t]instanceof yA))return new Error("Invalid prop `"+t+"` supplied to `"+n+"`. Expected prop to be an instance of Element. Validation failed.")},dA().shape({current:dA().any})]);var gA=dA().oneOfType([dA().func,dA().string,dA().shape({$$typeof:dA().symbol,render:dA().func}),dA().arrayOf(dA().oneOfType([dA().func,dA().string,dA().shape({$$typeof:dA().symbol,render:dA().func})]))]);"undefined"===typeof window||!window.document||window.document.createElement;var bA=["className","cssModule","size","bordered","borderless","striped","dark","hover","responsive","tag","responsiveTag","innerRef"],kA={className:dA().string,cssModule:dA().object,size:dA().string,bordered:dA().bool,borderless:dA().bool,striped:dA().bool,dark:dA().bool,hover:dA().bool,responsive:dA().oneOfType([dA().bool,dA().string]),tag:gA,responsiveTag:gA,innerRef:dA().oneOfType([dA().func,dA().string,dA().object])},wA=function(e){var n=e.className,r=e.cssModule,i=e.size,a=e.bordered,o=e.borderless,s=e.striped,u=e.dark,c=e.hover,l=e.responsive,f=e.tag,h=e.responsiveTag,d=e.innerRef,p=(0,QE.Z)(e,bA),v=mA(vA()(n,"table",!!i&&"table-"+i,!!a&&"table-bordered",!!o&&"table-borderless",!!s&&"table-striped",!!u&&"table-dark",!!c&&"table-hover"),r),m=t.createElement(f,(0,fA.Z)({},p,{ref:d,className:v}));if(l){var y=mA(!0===l?"table-responsive":"table-responsive-"+l,r);return t.createElement(h,{className:y},m)}return m};wA.propTypes=kA,wA.defaultProps={tag:"table",responsiveTag:"div"};var xA=wA,IA=n(7574),_A=function(){var e=f((0,t.useState)([]),2),n=e[0],r=e[1],a=f((0,t.useState)([]),2),o=a[0],s=a[1],u=f((0,t.useState)([]),2),c=u[0],l=u[1];return(0,t.useEffect)((function(){(function(e){return e.collection("logs").get().then((function(e){return e.docs.map((function(e){var t=e.data();return{id:e.id,label:t.label,scenario:t.scenarioName,scenarioID:t.scenarioID,userName:t.userName,timestamp:t.timestamp}}))}))})(CE).then((function(e){r(e)})).catch((function(e){return console.log("error fetching logs",e)}))}),[]),(0,t.useEffect)((function(){n&&function(e){return e.collection("debriefing-comment-logs").get().then((function(e){return e.docs.map((function(e){var t=e.data();return{id:e.id,label:t.label,scenario:t.scenarioName,scenarioID:t.scenarioID,commenter:t.commenter,timestamp:t.timestamp}}))}))}(CE).then((function(e){l(e)})).catch((function(e){return console.log("error fetching logs",e)}))}),[n]),(0,t.useEffect)((function(){c&&function(e){return e.collection("published-scenarios").get().then((function(e){return e.docs.map((function(e){var t=e.data();return{id:e.id,version:t.version}}))}))}(CE).then((function(e){s(e)})).catch((function(e){return console.log("error fetching published scenarios",e)}))}),[c]),o?(o&&(n.forEach((function(e){var t=o.find((function(t){return t.id===e.scenarioID}));t&&(e.version=t.version)})),c.forEach((function(e){var t=o.find((function(t){return t.id===e.scenarioID}));t&&(e.version=t.version)}))),(0,IA.jsxs)(xA,{striped:!0,borderless:!0,size:"sm",hover:!0,children:[(0,IA.jsx)("thead",{children:(0,IA.jsx)("tr",{children:(0,IA.jsx)("th",{children:"Existing Observer Logs"})})}),(0,IA.jsxs)("tbody",{children:[(0,IA.jsxs)("tr",{children:[(0,IA.jsx)("th",{children:"Filename"}),(0,IA.jsx)("th",{children:"Scenario"}),(0,IA.jsx)("th",{children:"Scenario_Version"}),(0,IA.jsx)("th",{children:"Creator"}),(0,IA.jsx)("th",{children:"Timestamp"})]}),n.map((function(e){return(0,IA.jsxs)("tr",{children:[(0,IA.jsx)("td",{children:e.label}),(0,IA.jsx)("td",{children:e.scenario}),(0,IA.jsx)("td",{children:e.version}),(0,IA.jsx)("td",{children:e.userName}),(0,IA.jsx)("td",{children:e.timestamp}),(0,IA.jsxs)("td",{children:[(0,IA.jsx)(i.Link,{to:"/logs/".concat(e.id),children:"Analyze"}),"\xa0\xa0\xa0\xa0",(0,IA.jsx)(i.Link,{to:"/analysis-or-comment/display/".concat(e.id),children:"Start_Review"}),"\xa0\xa0\xa0\xa0",(0,IA.jsx)(i.Link,{to:"/observer/delete/".concat(e.id),children:"Delete"})]})]},e.id)}))]}),(0,IA.jsx)("thead",{children:(0,IA.jsx)("tr",{children:(0,IA.jsx)("th",{children:"Existing Commented Logs"})})}),(0,IA.jsxs)("tbody",{children:[(0,IA.jsxs)("tr",{children:[(0,IA.jsx)("th",{children:"Label"}),(0,IA.jsx)("th",{children:"Scenario"}),(0,IA.jsx)("th",{children:"Scenario_Version"}),(0,IA.jsx)("th",{children:"Creator"}),(0,IA.jsx)("th",{children:"Timestamp"})]}),c.map((function(e){return(0,IA.jsxs)("tr",{children:[(0,IA.jsx)("td",{children:e.label}),(0,IA.jsx)("td",{children:e.scenario}),(0,IA.jsx)("td",{children:e.version}),(0,IA.jsx)("td",{children:e.commenter}),(0,IA.jsx)("td",{children:e.timestamp}),(0,IA.jsxs)("td",{children:[(0,IA.jsx)(i.Link,{to:"/analysis-or-comment/display/".concat(e.id),children:"Continue_Review"}),"\xa0\xa0\xa0\xa0",(0,IA.jsx)(i.Link,{to:"/comment/delete/".concat(e.id),children:"Delete"})]})]},e.id)}))]})]})):(0,IA.jsx)("h4",{children:"fetching log data"})},EA={Good:"text-success",Caution:"text-warning",Problem:"text-danger","Not implemented":"text-muted"},AA={Good:"sentiment_satisfied",Caution:"report_problem",Problem:"highlight_off","Not implemented":"sentiment_neutral"},TA={contraindicated:["Problem","You should not have done this action because it is contraindicated in this case +bos ?contraindicatedWhy ?why +eos"],irrelevant:["Problem","You should not have done this action because it is irrelevant in this case +bos ?why +eos"],unnecessary:["Problem","You should not have done this action because it is unnecessary in this case +bos ?why +eos"],missingMinimal:["Problem","You did not do this action +bos ?why +eos"],missingOptional:["Caution","You did not do this action +bos but it was optional in this case +bos ?why +eos"],missingRequired:["Problem","You did not do this action +bos ?why +eos"],missingRequiredAssessment:["Problem","You did not do this action +bos ?assessmentFB +eos"],notNecessary:["Caution","You should not have done this action because it was unnecessary +bos ?why +eos"],assessment:["Good",""],"assessment-option":["Good",""],"decision-option":["Good",""],"required-action":["Good",""],goodIntv:["Good","?intvStatusFB +eos "],"misOrdered-assessment":["Problem","Doing this action was correct but it was done out of the recommended order +bos @orderingFB +eos"],"misOrdered-assessment-option":["Problem","Doing this action was correct but it was done out of the recommended order +bos @orderingFB +eos"],"misOrdered-decision-option":["Problem","Doing this action was correct but it was done out of the recommended order +bos @orderingFB"],"misOrdered-required-action":["Problem","Doing this action was correct but it was done out of the recommended order +bos @orderingFB"],"misOrdered-goodIntv":["Problem","Doing this action was correct but it was done out of the recommended order +bos @orderingFB"],"misOrdered-phase-assessment":["Problem","Doing this action was correct but this section was not completed in the recommended order +bos @orderingFB +eos"],"misOrdered-phase-assessment-option":["Good","Doing this action was correct but this section was not completed in the recommended order +bos @orderingFB +eos"],"misOrdered-phase-decision-option":["Problem","Doing this action was correct but this section was not completed in the recommended order +bos @orderingFB"],"misOrdered-phase-required-action":["Problem","Doing this action was correct but this section was not completed in the recommended order +bos @orderingFB"],"misOrdered-phase-goodintv":["Problem","Doing this action was correct but this section was not completed in the recommended order +bos @orderingFB"],intvCheckWNoIntvFound:["Caution","You didn't do this intervention so it doesn't make sense to check the status of it at this point."],unexpectedPatientIntvCheck:["Caution","This status check is not likely to reveal any useful information."],patientIntvCheck:["Good",""],patientVitalCheck:["Good",""],"assessment-option-incorrect":["Problem","Doing this action was correct but there is a problem with how you planned to do it +bos @incorrectAnswerFB +eos "],"decision-option-incorrect":["Problem","Doing this action was correct but there is a problem with how you planned to do it +bos @incorrectAnswerFB +eos "],"incorrect-answers":["Problem","Doing this action is correct but there is a problem with how you planned to do it +bos @incorrectAnswersFB +bos ?intvStatusFB +eos"],"minimal-incorrect-answers":["Problem","Doing this action was correct and would solve the problem but you did not follow protocol +bos ?minimalWhy +bos also there is a problem with how you planned to do this intervention +bos @incorrectAnswersFB +bos ?intvStatusFB +eos"],minimal:["Caution","Doing this action is correct and solves the problem but you did not follow protocol +bos @minimalWhy +bos ?intvStatusFB +eos "],"misOrdered-assessment-option-incorrect":["Problem","Doing this action was correct but it was done out of the recommended order +bos @orderingFB +bos Also there is a problem with how you planned to do it +bos @incorrectAnswerFB +eos "],"misOrdered-decision-option-incorrect":["Problem","Doing this action was correct but it was done out of the recommended order +bos @orderingFB +bos Also there is a problem with how you planned to do it +bos @incorrectAnswerFB +eos "],"misOrdered-incorrect-answers":["Problem","Doing this action is correct but it was done out of the recommended order +bos @orderingFB +bos also there is a problem with how you planned to do it +bos @incorrectAnswersFB +bos ?intvStatusFB +eos"],"misOrdered-minimal-incorrect-answers":["Problem","Doing this action is correct but it was done out of the recommended order +bos @orderingFB +bos And while this would solve the problem, you did not follow protocol +bos @minimalWhy +bos also there is a problem with how you planned to do it +bos @incorrectAnswersFB +bos ?intvStatusFB +eos"],"misOrdered-minimal":["Problem","Doing this action is correct but it was done out of the recommended order +bos @orderingFB +bos And while this would solve the problem, you did not follow protocol +bos @minimalWhy +bos ?intvStatusFB +eos"],"misOrdered-phase-assessment-option-incorrect":["Problem","Doing this action was correct but this section was not completed in the recommended order +bos @orderingFB +bos Also there is a problem with how you planned to do it +bos @incorrectAnswerFB +eos "],"misOrdered-phase-decision-option-incorrect":["Problem","Doing this action was correct but this section was not completed in the recommended order +bos @orderingFB +bos Also there is a problem with how you planned to do it +bos @incorrectAnswerFB +eos "],"misOrdered-phase-incorrect-answers":["Problem","Doing this action is correct but this section was not completed in the recommended order +bos @orderingFB +bos also there is a problem with how you planned to do it +bos @incorrectAnswersFB +bos ?intvStatusFB +eos"],"misOrdered-phase-minimal-incorrect-answers":["Problem","Doing this action is correct but this section was not completed in the recommended order +bos @orderingFB +bos And while this would solve the problem, you did not follow protocol +bos ?minimalWhy +bos also there is a problem with how you planned to do it +bos @incorrectAnswersFB +bos ?intvStatusFB +eos"],"misOrdered-phase-minimal":["Problem","Doing this action is correct but this section was not completed in the recommended order +bos @orderingFB +bos And while this would solve the problem, you did not follow protocol +bos ?minimalWhy +bos ?intvStatusFB +eos"],green:["Good",""],red:["Problem",""],yellow:["Caution",""],default:["Not implemented","This action was not expected.  There could be an issue with how this scenario is represented within the system."]},SA={absent:["absent","missingMinimal","missingRequired","missingRequiredAssessment"],errors:["misOrdered-assessment","misOrdered-assessment-option","misOrdered-decision-option","misOrdered-required-action","misOrdered-goodIntv","assessment-option-incorrect","decision-option-incorrect","incorrect-answers","minimal-incorrect-answers","misOrdered-assessment-option-incorrect","misOrdered-decision-option-incorrect","misOrdered-incorrect-answers","misOrdered-minimal-incorrect-answers","misOrdered-minimal","irrelevant","unnecessary","contraindicated","errors","misordered-irrelevant","misOrdered-unnecessary","midOrdered-contraindicated","error","misordered","misordered-error","misOrdered-phase-assessment-option-incorrect","misOrdered-phase-decision-option-incorrect","misOrdered-phase-incorrect-answers","misOrdered-phase-minimal-incorrect-answers"],good:["good","assessment","assessment-option","decision-option","required-action","goodIntv","patientIntvCheck","patientVitalCheck","notNecessary","notFound","intvCheckWNoIntvFound","unexpectedPatientIntvCheck","default","minimal","misOrdered-phase-minimal","misOrdered-phase-assessment","misOrdered-phase-assessment-option","misOrdered-phase-decision-option","misOrdered-phase-required-action","misOrdered-phase-goodIntv"]},OA=[{scenarioName:"M2CA",exceptions:[["required-action-obtain-OPQRST","This cannot be assessed when GCS < 15"],["assess-opqrst-info","This cannot be assessed when GCS < 15"]]}],CA={"scene-size-up":{id:"T1",before:["primary-survey"],beforeOp:"",after:[],afterOp:"",type:"nonLeaf"},"primary-survey":{id:"T2a",before:["secondary-assessment"],beforeOp:"",after:[],afterOp:"",type:"nonLeaf"},"intv-open-airway-method-head-tilt":{id:"T2.1",before:["secondary-assessment"],beforeOp:"",after:[],afterOp:"",type:"leafI"},"intv-open-airway-method-modified-jaw-thrust":{id:"T2.2",before:["secondary-assessment"],beforeOp:"",after:[],afterOp:"",type:"leafI"},"intv-manual-finger-sweep":{id:"T2.4",before:["secondary-assessment"],beforeOp:"",after:[],afterOp:"",type:"leafI"},"intv-magill-forceps-assisted":{id:"T2.5",before:["secondary-assessment"],beforeOp:"",after:[],afterOp:"",type:"leafI"},"intv-heimlich-maneuver":{id:"T2.6",before:["secondary-assessment"],beforeOp:"",after:[],afterOp:"",type:"leafI"},"intv-back-blows-and-chest-thrusts":{id:"T2.7",before:["secondary-assessment"],beforeOp:"",after:[],afterOp:"",type:"leafI"},"intv-needle-cricothyrotomy":{id:"T2.10",before:["secondary-assessment"],beforeOp:"",after:[],afterOp:"",type:"leafI"},"intv-surgical-cricothyrotomy":{id:"T2.11",before:["secondary-assessment"],beforeOp:"",after:[],afterOp:"",type:"leafI"},"intv-control-severe-bleeding-technique-pack-wound-with-gauze":{id:"T2.15",before:["secondary-assessment"],beforeOp:"",after:[],afterOp:"",type:"leafI"},"intv-control-severe-bleeding-technique-load-and-go":{id:"T2.16",before:["secondary-assessment"],beforeOp:"",after:[],afterOp:"",type:"leafI"},"intv-control-shock-technique-place-patient-supine-position":{id:"T2.17",before:["secondary-assessment"],beforeOp:"",after:[],afterOp:"",type:"leafI"},"intv-occlusive-dressing":{id:"T2.18",before:["secondary-assessment"],beforeOp:"",after:[],afterOp:"",type:"leafI"},"intv-control-severe-bleeding-technique-direct-pressure":{id:"T2.21",before:["secondary-assessment"],beforeOp:"",after:[],afterOp:"",type:"leafI"},"intv-control-severe-bleeding-technique-2nd-tourniquet":{id:"T2.22",before:["secondary-assessment"],beforeOp:"",after:[],afterOp:"",type:"leafI"},"intv-control-severe-bleeding-technique-tourniquet":{id:"T2.23",before:["secondary-assessment"],beforeOp:"",after:[],afterOp:"",type:"leafI"},"intv-control-severe-bleeding-technique-pressure-bandage":{id:"T2.24",before:["secondary-assessment"],beforeOp:"",after:[],afterOp:"",type:"leafI"},"intv-insert-advanced-airway":{id:"T2.25",before:["secondary-assessment"],beforeOp:"",after:[],afterOp:"",type:"leafI"},"intv-sedation-assisted-intubation":{id:"T2.26",before:["secondary-assessment"],beforeOp:"",after:[],afterOp:"",type:"leafI"},"intv-nasotracheal-intubation":{id:"T2.27",before:["secondary-assessment"],beforeOp:"",after:[],afterOp:"",type:"leafI"},"intv-orotracheal-intubation":{id:"T2.28",before:["secondary-assessment"],beforeOp:"",after:[],afterOp:"",type:"leafI"},"ints-call-for-helicopter":{id:"T3.1",before:["secondary-assessment"],beforeOp:"",after:[],afterOp:"",type:"leafI"},"intv-call-for-air-ambulance":{id:"T3.2",before:["secondary-assessment"],beforeOp:"",after:[],afterOp:"",type:"leafI"},"intv-transport":{id:"T7",before:["secondary-assessment"],beforeOp:"",after:["airway","breathing","circulation"],afterOp:"",type:"leafI"},"trauma-expose":{id:"T8",before:["secondary-assessment"],beforeOp:"",after:[],afterOp:"",type:"leafA"},"general-impression":{id:"T9",before:["airway","breathing","circulation"],beforeOp:"and",after:[],afterOp:"",type:"nonLeaf"},"intv-spinal-immobilization-technique-manual-c-spine":{id:"T10-T27",before:["airway","breathing","circulation"],beforeOp:"",after:[],afterOp:"",type:"leafI"},"intv-airway-patency-technique-suction-airway":{id:"T13",before:["secondary-assessment"],beforeOp:"",after:[],afterOp:"",type:"leafI"},"intv-ventilation-technique-bag-valve-mask":{id:"T17",before:["secondary-assessment"],beforeOp:"",after:[],afterOp:"",type:"leafI"},"intv-oropharyngeal-airway":{id:"T28.1",before:["secondary-assessment"],beforeOp:"",after:[],afterOp:"",type:"leafI"},"intv-nasopharyngeal-airway":{id:"T28.2",before:["secondary-assessment"],beforeOp:"",after:[],afterOp:"",type:"leafI"},"intv-supplemental-oxygen-device-nasal-cannula":{id:"T29",before:["secondary-assessment"],beforeOp:"",after:[],afterOp:"",type:"leafI"},"intv-supplemental-oxygen-device-non-rebreather-mask":{id:"T30",before:["secondary-assessment"],beforeOp:"",after:[],afterOp:"",type:"leafI"},"intv-pleural-decompression":{id:"T34",before:["secondary-assessment"],beforeOp:"",after:[],afterOp:"",type:"leafI"}},NA={"pulse-checks":{id:"T12-c1",before:["airway"],beforeOp:"",after:[],afterOp:"",type:"leafA"}},PA={B4CA:[],B5CA:[],C5CA:[],SC8CP:["T12-c1"],B1CA:[],M1CA:[],M2CA:["T12-c1"],B7CA:[]},DA={"intv-supplemental-oxygen-device-nasal-cannula":{intvStatusNeeded:!1,vitalsNeeded:[]},"intv-supplemental-oxygen-device-non-rebreather-mask":{intvStatusNeeded:!1,vitalsNeeded:[]},"intv-ventilation-technique-bag-valve-mask":{intvStatusNeeded:!1,vitalsNeeded:[]},"intv-pleural-decompression":{intvStatusNeeded:!1,vitalsNeeded:[]},"intv-occlusive-dressing":{intvStatusNeeded:!1,vitalsNeeded:[]},"intv-control-severe-bleeding-technique-direct-pressure":{intvStatusNeeded:!0,vitalsNeeded:[]},"intv-control-severe-bleeding-technique-tourniquet":{intvStatusNeeded:!0,vitalsNeeded:[]},"intv-nasopharyngeal-airway":{intvStatusNeeded:!0,vitalsNeeded:[]},"intv-control-shock-technique-administer-iv-boluses":{intvStatusNeeded:!1,vitalsNeeded:[]},"intv-orotracheal-intubation":{intvStatusNeeded:!0,vitalsNeeded:[]},"intv-oropharyngeal-airway":{intvStatusNeeded:!0,vitalsNeeded:[]},"intv-sedation-assisted-intubation":{intvStatusNeeded:!1,vitalsNeeded:[]}};var RA=["id","feedbackAbsent","feedbackOutOfOrder","feedbackErrors"],LA={},MA={M2CA:{Action:{id:"top",label:"Top most node -level 0",feedbackAbsent:"Nothing done. Start scenario again.",feedbackOutOfOrder:"",feedbackError:"All wrong. Please start scenario again.",subActions:[{id:"scene-size-up",label:"Child1 -level1",feedbackAbsent:"absent -Child1 level 1",feedbackOutOfOrder:"late -Child1 level 1",feedbackErrors:"wrong -Child1 level 1",subActions:[{id:"assess-scene-safety",label:"Child1 of Child1 -level 2",feedbackAbsent:"absent -Child1 of Child1 -level2",feedbackOutOfOrder:"late -Child1 of Child1 -level2",feedbackErrors:"wrong -Child1 of Child1 -level2",subActions:[],examine:"N",prompts:""},{id:"required-action-BSI",label:"Child2 of Child1 -level 2",feedbackAbsent:"absent -Child2 of Child1 -level 2",feedbackOutOfOrder:"late -Child2 of Child1 -level 2",feedbackErrors:"wrong -Child2 of Child1 -level 2",subActions:[],examine:"Y",prompts:"prompts -Child2 of Child1 -level2"}],examine:"Y",prompts:"prompts -Child1 level 1"},{id:"primary-survey",label:"Child 2 -level1",feedbackAbsent:"absent -Child 2 level1",feedbackOutOfOrder:"late -Child 2 level1",feedbackErrors:"wrong -Child 2 level1",subActions:[{id:"general-impression",label:"Child1 of Child2 -level2",feedbackAbsent:"absent -Child1 of Child2 -level2",feedbackOutOfOrder:"late -Child1 of Child2 -level2",feedbackErrors:"wrong -Child1 of Child2 -level2",subActions:[],examine:"N",prompts:""},{id:"airway",label:"Child2 of child2 -level2",feedbackAbsent:"absent -Child2 of Child2 -level2",feedbackOutOfOrder:"late -Child2 of Child2 -level2",feedbackErrors:"wrong -Child2 of Child2 -level2",subActions:[{id:"airway-is-open",label:"Child1 of (Child2 of Child2) -level3",feedbackAbsent:"absent -Child1 of (Child2 of Child2) -level3",feedbackOutOfOrder:"late -Child1 of (Child2 of Child2) -level3",feedbackErrors:"wrong -Child1 of (Child2 of Child2) -level3",subActions:[],examine:"N",prompts:""},{id:"airway-is-clear-substances",label:"Child2 of (Child2 of Child2) -level3",feedbackAbsent:"absent -Child2 of (Child2 of Child2) -level3",feedbackOutOfOrder:"late -Child2 of (Child2 of Child2) -level3",feedbackErrors:"wrong -Child2 of (Child2 of Child2) -level3",subActions:[],examine:"Y",prompts:"prompts -Child2 of (Child2 of Child2) -level3"}],examine:"N",prompts:""},{id:"breathing",label:"Child3 of Child2 -level2",feedbackAbsent:"absent -Child3 of Child2 -level2",feedbackOutOfOrder:"late -Child3 of Child2 -level2",feedbackErrors:"wrong -Child3 of Child2 -level2",subActions:[],examine:"N",prompts:""}],examine:"N",prompts:""},{id:"Manage a potential head and/or spinal injury",label:"Child 3 -level1",feedbackAbsent:"absent -Child 3 level1",feedbackOutOfOrder:"late -Child 3 level1",feedbackErrors:"wrong -Child 3 level1",subActions:[{id:"intv-spinal-immobilization-technique-cervical-collar",label:"Cervical Collar",feedbackAbsent:"absent - cervical collar",feedbackOutOfOrder:"late - cervical collar",feedbackErrors:"wrong - cervical collar",subActions:[],examine:"Y",prompts:"prompts - cervical collar"}],examine:"N",prompts:""},{id:"ongoing-mgmt-plan",label:"Child 4 -level1",feedbackAbsent:"absent -Child 4 level1",feedbackOutOfOrder:"late -Child 4 level1",feedbackErrors:"wrong -Child 4 level1",subActions:[{id:"reassess-vital-signs",label:"Child1 of Child4 -level 2",feedbackAbsent:"absent -Child1 of Child4 -level2",feedbackOutOfOrder:"late -Child1 of Child4 -level2",feedbackErrors:"wrong -Child1 of Child4 -level2",subActions:[],examine:"Y",prompts:"prompts -Child1 of Child4 -level2"},{id:"repeat-primary-survey",label:"Child2 of Child4 -level 2",feedbackAbsent:"absent -Child2 of Child4 -level 2",feedbackOutOfOrder:"late -Child2 of Child4 -level 2",feedbackErrors:"wrong -Child2 of Child4 -level 2",subActions:[],examine:"N",prompts:""}],examine:"Y",prompts:"prompts -Child4 level1"}],examine:"N",prompts:""}},SC8CP:{Action:{id:["top"],label:"fully assess and manage the patient in this scenario",type:"Required",feedbackAbsent:"Your log indicates you didn't complete any of these assessment or managment goal. Please restart the scenario and try again",feedbackOutOfOrder:"",feedbackError:"",examine:!1,prompts:"",subActionsList:!0,subActions:[{id:["scene-size-up"],label:"Put on BSI and do a complete Scene Size-up before entering the scene",type:"Required",feedbackAbsent:"Your first steps should have been to don your protective wear, including eye protection, and to ensure the scene is safe. You cannot assist a patient if you are not safe yourself.  *Your scene size up gives you a big-picture view of what is going on before you even begin examining the patient and includes determining the mechanism of injury and number of patients, requesting additional help if necessary, and considering stabilization of the spine.  *In this case, you would have learned that this is a near drowning incident, which should have prompted you to think about potential head or spinal injury, and the need for rescue breaths",feedbackOutOfOrder:"Your first steps should have been to don your protective wear, including eye protection, and to ensure the scene is safe. You cannot assist a patient if you are not safe yourself. Your scene size up also gives you a big-picture view of what is going on before you even begin examining the patient. This includes determining the mechanism of injury and number of patients, requesting additional help if necessary, and considering stabilization of spine.",feedbackErrors:"",examine:!1,prompts:"",subActionsList:!0,subActions:[{id:["required-action-BSI"],label:"Apply BSI",type:"Required",feedbackAbsent:"Your first steps should have been to don your protective wear, including eye protection, and to ensure the scene is safe. You cannot assist a patient if you are not safe yourself.",feedbackOutOfOrder:"",feedbackErrors:"",examine:!1,prompts:"",subActionsList:!1,subActions:[]},{id:["assess-scene-safety"],label:"Determine the scene/situation is safe",type:"Required",feedbackAbsent:"Your first steps should have been to don your protective wear, including eye protection, and to ensure the scene is safe. You cannot assist a patient if you are not safe yourself.",feedbackOutOfOrder:"",feedbackErrors:"",examine:!1,prompts:"",subActionsList:!1,subActions:[]},{id:["assess-injury-mechanism"],label:"Determine the mechanism of injury (MOI) or nature of illness (NOI)",type:"Required",feedbackAbsent:"Knowing what caused the patient's injury or illness can allow you to start developing a plan of action before you even assess your patient. *By determining the mechanism of injury, you would have learned that this is a near drowning incident, which should have prompted you to think about potential head or spinal injury, and the need for rescue breaths and/or CPR.",feedbackOutOfOrder:"",feedbackErrors:"",examine:!1,prompts:"",subActionsList:!1,subActions:[]},{id:["assess-num-patients"],label:"Determine the number of patients",type:"Required",feedbackAbsent:"Usually you will have one patient, but if there is more than one you will need to plan accordingly.",feedbackOutOfOrder:"",feedbackErrors:"",examine:!1,prompts:"",subActionsList:!1,subActions:[]},{id:["required-action-requests-additional-help"],label:"Request additional help if necessary",type:"Required",feedbackAbsent:"Consider the need for extra help based on number of patients, mechanism of injury, and your patient's status. *Although police and fire personnel were already on scene, you should have considered the need for additional ALS support.",feedbackOutOfOrder:"",feedbackErrors:"",examine:!1,prompts:"",subActionsList:!1,subActions:[]},{id:["required-action-considers-stabilize-spine"],label:"Consider stabilization of spine",type:"Required",feedbackAbsent:"All trauma patients are at risk for spinal injury, including drowning or near drowning patients, which could be caused by a diving accident. Take this into consideration before initial contact with the patient to prevent unintentional injury.",feedbackOutOfOrder:"",feedbackErrors:"",examine:!1,prompts:"",subActionsList:!1,subActions:[]}]},{id:["primary-survey"],label:"Perform a Primary Survey and manage all identified life threats",type:"Required",feedbackAbsent:"The primary survey is an assessment of mental status, life-threats, and the patient's ABCs. It is where you will identify and address the patient's most serious injuries. *In this case, the Primary Survey would have revealed an unconscious patient with respiratory failure and a weak and slow pulse.",feedbackOutOfOrder:"You should have started your Primary Survey after the Scene Size-up and completed it before starting the Secondary Survey. Only interrupt your assessment to control these life-threats: (1) compromised airway, (2) tension pneumothorax, (3) severe hemorrhage, and (4) cardiac arrest. Problems identifed during the primary survey can be life threatening, and if they are not adequately addressed, your patient may deteriorate as you continue on with your examination.",feedbackErrors:"",examine:!1,prompts:"",subActionsList:!0,subActions:[{id:["general-impression"],label:"Conduct an Initial Assessment",type:"Required",feedbackAbsent:"You should have performed an Initial Assessment: gathered a general impression, identified any apparent life threats, and determined your patient's level of consciousness.  Your Initial Assessment  would have revealed a patient who is unconscious.",feedbackOutOfOrder:"While you may be tempted to jump straight into your ABCs, apparent life threats (ie. uncontrolled bleeding) should be addressed first, as they can cause a patient to deteriorate quickly. Also, be sure to assess the patient's mental status, as an unconscious patient will need a pulse check first, to ensure he or she does not require CPR.",feedbackErrors:"",examine:!1,prompts:"",subActionsList:!0,subActions:[{id:["assess-patient-condition"],label:"State or request a general impression",type:"Required",feedbackAbsent:"Your general impression allows you to start developing a plan of action before you even assess your patient. *In this case, your general impression would have been of a child who nearly drowned.",feedbackOutOfOrder:"",feedbackErrors:"",examine:!1,prompts:"",subActionsList:!1,subActions:[]},{id:["assess-loc"],label:"Assess the patient's level of consciousness",type:"Required",feedbackAbsent:"The patient's level of consciousness alters how you progress through your assessment. *This patient was unresponsive with sluggish pupils.  This should have prompted you to consider him a critical patient, check his pulse prior to airway and breathing, and plan for urgent transfer to a nearby trauma center.",feedbackOutOfOrder:"",feedbackErrors:"",examine:!1,prompts:"",subActionsList:!1,subActions:[]},{id:["assess-life-threats"],label:"Determine the chief complaint/apparent life-threats",type:"Required",feedbackAbsent:"If you had determined apparent life threats, you would have noticed that the patient was unresponsive, indicating a critical patient.",feedbackOutOfOrder:"",feedbackErrors:"",examine:!1,prompts:"",subActionsList:!1,subActions:[]}]},{id:["Manage a potential head or spinal injury"],label:"Manage a potential head or spinal injury",type:"Required",feedbackAbsent:"Although the exact MOI is unknown, you should suspect possible head and/or spinal injury with any near drowning incident as diving may have been involved. You should have taken manual c-spine stabilization before performing your ABC assessment and maintained it throughout, and applied an appropriately sized cervical collar.",feedbackOutOfOrder:"Managing the cervical spine is one of the first things you should do for any trauma patient, as you must ensure you do not cause any further injury during the remainder of your assessment and management.",feedbackErrors:"",examine:!0,prompts:"didn't recall that spinal injury should be considered in every near drowning incident; did not consider risk for cervical spine injury based on provided information",subActionsList:!0,subActions:[{id:["intv-spinal-immobilization-technique-manual-c-spine"],label:"Apply (or direct a partner to apply) manual c-spine stabilization",type:"Required",feedbackAbsent:"Part of managing a head and/or spinal injury includes manual stabilization of the cervical spine before beginning your assessment, as movement may further injure the patient.",feedbackOutOfOrder:"",feedbackErrors:"",examine:!1,prompts:"",subActionsList:!1,subActions:[]},{id:["intv-spinal-immobilization-technique-cervical-collar"],label:"Apply an appropriately sized cervical collar",type:"Required",feedbackAbsent:"A cervical collar will help you maintain stability while you continue with your exam.",feedbackOutOfOrder:"",feedbackErrors:"",examine:!1,prompts:"",subActionsList:!1,subActions:[]}]},{id:["airway"],label:"Assess the patient's airway",type:"Required",feedbackAbsent:"Be sure to assess the airway for patency and intact physical structures. *You would have found this patient's airway to be partially obstructed with vomit and water, indicating the need for suctioning.",feedbackOutOfOrder:"If your patient is conscious, you should examine the airway before breathing and circulation. If a patient is unconscious, you should assess the pulse first to evaluate for possible cardiac arrest, then go through your ABCs.",feedbackErrors:"",examine:!1,prompts:"",subActionsList:!0,subActions:[{id:["airway-is-open"],label:"Check if the airway is patent",type:"Required",feedbackAbsent:"The first step of your airway assessment is to see if the patient's airway is open. If the patient is speaking normally, it is open. Signs like stridor or gasping may indicate an airway obstruction. *This patient's airway was partially obstructed with vomit and water, which should have been suctioned.",feedbackOutOfOrder:"",feedbackErrors:"",examine:!1,prompts:"",subActionsList:!1,subActions:[]},{id:["airway-has-intact-physical-structures"],label:"Check if the airway has intact physical structures",type:"Required",feedbackAbsent:"Though this patient did not have any facial trauma, be sure to look for injuries such as gun-shot wounds or facial fractures, as these may affect what basic or advanced airways you can use.",feedbackOutOfOrder:"",feedbackErrors:"",examine:!1,prompts:"",subActionsList:!1,subActions:[]}]},{id:["Manage a compromised airway"],label:"Manage the patient\u2019s compromised airway",type:"Required",feedbackAbsent:"This patient was unable to protect his airway, as evidenced by his being unconscious and having an obstructed airway. You should have managed this airway with suctioning, ventilating with a BVM, and ultimately intubating him.",feedbackOutOfOrder:"You should identify any airway obstructions, including blood, vomiting, and secretions while checking the patency of your patient's airway. Any obstruction should be addressed at that time.",feedbackErrors:"",examine:!0,prompts:"didn't recognize that being unconscious was an indication for intubation; didn't recognize that the patient's airway was obstructed and needed suctioning",subActionsList:!0,subActions:[{id:["intv-open-airway-method-modified-jaw-thrust"],label:"Open the patient's airway with a jaw thrust maneuver",type:"Required",feedbackAbsent:"The patient is at risk for a cervical spine injury, so opening the airway via head tilt can compromise spinal stability. Instead, you use the jaw-thrust technique to open the airway while maintaining the cervical spine.",feedbackOutOfOrder:"",feedbackErrors:"",examine:!1,prompts:"",subActionsList:!1,subActions:[]},{id:["intv-open-airway-method-head-tilt"],label:"Head tilt chin lift",type:"Contraindicated",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"A head-tilt chin lift is contraindicated for a patient with suspected c-spine injury as tilting the head could cause further damage to the neck. You should have used a modified jaw thrust to check this patient's airway.",examine:!1,prompts:"",subActionsList:!1,subActions:[]},{id:["intv-airway-patency-technique-suction-airway"],label:"Suction the patient's mouth using a Yankauer (rigid)  or Long multi-use catheter",type:"Required",feedbackAbsent:"This patient had water and vomit in his airway, which should have been suctioned to establish a patent airway.",feedbackOutOfOrder:"",feedbackErrors:"Both Yankauer and Long multi-use catheters are appropriate for oral suctioning; however, Yankauer would be more effective for suctioning large volumes of blood, vomit, etc. ",examine:!0,prompts:"didn't ensure the airway was clear; did not think the vomit or water needed to be suctioned prior to intubation",subActionsList:!1,subActions:[]},{id:["intv-manual-finger-sweep"],label:"Manual (finger sweep)",type:"Contraindicated",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"If there is a visible foreign body in the mouth, it should be removed. However, a blind finger sweep is contraindicated as it could lodge a foreign body deeper into the airway.",examine:!0,prompts:"",subActionsList:!1,subActions:[]},{id:["intv-magill-forceps-assisted"],label:"Magill forceps assisted removal",type:"contraindicated",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"If there is a visible foreign body in the mouth, it should be removed. However, there is no evidence of a foreign body in this patient's mouth.",examine:!1,prompts:"",subActionsList:!1,subActions:[]},{id:["intv-heimlich-maneuver"],label:"Heimlich Maneuver",type:"contraindicated",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"You have no evidence the patient is choking on an object so the Heimlich maneuver is not appropriate at this time.",examine:!1,prompts:"",subActionsList:!1,subActions:[]},{id:["intv-back-blows-and-chest-thrusts"],label:"Back blows and chest thrusts",type:"contraindicated",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"You have no evidence the patient is choking on an object so back blows and chest thrusts are not appropriate at this time.",examine:!1,prompts:"",subActionsList:!1,subActions:[]},{id:["intv-orotracheal-intubation"],label:"Ultimately, perform orotracheal intubation, by placing a size 4.5 or 5.0 ET tube, inserted at the correct depth",type:"Required",feedbackAbsent:"Utlimately, this patient should be intubated.  Since he is unconscious, you need a reliable way to oxygenate and venilate this patient. While use of an oral adjunct and BVM ventilation is a good start, a more secure airway would be preferred. Orotracheal intubation would be most appropriate because he lacks a gag reflex.",feedbackOutOfOrder:"",feedbackErrors:"Inserting an appropriately sized  endotracheal tube (ETT) is the most appropriate method of securing this patient's airay, since he lacks a gag reflex. * Calculate the appropriate size ET tube for a child with the equation age/4 +1. This is the correct size for an uncuffed tube; go down by .5 for a cuffed tube. This child needed a 4.5 cuffed or 5.0 uncuffed tube.  The insertion depth for children is 3cm * (tube size), so about 15cm.",examine:!0,prompts:"didn't realize the patient needed to be intubated; didn't recall how to calculate the size of an ET tube for a child; didn't recall how to calculate the depth of an ET tube for a child",subActionsList:!1,subActions:[]},{id:["intv-nasotracheal-intubation"],label:"Nasotracheal intubation",type:"contraindicated",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"Nasotracheal intubation is only indicated for specific scenarios where access via the mouth is limited, such as profuse angioedema or trismus. It is a blind procedure and much more difficult than orotracheal intubation so in this patient who has a patent and intact oral airway, orotracheal intubation is preferred.",examine:!1,prompts:"",subActionsList:!1,subActions:[]},{id:["intv-rapid-sequence-intubation"],label:"Rapid-sequence intubation",type:"contraindicated",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"RSI is not in the paramedic's scope of practice in Pennsylvania",examine:!0,prompts:"didn't know what type of intubation can be performed in pediatric patients in PA.",subActionsList:!1,subActions:[]},{id:["intv-sedation-assisted-intubation"],label:"Sedation-assisted intubation",type:"contraindicated",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"Sedation assisted intubation is contraindicated for pediatric patients in PA.  Since this patient is unconscious, orotracheal intubation would be the best option for securing the patient's airway.",examine:!0,prompts:"didn't know what type of intubation can be performed in pediatric patients in PA.",subActionsList:!1,subActions:[]},{id:["intv-needle-cricothyrotomy"],label:"Needle cricothyrotomy",type:"contraindicated",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"A cricothrotomy is indicated when there is an upper airway obstruction that cannot be removed. This patient has a patent airway.",examine:!0,prompts:"thought the patient had an upper airway obstruction",subActionsList:!1,subActions:[]},{id:["intv-surgical-cricothyrotomy"],label:"Surgical cricothyrotomy",type:"contraindicated",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"A cricothrotomy is indicated when there is an upper airway obstruction that cannot be removed. This patient has a patent airway.",examine:!0,prompts:"thought the patient had an upper airway obstruction",subActionsList:!1,subActions:[]}]},{id:["breathing"],label:"Assess the patient's breathing",type:"Required",feedbackAbsent:"After assessing the patient's airway, assess their breathing by listening for breath sounds and observing their respiratory rate, rhythm, and effort. *You would have found bradypnea and heard gurgling.  This should have prompted you to apply BVM ventilation or other ventilatory support.",feedbackOutOfOrder:"",feedbackErrors:"",examine:!1,prompts:"",subActionsList:!0,subActions:[{id:["breathing-checks-rate"],label:"rate",type:"Required",feedbackAbsent:"A significantly elevated or depressed respiratory rate can suggest impending respiratory failure. *This patient's bradypnea suggests the need for ventilatory support, not just oxygenation.",feedbackOutOfOrder:"",feedbackErrors:"",examine:!1,prompts:"",subActionsList:!1,subActions:[]},{id:["breathing-checks-rhythm"],label:"rhythm",type:"Required",feedbackAbsent:"Although not found in this case, a patient who is breathing irregularly needs ventilatory support.",feedbackOutOfOrder:"",feedbackErrors:"",examine:!1,prompts:"",subActionsList:!1,subActions:[]},{id:["breathing-checks-quality"],label:"quality",type:"Required",feedbackAbsent:"Sounds like stridor, crackles, or wheezing will help you diagnose and manage your patient's respiratory problems. *This patient had gurgling and bilateral rhonchi, suggesting the need for ventilatory support, not just oxygenation. ",feedbackOutOfOrder:"",feedbackErrors:"",examine:!1,prompts:"",subActionsList:!1,subActions:[]}]},{id:["Manage inadequate breathing"],label:"Manage inadequate breathing",type:"Required",feedbackAbsent:"The patient's respiratory rate is 6 with rhonchi appreciable on exam and no SpO2 capture. This patient needs both oxygen and ventilatory support, so O2 via nasal canula or ventimask would be inadequate.",feedbackOutOfOrder:"Problems with ventilation and oxygenation are life threatening and should be addressed before you move on to your secondary survey. Repeat your exam and check vitals to ensure your interventions have worked as you expected. If not, your patient may deteriorate as you continue on with your examination.",feedbackErrors:"",examine:!0,prompts:"didn't realize that the patient's respiratory status was threatened ",subActionsList:!0,subActions:[{id:["intv-ventilation-technique-bag-valve-mask"],label:"Ventilate the patient at a rate of 20 BPM, while titrating oxygen at a flow rate of 15 L/min to a target SpO2 >= 90%",type:"Required",feedbackAbsent:"The patient's respiratory rate is 6 with rhonchi appreciable on exam and no SpO2 capture. This patient needs both oxygen and ventilatory support, so O2 via nasal canula or ventimask would be inadequate.",feedbackOutOfOrder:"",feedbackErrors:"This patient should have been ventilated at a rate of 20 breaths per minute, which is the recommended rate for a child aged 2-12. When performing BVM ventilation, you use 15LPM O2 in order to both oxygenate and ventilate the patient.",examine:!1,prompts:"",subActionsList:!1,subActions:[]},{id:["intv-supplemental-oxygen-device-nasal-cannula"],label:"Nasal cannula",type:"Required",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"This patient was unresponsive with slow, gurgling breaths, indicating the need for ventilation, not just oxygentation.  25 LPM of O2 via nasal cannula while simultaneously performing BVM ventilations with high-flow oxygen could be used for pre-oxygenation prior to intubation.  However, it would not be adequate in this case if not coupled with BVM ventilation.",examine:!0,prompts:"didn't realize the patient needed to be ventilated; didn't realize this method of O2 delivery would not be able to assist with ventilation",subActionsList:!1,subActions:[]},{id:["intv-supplemental-oxygen-device-non-rebreather-mask"],label:"Non-rebreather mask",type:"contraindicated",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"This patient was unresponsive with slow, gurggling breaths, indicating need for ventilation, not just oxygentation. O2 delivery via a non-rebreather mask would not be adequate in this case, as it does not assist with ventilation.",examine:!0,prompts:"didn't realize the patient needed to be ventilated; didn't realize this method of O2 delivery would not be able to assist with ventilation",subActionsList:!1,subActions:[]},{id:["intv-occlusive-dressing"],label:"Occlusive dressing",type:"contraindicated",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"The patient did not have a penetrating chest wound.",examine:!1,prompts:"",subActionsList:!1,subActions:[]},{id:["intv-pleural-decompression"],label:"Needle decompression",type:"contraindicated",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"The patient did not have a tension pneumothorax. Notice that the patient had equal lung sounds bilaterally and improved after intubation.",examine:!0,prompts:"thought the child had a tension pneumothorax",subActionsList:!1,subActions:[]}]},{id:["circulation"],label:"Assess the patient's circulation",type:"Required",feedbackAbsent:"Evaluate the patient's pulse and skin to assess the patient for shock.  Be sure to also perform a gross blood sweep. *You would have noticed that your patient had weak slow pulses and dry cyanotic skin, indicating impending respiratory failure.",feedbackOutOfOrder:"All unconscious patients should have a pulse check before starting the ABCs. If the patient is pulseless, you will start high-quality CPR immediately.",feedbackErrors:"",examine:!1,prompts:"",subActionsList:!0,subActions:[{id:["pulse-checks"],label:"check pulse",type:"Required",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"",examine:!1,prompts:"",subActionsList:!0,subActions:[{id:["checks-pulse-rate"],label:"rate",type:"Required",feedbackAbsent:"Checking this patient's pulse rate would have revealed that he was bradycardic. A significantly elevated or depressed pulse rate can suggest shock or respiratory failure. ",feedbackOutOfOrder:"",feedbackErrors:"",examine:!1,prompts:"",subActionsList:!1,subActions:[]},{id:["checks-pulse-rhythm"],label:"rhythm",type:"Required",feedbackAbsent:"While this patient's heart had a regular rhythm, remember that an irregular rhythm can suggest impending cardiac arrest or arrhythmia.",feedbackOutOfOrder:"",feedbackErrors:"",examine:!1,prompts:"",subActionsList:!1,subActions:[]},{id:["checks-pulse-quality"],label:"quality",type:"Required",feedbackAbsent:"Checking this patient's pulse quality would have revealed that he had weak radial pulses, indicating inadequate cardiac output.",feedbackOutOfOrder:"",feedbackErrors:"",examine:!1,prompts:"",subActionsList:!1,subActions:[]}]},{id:["checks-skin"],label:"checks skin",type:"Required",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"",examine:!1,prompts:"",subActionsList:!0,subActions:[{id:["checks-skin-color"],label:"color",type:"Required",feedbackAbsent:"By checking this patient's skin color, you would have noticed he had dry, cyanotic skin. Pallor and cyanosis are signs of inadequate oxygenation and may be caused by respiratory failure or shock.",feedbackOutOfOrder:"",feedbackErrors:"",examine:!1,prompts:"",subActionsList:!1,subActions:[]},{id:["checks-skin-temperature"],label:"temperature",type:"Required",feedbackAbsent:"By checking skin temperature, you would have noticed cold skin, which could be because of inadequate perfusion (decompensated shock) or environmental factors.",feedbackOutOfOrder:"",feedbackErrors:"",examine:!1,prompts:"",subActionsList:!1,subActions:[]},{id:["checks-skin-condition"],label:"condition",type:"Required",feedbackAbsent:"In this case, the patient had been pulled from a pool, making a skin exam challenging, but remember that clammy, diaphoretic skin suggests shock.",feedbackOutOfOrder:"",feedbackErrors:"",examine:!1,prompts:"",subActionsList:!1,subActions:[]}]},{id:["assess-major-bleeding"],label:"Perform a gross blood sweep",type:"Required",feedbackAbsent:"A gross blood sweep, which was negative in this patient, will help you identify any life-threatening bleeding you may have missed earlier when forming your general impression.",feedbackOutOfOrder:"",feedbackErrors:"",examine:!1,prompts:"",subActionsList:!1,subActions:[]}]},{id:["intv-control-severe-bleeding-technique-direct-pressure"],label:"Direct pressure",type:"contraindicated",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"The patient did not have significant bleeding.",examine:!1,prompts:"",subActionsList:!1,subActions:[]},{id:["intv-control-severe-bleeding-technique-tourniquet"],label:"Tourniquet",type:"contraindicated",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"The patient did not have significant bleeding.",examine:!1,prompts:"",subActionsList:!1,subActions:[]},{id:["intv-control-severe-bleeding-technique-2nd-tourniquet"],label:"Second tourniquet",type:"contraindicated",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"The patient did not have significant bleeding.",examine:!1,prompts:"",subActionsList:!1,subActions:[]},{id:["intv-control-severe-bleeding-technique-pack-wound-with-gauze"],label:"Pack wound with gauze or hemostatic gauze",type:"contraindicated",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"The patient did not have significant bleeding.",examine:!1,prompts:"",subActionsList:!1,subActions:[]},{id:["intv-control-severe-bleeding-technique-pressure-bandage"],label:"Pressure dressing",type:"contraindicated",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"The patient did not have significant bleeding.",examine:!1,prompts:"",subActionsList:!1,subActions:[]},{id:["intv-control-severe-bleeding-technique-load-and-go"],label:"Load and go due to uncontrolled bleeding.",type:"contraindicated",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"The patient did not have significant bleeding.",examine:!1,prompts:"",subActionsList:!1,subActions:[]},{id:["transport-decision"],label:"Make appropriate transport decisions based on your findings so far",type:"Required",feedbackAbsent:"Your ABCs and evaluation for life threats and level of consciousness will dictate where you transfer your patient. *This patient was critically ill so you should have decided to transport him to the level 1 pediatric  trauma center.",feedbackOutOfOrder:"Transport decisions should be made before beginning your secondary survey based on the information you have gathered thus far. This is especially important if you are calling for an air ambulance to account for the time it takes for them to arrive.",feedbackErrors:"",examine:!1,prompts:"",subActionsList:!0,subActions:[{id:["decision-is-load-and-go"],label:"Determine that this is a critical patient",type:"Required",feedbackAbsent:"This patient is unconscious and needs ventilatory support. This patient should be considered critical.",feedbackOutOfOrder:"",feedbackErrors:"",examine:!0,prompts:"didn't realize this was a critically ill patient; felt this patient should be further stabilized on site prior to transfer",subActionsList:!1,subActions:[]},{id:["intv-transport"],label:"Decide to transport this patient to a Level 1 pediatric trauma center by air ambulance",type:"Required",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"This patient requires a pediatric trauma center because of age and physiological criteria. The physiological criteria indicating that the patient requires this type of facility are respiratory rate of less than 10 and GCS <5 (not following commands). *The level 1 pediatric trauma center is 16 minutes away by air in this scenario; transport to this facility would only be contraindicated by a transport time > 45 minutes.",examine:!0,prompts:"did not realize patient requires higher level of service than level II adult facility",subActionsList:!1,subActions:[]}]},{id:["ints-call-for-helicopter"],label:"Call for an air ambulance",type:"Required",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"",examine:!1,prompts:"",subActionsList:!1,subActions:[]},{id:["exposes-body-parts"],label:"Trauma expose the patient",type:"Required",feedbackAbsent:"Without exposing your patient, your head-to-toe exam may be hindered and you could miss an important exam finding.",feedbackOutOfOrder:"It is important to trauma expose your patient to ensure that your secondary survey can be performed efficiently.",feedbackErrors:"",examine:!1,prompts:"",subActionsList:!1,subActions:[]}]},{id:["history-taking"],label:"Obtain or direct a partner to obtain a patient history",type:"Required",feedbackAbsent:"",feedbackOutOfOrder:"You should have obtained a set of vitals or directed a partner to do so before beginning your Secondary Survey. A patient's vital signs may prompt you to repeat parts of your Primary Assessment before moving onto the Secondary Survey.",feedbackErrors:"",examine:!1,prompts:"",subActionsList:!0,subActions:[{id:["required-action-obtains-vitals"],label:"Baseline vital signs",type:"Required",feedbackAbsent:"Baseline vitals are critical; they will help you assess, manage, and continue to monitor your patient. *You would have found that this patient was bradycardic, bradypnic, hypoxic, and hypotensive, alerting you to a critical patient who needed prompt intervention.",feedbackOutOfOrder:"",feedbackErrors:"",examine:!1,prompts:"",subActionsList:!1,subActions:[]},{id:["required-action-attempt-obtain-sample"],label:"SAMPLE (if possible)",type:"Required",feedbackAbsent:"Take an efficient but thorough history from the baby sitter: symptoms, allergies, medications, past medical history, last oral intake, events preceding. *You would have learned that the child was left unattended on a floating mattress in the pool for 5 minutes, found underwater, and then pulled out of the pool.",feedbackOutOfOrder:"",feedbackErrors:"",examine:!1,prompts:"",subActionsList:!1,subActions:[]},{id:["required-action-obtain-OPQRST"],label:"OPQRST (if possible)",type:"Required",feedbackAbsent:"Assess the patient's pain: onset, provocation/palliation, quality, region/radiation, severity, and time. If the patient cannot tell you his or herself, you should ask a family member or other bystander for whatever information they may have.",feedbackOutOfOrder:"",feedbackErrors:"",examine:!1,prompts:"",subActionsList:!1,subActions:[]}]},{id:["secondary-assessment"],label:"Perform a Secondary Survey (rapid trauma assessment)",type:"Required",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"",examine:!1,prompts:"",subActionsList:!0,subActions:[{id:["head"],label:"examine the patient's head",type:"Required",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"",examine:!1,prompts:"",subActionsList:!0,subActions:[{id:["inspects-and-palpates-skull"],label:"Inspect and palpate the scalp and skull",type:"Required",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"",examine:!1,prompts:"",subActionsList:!1,subActions:[]},{id:["assessment-inspects-facial-bones"],label:"Inspect and palpate the facial bones",type:"Required",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"",examine:!1,prompts:"",subActionsList:!1,subActions:[]},{id:["inspects-eyes"],label:'Inspect the eyes for PERRLA and bruising ("raccoon eyes")',type:"Required",feedbackAbsent:"Checking for PERRLA would have revealed that  the patient's pupils were equal but sluggish, suggesting possible intracranial injury and a critically ill patient who needed rapid transfer to a trauma center. *Additionally, bruising around the eyes may be caused by basilar skull fracture.",feedbackOutOfOrder:"",feedbackErrors:"",examine:!1,prompts:"",subActionsList:!1,subActions:[{id:["inspects-eyes-PERRLA"],subActions:[]},{id:["inspects-eyes-racoon"],subActions:[]}]},{id:["inspects-ears"],label:'Inspect the ears for blood, other fluids, and bruising ("battle signs")',type:"Required",feedbackAbsent:"Bleeding from the ear may be indicative of a basilar skull fracture. Bruising behind the ear suggests a basilar skull fracture (Battle's sign).",feedbackOutOfOrder:"",feedbackErrors:"",examine:!1,prompts:"",subActionsList:!1,subActions:[{id:["inspects-ears-blood"],subActions:[]},{id:["inspects-ears-bruising"],subActions:[]}]},{id:["inspects-nose-secretions"],label:"Inspect the nose for blood and other fluids",type:"Required",feedbackAbsent:"Clear drainage may be CSF from a basilar skull fracture.",feedbackOutOfOrder:"",feedbackErrors:"",examine:!1,prompts:"",subActionsList:!1,subActions:[]},{id:["inspects-mouth"],label:"Inspect the mouth for blood, other secretions, and obstructions",type:"Required",feedbackAbsent:"During your primary survey, you should have noticed water and vomit in the patient's mouth; you should have suctioned the patient's airway.  If you had done this, at this stage the patient's airway would be clear of secretions. If you had not suctioned the airway, there would still be vomit and water in the mouth.",feedbackOutOfOrder:"",feedbackErrors:"",examine:!1,prompts:"",subActionsList:!1,subActions:[{id:["inspects-mouth-fluids"],subActions:[]},{id:["inspects-mouth-obstructions"],subActions:[]}]}]},{id:["neck"],label:"examine the patient's neck",type:"Required",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"",examine:!1,prompts:"",subActionsList:!0,subActions:[{id:["assessment-neck-injury"],label:"injury",type:"Required",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"",examine:!1,prompts:"",subActionsList:!1,subActions:[]},{id:["assessment-neck-crepitation"],label:"crepitation",type:"Required",feedbackAbsent:"This patient's neck exam was normal, but remember, neck crepitation means there is air outside of the lungs and/or airway, which should raise your suspicion for a pneumothorax or injury to the upper airway.",feedbackOutOfOrder:"",feedbackErrors:"",examine:!1,prompts:"",subActionsList:!1,subActions:[]},{id:["assessment-tracheal-deviation"],label:"tracheal deviation",type:"Required",feedbackAbsent:"This patient's neck exam was normal, but remember, tracheal deviation suggests unequal intrathoracic pressure (for example, a pneumothorax). The trachea will be deviated away from the side with increased pressure.",feedbackOutOfOrder:"",feedbackErrors:"",examine:!1,prompts:"",subActionsList:!1,subActions:[]},{id:["assessment-JVD"],label:"jugular venous distension (JVD)",type:"Required",feedbackAbsent:"This patient's neck exam was normal, but remember,  JVD suggests that the heart is not adequately pushing out blood. Consider obstructive processes like a tension pneumothorax or hemothorax.",feedbackOutOfOrder:"",feedbackErrors:"",examine:!1,prompts:"",subActionsList:!1,subActions:[]},{id:["assessment-stepoffs"],label:"step-offs",type:"Required",feedbackAbsent:"This patient's neck exam was normal, but remember, a palable step-off suggests a fracture.",feedbackOutOfOrder:"",feedbackErrors:"",examine:!1,prompts:"",subActionsList:!1,subActions:[]}]},{id:["chest"],label:"examine the patient's chest",type:"Required",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"",examine:!1,prompts:"",subActionsList:!0,subActions:[{id:["assessment-check-breath-sounds"],label:"Listen for breath sounds",type:"Required",feedbackAbsent:"The presence and quality of breath sounds can clue you into underlying problems (eg. pneumothorax, asthma, fluid build-up in the lungs). *This patient had rales and crackles, suggesting fluid in the alveoli and interstitum of the lungs and possible pulmonary edema.",feedbackOutOfOrder:"",feedbackErrors:"",examine:!1,prompts:"",subActionsList:!1,subActions:[]},{id:["assessment-shoulders"],label:"Inspect and palpate shoulders",type:"Required",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"",examine:!1,prompts:"",subActionsList:!1,subActions:[]},{id:["assessment-clavicles"],label:"Inspect and palpates clavicles",type:"Required",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"",examine:!1,prompts:"",subActionsList:!1,subActions:[]},{id:["inspects-palpates-anterior-thorax"],label:"Inspect and palpate anterior thorax for injury, crepitation, and paradoxial motion or flail segments",type:"Required",feedbackAbsent:"If the patient had had anterior thorax and rib crepitation, you should suspect air outside of the lungs, which whould raise your suspicion for a pneumothorax. *The patient had symmetric movement of his chest. Recall that paradoxical chest wall motion suggests flail chest, where multiple rib fractures lead to an unstable portion of the chest wall.",feedbackOutOfOrder:"",feedbackErrors:"",examine:!1,prompts:"",subActionsList:!1,subActions:[{id:["inspects-chest-injury"],subActions:[]},{id:["inspects-palpates-anterior-thorax-crepitation"],subActions:[]},{id:["inspects-anterior-thorax-paradoxical-motion"],subActions:[]}]}]},{id:["abdomen-pelvis"],label:"examine the patient's abdomen",type:"Required",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"",examine:!1,prompts:"",subActionsList:!0,subActions:[{id:["inspects-abdomen-injury"],label:" inspect and palpate for injury",type:"Required",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"",examine:!1,prompts:"",subActionsList:!1,subActions:[]},{id:["inspects-palpates-abdomen-distension"],label:"inspect and palpate for distension",type:"Required",feedbackAbsent:"A distended abdomen suggests trauma and internal bleeding. Fortunately, the patient's abdominal exam was normal.",feedbackOutOfOrder:"",feedbackErrors:"",examine:!1,prompts:"",subActionsList:!1,subActions:[]},{id:["inspects-palpates-abdomen-rigidity"],label:"inspect and palpate for rigidity",type:"Required",feedbackAbsent:"A rigid abdomen suggests trauma and internal bleeding. Fortunately, the patient's abdominal exam was normal.",feedbackOutOfOrder:"",feedbackErrors:"",examine:!1,prompts:"",subActionsList:!1,subActions:[]}]},{id:["assess-pelvis"],label:"examine the patient's pelvis",type:"Required",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"",examine:!1,prompts:"",subActionsList:!0,subActions:[{id:["assessment-checks-pelvis"],label:"Inspect and compress the pelvis",type:"Required",feedbackAbsent:"Be sure to do a thorough exam of the pevis as the pelvis can be a source of life-threatening bleeding.",feedbackOutOfOrder:"",feedbackErrors:"",examine:!1,prompts:"",subActionsList:!1,subActions:[]},{id:["inspects-genitalia-perineum"],label:"Inspect the genitalia/perineum for blood, other fluids, and priapism (male)",type:"Required",feedbackAbsent:"In a male patient priaprism can indicate injury to either the spinal cord or the genitals themselves.",feedbackOutOfOrder:"",feedbackErrors:"",examine:!1,prompts:"",subActionsList:!1,subActions:[{id:["inspects-genitalia-perineum-blood"],subActions:[]},{id:["inspects-genitalia-perineum-priapism-hemorrhage"],subActions:[]}]}]},{id:["extremities"],label:"examine the patient's upper and lower extremities",type:"Required",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"",examine:!1,prompts:"",subActionsList:!0,subActions:[{id:["inspects-extremities-injury"],label:"Inspect and palpate each extremity for injury",type:"Required",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"",examine:!1,prompts:"",subActionsList:!1,subActions:[{id:["inspects-right-arm-injury"],subActions:[]},{id:["inspects-left-arm-injury"],subActions:[]},{id:["inspects-right-leg-injury"],subActions:[]},{id:["inspects-left-leg-injury"],subActions:[]}]},{id:["inspects-extremities-pulse"],label:"Inspect and palpate each extremity for pulse",type:"Required",feedbackAbsent:"If you had checked this patient's extremity pulses, you would have noticed weak extremity pulses, due to inadequate cardiac output.",feedbackOutOfOrder:"",feedbackErrors:"",examine:!1,prompts:"",subActionsList:!1,subActions:[{id:["inspects-right-arm-pulse"],subActions:[]},{id:["inspects-left-arm-pulse"],subActions:[]},{id:["inspects-right-leg-pulse"],subActions:[]},{id:["inspects-left-leg-pulse"],subActions:[]}]},{id:["inspects-extremities-motor-function"],label:"Inspect and palpate each extremity for motor function",type:"Required",feedbackAbsent:"Generally, diminished or absent mobility may suggest spinal cord or other nervous system injury, but you were not able to perform a motor assessment in this unconscious patient.",feedbackOutOfOrder:"",feedbackErrors:"",examine:!1,prompts:"",subActionsList:!1,subActions:[{id:["inspects-right-arm-motor-ability"],subActions:[]},{id:["inspects-left-arm-motor-ability"],subActions:[]},{id:["inspects-right-leg-motor-ability"],subActions:[]},{id:["inspects-left-leg-motor-ability"],subActions:[]}]},{id:["inspects-extremities-sensory-function"],label:"Inspect and palpate each extremity for sensory function",type:"Required",feedbackAbsent:"Generally, iminished or absent sensation may suggest spinal cord or other nervous system injury, but you were not able to perform a motor assessment in this unconscious patient.",feedbackOutOfOrder:"",feedbackErrors:"",examine:!1,prompts:"",subActionsList:!1,subActions:[{id:["inspects-right-arm-sensory-function"],subActions:[]},{id:["inspects-left-arm-sensory-function"],subActions:[]},{id:["inspects-right-leg-sensory-function"],subActions:[]},{id:["inspects-left-leg-sensory-function"],subActions:[]}]}]},{id:["posterior"],label:"examine the patient's posterior thorax, lumbar, and buttocks",type:"Required",feedbackAbsent:"You will need a partner to help you roll the patient safely in order to do a thorough exam of the posterior thorax, lumbar, and buttocks.",feedbackOutOfOrder:"",feedbackErrors:"",examine:!1,prompts:"",subActionsList:!0,subActions:[{id:["inspects-palpates-posterior"],label:"inspect and palpate the posterior for injury, crepitation and step-offs",type:"Required",feedbackAbsent:"Crepitation suggests underlying injury. A palpable step-off suggests a fracture.",feedbackOutOfOrder:"",feedbackErrors:"",examine:!1,prompts:"",subActionsList:!1,subActions:[{id:["inspects-posterior-other-injury"],subActions:[]},{id:["inspects-posterior-crepitation"],subActions:[]},{id:["inspects-posterior-step-offs"],subActions:[]}]}]}]},{id:["Perform ongoing patient assessment and management"],label:"Continue to provide adequate prehospital care until arriving at the receiving faciliaty",type:"Required",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"",examine:!1,prompts:"",subActionsList:!0,subActions:[{id:["intv-transfer"],label:"Transfer the patient directly to the stretcher, or secure the patient on an immobilzation device before transferring him to a stretcher",type:"Required",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"How to transfer your patient to the stretcher depends on your level of concern for spinal injury but you should do so with minimal movement to the spine. You may use a backboard, scoop stretcher, vacuum mattress or other device. *  If the patient is not immobilzed, be sure to maintain him in supine position.",examine:!1,prompts:"",subActionsList:!1,subActions:[]},{id:["intv-spinal-immobilization-technique-transfer-to-device"],label:"Transfer patient to immobilization device",type:"Unnecessary",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"This near-drowning patient who had an unwitnessed event needs cervical spine stabilization and a cervical collar. However, further spinal immobilization is optional, given the low concern for further spinal injury (ie. the patient was unlikely to have been diving).",examine:!1,prompts:"",subActionsList:!1,subActions:[]},{id:["intv-spinal-immobilization-technique-attach-cid"],label:"Attach cervical immobilization device (CID)",type:"Unnecessary",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"This near-drowning patient who had an unwitnessed event needs cervical spine stabilization and a cervical collar. However, further spinal immobilization is optional, given the low concern for further spinal injury (ie. the patient was unlikely to have been diving).",examine:!1,prompts:"",subActionsList:!1,subActions:[]},{id:["Reassess the patient"],label:"Reassess the patient",type:"Required",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"",examine:!1,prompts:"",subActionsList:!0,subActions:[{id:["reassess-vital-signs"],label:"Recheck vital signs every 5 minutes",type:"Required",feedbackAbsent:"Vitals should be reassessed after every intervention and every clinical change, and a critically ill patient should be reassessed more frequently to ensure he or she is still stable. *If you had reassessed the patient's vitals after intubating the patient, you would have seen an improvement in all of his vital signs.",feedbackOutOfOrder:"",feedbackErrors:"",examine:!1,prompts:"",subActionsList:!1,subActions:[]},{id:["repeat-primary-survey"],label:"Repeat the Primary Survey",type:"Required",feedbackAbsent:"It is important to reassess your patient after every intervention and every clinical change, which includes the primary survey. For example a patient with a neck injury whose breathing was initially non-labored may develop stridor as the airway becomes swollen.",feedbackOutOfOrder:"",feedbackErrors:"",examine:!1,prompts:"",subActionsList:!1,subActions:[]},{id:["repeat-secondary-survey"],label:"Repeat the Secondary Survey",type:"Required",feedbackAbsent:"It is important to reassess your patient after every intervention and every clinical change, which includes your secondary survey. For example, a patient may lose their pulses if you initally failed to notice and treat a source of hemorrhage.",feedbackOutOfOrder:"",feedbackErrors:"",examine:!1,prompts:"",subActionsList:!1,subActions:[]}]},{id:["intv-control-shock-technique-keep-patient-warm"],label:"Keep the patient warm, using some of the following methods: (1) apply heat packs to the patient's groin or armpits, (2) remove wet clothing, (3) cover the patient with blankets, (4) turn the heat up in the ambulance.",type:"Required",feedbackAbsent:"It is important to keep this patient warm because hypothermia can cause additional problems or worsening of the patient's current problems, including hypotension, arrhythmias, or even cardiac arrest.",feedbackOutOfOrder:"",feedbackErrors:"You could keep the patient warm by removing his wet swimsuit, applying blankets, applying heatpacks to his armpits or groin, and turning up the heat in the air ambulance.",examine:!1,prompts:"",subActionsList:!1,subActions:[]},{id:["intv-contact-receiving-facility"],label:"Assist the air crew with giving a patient report to the receiving facility and ETA",type:"Required",feedbackAbsent:"The hospital requires noticiation for all incoming patients 5 -15 prior to arrival, which is especially important for critical patients as the receiving team needs time to prepare equipment and space.  During patient handover to the flight crew, you should relay the information that they need to convey to the receiving facility about the patient. ",feedbackOutOfOrder:"",feedbackErrors:"",examine:!1,prompts:"",subActionsList:!1,subActions:[]},{id:["into-establish-IV"],label:"Establish at least one large bore IV en route",type:"Required",feedbackAbsent:"All trauma patient should have at least one, ideally two, large-bore IVs placed, even if they do not require fluid resuscitation.",feedbackOutOfOrder:"",feedbackErrors:"With a criticial patient, you should ideally estabish two large bore IV's while en route to the receiving facility, so as not to delay transfer to definitive care.  Establish as large an IV as possible. With pediatric patients, this will likely be 18, 20, or 22 gauge IVs.",examine:!1,prompts:"",subActionsList:!1,subActions:[]},{id:["intv-splint-fractures"],label:"Splint fractures",type:"contraindicated",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"The patient did not have any fractures.",examine:!1,prompts:"",subActionsList:!1,subActions:[]},{id:["intv-control-shock-technique-administer-iv-boluses"],label:"IV fluid resuscitation",type:"unnecessary",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"While it is true the patient was hypotensive, the reason for his hypotension was his respiratory failure, not hypovolemia. Appropriate management of the patient's airway and breathing would have improved his hypotension without the need for IV fluids. In fact, you should be conservative about fluid resuscitation in a near drowning patient because pulmonary edema would further hinder the patient's respiratory status.",examine:!0,prompts:"thought that hypotension should be treated with fluid boluses regardless of etiology",subActionsList:!1,subActions:[]},{id:["intv-apply-sterile-dressings"],label:"Apply sterile dressings",type:"contraindicated",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"The patient did not have any signifcant injuries to the skin.",examine:!1,prompts:"",subActionsList:!1,subActions:[]},{id:["intv-occlusive-dressing"],label:"Occlusive dressing",type:"contraindicated",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"The patient did not have any penetrating injuries.",examine:!1,prompts:"",subActionsList:!1,subActions:[]},{id:["intv-sling"],label:"Apply sling",type:"contraindicated",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"The patient did not have any injuries of the upper extremities.",examine:!1,prompts:"",subActionsList:!1,subActions:[]},{id:["into-prepare-amputation-for-transport"],label:"Prepare amputated part for transport",type:"contraindicated",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"The patient did not have an amputation.",examine:!1,prompts:"",subActionsList:!1,subActions:[]},{id:["intv-prepare-and-administer-pain-nausea-vomiting-medications"],label:"Prepare and administer medications",type:"contraindicated",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"This patient is unconscious. Management of life-threatening problems takes precedence and you should not delay addressing these to manage pain, nausea, vomiting, etc.",examine:!1,prompts:"",subActionsList:!1,subActions:[]},{id:["intv-prepare-and-administer-sedative"],label:"Prepare and administer medications",type:"contraindicated",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"This patient is already unconscious so does not require any further sedating medications.",examine:!1,prompts:"",subActionsList:!1,subActions:[]}]}]}}};function FA(e,t){e.forEach((function(e){if(0===e.subActions.length){var t={};RA.forEach((function(n){e[n]&&(t[n]=e[n])})),LA[e.id]=t}}))}var UA=function(e,t){t.includes(e)||t.push(e)},VA=function(e){var t=[],n=[];if(0===e.length)return"absent";e.forEach((function(e){UA(e,t)}));for(var r=0,i=Object.entries(SA);r<i.length;r++){var a=f(i[r],2),o=a[0];0!==a[1].filter((function(e){return t.includes(e)})).length&&UA(o,n)}return 1===n.length?n[0]:"errors"},qA=function(e){for(var t=[],n=0,r=Object.entries(TA);n<r.length;n++){var i=f(r[n],2),a=i[0];i[1][0]===e&&t.push(a)}return t},jA=function(e,t){var n="";if("header"===e.type?(n=TA[e.displayColor])||(n=TA[e.status]):n=TA[e.status]?TA[e.status]:TA.default,n)return n[t]},BA=function(e){return EA[jA(e,0)]},zA=function(e){if(e){var t,n=e.split(" "),r=n.length;n.forEach((function(e,t){var i=e.trim();"."===i[e.length-1]&&t<r-1&&(i+="\xa0\xa0"),n[t]=i}));var i,a=m(n);try{for(a.s();!(i=a.n()).done;){var o=i.value;t=t?t+" "+o:o}}catch(s){a.e(s)}finally{a.f()}return t}return""};function KA(e,t){var n,r;switch(t){case"assessmentFB":case"why":n=(r=LA[e.id])&&r.feedbackAbsent?r.feedbackAbsent:zA(e[t]);break;case"incorrectAnswersFB":case"contraindicatedWhy":case"unnecessary":case"irrelevant":n=(r=LA[e.id])&&r.feedbackErrors?r.feedbackErrors:zA(e[t]);break;case"orderingFB":n=(r=LA[e.id])&&r.feedbackOutOfOrder?r.feedbackOutOfOrder:zA(e[t]);break;default:e[t]&&(n=zA(e[t]))}return n}var QA,WA,GA,HA,YA,JA,XA,ZA,$A,eT=function(e){e.intvStatus&&e.intvStatus.length>0&&(e.intvStatusFB=function(e){var t,n,r=[],i=[],a=m(e.intvStatus);try{for(a.s();!(n=a.n()).done;){var o=n.value;o.foundCk?r.push(o.label):i.push(o.label)}}catch(s){a.e(s)}finally{a.f()}return i.length>0&&(t="Remember to check the effect of this action by asking for: "+i+".",r.length>0&&(t=t+" That is in addition to what you did ask for: "+r+".")),t}(e));var t,n,r=zA(jA(e,1)).trim().split(" ");r.forEach((function(n,i){var a=n.charAt(0),o=n.substring(1);switch(r[i]=r[i].trim(),a){case"@":t=KA(e,o),r[i]=t||"[missing: "+o+"]";break;case"?":(t=KA(e,o))?r[i]=t:(r[i]="","+bos"===r[i-1]&&(r[i-1]="","."!==r[i-2][r[i-2].length-1]&&(r[i-2]=r[i-2]+".\xa0")),"+eos"===r[i+1]&&(r[i+1]=""))}})),r.forEach((function(e,t){var n="";if("+"===e.charAt(0))switch(e.substring(1)){case"eos":"."===(n=r[t-1].trim())[n.length-1]&&(n=n.slice(0,-1)),r[t-1]=n+".\xa0",r[t]="";break;case"bos":"."===(n=r[t-1].trim())[n.length-1]&&(n=n.slice(0,-1)),r[t-1]=n+".\xa0",r[t]="";var i=r[t+1].trim();r[t+1]=i.charAt(0).toUpperCase()+i.slice(1)}}));var i,a=m(r);try{for(a.s();!(i=a.n()).done;){var o=i.value;n?""!==o&&(n=n+"\xa0"+o):""!==o&&(n=o)}}catch(s){a.e(s)}finally{a.f()}return n},tT={},nT={},rT=function(e,t,n){return e.filter((function(e){return e[t]===n}))},iT=function(e,t,n){return rT(rT(e,"timestamp",n),"id",t)},aT=n(576),oT=function(e,t,n,r,i,a){console.log("In savingDebriefingLog");var o=t.id,s=t.label;i&&""!==i&&(o=o+"-"+i,s=s+"-"+i);var u=CE.collection(e).doc(o),c={userName:t.userName,ObserverFileCreater:t.userName,label:s,ObserverFileName:t.label,commenter:a,scenarioID:t.scenarioID,scenarioName:t.scenarioName,schemaVersion:t.schemaVersion,timestamp:Date().toLocaleString()};r&&(c.constraintsViolated=r);var l=[],h={},d=!1;n.forEach((function(e,t){for(var n=0,r=Object.entries(e);n<r.length;n++){var i=f(r[n],2),a=i[0],o=i[1];void 0===o&&(console.log("filtered out from events; index: ",t," key: ",a," value: ",o),d=!0)}})),d?(n.forEach((function(e,t){h=aT.pickBy(e,(function(e,t){return!(void 0===e)})),l.push(h)})),c.events=l):c.events=n,u.set(c)},sT=function(e){return"criticalActionHeader"===e.status?"":-1===e.timestamp?"\xa0\xa0":(t=e.timestamp,new Date(1e3*t).toISOString().substr(14,5));var t},uT=function(e,t){return e.reduce((function(e,n){return be(be({},e),{},h({},n[t],(e[n[t]]||[]).concat(n)))}),{})},cT=function(e,t){return e._checkListMetaData.filter((function(e){return e.type===t}))},lT=qA("Problem"),fT=qA("Caution"),hT={},dT={},pT={};function vT(e){YA=e,function(e){var t=PA[e];if(tT=CA,t&&0!==t.length)for(var n=0,r=Object.entries(NA);n<r.length;n++){var i=f(r[n],2),a=i[0],o=i[1];t.includes(o.id)&&(tT[a]=o)}}(e.name),function(e){LA={};var t=MA[e.name];if(t){var n,r=m(t.Action.subActions);try{for(r.s();!(n=r.n()).done;){var i=n.value;FA(i.subActions);var a,o=m(i.subActions);try{for(o.s();!(a=o.n()).done;){var s=a.value.subActions;0!==s.length&&FA(s)}}catch(u){o.e(u)}finally{o.f()}}}catch(u){r.e(u)}finally{r.f()}}}(e),function(e){if(e._interventionPromptAnswers){e._interventionPromptAnswers.forEach((function(e){dT[e.id]=e.label}))}}(e),function(e){if(e._interventionPrompts){e._interventionPrompts.forEach((function(e){pT[e.id]=e.label}))}}(e),XA=mT(e),ZA=yT(e),GA=cT(e,qE.PHASE).map((function(e){return e.id})).concat(["Unknown"]),WA=cT(e,qE.SUB_PHASE).map((function(e){return e.id})),$A=function(e){var t=cT(e,qE.PHASE),n=cT(e,qE.SUB_PHASE),r=e._checkListMetaData.filter((function(e){return BE.includes(e.type)})),i=e._checkListMetaData.filter((function(e){return zE.includes(e.type)})),a=uT(i,"parentID");r.forEach((function(e){e.id in a&&(e.options=a[e.id])}));var o=uT(r.filter((function(e){return void 0===e.subPhase})),"phase"),s=uT(r.filter((function(e){return!!e.subPhase})),"subPhase");n.forEach((function(e){e.items=s[e.id]}));var u=uT(n,"phase");return t.forEach((function(e){e.id in o?e.items=o[e.id]:e.subPhases=u[e.id]})),t}(e),HA=gT($A),$A.forEach((function(e){void 0===e.subPhases?hT[e.id]=e.label:e.subPhases.forEach((function(t){hT[t.id]=e.label}))})),hT.Unknown="Unknown",QA=[]}var mT=function(e){var t,n=uT(e._checkListMetaData.filter((function(e){return KE.includes(e.type)})),"id");return t=e._interventions?uT(e._interventions,"id"):uT(e.intvMetaData.filter((function(e){return KE.includes(e.type)})),"id"),Object.assign(n,t)},yT=function(e){var t,n=uT(e._checkListMetaData.filter((function(e){return KE.includes(e.type)})),"label");return t=e._interventions?uT(e._interventions,"label"):uT(e.intvMetaData.filter((function(e){return KE.includes(e.type)})),"label"),Object.assign(n,t)},gT=function(e){var t=[];return e.forEach((function(e){if(e.subPhases){var n=e.subPhases.map((function(e){return e.id}));t=t.concat(n)}else t=t.concat(e.id)})),t},bT=function(e,t){var n=[];return e.forEach((function(e){e.timestamp<t&&(e.foundCk=!0),n.push(e)})),n},kT=function(e,t){var n=[],r=[],i=[],a=[],o=[],s={},u="",c="",l=0,f=0,h=!0,d=["assessment","required-action","decision-option","assessment-option"];return e.forEach((function(e,p){var v={comment:"",numericalID:p,status:"",intvStatus:[],contraindicatedWhy:"",minimalWhy:"",why:"",answerCorrect:!0,answerDetails:{},expertPhase:"",workingPhase:"",suggestedPhase:"",protocol:"",protocolRelationship:"",probLabel:"",solutionIds:[],assessments:"",required:!1,actionDescription:"",assessmentFB:"",incorrectAnswersFB:"",orderingFB:"",processingState:"good"};["id","label","finding","phase","subPhase","vitalType","vital","value","type","prompt","promptID","intervention","timestamp","probLabel"].forEach((function(t){e[t]&&(v[t]=e[t])})),e.label&&(v.actionDescription=e.label),e.type&&(v.status=e.type),e.subPhase?v.workingPhase=e.subPhase:e.phase&&(v.workingPhase=e.phase),v.expertPhase=v.workingPhase,u===v.workingPhase&&c===v.phase||(""!==u&&d.includes(v.type)?(h=!0,a[f]=o,f!==l&&(a[l]=a[l].concat(o)),f++,v.phase!==c&&(c=v.phase,l=f,v.phase!==v.workingPhase&&(a[l]=[],i[l]=c,f++))):""===u&&d.includes(v.type)?(c=v.phase)!==v.workingPhase&&(c=v.phase,a[l]=[],i[l]=c,f++):""===u?(c="Unknown",v.workingPhase=c,v.phase=c,v.subPhase=""):h=!1,h?(u=v.workingPhase,o=[],i[f]=u,a[f]=[]):h=!0);var m=v.type;["assessment","required-action","intervention","answer","obtain-vital-sign","decision-option","assessment-option"].includes(m)||(v.processingState="bad");var y=[];if("answer"===m){var g=UT(e.promptID,!0),b=VT(e.id,!0);if(g){var k=FT(e.promptID,e.id,!0),w={correctAnswer:g,givenAnswer:b,correct:!k};n.includes(v.intervention)?(y=o.pop(),n.pop(),v.answerCorrect=y.answerCorrect,v.answerDetails=y.answerDetails,k?(v.answerCorrect=!1,""===y.incorrectAnswersFB?v.incorrectAnswersFB="You should have responded: "+g:v.incorrectAnswersFB=y.incorrectAnswersFB+", and "+g):(v.incorrectAnswersFB=y.incorrectAnswersFB,v.answerCorrect=y.answerCorrect)):(k?(v.answerCorrect=!1,v.incorrectAnswersFB="You should have responded: "+g):v.incorrectAnswersFB="",n.push(v.intervention)),v.answerDetails[e.promptID]=w}else v.processingState="bad"}if("intervention"===m&&(y=o.slice(-1)[0])&&"answer"===y.type&&(y.intervention===v.id?(y=o.pop(),n.pop(),n.pop(),v.answerCorrect=y.answerCorrect,v.answerDetails=y.answerDetails,v.incorrectAnswersFB=y.incorrectAnswersFB):(y=o.pop(),n.pop(),n.pop())),"good"===v.processingState){if("obtain-vital-sign"===v.type){var x=v.vital,I="";I="intervention-status"===v.vitalType?r.includes(x)?"intv":"noIntv":"vital";var _=s[x];switch(I){case"intv":v.status="patientIntvCheck",_&&_.timestamp<v.timestamp&&(_.foundCk=!0,s[x]=_);break;case"noIntv":v.status="intvCheckWNoIntvFound";break;case"vital":v.status="patientVitalCheck",_&&(_=bT(_,v.timestamp),s[x]=_);break;default:v.status="unexpectedPatientIntvCheck"}}if("intervention"===v.type&&t.forEach((function(e,t){var n,r,i=["why","probLabel","protocolRelationship","probLabel"];null===(n=e.allActions)||void 0===n||n.forEach((function(t,n){if(t.id===v.id){var r,a=v.id;if((r=DA[v.label])||(r=DA[v.id]),r){var o={intervention:a,timestamp:v.timestamp,foundCk:!1};r.intvStatusNeeded&&(s[a]=Object.assign({},o)),r.vitalsNeeded.forEach((function(e){s[e]?s[e].push(Object.assign({},o)):s[e]=[Object.assign({},o)]}))}t.assessments&&(v.assessmentsNeeded=t.assessments),t.phase&&(v.when=t.phase,v.suggestedPhase=t.phase),e.protocols&&(v.protocol=e.protocols),v.answerCorrect?v.status="goodIntv":v.status="incorrect-answers",i.forEach((function(e){t[e]&&(v[e]=t[e])})),t["id-label"]&&(v.label=t["id-label"])}})),null===(r=e.allContras)||void 0===r||r.forEach((function(t,n){t.id===v.id&&(v.status=e.protocolRelationship,i.forEach((function(e){t[e]&&(v[e]=t[e])})),e.probLabel&&(v.probLabel=e.probLabel))}))})),"decision-option"===v.type)FT(e.promptID,e.id,!1)&&(v.status="decision-option-incorrect",v.answerCorrect=!1,v.incorrectAnswerFB="You should have responded "+UT(e.promptID,!1));if("assessment-option"===v.type)FT(e.promptID,e.id,!1)&&(v.status="assessment-option-incorrect",v.answerCorrect=!1,v.incorrectAnswerFB="You should have responded "+UT(e.promptID,!1));"intervention"===v.type?(n.push(v.id+"+"+v.probLabel),r.push(v.id)):n.push(v.id),o.push(v)}})),a[f]=o,f!==l&&(a[l]=a[l].concat(o)),[a,i,n,s]};var wT=function(e,t){var n=[],r=[],i=[],a=[],o=[],s={},u="",c="",l=0,h=0,d=!0,p=["assessment","required-action","decision-option","assessment-option"];return e.forEach((function(e,v){var m={comment:"",numericalID:v,status:"",intvStatus:[],contraindicatedWhy:"",minimalWhy:"",why:"",answerCorrect:"false",answerDetails:{},expertPhase:"",workingPhase:"",suggestedPhase:"",protocol:"",protocolRelationship:"",probLabel:"",solutionIds:[],assessments:"",required:!1,actionDescription:"",assessmentFB:"",incorrectAnswersFB:"",orderingFB:"",processingState:"good"};e.answers||(m.answerCorrect=!0);["id","interventionID","label","finding","phase","subPhase","vitalType","vital","value","type","prompt","promptID","intervention","timestamp","probLabel"].forEach((function(t){e[t]&&(m[t]=e[t])})),"intervention"===e.type&&(e.interventionID&&(m.id=e.interventionID),m.label=m.id.label),m.label&&(m.actionDescription=m.label),e.type&&(m.status=e.type),e.subPhase?m.workingPhase=e.subPhase:e.phase&&(m.workingPhase=e.phase),m.expertPhase=m.workingPhase,u===m.workingPhase&&c===m.phase||(""!==u&&p.includes(m.type)?(d=!0,a[h]=o,h!==l&&(a[l]=a[l].concat(o)),h++,m.phase!==c&&(c=m.phase,l=h,m.phase!==m.workingPhase&&(a[l]=[],i[l]=c,h++))):""===u&&p.includes(m.type)?(c=m.phase)!==m.workingPhase&&(c=m.phase,i[l]=c,a[l]=[],h++):""===u?(c="Unknown",m.workingPhase=c,m.phase=c,m.subPhase=""):d=!1,d?(u=m.workingPhase,o=[],i[h]=u,a[h]=[]):d=!0);var y=m.type;if(["assessment","required-action","intervention","obtain-vital-sign","decision-option","assessment-option"].includes(y)||(m.processingState="bad"),"good"===m.processingState){if("obtain-vital-sign"===m.type){var g=m.vital,b="";b="intervention-status"===m.vitalType?r.includes(g)?"intv":"noIntv":"vital";var k=s[g];switch(b){case"intv":m.status="patientIntvCheck",k&&k.timestamp<m.timestamp&&(k.foundCk=!0,s[g]=k);break;case"noIntv":m.status="intvCheckWNoIntvFound";break;case"vital":m.status="patientVitalCheck",k&&(k=bT(k,m.timestamp),s[g]=k);break;default:m.status="unexpectedPatientIntvCheck"}}if("intervention"===m.type){var w=_T(m.id);w?(m.label=w.label,m.actionDescription=m.label,n.push(m.id),r.push(m.id)):(m.label=m.id,m.actionDescription="No longer defined "+m.label,n.push(m.id),r.push(m.id)),t.forEach((function(e,t){var n,r,i=["why","probLabel","protocolRelationship","probLabel"];null===(n=e.allActions)||void 0===n||n.forEach((function(t,n){if(t.id===m.id){var r,a=m.id;if((r=DA[m.label])||(r=DA[m.id]),r){var o={intervention:a,timestamp:m.timestamp,foundCk:!1};r.intvStatusNeeded&&(s[a]=Object.assign({},o)),r.vitalsNeeded.forEach((function(e){s[e]?s[e].push(Object.assign({},o)):s[e]=[Object.assign({},o)]}))}t.assessments&&(m.assessmentsNeeded=t.assessments),t.phase&&(m.when=t.phase,m.suggestedPhase=t.phase),e.protocols&&(m.protocol=e.protocols),m.answerCorrect?m.status="goodIntv":m.status="incorrect-answers",i.forEach((function(e){t[e]&&(m[e]=t[e])})),t["id-label"]&&(m.label=t["id-label"])}})),null===(r=e.allContras)||void 0===r||r.forEach((function(t,n){t.id===m.id&&(m.status=t.protocolRelationship,i.forEach((function(e){t[e]&&(m[e]=t[e])})),e.probLabel&&(m.probLabel=e.probLabel))}))})),function(e,t){if("intervention"===e.type&&e.answers)for(var n,r=0,i=Object.entries(e.answers);r<i.length;r++){var a=f(i[r],2),o=a[0],s=a[1],u="TBD";n={correctAnswer:u,givenAnswer:VT(s,!0),correct:!1},t.answerDetails[o]=n,t.answerCorrect=!1,t.incorrectAnswersFB=t.incorrectAnswersFB+", and "+u}}(e,m),"intervention"===m.status&&(m.status="irrelevant")}if("decision-option"===m.type)FT(e.promptID,e.id,!1)&&(m.status="decision-option-incorrect",m.answerCorrect=!1,m.incorrectAnswerFB="You should have responded "+UT(e.promptID,!1));if("assessment-option"===m.type)FT(e.promptID,e.id,!1)&&(m.status="assessment-option-incorrect",m.answerCorrect=!1,m.incorrectAnswerFB="You should have responded "+UT(e.promptID,!1));"intervention"===m.type?(n.push(m.id+"+"+m.probLabel),r.push(m.id)):n.push(m.id),o.push(m)}})),a[h]=o,h!==l&&(a[l]=a[l].concat(o)),[a,i,n,s]},xT=function(e,t,n,r){for(var i=void 0,a=void 0,o=0;o<e.length&&(n.id!==e[o]||(i=t[o],"start"!==r));o++);return i&&(a=-1===i.numericalID?"start"===r?i.numericalIDStart:i.numericalIDEnd:i.numericalID),a},IT={id:"Unknown",label:"Unknown"},_T=function(e){var t=function(e){if("Unknown"===e)return IT;var t=[];return(t=XA[e])||(t=ZA[e]),t}(e);if(t)return t[0]},ET=function(e,t,n){for(var r=0;r<n.length;r++){var i=t[r],a=n[r];if(i.length>0&&!LT(a)){var o,s=m(i);try{for(s.s();!(o=s.n()).done;){var u=o.value;if(u.numericalID===e)return u}}catch(c){s.e(c)}finally{s.f()}}}},AT=function(e,t,n,r){var i=ET(e,n,r);i?i.arg2?i.arg2=i.arg2.concat([t.id]):i.arg2=[t.id]:console.log("no object found for numericalID = ",e)},TT=function(e,t,n){var r;return r=["phase","sub-phase"].includes(e.type)?"phase":"item",QA.push({constraintID:n,arg1:e,op:"before",arg2:t,type:r}),r},ST=function(e,t,n,r){return r&&(e+=t?" and ":", "),e+=n.toLowerCase()},OT=function(e,t,n,r,i,a,o,s,u){var c,l=xT(a,o,e,"end"),f=xT(a,o,e,"start"),h=e.label,d="",p="",v="";if(t.length>0){var y,g=0,b=0,k=m(t);try{for(k.s();!(y=k.n()).done;){var w=y.value,x=!1,I=_T(w);if(I){++g===t.length&&(x=!0);var _=I.label,E=xT(a,o,I,"start"),A=xT(a,o,I,"end");switch(r){case"before":if(l&&E)if(l<E){if("or"===n)return}else b++,""===p&&(p=ST(p=f===l?"You should have done ":"You should have completed ",x,h,!1)),E===A?(""===v&&(v+=" before you did "),v=ST(v,x,_,b>1)):(""===v&&(v+=" before starting "),v=ST(v,x,_,b>1)),AT(f,I,s,u),c=TT(e,I,i);break;case"after":if(f&&A)if(f>A){if("or"===n)return}else b++,f===l?(""===p&&(p="You should have done "),p=ST(p,x,_,b>1)):(""===p&&(p="You should have completed "),p=ST(p,x,_,b>1)),""===v&&(v=ST(v+=E===A?" before you did ":" before starting ",x,h,!1)),AT(E,e,s,u),c=TT(I,e,i)}}}}catch(T){k.e(T)}finally{k.f()}""!==(d=p+v)&&function(e,t,n,r,i){var a=ET(e,r,i);if(a){var o;""!==a.orderingFB?a.orderingFB=a.orderingFB+".\xa0\xa0"+t:a.orderingFB=t;var s="";"phase"===n&&(s="misOrdered-phase-"),"item"===n&&(s="misOrdered-"),a.status.includes(s)||(o=s+a.status,a.status=o)}else console.log("no object found for numericalID = ",e)}(f,d,c,s,u)}},CT=function(e,t){var n=function(e,t){for(var n=[],r=[],i=[],a=0;a<t.length;a++){var o=e[a],s=t[a],u=o[0].numericalID,c=o[o.length-1].numericalID;if((GA.includes(s)||WA.includes(s))&&(r.push({id:s,numericalID:-1,numericalIDStart:u,numericalIDEnd:c}),n.push(s),i.includes(s)||i.push(s)),o.length>0&&!LT(s)){var l=o.map((function(e){return e.id}));l.forEach((function(e){UA(e,i)})),r=r.concat(o),n=n.concat(l)}}return[n,i,r]}(e,t),r=n[0],i=n[1],a=n[2];return i.forEach((function(n){var i=_T(n);i&&NT(i,e,t,r,a)})),[e,t]},NT=function(e,t,n,r,i){var a=function(e){var t=e.id,n=e.label,r=nT[t];return r||(r=nT[n]),r}(e);a&&function(e,t,n,r,i,a){var o=t.before,s=t.beforeOp;OT(e,o,s,"before",t.id,i,a,n,r),o=t.after,s=t.afterOp,OT(e,o,s,"after",t.id,i,a,n,r)}(e,a,t,n,r,i)},PT=function(e,t,n,r){var i;i=n.when;var a=e.lastIndexOf(i),o=t[a];o||(o=[]),o.splice(r-1,0,n),t[a]=o},DT=function(e,t){var n=function(e,t){var n,r,i=m(re(RT(e)).reverse());try{var a=function(){var e=r.value;if(n=t.find((function(t){return t===e.id})),n)return"break"};for(i.s();!(r=i.n()).done&&"break"!==a(););}catch(o){i.e(o)}finally{i.f()}return n}(e,t);return t.lastIndexOf(n)},RT=function(e){return $A.find((function(t){return t.id===e})).subPhases},LT=function(e){var t=$A.find((function(t){return t.id===e}));return!(!t||!t.subPhases)},MT=function(e,t){var n=t;return"red"===e&&(n="red"),"yellow"===e&&"red"!==n&&(n="yellow"),n},FT=function(e,t,n){var r=void 0;return void 0===(r=n?YA.associations[e]:YA.checkListCorrectness[e])?(console.log("didn't find answers for ",e),!1):Array.isArray(r)?!r.find((function(e){return e===t})):!(r===t)},UT=function(e,t){var n,r;t?(n=YA.associations[e],r=YA.intvMetaData):(n=YA.checkListCorrectness[e],r=YA._checkListMetaData);var i=!1;return Array.isArray(n)?n.forEach((function(e,t){r.forEach((function(t,n){t.id!==e||(!1===i?i=t.label:i+=", ")}))})):r.forEach((function(e,t){e.id===n&&(i=e.label)})),i},VT=function(e,t){var n="";switch(JA){case"pre 5/1/22":(t?YA.intvMetaData:YA._checkListMetaData).forEach((function(t,r){t.id===e&&(n=t.label)}));break;case"post 5/1/22":n=dT[e]}return n||!1};var qT=function(e,t,n,r,i){return e.forEach((function(e){var a=function(e,t){e.bestFittingSol=[];var n=-1,r=-1,i=-1,a=-1,o=e.solutions;return o.forEach((function(o,s){var u;o.found=[],o.notFound=[],o.actions.forEach((function(n,r){t.includes(n.id+"+"+e.probLabel)?o.found.push(n.id):o.notFound.push(n)}));var c=o.actions.length,l=o.found.length;1===(u=0===l?0:l/c)&&l>a?(a=l,n=s,r=s):u>=i&&l>a&&(a=l,n=s,i=u)})),-1===r&&(r=n),o[r]}(e,t);e.bestFittingSol=a;var o=a.notFound;o.forEach((function(s,u){t.push(s.id+"+"+e.probLabel);var c={comment:"",numericalID:n,status:"",intvStatus:[],required:!0,when:"",suggestedPhase:"",expertPhase:"",probLabel:"",minimalWhy:"",assessmentsNeeded:"",protocol:"",protocolRelationship:"",actionDescription:"",type:"intervention",timestamp:-1};["id","phase","why","protocolRelationship"].forEach((function(e){s[e]&&(c[e]=s[e])}));["minimalWhy","protocols","strictActionOrdering"].forEach((function(e){a[e]&&(c[e]=a[e])}));var l,f;["probLabel"].forEach((function(t){e[t]&&(c[t]=e[t])})),e.assessments&&(c.assessmentsNeeded=e.assessments),e.protocols&&(c.protocol=e.protocols),s["id-label"]&&(c.label=s["id-label"]),s["id-label"]&&(c.actionDescription=s["id-label"]),s.subPhase&&(l=s.subPhase),s.phase&&!l&&(l=s.phase),l&&(c.when=l,c.expertPhase=l,c.suggestedPhase=l),c.status="missing"+((f=c.protocolRelationship).charAt(0).toUpperCase()+f.slice(1)),["optional","unnecessary","irrelevant"].includes(c.protocolRelationship)||(!function(e,t,n,r,i){var a=-1;""===n.expertPhase&&(n.expertPhase=GA[GA.length-2]),a=WA.includes(n.expertPhase)||!RT(n.expertPhase)?e.lastIndexOf(n.expertPhase):DT(n.expertPhase,e),n.when=e[a];var o=r.slice(0,i-1),s=r[i-1],u=re(o).reverse().find((function(e){return e.required})),c=r[i+1],l=r.slice(i+1).find((function(e){return e.required})),f=re(t[a]),h=-1,d=-1,p=-1,v=-1,m=!1;s&&(h=f.findIndex((function(e){return e.id===s.id}))),c&&(d=f.findIndex((function(e){return e.id===c.id}))),u&&(p=f.findIndex((function(e){return e.id===u.id}))),l&&(v=f.findIndex((function(e){return e.id===l.id}))),c&&(d=f.findIndex((function(e){return e.id===c.id}))),-1!==p&&(m=p+2,h>p&&(m=h+2)),m||-1===v||(m=v+1,d<v&&(m=d+1)),m||-1===h||(m=h+2),m||-1===d||(m=d+1),m||(m=f.length+2),PT(e,t,n,m)}(r,i,c,o,u),n++)}))})),[n,r,i]};function jT(e,t){var n=t.events;console.log("in analyzeEvents"),vT(e);var r=YA.problems,i=YA.actions,a=function(e,t,n){var r=[];JA="post 5/1/22";var i,a=m(e);try{var o=function(){var e=i.value,a={},o=e.solutions,s=t.filter((function(t){return t.problemID===e.id}));a.probLabel=e.label,a.id=e.id,a.lifeThreat=e.lifeThreat,a.vitals=e.vitals,a.allActions=[],a.allContras=[];var u=e.assessments;a.assessments=u.map((function(e){return e.assessmentID})),a.solutions=[];var c,l=m(o);try{var f=function(){var e=c.value,t=s.filter((function(t){return t.id===e}))[0],r=Object.assign({},t);r.actions=[],r.otherActions=[];var i,o=t.actions;i=n.filter((function(e){return o.includes(e.id)}));var u,l=m(i);try{for(l.s();!(u=l.n()).done;){var f=u.value,h=Object.assign({},f);h.id=h.interventionID;var d=XA[h.id];switch(h.probLabel=a.probLabel,h["id-label"]=d?d[0].label:h.id,h.protocolRelationship){case"contraindicated":case"irrelevant":case"unnecessary":r.otherActions.push(h),UA(h,a.allContras);break;case"required":case"minimal":case"optional":r.actions.push(h),UA(h,a.allActions)}}}catch(p){l.e(p)}finally{l.f()}a.solutions.push(r)};for(l.s();!(c=l.n()).done;)f()}catch(h){l.e(h)}finally{l.f()}r.push(a)};for(a.s();!(i=a.n()).done;)o()}catch(s){a.e(s)}finally{a.f()}return r}(r,YA.solutions,i),o=function(e){var t=[];return e.forEach((function(e){if(""!==e.allActions){var n=e.allActions.map((function(e){return e.id}));t=t.concat(n)}})),t}(a),s=[],u=function(e,t){var n;switch(JA){case"pre 5/1/22":default:n=kT(e,t);break;case"post 5/1/22":n=wT(e,t)}return n}(n,a),c=u[0],l=u[1],h=u[2],d=u[3];!function(e){nT=Object.assign(tT);for(var t=0,n=Object.entries(nT);t<n.length;t++){var r=f(n[t],2),i=r[0];"leafI"!==r[1].type||e.includes(i)||delete nT[i]}}(o);var p=CT(c,l),v=function(e,t){var n;return HA.forEach((function(r,i){if(!t.includes(r)){var a=0;(n=0===i?HA[0]:HA[i-1])!==r&&(a=t.lastIndexOf(n),a+=1),t.splice(a,0,r),e.splice(a,0,[])}})),[e,t]}(c=p[0],l=p[1]);c=v[0],l=v[1];var y=function(e,t,n,r,i){var a,o=function(e){var t=[];return e.forEach((function(e){""!==e.assessments&&(t=t.concat(e.assessments))})),t}(e),s=t.length,u=YA._checkListMetaData.filter((function(e){return[qE.ASSESS,qE.REQUIRED].includes(e.type)})),c=[],l=m(OA);try{for(l.s();!(a=l.n()).done;){var f=a.value;if(f.scenarioName===YA.name){c=f.exceptions;break}}}catch(h){l.e(h)}finally{l.f()}return c.forEach((function(e,t){u=u.filter((function(t){return t.id!==e[0]})),n.includes(e[0])&&i.forEach((function(t,n){t.forEach((function(t,n){t.id===e[0]&&(t.why=e[1],t.status="notNecessary")}))}))})),u.forEach((function(e,t){if(!n.includes(e.id)){n.push(e.id);var a={comment:"",numericalID:s,status:"missingRequiredAssessment",intvStatus:[],expertPhase:"",workingPhase:"",contraindicatedWhy:"",minimalWhy:"",why:"",probLabel:"",protocol:"",actionDescription:"",assessmentFB:"",timestamp:-1};["id","label","finding","phase","subPhase","type","prompt"].forEach((function(t){e[t]&&(a[t]=e[t])})),e.subPhase?a.workingPhase=e.subPhase:e.phase&&(a.workingPhase=e.phase),a.when=a.workingPhase,a.expertPhase=a.workingPhase,a.label&&(a.actionDescription=a.label),o.includes(e.id)&&(a.assessmentFB="Thus you missed finding: "+YA.assessmentFindings[e.id]),"required-action"===a.type&&(a.status="missingRequiredAssessment"),PT(r,i,a,t),s++}})),[n,r,i,s]}(a,n,h,l,c);h=y[0],l=y[1],c=y[2];var g=y[3],b=qT(a,h,g,l,c);g=b[0],l=b[1],c=b[2],s=function(e,t){for(var n=[],r=1,i=1,a="green",o="green",s=[],u=[],c=[],l={id:"assessmentHeader",status:"",phaseOrderStatus:"good",type:"header",numericalID:1,displayColor:"",why:"",label:"",labelID:"",protocol:""},f={id:"assessmentSubHeader",status:"",phaseOrderStatus:"good",type:"header",numericalID:1,displayColor:"",why:"",label:"",labelID:"",phaseID:"",protocol:""},h="",d=!1,p=0;p<e.length;p++){var v=t[p],y=e[p],g=!0;if(GA.includes(y)&&LT(y)&&(g=!1),v.length>0&&g){var b=t[p];o="green";var k,w=m(b);try{for(w.s();!(k=w.n()).done;){var x=k.value;"intervention"!==x.type&&s.push(x.status),lT.includes(x.status)&&(o="red"),fT.includes(x.status)&&"red"!==o&&(o="yellow"),x.numericalID=r++}}catch(L){w.e(L)}finally{w.f()}var I=Object.assign({},f),_=e[p],E=_T(_);I.label=E.label,I.labelID=E.id,I.status=VA(s),I.displayColor=o;var A=hT[_],T=_T(A);if(I.phaseID=T.id,""===h&&(h=T,a=MT(o,a)),p===e.length-1){var S=Object.assign({},l);A!==h.label&&(S.label=h.label,S.labelID=h.id,S.status=VA(u),S.displayColor=a,S.numericalID=i++/1e3,n.push(S),n.push.apply(n,re(c)),c=[]),(S=Object.assign({},I)).label=T.label,S.labelID=T.id,S.id="assessmentHeader",S.numericalID=i++/1e3,n.push(S),A===I.label?(n.push.apply(n,re(c)),n.push.apply(n,re(b))):(I.numericalID=i++/1e3,n.push.apply(n,re(c)),n.push(I),n.push.apply(n,re(b))),d=!0}if(!d)if(A!==h.label){var O,C,N=Object.assign({},l);N.label=h.label,N.labelID=h.id,N.status=VA(u),u=[],N.displayColor=a,N.numericalID=i++/1e3,n.push(N),n.push.apply(n,re(c)),(O=u).push.apply(O,re(s)),s=[],A===I.label?c=re(b):(I.numericalID=i++/1e3,(C=c=[I]).push.apply(C,re(b))),h=T,a=MT(o,"green")}else{var P,D,R;a=MT(o,a),(P=u).push.apply(P,re(s)),s=[],A===I.label?(D=c).push.apply(D,re(b)):(I.numericalID=i++/1e3,c.push(I),(R=c).push.apply(R,re(b)))}}}return n}(l,c),s=function(e,t){for(var n=0,r=Object.entries(t);n<r.length;n++){var i=f(r[n],2),a=i[0],o=i[1];if(Array.isArray(o)){var s,u=m(o);try{for(u.s();!(s=u.n()).done;){var c,l=s.value,h={label:a,foundCk:l.foundCk},d=m(iT(e,l.intervention,l.timestamp));try{for(d.s();!(c=d.n()).done;){var p=c.value;p.intvStatus.includes(h)||p.intvStatus.push(h)}}catch(v){d.e(v)}finally{d.f()}}}catch(v){u.e(v)}finally{u.f()}}else!function(){var t={label:"intervention status",foundCk:o.foundCk};iT(e,a,o.timestamp).forEach((function(e){e.intvStatus.includes(t)||e.intvStatus.push(t)}))}()}return e}(s,d);var k=[];s.forEach((function(e,t){k.push(e)}));var w=[],x=[],I=0,_=-1;k.forEach((function(e,t){if("intervention"===e.type&&e.status&&e.status.includes("goodintv","incorrect-answers","minimal","misOrdered-goodintv","misOrdered-incorrect-answers","misOrdered-incorrect-answers","minimal","misOrdered-minimal","misOrdered-minimal-incorrect-answers","misOrdered-phase-incorrect-answers","misOrdered-phase-minimal-incorrect-answers","misOrdered-phase-minimal")){x.includes(e.probLabel)?_=x.indexOf(e.probLabel):(x[_=I]=e.probLabel,I++);var n=w[_];n||(n=[]),n.push(e),w[_]=n}}));var E=s.map((function(e){return e.id})),A=a.map((function(e){return e.probLabel}));return x.forEach((function(e,t){var n=A.indexOf(e),r=a[n],i=r.actions.filter((function(e){return"required"===e.protocolRelationship})).map((function(e){return e.id})),o=r.actions.filter((function(e){return"minimal"===e.protocolRelationship})).map((function(e){return e.id}));if(o){var u,c=w[t].map((function(e){return e.id})),l=!0,f=!0,h=m(i);try{for(h.s();!(u=h.n()).done;){var d=u.value;if(!c.includes(d)){l=!1;break}}}catch(k){h.e(k)}finally{h.f()}var p,v=m(o);try{for(v.s();!(p=v.n()).done;){var y=p.value;if(!c.includes(y)){f=!1;break}}}catch(k){v.e(k)}finally{v.f()}var g=[];if(!l&&f){o.forEach((function(e,t){var n=E.indexOf(e),i=s[n];switch(i.minimalWhy=r.minimalWhy,i.status){case"incorrect-answers":i.status="minimal-incorrect-answers";break;case"goodintv":i.status="minimal";break;case"misOrdered-goodintv":i.status="misOrdered-minimal";break;case"misOrdered-incorrect-answers":i.status="misOrdered-minimal-incorrect-answers";break;case"misOrdered-phase-goodintv":i.status="misOrdered-phase-minimal";break;case"misOrdered-phase-incorrect-answers":i.status="misOrdered-phase-minimal-incorrect-answers"}g.push(i.numericalID),s[n]=i}));var b={};g.forEach((function(e,t){b=function(e,t){var n,r={},i={},a=m(t);try{for(a.s();!(n=a.n()).done;){var o=n.value;if("problemHeader"===o.id)r=o;else if(o.numericalID===e){i=r;break}}}catch(k){a.e(k)}finally{a.f()}return i}(e,s),b&&"green"===b.displayColor&&(b.displayColor="yellow")}))}}r.actions=[]})),console.log("Constraint Violation Results",QA),function(e,t,n){oT("debriefing-feedback-logs",e,t,n,void 0,"")}(t,k,QA),k}var BT=n(1665),zT=["active","aria-label","block","className","close","cssModule","color","outline","size","tag","innerRef"],KT={active:dA().bool,"aria-label":dA().string,block:dA().bool,color:dA().string,disabled:dA().bool,outline:dA().bool,tag:gA,innerRef:dA().oneOfType([dA().object,dA().func,dA().string]),onClick:dA().func,size:dA().string,children:dA().node,className:dA().string,cssModule:dA().object,close:dA().bool},QT=function(e){function n(t){var n;return(n=e.call(this,t)||this).onClick=n.onClick.bind(y(n)),n}(0,BT.Z)(n,e);var r=n.prototype;return r.onClick=function(e){if(!this.props.disabled)return this.props.onClick?this.props.onClick(e):void 0;e.preventDefault()},r.render=function(){var e=this.props,n=e.active,r=e["aria-label"],i=e.block,a=e.className,o=e.close,s=e.cssModule,u=e.color,c=e.outline,l=e.size,f=e.tag,h=e.innerRef,d=(0,QE.Z)(e,zT);o&&"undefined"===typeof d.children&&(d.children=t.createElement("span",{"aria-hidden":!0},"\xd7"));var p="btn"+(c?"-outline":"")+"-"+u,v=mA(vA()(a,{close:o},o||"btn",o||p,!!l&&"btn-"+l,!!i&&"btn-block",{active:n,disabled:this.props.disabled}),s);d.href&&"button"===f&&(f="a");var m=o?"Close":null;return t.createElement(f,(0,fA.Z)({type:"button"===f&&d.onClick?"button":void 0},d,{className:v,ref:h,onClick:this.onClick,"aria-label":r||m}))},n}(t.Component);QT.propTypes=KT,QT.defaultProps={color:"secondary",tag:"button"};var WT=QT,GT=["expand","className","cssModule","light","dark","fixed","sticky","color","tag"],HT={light:dA().bool,dark:dA().bool,full:dA().bool,fixed:dA().string,sticky:dA().string,color:dA().string,role:dA().string,tag:gA,className:dA().string,cssModule:dA().object,expand:dA().oneOfType([dA().bool,dA().string])},YT=function(e){var n,r=e.expand,i=e.className,a=e.cssModule,o=e.light,s=e.dark,u=e.fixed,c=e.sticky,l=e.color,f=e.tag,h=(0,QE.Z)(e,GT),d=mA(vA()(i,"navbar",function(e){return!1!==e&&(!0===e||"xs"===e?"navbar-expand":"navbar-expand-"+e)}(r),((n={"navbar-light":o,"navbar-dark":s})["bg-"+l]=l,n["fixed-"+u]=u,n["sticky-"+c]=c,n)),a);return t.createElement(f,(0,fA.Z)({},h,{className:d}))};YT.propTypes=HT,YT.defaultProps={tag:"nav",expand:!1};var JT=YT,XT=["className","cssModule","tag"],ZT={tag:gA,className:dA().string,cssModule:dA().object},$T=function(e){var n=e.className,r=e.cssModule,i=e.tag,a=(0,QE.Z)(e,XT),o=mA(vA()(n,"navbar-brand"),r);return t.createElement(i,(0,fA.Z)({},a,{className:o}))};$T.propTypes=ZT,$T.defaultProps={tag:"a"};var eS=$T,tS=["className","cssModule","tabs","pills","vertical","horizontal","justified","fill","navbar","card","tag"],nS={tabs:dA().bool,pills:dA().bool,vertical:dA().oneOfType([dA().bool,dA().string]),horizontal:dA().string,justified:dA().bool,fill:dA().bool,navbar:dA().bool,card:dA().bool,tag:gA,className:dA().string,cssModule:dA().object},rS=function(e){var n=e.className,r=e.cssModule,i=e.tabs,a=e.pills,o=e.vertical,s=e.horizontal,u=e.justified,c=e.fill,l=e.navbar,f=e.card,h=e.tag,d=(0,QE.Z)(e,tS),p=mA(vA()(n,l?"navbar-nav":"nav",!!s&&"justify-content-"+s,function(e){return!1!==e&&(!0===e||"xs"===e?"flex-column":"flex-"+e+"-column")}(o),{"nav-tabs":i,"card-header-tabs":f&&i,"nav-pills":a,"card-header-pills":f&&a,"nav-justified":u,"nav-fill":c}),r);return t.createElement(h,(0,fA.Z)({},d,{className:p}))};rS.propTypes=nS,rS.defaultProps={tag:"ul",vertical:!1};var iS=rS,aS=["className","cssModule","active","tag"],oS={tag:gA,className:dA().string,cssModule:dA().object},sS=function(e){var n=e.className,r=e.cssModule,i=(e.active,e.tag),a=(0,QE.Z)(e,aS),o=mA(vA()(n,"navbar-text"),r);return t.createElement(i,(0,fA.Z)({},a,{className:o}))};sS.propTypes=oS,sS.defaultProps={tag:"span"};var uS,cS=sS,lS=function(e){var n=e.title,r=e.leftNav,i=void 0===r?null:r,a=e.rightNav,s=void 0===a?null:a,u=(0,t.useContext)(o.AuthContext),c=u.isAuthenticated,l=u.userName,f=u.signOutUser;return uS=l,(0,IA.jsxs)(JT,{color:"dark",dark:!0,children:[(0,IA.jsx)(eS,{href:"#",children:"MedDBriefer"}),!!i&&(0,IA.jsx)(iS,{children:i}),!!n&&(0,IA.jsx)(cS,{tag:"h3",children:n}),(0,IA.jsxs)(iS,{children:[c&&(0,IA.jsxs)(IA.Fragment,{children:[(0,IA.jsxs)(cS,{children:["Welcome, ",l," \xa0"]}),(0,IA.jsx)(WT,{color:"danger",onClick:f,children:"Sign Out"})]}),!!s&&s]})]})},fS=function(e){var n=e.log,r=e.actions,i=e.scenario,a=e.context,o=f((0,t.useState)(!1),2),s=o[0],u=o[1],c=f((0,t.useState)(void 0),2),l=c[0],h=c[1],d=function(e){for(var t=[],n=[],r=0,i=Object.entries(e.answerDetails);r<i.length;r++){var a=f(i[r],2),o=a[0],s=a[1];2===(n=String(s.givenAnswer).split(":")).length?t.push({ID:n[0],answer:n[1]}):t.push({ID:pT[o],answer:s.givenAnswer})}return(0,IA.jsx)("p",{children:t.map((function(e){return(0,IA.jsxs)(IA.Fragment,{children:[(0,IA.jsxs)("b",{children:[e.ID,":"]})," ",e.answer,(0,IA.jsx)("br",{})]})}))})};function p(e){return(0,IA.jsx)(IA.Fragment,{children:"obtain-vital-sign"===e.type?m(e):y(e)})}function v(e){var t=i.intvMetaData.find((function(t){return e.vital===t.id}));return(0,IA.jsx)(IA.Fragment,{children:t.label})}function m(e){return(0,IA.jsx)(IA.Fragment,{children:"intervention-status"===e.vitalType?(0,IA.jsxs)(IA.Fragment,{children:[(0,IA.jsx)("b",{children:"Requested intervention status for:"})," ",v(e),", ",(0,IA.jsx)("td",{className:"text-muted",children:(0,IA.jsxs)("p",{children:[(0,IA.jsx)("b",{children:"Found:"}),"\xa0",(0,IA.jsx)("i",{children:e.value})]})})]}):(0,IA.jsxs)(IA.Fragment,{children:[(0,IA.jsx)("b",{children:"Requested vital:"})," ",e.vital,", ",(0,IA.jsx)("td",{className:"text-muted",children:(0,IA.jsxs)("p",{children:[(0,IA.jsx)("b",{children:"Found:"}),"\xa0",(0,IA.jsx)("i",{children:e.value})]})})]})})}function y(e){return(0,IA.jsx)(IA.Fragment,{children:e.subPhase&&"intervention"!==e.type?(0,IA.jsxs)(IA.Fragment,{children:[(0,IA.jsxs)("b",{children:[e.subPhase,":"]})," ",e.actionDescription,".  ",b(e)]}):(0,IA.jsx)(IA.Fragment,{children:g(e)})})}function g(e){return(0,IA.jsx)(IA.Fragment,{children:"intervention"===e.type?(0,IA.jsxs)(IA.Fragment,{children:[(0,IA.jsx)("b",{children:"Intervention:"})," ",e.actionDescription,". ",k(e)," "]}):(0,IA.jsxs)(IA.Fragment,{children:[e.actionDescription,".  ",b(e)]})})}function b(e){return(0,IA.jsx)(IA.Fragment,{children:e.finding?(0,IA.jsx)("td",{className:"text-muted",children:(0,IA.jsxs)("p",{children:[(0,IA.jsx)("b",{children:"Findings:"})," ",(0,IA.jsx)("i",{children:e.finding})]})}):(0,IA.jsx)(IA.Fragment,{})})}function k(e){return(0,IA.jsx)(IA.Fragment,{children:e.answerDetails?(0,IA.jsx)("td",{className:"text-muted",children:d(e)}):(0,IA.jsx)(IA.Fragment,{})})}function w(e){var t=e.target.defaultValue,n=e.target.value,r=e.target.id;if(t!==n){var i=l.find((function(e){return e.id===r})),a=Object.assign({},i,{comment:n});I(a)}}var x=function(e){return(0,IA.jsxs)(IA.Fragment,{children:[(0,IA.jsx)("td",{children:e.numericalID}),(0,IA.jsx)("td",{children:sT(e)}),(0,IA.jsxs)("td",{className:BA(e),children:[(0,IA.jsx)("span",{className:"material-icons-outlined",children:(t=e,AA[jA(t,0)])}),p(e)]}),(0,IA.jsx)("td",{children:eT(e)}),s&&(0,IA.jsx)("td",{children:(0,IA.jsx)("textarea",{rows:"2",cols:"50",defaultValue:e.comment,onBlur:w,id:"".concat(e.id)})})]});var t},I=function(e){var t=l.findIndex((function(t){return t.id===e.id}));h([].concat(re(l.slice(0,t)),[e],re(l.slice(t+1))))};function _(){return(_=ae(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u("review"===a),h(r);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,t.useEffect)((function(){!function(){_.apply(this,arguments)}()}),[]),void 0===l?(0,IA.jsx)("h3",{children:"processing"}):(0,IA.jsxs)(IA.Fragment,{children:["review"===a?(0,IA.jsx)(IA.Fragment,{children:(0,IA.jsx)(lS,{title:"Review of: ".concat(n.label),leftNav:(0,IA.jsx)(WT,{color:"primary",onClick:function(){!function(e,t,n,r){var i=window.prompt("What identifer if any do you want to append to your comments file name.","");oT("debriefing-comment-logs",e,t,r,i,n)}(n,l,uS,void 0)},children:"Save Comments"}),rightNav:(0,IA.jsx)(WT,{color:"primary",onClick:function(){u(!s)},children:"Toggle Comments"})})}):(0,IA.jsx)(IA.Fragment,{children:(0,IA.jsx)(lS,{title:"Analysis for: ".concat(n.label)})}),(0,IA.jsx)("form",{children:(0,IA.jsx)("div",{style:{overflowY:"auto",maxHeight:"700px"},children:(0,IA.jsxs)(xA,{borderless:!0,size:"sm",children:[(0,IA.jsx)("thead",{children:(0,IA.jsxs)("tr",{children:[(0,IA.jsx)("th",{className:"table-header",children:" ID "}),(0,IA.jsx)("th",{className:"table-header",children:" Timestamp "}),(0,IA.jsx)("th",{className:"table-header",children:" Action Description "}),(0,IA.jsx)("th",{className:"table-header",children:" Feedback "}),s&&(0,IA.jsx)("th",{className:"table-header",children:" Comments "})]})}),(0,IA.jsx)("tbody",{className:"scrolling",children:l.map((function(e,t){return(0,IA.jsx)("tr",{children:"header"===e.type?(n=e,(0,IA.jsx)(IA.Fragment,{children:"assessmentHeader"===n.id||"assessmentSubHeader"===n.id?(0,IA.jsx)("td",{colSpan:"4",className:BA(n),children:(0,IA.jsx)("b",{children:n.label})}):(0,IA.jsx)("td",{colSpan:"10",className:"black",children:(0,IA.jsx)("div",{children:(0,IA.jsxs)("em",{children:["\xa0\xa0\xa0Intervention Group: ",n.probLabel]})})})})):x(e)},t);var n}))})]})})})]})},hS=function(){var e=(0,a.UO)().logID,n=(0,a.UO)().context,r=f((0,t.useState)(void 0),2),i=r[0],o=r[1],s=f((0,t.useState)(void 0),2),u=s[0],c=s[1],l=f((0,t.useState)(void 0),2),h=l[0],d=l[1],p=f((0,t.useState)(!1),2),v=p[0],m=p[1],y=f((0,t.useState)(!1),2),g=y[0],b=y[1];function k(){("review"===n||window.confirm("Are you sure you want to overwrite the existing analysis?  If you aren't sure: cancel, start a review and save it.  This will save a copy of the current analysis in a different directory."))&&w(h,i)}function w(e,t){return x.apply(this,arguments)}function x(){return x=ae(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:jT(t,n);case 1:case"end":return e.stop()}}),e)}))),x.apply(this,arguments)}function I(){return(I=ae(te().mark((function t(){return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,uA(CE,"debriefing-feedback-logs",e);case 2:if(t.sent){t.next=7;break}w(h,i),m(!0),t.next=8;break;case 7:k();case 8:return m(!0),t.abrupt("return",!0);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return(0,t.useEffect)((function(){(function(e,t){return e.collection("logs").doc(t).get().then((function(e){var t=e.data();return t.id=e.id,t}))})(CE,e).then((function(e){o(e)})).catch((function(e){return alert("error fetching observer log",e)}))}),[]),(0,t.useEffect)((function(){i&&oA(CE,i.scenarioID,"V2").then((function(e){console.log("retrieve scenario:",e),d(e)}))}),[i]),(0,t.useEffect)((function(){h&&function(){I.apply(this,arguments)}()}),[h]),(0,t.useEffect)((function(){v&&lA(CE,e).then((function(e){c(e)})).catch((function(e){return alert("error fetching debriefing log",e)}))}),[v]),(0,t.useEffect)((function(){u&&b(!0)}),[u]),g?(0,IA.jsx)(fS,{log:u,actions:u.events,scenario:h,context:n}):(0,IA.jsx)("h3",{children:"Loading"})},dS=function(){var e=(0,a.UO)().logID,n=f((0,t.useState)(null),2),r=n[0],i=n[1],o=f((0,t.useState)(null),2),s=o[0],u=o[1],c=f((0,t.useState)(null),2),l=c[0],h=c[1],d=f((0,t.useState)(null),2),p=d[0],v=d[1],m=f((0,t.useState)(!1),2),y=m[0],g=m[1];return(0,t.useEffect)((function(){(function(e,t){return e.collection("debriefing-comment-logs").doc(t).get().then((function(e){var t=e.data();return t.id=e.id,t}))})(CE,e).then((function(e){console.log("retrieve Debriefing comment file in DebLog:",e),i(e)})).catch((function(){u(!0),console.log("no existing comment log found so will try to display analysis in comment mode")}))}),[e]),(0,t.useEffect)((function(){s&&lA(CE,e).then((function(e){console.log("retrieve Debriefing analysis file in DebLog:",e),i(e)})).catch((function(){h(!0)}))}),[e,s]),(0,t.useEffect)((function(){r&&oA(CE,r.scenarioID).then((function(e){v(e),console.log("scenario in DebLog",e)}))}),[r]),(0,t.useEffect)((function(){p&&g(!0)}),[p]),l?(0,IA.jsx)(hS,{logID:e,context:"review"}):y?(0,IA.jsx)(fS,{log:r,actions:r.events,scenario:p,context:"review"}):(0,IA.jsx)("h3",{children:"Loading"})},pS=function(){var e=(0,a.UO)().logID;return(0,t.useEffect)((function(){!function(e,t){cA(e,"debriefing-comment-logs",t)}(CE,e)}),[e]),(0,IA.jsx)(_A,{})},vS=function(){var e=(0,a.UO)().logID;return(0,t.useEffect)((function(){!function(e,t){cA(e,"logs",t)}(CE,e),function(e,t){cA(e,"debriefing-feedback-logs",t)}(CE,e)}),[e]),(0,IA.jsx)(_A,{})},mS=function(e){return(0,IA.jsxs)(IA.Fragment,{children:[(0,IA.jsx)(lS,{title:"MedDBriefer Authentication"}),e.children]})},yS=function(e){return(0,IA.jsx)(o.AuthProvider,{children:(0,IA.jsx)(i.HashRouter,{children:(0,IA.jsxs)(a.rs,{children:[(0,IA.jsx)(o.PrivateRoute,{exact:!0,path:"/logs/:logID",authFlowLayout:mS,component:hS}),(0,IA.jsx)(o.PrivateRoute,{exact:!0,path:"/observer/delete/:logID",authFlowLayout:mS,component:vS}),(0,IA.jsx)(o.PrivateRoute,{exact:!0,path:"/analysis-or-comment/display/:logID",authFlowLayout:mS,component:dS}),(0,IA.jsx)(o.PrivateRoute,{exact:!0,path:"/comment/delete/:logID",authFlowLayout:mS,component:pS}),(0,IA.jsx)(o.PrivateRoute,{exact:!0,match:"/",authFlowLayout:mS,component:_A})]})})})},gS=function(e){e&&e instanceof Function&&n.e(415).then(n.bind(n,5415)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),a(e),o(e)}))};r.render((0,IA.jsx)(t.StrictMode,{children:(0,IA.jsx)(yS,{})}),document.getElementById("root")),gS()}()}();
//# sourceMappingURL=main.0c28d840.js.map
/*! For license information please see main.0c24f93c.chunk.js.LICENSE.txt */
(this["webpackJsonp@meddbriefer/debriefer"]=this["webpackJsonp@meddbriefer/debriefer"]||[]).push([[0],{49:function(e,t,n){},57:function(e,t,n){},61:function(e,t,n){"use strict";n.r(t);var r,i=n(2),o=n.n(i),s=n(43),a=n.n(s),c=(n(49),n(25)),d=n(10),l=n(26),u=(n(56),n(57),n(8)),p=n(31),h=(n(40),n(42),function(e,t){var n=function(e){var t=p.default.apps.filter((function(t){return t.options.appId===e}));return 1===t.length?t[0]:null}(e.appId);return n||p.default.initializeApp(e,t)});"pam"===Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_APP_ENV?(console.log("using pjordan config"),r=h({apiKey:"AIzaSyB9eVT-fu4TOjxHoPAXqsnz9tCcbTJkTOw",authDomain:"pamdev-ea800.firebaseapp.com",projectId:"pamdev-ea800",storageBucket:"pamdev-ea800.appspot.com",messagingSenderId:"366450927885",appId:"1:366450927885:web:caa5f022ef1de182a0e844",measurementId:"G-JC5XZEPYT1"},"pam")):"scott"===Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_APP_ENV?(console.log("using scott config"),r=h({apiKey:"AIzaSyBEhbIdVW2F2vvvfvpNb2SsCDP9Yoc__z8",authDomain:"scottdev-f6528.firebaseapp.com",projectId:"scottdev-f6528",storageBucket:"scottdev-f6528.appspot.com",messagingSenderId:"447730403122",appId:"1:447730403122:web:1727020dbac4ad4cf6f92b"})):(console.log("using production config"),r=h({apiKey:"AIzaSyBOgWAbXUGckpad2sk0IUo00hZsV4WxG0E",authDomain:"meddbriefer-68cd4.firebaseapp.com",projectId:"meddbriefer-68cd4",storageBucket:"meddbriefer-68cd4.appspot.com",messagingSenderId:"1087114796018",appId:"1:1087114796018:web:679fbab38dbf78af0ce96b",measurementId:"G-Q7QZKC9KHW"},"production"));var b,f,m,O=r,v=(O.auth(),O.firestore()),g=n(6),j=n.n(g),y=n(11),w=n(24),P=(n(34),"assessment"),D="assessment-option",x="assessment-with-options",S="decision",E="decision-option",I="intervention",k="phase",T="required-action",N="sub-phase",F=Object.freeze({PHASE:k,SUB_PHASE:N,ASSESS:P,AWO:x,ASSESS_OPTION:D,ASSESSO:D,CL_HEADING:"checklist-heading",CL_PROMPT:"checklist-prompt",DECISION:S,DECISION_OPTION:E,DIST_PROMPT:"distinguishing-prompt",NESTED_CHECKLIST:"nested-checklist",REQUIRED:T,REQURED:T,INTERV:I,PROMPT_SET:"prompt-set",PROMPT:"prompt",ANSWER:"answer"}),A=Object.freeze({ONE:"one",OOM:"one-or-more",NONE:"none"}),C=(Object.freeze({ONE:"One",OOM:"One or more",NONE:"None"}),Object.freeze({PHASE:"",SUB_PHASE:"",ANSWER:"answer-",ASSESS:"assess-",AWO:"assessment-with-options-",ASSESS_OPTION:"assess-option-",CL_PROMPT:"cl-prompt-",DECISION:"decision-",DECISION_OPTION:"decision-option-",INTERV:"intv-",PROMPT_SET:"prompt-set-",PROMPT:"prompt-",REQUIRED:"required-action-"}),Object.freeze({AW:"airway",BR:"breathing",BL:"bleeding",SH:"shock"}),Object.freeze({AW:"Airway",BR:"Breathing",BL:"Bleeding",SH:"Shock"}),[P,x,S,T]),B=[D,E],R=[P,x,S,T,I,k,N],L=(Object.freeze({NONE:"",MIN:"mimimal",OPT:"optional",CONTRA:"contraindicated"}),n(9)),M=(n(17),n(37),n(38),n(16)),q=(F.DIST_PROMPT,A.ONE,F.DIST_PROMPT,A.OOM,F.PROMPT,A.ONE,F.PROMPT,A.ONE,F.PROMPT,F.PROMPT,A.ONE,F.PROMPT,A.ONE,F.PROMPT,A.ONE,F.PROMPT,A.ONE,F.PROMPT,A.ONE,F.PROMPT,A.ONE,F.PROMPT,A.ONE,F.PROMPT,A.ONE,F.PROMPT,A.ONE,F.PROMPT,A.ONE,F.PROMPT,A.ONE,F.PROMPT,A.ONE,F.PROMPT,A.ONE,F.PROMPT,A.ONE,F.PROMPT,A.ONE,F.PROMPT,A.ONE,F.PROMPT,A.ONE,F.PROMPT,A.ONE,F.PROMPT,A.ONE,F.PROMPT,A.ONE,F.PROMPT,A.ONE,F.PROMPT,A.ONE,b={depth:3,type:"intervention",id:"menu-item-nasotracheal-intubation",interventionID:"intv-nasotracheal-intubation"},Object(M.a)(b,"interventionID","intv-nasotracheal-intubation"),Object(M.a)(b,"interventionID","intv-nasotracheal-intubation"),Object(M.a)(b,"intvCategoryID","intv-cat-airway"),f={depth:4,type:"intervention",id:"menu-item-rapid-sequence-intubation",interventionID:"intv-rapid-sequence-intubation"},Object(M.a)(f,"interventionID","intv-rapid-sequence-intubation"),Object(M.a)(f,"interventionID","intv-rapid-sequence-intubation"),Object(M.a)(f,"intvCategoryID","intv-cat-airway"),function(e,t){return e.collection("published-scenarios").doc(t).get().then((function(e){return e.data()}))}),_=function(){var e=Object(y.a)(j.a.mark((function e(t,n,r){var i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.collection(n).where("id","==","".concat(r)).get();case 2:return i=e.sent,e.abrupt("return",i.empty);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),W=function(e,t){return e.collection("logs").doc(t).get().then((function(e){var t=e.data();return t.id=e.id,t}))},H=function(e,t){return e.collection("debriefing-feedback-logs").doc(t).get().then((function(e){var t=e.data();return t.id=e.id,t}))},U=n(62),V=n(1),z=function(){var e=Object(i.useState)([]),t=Object(u.a)(e,2),n=t[0],r=t[1],o=Object(i.useState)(!1),s=Object(u.a)(o,2),a=s[0],d=s[1];return Object(i.useEffect)((function(){var e;(e=v,e.collection("logs").get().then((function(e){return e.docs.map((function(e){var t=e.data();return{id:e.id,label:t.label,scenario:t.scenarioName,userName:t.userName,timestamp:t.timestamp}}))}))).then((function(e){r(e),d(!0)})).catch((function(e){return console.log("error fetching logs",e)}))}),[]),a?Object(V.jsxs)(U.a,{striped:!0,borderless:!0,size:"sm",hover:!0,children:[Object(V.jsx)("thead",{children:Object(V.jsxs)("tr",{children:[Object(V.jsx)("th",{children:"Label"}),Object(V.jsx)("th",{children:"Scenario"}),Object(V.jsx)("th",{children:"Username"}),Object(V.jsx)("th",{children:"Timestamp"})]})}),Object(V.jsx)("tbody",{children:n.map((function(e){return Object(V.jsxs)("tr",{children:[Object(V.jsx)("td",{children:e.label}),Object(V.jsx)("td",{children:e.scenario}),Object(V.jsx)("td",{children:e.userName}),Object(V.jsx)("td",{children:e.timestamp}),Object(V.jsxs)("td",{children:[Object(V.jsx)(c.Link,{to:"/logs/".concat(e.id),children:"Analyze"}),"\xa0\xa0\xa0\xa0",Object(V.jsx)(c.Link,{to:"/debriefing-feedback-logs/".concat(e.id),children:"Review"})]})]},e.id)}))})]}):Object(V.jsx)("h4",{children:"fetching log data"})},G=n(13),Y={Good:"text-success",Caution:"text-warning",Problem:"text-danger","Not implemented":"text-muted"},K={Good:"sentiment_satisfied",Caution:"report_problem",Problem:"highlight_off","Not implemented":"sentiment_neutral"},Q={contraindicated:["Problem","You should not have done this action because it is contraindicated in this case +bos ?contraindicatedWhy +eos"],missingMinimal:["Problem","You did not do this action, which is recommended by protocol ?protocol +bos @why +eos"],missingOptional:["Caution","You did not do this action +bos but it was optional in this case according to protocol ?protocol @bos @why +eos"],missingRequired:["Problem","You did not do this action, which is recommended by protocol ?protocol +bos @why +eos"],missingRequiredAssessment:["Problem","You did not do this action. +bos ?assessmentFB +eos"],notNecessary:["Caution","You should not have done this action because it was unnecessary +bos @why +eos"],assessment:["Good",""],"assessment-option":["Good",""],"decision-option":["Good",""],"required-action":["Good",""],standard:["Good","?intvStatusFB +eos "],"misOrdered-assessment":["Problem","Doing this action was correct but it was done out of the recommended order +bos @orderingFB +eos"],"misOrdered-assessment-option":["Problem","Doing this action was correct but it was done out of the recommended order +bos @orderingFB +eos"],"misOrdered-decision-option":["Problem","Doing this action was correct but it was done out of the recommeded order +bos @orderingFB"],"misOrdered-required-action":["Problem","Doing this action was correct but it was done out of the recommeded order +bos @orderingFB"],"misOrdered-standard":["Problem","Doing this action was correct but it was done out of the recommeded order +bos @orderingFB"],"misOrdered-phase-assessment":["Problem","Doing this action was correct but this section was not completed in the recommended order +bos @orderingFB +eos"],"misOrdered-phase-assessment-option":["Good","Doing this action was correct but this section was not completed in the recommended order +bos @orderingFB +eos"],"misOrdered-phase-decision-option":["Problem","Doing this action was correct but this section was not completed in the recommended order +bos @orderingFB"],"misOrdered-phase-required-action":["Problem","Doing this action was correct but this section was not completed in the recommended order +bos @orderingFB"],"misOrdered-phase-standard":["Problem","Doing this action was correct but this section was not completed in the recommended order +bos @orderingFB"],intvCheckWNoIntvFound:["Caution","You didn't do this intervention so it doesn't make sense to check the status of it at this point."],unexpectedPatientIntvCheck:["Caution","This status check is not likely to reveal any useful information."],patientIntvCheck:["Good",""],patientVitalCheck:["Good",""],"assessment-option-incorrect":["Problem","Doing this action was correct but there is a problem with how you planned to do it +bos @incorrectAnswerFB +eos "],"decision-option-incorrect":["Problem","Doing this action was correct but there is a problem with how you planned to do it +bos @incorrectAnswerFB +eos "],"incorrect-answers":["Problem","Doing this action is correct but there is a problem with how you planned to do it +bos @incorrectAnswersFB +bos ?intvStatusFB +eos"],"minimal-incorrect-answers":["Problem","Doing this action was correct and would solve the problem but you did not follow protocol @protocol +bos @minimalWhy +bos also there is a problem with how you planned to do this intervention +bos @incorrectAnswersFB +bos ?intvStatusFB +eos"],minimal:["Caution","Doing this action is correct and solves the problem but you did not follow protocol @protocol +bos @minimalWhy +bos ?intvStatusFB +eos "],"misOrdered-assessment-option-incorrect":["Problem","Doing this action was correct but it was done out of the recommended order +bos @orderingFB +bos Also there is a problem with how you planned to do it +bos @incorrectAnswerFB +eos "],"misOrdered-decision-option-incorrect":["Problem","Doing this action was correct but it was done out of the recommended order +bos @orderingFB +bos Also there is a problem with how you planned to do it +bos @incorrectAnswerFB +eos "],"misOrdered-incorrect-answers":["Problem","Doing this action is correct but it was done out of the recommended order +bos @orderingFB +bos also there is a problem with how you planned to do it +bos @incorrectAnswersFB +bos ?intvStatusFB +eos"],"misOrdered-minimal-incorrect-answers":["Problem","Doing this action is correct but it was done out of the recommended order +bos @orderingFB +bos And while this would solve the problem, you did not follow protocol @protocol +bos @minimalWhy +bos also there is a problem with how you planned to do it +bos @incorrectAnswersFB +bos ?intvStatusFB +eos"],"misOrdered-minimal":["Problem","Doing this action is correct but it was done out of the recommended order +bos @orderingFB +bos And while this would solve the problem, you did not follow protocol @protocol +bos @minimalWhy +bos ?intvStatusFB +eos"],"misOrdered-phase-assessment-option-incorrect":["Problem","Doing this action was correct but this section was not completed in the recommended order +bos @orderingFB +bos Also there is a problem with how you planned to do it +bos @incorrectAnswerFB +eos "],"misOrdered-phase-decision-option-incorrect":["Problem","Doing this action was correct but this section was not completed in the recommended order +bos @orderingFB +bos Also there is a problem with how you planned to do it +bos @incorrectAnswerFB +eos "],"misOrdered-phase-incorrect-answers":["Problem","Doing this action is correct but this section was not completed in the recommended order +bos @orderingFB +bos also there is a problem with how you planned to do it +bos @incorrectAnswersFB +bos ?intvStatusFB +eos"],"misOrdered-phase-minimal-incorrect-answers":["Problem","Doing this action is correct but this section was not completed in the recommended order +bos @orderingFB +bos And while this would solve the problem, you did not follow protocol @protocol +bos @minimalWhy +bos also there is a problem with how you planned to do it +bos @incorrectAnswersFB +bos ?intvStatusFB +eos"],"misOrdered-phase-minimal":["Problem","Doing this action is correct but this section was not completed in the recommended order +bos @orderingFB +bos And while this would solve the problem, you did not follow protocol @protocol +bos @minimalWhy +bos ?intvStatusFB +eos"],green:["Good",""],red:["Problem",""],yellow:["Caution",""],default:["Not implemented","This action was not expected.  There could be an issue with how this scenario is represented within the system."]},J={absent:["missingMinimal","missingOptional","missingRequired","missingRequiredAssessment"],errors:["misOrdered-assessment","misOrdered-assessment-option","misOrdered-decision-option","misOrdered-required-action","misOrdered-standard","contraindicated","intvCheckWNoIntvFound","unexpectedPatientIntvCheck","assessment-option-incorrect","decision-option-incorrect","incorrect-answers","minimal-incorrect-answers","misOrdered-assessment-option-incorrect","misOrdered-decision-option-incorrect","misOrdered-incorrect-answers","misOrdered-minimal-incorrect-answers","misOrdered-minimal","notNecessary","default","misOrdered-phase-assessment-option-incorrect","misOrdered-phase-decision-option-incorrect","misOrdered-phase-incorrect-answers","misOrdered-phase-minimal-incorrect-answers"],good:["assessment","assessment-option","decision-option","required-action","standard","patientIntvCheck","patientVitalCheck","minimal","misOrdered-phase-minimal","misOrdered-phase-assessment","misOrdered-phase-assessment-option","misOrdered-phase-decision-option","misOrdered-phase-required-action","misOrdered-phase-standard"]},X=[{scenarioName:"M2CA",exceptions:[["required-action-obtain-OPQRST","This cannot be assessed when GCS < 15"],["assess-opqrst-info","This cannot be assessed when GCS < 15"]]}],Z=(m={"scene-size-up":{id:"T1",before:["primary-survey"],beforeOp:"",after:[],afterOp:"",type:"policy"},"primary-survey":{id:"T2a",before:["secondary-assessment"],beforeOp:"",after:[],afterOp:"",type:"policy"},"intv-control-severe-bleeding-technique-direct-pressure":{id:"T2b",before:["secondary-assessment"],beforeOp:"",after:[],afterOp:"",type:"policy"},"intv-control-severe-bleeding-technique-2nd-tourniquet":{id:"T2c",before:["secondary-assessment"],beforeOp:"",after:[],afterOp:"",type:"policy"},"intv-control-severe-bleeding-technique-tourniquet":{id:"T2d",before:["secondary-assessment"],beforeOp:"",after:[],afterOp:"",type:"policy"},"ints-call-for-helicopter":{id:"T3",before:["secondary-assessment"],beforeOp:"",after:[],afterOp:"",type:"policy"},"required-action-obtains-vitals":{id:"T4",before:["secondary-assessment"],beforeOp:"",after:[],afterOp:"",type:"policy"},"required-action-attempt-obtain-sample":{id:"T5a",before:["secondary-assessment"],beforeOp:"",after:[],afterOp:"",type:"policy"},"required-action-obtain-OPQRST":{id:"T5b",before:["secondary-assessment"],beforeOp:"",after:[],afterOp:"",type:"policy"},"intv-transfer":{id:"T7",before:["secondary-assessment"],beforeOp:"",after:["airway","breathing","circulation"],afterOp:"",type:"policy"},"trauma-expose":{id:"T8",before:["chest"],beforeOp:"or",after:[],afterOp:"",type:"policy"},"general-impression":{id:"T9",before:["airway","breathing","circulation"],beforeOp:"and",after:[],afterOp:"",type:"policy"},"intv-spinal-immobilization-technique-manual-c-spine":{id:"T10a",before:["airway"],beforeOp:"",after:[],afterOp:"",type:"policy"},"intv-spinal-immobilization-technique-cervical-collar":{id:"T10b",before:["airway"],beforeOp:"",after:[],afterOp:"",type:"policy"},"intv-airway-patency-technique-suction-airway":{id:"T13",before:["secondary-assessment"],beforeOp:"",after:["airway"],afterOp:"",type:"policy"}},Object(M.a)(m,"intv-airway-patency-technique-suction-airway",{id:"T14",before:["intv-oropharyngeal-airway","intv-nasopharyngeal-airway"],beforeOp:"or",after:[],afterOp:"",type:"policy"}),Object(M.a)(m,"intv-oropharyngeal-airway",{id:"T15a",before:["intv-nasotracheal-intubation","intv-orotracheal-intubation","intv-sedation-assisted-intubation","intv-rapid-sequence-intubation"],beforeOp:"or",after:[],afterOp:"",type:"policy"}),Object(M.a)(m,"intv-nasopharyngeal-airway",{id:"T15b",before:["intv-nasotracheal-intubation","intv-orotracheal-intubation","intv-sedation-assisted-intubation","intv-rapid-sequence-intubation"],beforeOp:"or",after:[],afterOp:"",type:"policy"}),Object(M.a)(m,"intv-ventilation-technique-bag-valve-mask",{id:"T17",before:["secondary-assessment"],beforeOp:"",after:[],afterOp:"",type:"policy"}),m),$={"assess-major-bleeding":{id:"c1",before:["airway","breathing"],beforeOp:"",after:[],afterOp:"",type:"policy"},"intv-transport":{id:"T2-c1",before:["into-establish-IV","intv-control-shock-technique-administer-iv-boluses"],beforeOp:"and",after:[],afterOp:"",type:"policy"},"secondary-assessment":{id:"T6-c1",before:["intv-transfer","ongoing-mgmt-plan"],beforeOp:"",after:[],afterOp:"",type:"policy"},"pulse-checks":{id:"T12-c1",before:["airway"],beforeOp:"or",after:[],afterOp:"",type:"policy"}},ee={M2CA:["c1","T6-c1"],B4CA:[],B7CA:[],SC8CP:["T2-c1","T6-c1","T12-c1"]},te={"intv-nasopharyngeal-airway":{intvStatusNeeded:!0,vitalsNeeded:[]},"intv-oropharyngeal-airway":{intvStatusNeeded:!0,vitalsNeeded:[]},"intv-orotracheal-intubation":{intvStatusNeeded:!0,vitalsNeeded:[]},"intv-ventilation-technique-bag-valve-mask":{intvStatusNeeded:!1,vitalsNeeded:["R","Spo2","BP","Skin"]},"intv-sedation-assisted-intubation":{intvStatusNeeded:!1,vitalsNeeded:["R","Spo2","BP","Skin"]},"intv-control-severe-bleeding-technique-direct-pressure":{intvStatusNeeded:!0,vitalsNeeded:[]},"intv-control-severe-bleeding-technique-tourniquet":{intvStatusNeeded:!0,vitalsNeeded:[]},"intv-control-severe-bleeding-technique-2nd-tourniquet":{intvStatusNeeded:!0,vitalsNeeded:[]}};var ne,re,ie,oe,se,ae,ce,de,le,ue,pe=function(e,t){t.includes(e)||t.push(e)},he=function(e){var t=[],n=[];e.forEach((function(e){pe(e,t)}));for(var r=0,i=Object.entries(J);r<i.length;r++){var o=Object(u.a)(i[r],2),s=o[0];0!==o[1].filter((function(e){return t.includes(e)})).length&&pe(s,n)}return 1===n.length?n[0]:"errors"},be=function(e){for(var t=[],n=0,r=Object.entries(Q);n<r.length;n++){var i=Object(u.a)(r[n],2),o=i[0];i[1][0]===e&&t.push(o)}return t},fe=function(e,t){var n="";if("header"===e.type?(n=Q[e.displayColor])||(n=Q[e.status]):n=Q[e.status]?Q[e.status]:Q.default,n)return n[t]},me=function(e){return Y[fe(e,0)]},Oe=function(e){if(e){var t,n=e.split(" "),r=n.length;n.forEach((function(e,t){var i=e.trim();"."===i[e.length-1]&&t<r-1&&(i+="\xa0\xa0"),n[t]=i}));var i,o=Object(G.a)(n);try{for(o.s();!(i=o.n()).done;){var s=i.value;t=t?t+" "+s:s}}catch(a){o.e(a)}finally{o.f()}return t}return""},ve=function(e){e.intvStatus&&e.intvStatus.length>0&&(e.intvStatusFB=function(e){var t,n,r=[],i=[],o=Object(G.a)(e.intvStatus);try{for(o.s();!(n=o.n()).done;){var s=n.value;s.foundCk?r.push(s.label):i.push(s.label)}}catch(a){o.e(a)}finally{o.f()}return i.length>0&&(t="Remember to check the effect of this action by asking for: "+i+".",r.length>0&&(t=t+" That is in addition to what you did ask for: "+r+".")),t}(e));var t,n=Oe(fe(e,1)).trim().split(" ");n.forEach((function(t,r){var i=t.charAt(0),o=t.substring(1);switch(n[r]=n[r].trim(),i){case"@":e[o]?n[r]=Oe(e[o]):n[r]="[value for "+o+" is missing]";break;case"?":e[o]?n[r]=Oe(e[o]):(n[r]="","+bos"===n[r-1]&&(n[r-1]=""),"+eos"===n[r+1]&&(n[r+1]=""))}})),n.forEach((function(e,t){var r="";switch(e.charAt(0)){case"+":switch(e.substring(1)){case"eos":"."===(r=n[t-1].trim())[r.length-1]&&(r=r.slice(0,-1)),n[t-1]=r+".\xa0",n[t]="";break;case"bos":"."===(r=n[t-1].trim())[r.length-1]&&(r=r.slice(0,-1)),n[t-1]=r+".\xa0",n[t]="";var i=n[t+1].trim();n[t+1]=i.charAt(0).toUpperCase()+i.slice(1)}}}));var r,i=Object(G.a)(n);try{for(i.s();!(r=i.n()).done;){var o=r.value;t?""!==o&&(t=t+"\xa0"+o):""!==o&&(t=o)}}catch(s){i.e(s)}finally{i.f()}return t},ge={},je=function(e,t,n){return e.filter((function(e){return e[t]===n}))},ye=function(e,t,n){return je(je(e,"timestamp",n),"id",t)},we=n(34),Pe=function(e,t,n,r,i){console.log("In savingDebriefingLog");var o=v.collection("debriefing-feedback-logs").doc(e.id),s={userName:e.userName,ObserverFileCreater:e.userName,label:e.label,ObserverFileName:e.label,commenter:"",scenarioID:e.scenarioID,scenarioName:e.scenarioName,schemaVersion:e.schemaVersion,timestamp:Date().toLocaleString(),hierAssessResults:n,hierProblemResults:r,constraintsViolated:i},a=[],c={},d=!1;t.forEach((function(e,t){for(var n=0,r=Object.entries(e);n<r.length;n++){var i=Object(u.a)(r[n],2),o=i[0],s=i[1];void 0===s&&(console.log("filtered out from events; index: ",t," key: ",o," value: ",s),d=!0)}})),d?(t.forEach((function(e,t){c=we.pickBy(e,(function(e,t){return!(void 0===e)})),a.push(c)})),s.events=a):s.events=t,o.set(s)},De=function(e){return"criticalActionHeader"===e.status?"":-1===e.timestamp?"\xa0\xa0":(t=e.timestamp,new Date(1e3*t).toISOString().substr(14,5));var t},xe=function(e,t){return e.reduce((function(e,n){return Object(w.a)(Object(w.a)({},e),{},Object(M.a)({},n[t],(e[n[t]]||[]).concat(n)))}),{})},Se=function(e,t){return e.checkListMetaData.filter((function(e){return e.type===t}))},Ee=[],Ie=[],ke=function(e,t,n,r){var i=Te(e,t);if(i){var o,s=[i];if(r)2===n&&(o=t.filter((function(t){return t.expertPhase===e&&"header"!==t.type}))),1===n&&(o=t.filter((function(e){return e.phaseID===i.labelID&&"header"===e.type&&"assessmentSubHeader"===e.id}))),s=s.concat(o);return s}return!1},Te=function(e,t){var n,r="unk",i=[],o=t.filter((function(t){return"header"===t.type&&t.labelID===e})),s=o[0],a=Object(G.a)(o);try{for(a.s();!(n=a.n()).done;){var c=n.value;i.includes(c.status)||i.push(c.status)}}catch(d){a.e(d)}finally{a.f()}return i.length>0&&(r=1===i.length?i[0]:"errors"),s&&(s.status=r),s},Ne=function(e,t,n,r,i){Ee=[],Ie=[];var o={},s={};e.forEach((function(e){"intervention"!==e.type&&"answer"!==e.type?Ee.push(e):Ie.push(e)})),t.forEach((function(e){var t=1,n=Ie.filter((function(t){return t.probLabel===e.probLabel&&"header"!==t.type})),r=n.map((function(e){return e.status})),i={id:"interventionHeader",status:he(r),phaseOrderStatus:"good",labelID:e.probLabel,type:"header",numericalID:t++/2e3,displayColor:"green"};n&&(s[e.probLabel]=[i].concat(n))}));var a,c=n,d=r.filter((function(e){return!c.includes(e)}));return c.forEach((function(e){var t=ke(e,Ee,2,!0);t&&(o[e]=t)})),d.forEach((function(e){!function(e,t){if("Unknown"!==e){var n,r,i=[],o=t.filter((function(t){return"header"===t.type&&t.labelID===e}))[0],s=t.filter((function(e){return e.phaseID===o.labelID&&"header"===e.type&&"assessmentSubHeader"===e.id})),a=Object(G.a)(s);try{for(a.s();!(r=a.n()).done;){var c=r.value;pe(c.status,i)}}catch(d){a.e(d)}finally{a.f()}n=1===i.length?i[0]:"errors",o.status=n}}(e,Ee);var t=ke(e,Ee,1,!0);t&&(o[e]=t)})),i.forEach((function(t){"phase"===t.type&&((a=e.filter((function(e){return e.labelID===t.arg1.id}))[0]).phaseOrderStatus="misOrdered",a.arg2?a.arg2=a.arg2.concat([t.arg2.id]):a.arg2=[t.arg2.id])})),[o,s]},Fe=be("Problem"),Ae=be("Caution"),Ce={};function Be(e){ce=e,function(e){var t=ee[e];ge=Z;for(var n=0,r=Object.entries($);n<r.length;n++){var i=Object(u.a)(r[n],2),o=i[0],s=i[1];t.includes(s.id)&&(ge[o]=s)}}(e.name),de=Re(e),le=Le(e),se=Se(e,F.PHASE).map((function(e){return e.id})).concat(["Unknown"]),oe=Se(e,F.SUB_PHASE).map((function(e){return e.id})),ue=function(e){var t=Se(e,F.PHASE),n=Se(e,F.SUB_PHASE),r=e.checkListMetaData.filter((function(e){return C.includes(e.type)})),i=e.checkListMetaData.filter((function(e){return B.includes(e.type)})),o=xe(i,"parentID");r.forEach((function(e){e.id in o&&(e.options=o[e.id])}));var s=xe(r.filter((function(e){return void 0===e.subPhase})),"phase"),a=xe(r.filter((function(e){return!!e.subPhase})),"subPhase");n.forEach((function(e){e.items=a[e.id]}));var c=xe(n,"phase");return t.forEach((function(e){e.id in s?e.items=s[e.id]:e.subPhases=c[e.id]})),t}(e),ae=Me(ue),ue.forEach((function(e){void 0===e.subPhases?Ce[e.id]=e.label:e.subPhases.forEach((function(t){Ce[t.id]=e.label}))})),Ce.Unknown="Unknown",ne={},re={},ie=[]}var Re=function(e){var t=xe(e.checkListMetaData.filter((function(e){return R.includes(e.type)})),"id"),n=xe(e.intvMetaData.filter((function(e){return R.includes(e.type)})),"id");return Object.assign(t,n)},Le=function(e){var t=xe(e.checkListMetaData.filter((function(e){return R.includes(e.type)})),"label"),n=xe(e.intvMetaData.filter((function(e){return R.includes(e.type)})),"label");return Object.assign(t,n)},Me=function(e){var t=[];return e.forEach((function(e){if(e.subPhases){var n=e.subPhases.map((function(e){return e.id}));t=t.concat(n)}else t=t.concat(e.id)})),t},qe=function(e,t,n,r){for(var i=void 0,o=void 0,s=0;s<e.length&&(n.id!==e[s]||(i=t[s],"start"!==r));s++);return i&&(o=-1===i.numericalID?"start"===r?i.numericalIDStart:i.numericalIDEnd:i.numericalID),o},_e={id:"Unknown",label:"Unknown"},We=function(e){if("Unknown"===e)return _e;var t=de[e];return t||(t=le[e]),t?t[0]:void 0},He=function(e,t,n){for(var r=0;r<n.length;r++){var i=t[r],o=n[r];if(i.length>0&&!Xe(o)){var s,a=Object(G.a)(i);try{for(a.s();!(s=a.n()).done;){var c=s.value;if(c.numericalID===e)return c}}catch(d){a.e(d)}finally{a.f()}}}},Ue=function(e,t,n,r){var i=He(e,n,r);i?i.arg2?i.arg2=i.arg2.concat([t.id]):i.arg2=[t.id]:console.log("no object found for numericalID = ",e)},Ve=function(e,t,n){var r;return r=["phase","sub-phase"].includes(e.type)?"phase":"item",ie.push({constraintID:n,arg1:e,op:"before",arg2:t,type:r}),r},ze=function(e,t,n,r){return r&&(e+=t?" and ":", "),e+=n.toLowerCase()},Ge=function(e,t,n,r,i,o,s,a,c){var d,l=qe(o,s,e,"end"),u=qe(o,s,e,"start"),p=e.label,h="",b="",f="";if(t.length>0){var m,O=0,v=0,g=Object(G.a)(t);try{for(g.s();!(m=g.n()).done;){var j=m.value,y=!1,w=We(j);if(w){++O===t.length&&(y=!0);var P=w.label,D=qe(o,s,w,"start"),x=qe(o,s,w,"end");switch(r){case"before":if(l&&D)if(l<D){if("or"===n)return}else v++,""===b&&(b=ze(b=u===l?"You should have done ":"You should have completed ",y,p,!1)),D===x?(""===f&&(f+=" before you did "),f=ze(f,y,P,v>1)):(""===f&&(f+=" before starting "),f=ze(f,y,P,v>1)),Ue(u,w,a,c),d=Ve(e,w,i);break;case"after":if(u&&x)if(u>x){if("or"===n)return}else v++,u===l?(""===b&&(b="You should have done "),b=ze(b,y,P,v>1)):(""===b&&(b="You should have completed "),b=ze(b,y,P,v>1)),""===f&&(f=ze(f+=D===x?" before you did ":" before starting ",y,p,!1)),Ue(D,e,a,c),d=Ve(w,e,i)}}}}catch(S){g.e(S)}finally{g.f()}""!==(h=b+f)&&function(e,t,n,r,i){var o=He(e,r,i);if(o){var s;""!==o.orderingFB?o.orderingFB=o.orderingFB+".\xa0\xa0"+t:o.orderingFB=t;var a="";"phase"===n&&(a="misOrdered-phase-"),"item"===n&&(a="misOrdered-"),o.status.includes(a)||(s=a+o.status,o.status=s)}else console.log("no object found for numericalID = ",e)}(u,h,d,a,c)}},Ye=function(e,t){var n=function(e,t){for(var n=[],r=[],i=[],o=0;o<t.length;o++){var s=e[o],a=t[o],c=s[0].numericalID,d=s[s.length-1].numericalID;if((se.includes(a)||oe.includes(a))&&(r.push({id:a,numericalID:-1,numericalIDStart:c,numericalIDEnd:d}),n.push(a),i.includes(a)||i.push(a)),s.length>0&&!Xe(a)){var l=s.map((function(e){return e.id}));r=r.concat(s),i=i.concat(l),n=n.concat(l)}}return[n,i,r]}(e,t),r=n[0],i=n[1],o=n[2];return i.forEach((function(n){var i=We(n);if(i){var s=function(e){var t=e.id,n=e.label,r=ge[t];return r||(r=ge[n]),r}(i);s&&function(e,t,n,r,i,o){var s=t.before,a=t.beforeOp;Ge(e,s,a,"before",t.id,i,o,n,r),s=t.after,a=t.afterOp,Ge(e,s,a,"after",t.id,i,o,n,r)}(i,s,e,t,r,o)}})),[e,t]},Ke=function(e,t,n,r){var i;i=n.when;var o=e.lastIndexOf(i),s=t[o];s||(s=[]),s.splice(r-1,0,n),t[o]=s},Qe=function(e,t){var n=function(e,t){var n,r,i=Je(e),o=Object(L.a)(i).reverse(),s=Object(G.a)(o);try{var a=function(){var e=r.value;if(n=t.find((function(t){return t===e.id})))return"break"};for(s.s();!(r=s.n()).done&&"break"!==a(););}catch(c){s.e(c)}finally{s.f()}return n}(e,t);return t.lastIndexOf(n)},Je=function(e){return ue.find((function(t){return t.id===e})).subPhases},Xe=function(e){var t=ue.find((function(t){return t.id===e}));return!(!t||!t.subPhases)},Ze=function(e,t){var n=t;return"red"===e&&(n="red"),"yellow"===e&&"red"!==n&&(n="yellow"),n},$e=function(e,t,n){var r=void 0;return void 0===(r=n?ce.associations[e]:ce.checkListCorrectness[e])?(console.log("didn't find answers for ",e),!1):Array.isArray(r)?!r.find((function(e){return e===t})):!(r===t)},et=function(e,t){var n,r;t?(n=ce.associations[e],r=ce.intvMetaData):(n=ce.checkListCorrectness[e],r=ce.checkListMetaData);var i=!1;return Array.isArray(n)?n.forEach((function(e,t){r.forEach((function(t,n){t.id!==e||(!1===i?i=t.label:i+=", ")}))})):r.forEach((function(e,t){e.id===n&&(i=e.label)})),i},tt=function(e,t){var n;n=t?ce.intvMetaData:ce.checkListMetaData;var r="";return n.forEach((function(t,n){t.id===e&&(r=t.label)})),r||!1},nt=function(e,t,n,r,i){return e.forEach((function(e){var o=e.actions;o.forEach((function(s,a){if(!t.includes(s.id+"+"+e.probLabel)){t.push(s.id+"+"+e.probLabel);var c={comment:"",numericalID:n,status:"",intvStatus:[],required:!0,when:"",suggestedPhase:"",expertPhase:"",probLabel:"",minimalWhy:"",assessmentsNeeded:"",protocol:"",actionDescription:"",type:"intervention",timestamp:-1};["id","phase","why","optional","minimal"].forEach((function(e){s[e]&&(c[e]=s[e])}));["probLabel","minimalWhy"].forEach((function(t){e[t]&&(c[t]=e[t])})),e.assessments&&(c.assessmentsNeeded=e.assessments),e.protocols&&(c.protocol=e.protocols),s.optional&&(c.required=!s.optional),s["id-label"]&&(c.label=s["id-label"]),s["id-label"]&&(c.actionDescription=s["id-label"]),s.phase&&(c.when=s.phase,c.expertPhase=s.phase,c.suggestedPhase=s.phase),c.required?c.status="missingRequired":c.optional?c.status="missingOptional":c.status="missingRequired","missingOptional"!==c.status&&(!function(e,t,n,r,i){var o=-1;""===n.expertPhase&&(n.expertPhase=se[se.length-2]),o=oe.includes(n.expertPhase)||!Je(n.expertPhase)?e.lastIndexOf(n.expertPhase):Qe(n.expertPhase,e),n.when=e[o];var s=r.slice(0,i-1),a=r[i-1],c=Object(L.a)(s).reverse().find((function(e){return e.required})),d=r[i+1],l=r.slice(i+1).find((function(e){return e.required})),u=Object(L.a)(t[o]),p=-1,h=-1,b=-1,f=-1,m=!1;a&&(p=u.findIndex((function(e){return e.id===a.id}))),d&&(h=u.findIndex((function(e){return e.id===d.id}))),c&&(b=u.findIndex((function(e){return e.id===c.id}))),l&&(f=u.findIndex((function(e){return e.id===l.id}))),d&&(h=u.findIndex((function(e){return e.id===d.id}))),-1!==b&&(m=b+2,p>b&&(m=p+2)),m||-1===f||(m=f+1,h<f&&(m=h+1)),m||-1===p||(m=p+2),m||-1===h||(m=h+1),m||(m=u.length+2),Ke(e,t,n,m)}(r,i,c,o,a),n++)}}))})),[n,r,i]};function rt(e,t){var n=t.events;console.log("in analyzeEvents"),Be(e);var r=ce.problems,i=ce.actions,o=function(e,t,n){var r,i=[],o=Object(G.a)(e);try{var s=function(){var e=r.value,o={},s=e.solutions[0];if(t&&n){var a,c=t.filter((function(t){return t.problemID===e.id})).filter((function(e){return e.id===s}));o.probLabel=e.label,o.id=e.id,o.lifeThreat=e.lifeThreat,o.vitals=e.vitals,o.assessments=e.assessments,o.actions=[],o.contraindications=[];var d=c[0].actions;a=n.filter((function(e){return d.includes(e.id)}));var l,u=Object(G.a)(a);try{for(u.s();!(l=u.n()).done;){var p=l.value,h=Object.assign({},p);h.id=h.interventionID;var b=de[h.id];h["id-label"]=b?b[0].label:h.id,"contraindicated"===h.protocolRelationship?o.contraindications.push(h):("minimal"===h.protocolRelationship?(h.optional=!1,h.minimal=!0):(h.optional=!0,h.minimal=!1),o.actions.push(h))}}catch(f){u.e(f)}finally{u.f()}o.minimalWhy=c.minimalWhy,o.protocols=c.protocols}else o.probLabel=e.problem,o.lifeThreat=e.lifeThreat,o.actions=s.actions,o.minimalWhy=s.minimalWhy,o.protocols=s.protocols,o.assessments=e.assessments,o.contraindications=s.contraindications,o.allProblemProtocols=e.protocol;i.push(o)};for(o.s();!(r=o.n()).done;)s()}catch(a){o.e(a)}finally{o.f()}return i}(r,ce.solutions,i),s=[],a=function(e,t){var n=[],r=[],i=[],o=[],s=[],a={},c="",d="",l=0,u=0,p=!0,h=["assessment","required-action","decision-option","assessment-option"];return e.forEach((function(e,b){var f={comment:"",numericalID:b,status:"",intvStatus:[],contraindicatedWhy:"",minimalWhy:"",why:"",answerCorrect:!0,answerDetails:{},expertPhase:"",workingPhase:"",suggestedPhase:"",protocol:"",probLabel:"",assessments:"",required:!1,actionDescription:"",assessmentFB:"",incorrectAnswersFB:"",orderingFB:"",processingState:"good"};["id","label","finding","phase","subPhase","vitalType","vital","value","type","prompt","promptID","intervention","timestamp"].forEach((function(t){e[t]&&(f[t]=e[t])})),e.label&&(f.actionDescription=e.label),e.type&&(f.status=e.type),e.subPhase?f.workingPhase=e.subPhase:e.phase&&(f.workingPhase=e.phase),f.expertPhase=f.workingPhase,c===f.workingPhase&&d===f.phase||(""!==c&&h.includes(f.type)?(p=!0,o[u]=s,u!==l&&(o[l]=o[l].concat(s)),u++,f.phase!==d&&(d=f.phase,l=u,f.phase!==f.workingPhase&&(o[l]=[],i[l]=d,u++))):""===c&&h.includes(f.type)?(d=f.phase)!==f.workingPhase&&(d=f.phase,i[l]=d,u++):""===c?(d="Unknown",f.workingPhase=d,f.phase=d,f.subPhase=""):p=!1,p?(c=f.workingPhase,s=[],i[u]=c,o[u]=[]):p=!0);var m=f.type;["assessment","required-action","intervention","answer","obtain-vital-sign","decision-option","assessment-option"].includes(m)||(f.processingState="bad");var O=[];if("answer"===m){var v=et(e.promptID,!0),g=tt(e.id,!0);if(v){var j=$e(e.promptID,e.id,!0),y={correctAnswer:v,givenAnswer:g,correct:!j};n.includes(f.intervention)?(O=s.pop(),n.pop(),f.answerCorrect=O.answerCorrect,f.answerDetails=O.answerDetails,f.actionDescription=O.actionDescription+", "+g,j?(f.answerCorrect=!1,""===O.incorrectAnswersFB?f.incorrectAnswersFB="You should have responded: "+v:f.incorrectAnswersFB=O.incorrectAnswersFB+", and "+v):(f.incorrectAnswersFB=O.incorrectAnswersFB,f.answerCorrect=O.answerCorrect)):(j?(f.answerCorrect=!1,f.incorrectAnswersFB="You should have responded: "+v):f.incorrectAnswersFB="",n.push(f.intervention)),f.answerDetails[e.promptID]=y}else f.processingState="bad"}if("intervention"===m&&(O=s.slice(-1)[0])&&"answer"===O.type&&(O.intervention===f.id?(O=s.pop(),n.pop(),n.pop(),f.answerCorrect=O.answerCorrect,f.answerDetails=O.answerDetails,f.incorrectAnswersFB=O.incorrectAnswersFB,f.actionDescription=f.actionDescription+".\xa0\xa0"+O.actionDescription):(O=s.pop(),n.pop(),n.pop())),"good"===f.processingState){if("obtain-vital-sign"===f.type){var w=f.vital,P="";P="intervention-status"===f.vitalType?r.includes(w)?"intv":"noIntv":"vital";var D=a[w];switch(P){case"intv":f.status="patientIntvCheck",D&&D.timestamp<f.timestamp&&(D.foundCk=!0,a[w]=D);break;case"noIntv":f.status="intvCheckWNoIntvFound";break;case"vital":f.status="patientVitalCheck",D&&(D=function(e,t){var n=[];return e.forEach((function(e){e.timestamp<t&&(e.foundCk=!0),n.push(e)})),n}(D,f.timestamp),a[w]=D);break;default:f.status="unexpectedPatientIntvCheck"}}"intervention"===f.type&&t.forEach((function(e,t){var n,r,i=["why","probLabel"];null===(n=e.actions)||void 0===n||n.forEach((function(t,n){if(t.id===f.id){var r,o=f.id;if((r=te[f.label])||(r=te[f.id]),r){var s={intervention:o,timestamp:f.timestamp,foundCk:!1};r.intvStatusNeeded&&(a[o]=Object.assign({},s)),r.vitalsNeeded.forEach((function(e){a[e]?a[e].push(Object.assign({},s)):a[e]=[Object.assign({},s)]}))}t.assessments&&(f.assessmentsNeeded=t.assessments),t.phase&&(f.when=t.phase),t.optional||(f.required=!0),e.protocols&&(f.protocol=e.protocols),f.answerCorrect?f.status="standard":f.status="incorrect-answers",t.phase&&(f.suggestedPhase=t.phase),f.probLabel=e.probLabel,i.forEach((function(e){t[e]&&(f[e]=t[e])})),t["id-label"]&&(f.label=t["id-label"])}})),null===(r=e.contraindications)||void 0===r||r.forEach((function(t,n){t.id===f.id&&(f.status="contraindicated",t.why&&(f.contraindicatedWhy=t.why),t["id-label"]&&(f.label=t["id-label"]),t.protocol&&(f.protocol=t.protocol),e.probLabel&&(f.probLabel=e.probLabel))}))})),"decision-option"===f.type&&$e(e.promptID,e.id,!1)&&(f.status="decision-option-incorrect",f.answerCorrect=!1,f.incorrectAnswerFB="You should have responded "+et(e.promptID,!1)),"assessment-option"===f.type&&$e(e.promptID,e.id,!1)&&(f.status="assessment-option-incorrect",f.answerCorrect=!1,f.incorrectAnswerFB="You should have responded "+et(e.promptID,!1)),"intervention"===f.type?(n.push(f.id+"+"+f.probLabel),r.push(f.id)):n.push(f.id),s.push(f)}})),o[u]=s,u!==l&&(o[l]=o[l].concat(s)),[o,i,n,a]}(n,o),c=a[0],d=a[1],l=a[2],p=a[3],h=Ye(c,d),b=function(e,t){var n;return ae.forEach((function(r,i){if(!t.includes(r)){var o=0;(n=0===i?ae[0]:ae[i-1])!==r&&(o=t.lastIndexOf(n),o+=1),t.splice(o,0,r),e.splice(o,0,[])}})),[e,t]}(c=h[0],d=h[1]);c=b[0],d=b[1];var f=function(e,t,n,r,i){var o,s=function(e){var t=[];return e.forEach((function(e){""!==e.assessments&&(t=t.concat(e.assessments))})),t}(e),a=t.length,c=ce.checkListMetaData.filter((function(e){return[F.ASSESS,F.REQUIRED].includes(e.type)})),d=[],l=Object(G.a)(X);try{for(l.s();!(o=l.n()).done;){var u=o.value;if(u.scenarioName===ce.name){d=u.exceptions;break}}}catch(p){l.e(p)}finally{l.f()}return d.forEach((function(e,t){c=c.filter((function(t){return t.id!==e[0]})),n.includes(e[0])&&i.forEach((function(t,n){t.forEach((function(t,n){t.id===e[0]&&(t.why=e[1],t.status="notNecessary")}))}))})),c.forEach((function(e,t){if(!n.includes(e.id)){n.push(e.id);var o={comment:"",numericalID:a,status:"missingRequiredAssessment",intvStatus:[],expertPhase:"",workingPhase:"",contraindicatedWhy:"",minimalWhy:"",why:"",probLabel:"",protocol:"",actionDescription:"",assessmentFB:"",timestamp:-1};["id","label","finding","phase","subPhase","type","prompt"].forEach((function(t){e[t]&&(o[t]=e[t])})),e.subPhase?o.workingPhase=e.subPhase:e.phase&&(o.workingPhase=e.phase),o.when=o.workingPhase,o.expertPhase=o.workingPhase,o.label&&(o.actionDescription=o.label),s.includes(e.id)&&(o.assessmentFB="Thus you missed finding: "+ce.assessmentFindings[e.id]),"required-action"===o.type&&(o.status="missingRequiredAssessment"),Ke(r,i,o,t),a++}})),[n,r,i,a]}(o,n,l,d,c);l=f[0],d=f[1],c=f[2];var m=f[3],O=nt(o,l,m,d,c);m=O[0],d=O[1],c=O[2],s=function(e,t){for(var n,r=0,i=Object.entries(t);r<i.length;r++){var o=Object(u.a)(i[r],2),s=o[0],a=o[1];if(Array.isArray(a)){var c,d=Object(G.a)(a);try{for(d.s();!(c=d.n()).done;){var l=c.value,p={label:s,foundCk:l.foundCk};n=ye(e,l.intervention,l.timestamp);var h,b=Object(G.a)(n);try{for(b.s();!(h=b.n()).done;){var f=h.value;f.intvStatus.includes(p)||f.intvStatus.push(p)}}catch(m){b.e(m)}finally{b.f()}}}catch(m){d.e(m)}finally{d.f()}}else!function(){var t={label:"intervention status",foundCk:a.foundCk};(n=ye(e,s,a.timestamp)).forEach((function(e){e.intvStatus.includes(t)||e.intvStatus.push(t)}))}()}return e}(s=function(e,t){for(var n=[],r=1,i=1,o="green",s="green",a=[],c=[],d=[],l={id:"assessmentHeader",status:"",phaseOrderStatus:"good",type:"header",numericalID:1,displayColor:"",why:"",label:"",labelID:"",protocol:""},u={id:"assessmentSubHeader",status:"",phaseOrderStatus:"good",type:"header",numericalID:1,displayColor:"",why:"",label:"",labelID:"",phaseID:"",protocol:""},p="",h=!1,b=0;b<e.length;b++){var f=t[b],m=e[b],O=!0;if(se.includes(m)&&Xe(m)&&(O=!1),f.length>0&&O){var v=t[b];s="green";var g,j=Object(G.a)(v);try{for(j.s();!(g=j.n()).done;){var y=g.value;"intervention"!==y.type&&a.push(y.status),Fe.includes(y.status)&&(s="red"),Ae.includes(y.status)&&"red"!==s&&(s="yellow"),y.numericalID=r++}}catch(C){j.e(C)}finally{j.f()}var w=Object.assign({},u),P=e[b],D=We(P);w.label=D.label,w.labelID=D.id,w.status=he(a),w.displayColor=s;var x=Ce[P],S=We(x);if(w.phaseID=S.id,""===p&&(p=S,o=Ze(s,o)),b===e.length-1){var E=Object.assign({},l);x!==p.label&&(E.label=p.label,E.labelID=p.id,E.status=he(c),E.displayColor=o,E.numericalID=i++/1e3,n.push(E),n.push.apply(n,Object(L.a)(d)),d=[]),(E=Object.assign({},w)).label=S.label,E.labelID=S.id,E.id="assessmentHeader",E.numericalID=i++/1e3,n.push(E),x===w.label?(n.push.apply(n,Object(L.a)(d)),n.push.apply(n,Object(L.a)(v))):(w.numericalID=i++/1e3,n.push.apply(n,Object(L.a)(d)),n.push(w),n.push.apply(n,Object(L.a)(v))),h=!0}if(!h)if(x!==p.label){var I,k,T=Object.assign({},l);T.label=p.label,T.labelID=p.id,T.status=he(c),c=[],T.displayColor=o,T.numericalID=i++/1e3,n.push(T),n.push.apply(n,Object(L.a)(d)),(I=c).push.apply(I,Object(L.a)(a)),a=[],x===w.label?d=Object(L.a)(v):(w.numericalID=i++/1e3,(k=d=[w]).push.apply(k,Object(L.a)(v))),p=S,o=Ze(s,"green")}else{var N,F,A;o=Ze(s,o),(N=c).push.apply(N,Object(L.a)(a)),a=[],x===w.label?(F=d).push.apply(F,Object(L.a)(v)):(w.numericalID=i++/1e3,d.push(w),(A=d).push.apply(A,Object(L.a)(v)))}}}return n}(d,c),p);var v=[];s.forEach((function(e,t){v.push(e)}));var g=[],j=[],y=0,w=-1;v.forEach((function(e,t){if("intervention"===e.type&&e.status&&e.status.includes("standard","incorrect-answers","minimal","misOrdered-standard","misOrdered-incorrect-answers","misOrdered-incorrect-answers","minimal","misOrdered-minimal","misOrdered-minimal-incorrect-answers","misOrdered-phase-incorrect-answers","misOrdered-phase-minimal-incorrect-answers","misOrdered-phase-minimal")){j.includes(e.probLabel)?w=j.indexOf(e.probLabel):(j[w=y]=e.probLabel,y++);var n=g[w];n||(n=[]),n.push(e),g[w]=n}}));var P=s.map((function(e){return e.id})),D=o.map((function(e){return e.probLabel}));j.forEach((function(e,t){var n=D.indexOf(e),r=o[n],i=r.actions.filter((function(e){return!e.optional})).map((function(e){return e.id})),a=r.actions.filter((function(e){return e.minimal})).map((function(e){return e.id}));if(a){var c,d=g[t].map((function(e){return e.id})),l=!0,u=!0,p=Object(G.a)(i);try{for(p.s();!(c=p.n()).done;){var h=c.value;if(!d.includes(h)){l=!1;break}}}catch(j){p.e(j)}finally{p.f()}var b,f=Object(G.a)(a);try{for(f.s();!(b=f.n()).done;){var m=b.value;if(!d.includes(m)){u=!1;break}}}catch(j){f.e(j)}finally{f.f()}var O=[];if(!l&&u){a.forEach((function(e,t){var n=P.indexOf(e),i=s[n];switch(i.minimalWhy=r.minimalWhy,i.status){case"incorrect-answers":i.status="minimal-incorrect-answers";break;case"standard":i.status="minimal";break;case"misOrdered-standard":i.status="misOrdered-minimal";break;case"misOrdered-incorrect-answers":i.status="misOrdered-minimal-incorrect-answers";break;case"misOrdered-phase-standard":i.status="misOrdered-phase-minimal";break;case"misOrdered-phase-incorrect-answers":i.status="misOrdered-phase-minimal-incorrect-answers"}O.push(i.numericalID),s[n]=i}));var v={};O.forEach((function(e,t){(v=function(e,t){var n,r={},i={},o=Object(G.a)(t);try{for(o.s();!(n=o.n()).done;){var s=n.value;if("problemHeader"===s.id)r=s;else if(s.numericalID===e){i=r;break}}}catch(j){o.e(j)}finally{o.f()}return i}(e,s))&&"green"===v.displayColor&&(v.displayColor="yellow")}))}}}));var x=Ne(v,o,ae,se,ie);return ne=x[0],re=x[1],console.log("Phase Assessment Status Results",ne),console.log("Intervention Status Results",re),console.log("Constraint Violation Results",ie),Pe(t,v,ne,re,ie),v}var it=n(67),ot=n(63),st=n(64),at=n(65),ct=n(66),dt=function(e){var t=e.title,n=e.leftNav,r=void 0===n?null:n,o=e.rightNav,s=void 0===o?null:o,a=Object(i.useContext)(l.AuthContext),c=a.isAuthenticated,d=a.userName,u=a.signOutUser;return Object(V.jsxs)(ot.a,{color:"dark",dark:!0,children:[Object(V.jsx)(st.a,{href:"#",children:"MedDBriefer"}),!!r&&Object(V.jsx)(at.a,{children:r}),!!t&&Object(V.jsx)(ct.a,{tag:"h3",children:t}),Object(V.jsxs)(at.a,{children:[c&&Object(V.jsxs)(V.Fragment,{children:[Object(V.jsxs)(ct.a,{children:["Welcome, ",d," \xa0"]}),Object(V.jsx)(it.a,{color:"danger",onClick:u,children:"Sign Out"})]}),!!s&&s]})]})},lt=function(e){var t=e.log,n=e.actions,r=e.scenario,o=e.context,s=Object(i.useState)(!1),a=Object(u.a)(s,2),c=a[0],d=a[1],l=Object(i.useState)(void 0),p=Object(u.a)(l,2),h=p[0],b=p[1];function f(e){return Object(V.jsx)(V.Fragment,{children:"obtain-vital-sign"===e.type?O(e):v(e)})}function m(e){var t=r.intvMetaData.find((function(t){return e.vital===t.id}));return Object(V.jsx)(V.Fragment,{children:t.label})}function O(e){return Object(V.jsx)(V.Fragment,{children:"intervention-status"===e.vitalType?Object(V.jsxs)(V.Fragment,{children:["Requested intervention status for: ",m(e),", ",Object(V.jsxs)("p",{children:["Found: ",Object(V.jsx)("i",{children:e.value})]})]}):Object(V.jsxs)(V.Fragment,{children:["Requested vital: ",e.vital,", ",Object(V.jsxs)("p",{children:["Found: ",Object(V.jsx)("i",{children:e.value})]})]})})}function v(e){return Object(V.jsx)(V.Fragment,{children:e.subPhase&&"intervention"!==e.type?Object(V.jsxs)(V.Fragment,{children:[Object(V.jsxs)("b",{children:[e.subPhase,":"]})," ",e.actionDescription,".  ",w(e)]}):Object(V.jsx)(V.Fragment,{children:g(e)})})}function g(e){return Object(V.jsx)(V.Fragment,{children:"intervention"===e.type?Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)("b",{children:"Intervention:"})," ",e.actionDescription,". ",w(e)," "]}):Object(V.jsxs)(V.Fragment,{children:[e.actionDescription,".  ",w(e)]})})}function w(e){return Object(V.jsx)(V.Fragment,{children:e.finding?Object(V.jsxs)("p",{children:["\xa0\xa0\xa0\xa0\xa0Findings: ",Object(V.jsx)("i",{children:e.finding})]}):Object(V.jsx)(V.Fragment,{})})}function P(e){var t=e.target.defaultValue,n=e.target.value,r=e.target.id;if(t!==n){var i=h.find((function(e){return e.id===r})),o=Object.assign({},i,{comment:n});x(o)}}var D=function(e){return Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)("td",{children:e.numericalID}),Object(V.jsx)("td",{children:De(e)}),Object(V.jsxs)("td",{className:me(e),children:[Object(V.jsx)("span",{className:"material-icons-outlined",children:(t=e,K[fe(t,0)])}),f(e)]}),Object(V.jsx)("td",{children:ve(e)}),c&&Object(V.jsx)("td",{children:Object(V.jsx)("textarea",{rows:"2",cols:"50",defaultValue:e.comment,onBlur:P,id:"".concat(e.id)})})]});var t},x=function(e){var t=h.findIndex((function(t){return t.id===e.id}));b([].concat(Object(L.a)(h.slice(0,t)),[e],Object(L.a)(h.slice(t+1))))};function S(){return(S=Object(y.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d("review"===o),b(n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(i.useEffect)((function(){!function(){S.apply(this,arguments)}()}),[]),void 0===h?Object(V.jsx)("h3",{children:"processing"}):Object(V.jsxs)(V.Fragment,{children:["review"===o?Object(V.jsx)(V.Fragment,{children:Object(V.jsx)(dt,{title:"Review of: ".concat(t.label),leftNav:Object(V.jsx)(it.a,{color:"primary",onClick:function(){Pe(t,h)},children:"Save Debriefing Log"}),rightNav:Object(V.jsx)(it.a,{color:"primary",onClick:function(){d(!c)},children:"Toggle Comments"})})}):Object(V.jsx)(V.Fragment,{children:Object(V.jsx)(dt,{title:"Analysis for: ".concat(t.label)})}),Object(V.jsx)("form",{children:Object(V.jsx)("div",{style:{overflowY:"auto",maxHeight:"700px"},children:Object(V.jsxs)(U.a,{borderless:!0,size:"sm",children:[Object(V.jsx)("thead",{children:Object(V.jsxs)("tr",{children:[Object(V.jsx)("th",{className:"table-header",children:" ID "}),Object(V.jsx)("th",{className:"table-header",children:" Timestamp "}),Object(V.jsx)("th",{className:"table-header",children:" Action Description "}),Object(V.jsx)("th",{className:"table-header",children:" Feedback "}),c&&Object(V.jsx)("th",{className:"table-header",children:" Comments "})]})}),Object(V.jsx)("tbody",{className:"scrolling",children:h.map((function(e,t){return Object(V.jsx)("tr",{children:"header"===e.type?(n=e,Object(V.jsx)(V.Fragment,{children:"assessmentHeader"===n.id||"assessmentSubHeader"===n.id?Object(V.jsx)("td",{colSpan:"4",className:me(n),children:Object(V.jsx)("b",{children:n.label})}):Object(V.jsx)("td",{colSpan:"10",className:"black",children:Object(V.jsx)("div",{children:Object(V.jsxs)("em",{children:["\xa0\xa0\xa0Intervention Group: ",n.probLabel]})})})})):D(e)},t);var n}))})]})})})]})};var ut=function(){var e=Object(d.m)().logID,t=Object(i.useState)(void 0),n=Object(u.a)(t,2),r=n[0],o=n[1],s=Object(i.useState)(void 0),a=Object(u.a)(s,2),c=a[0],l=a[1],p=Object(i.useState)(void 0),h=Object(u.a)(p,2),b=h[0],f=h[1],m=Object(i.useState)(!1),O=Object(u.a)(m,2),g=O[0],w=O[1],P=Object(i.useState)(!1),D=Object(u.a)(P,2),x=D[0],S=D[1];function E(){window.confirm("Are you sure you want to overwrite the existing analysis?  Any prior comments previously added will be lost.")&&I(b,r)}function I(e,t){return k.apply(this,arguments)}function k(){return(k=Object(y.a)(j.a.mark((function e(t,n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:rt(t,n);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(){return(T=Object(y.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_(v,"debriefing-feedback-logs",e);case 2:if(t.sent){t.next=7;break}I(b,r),w(!0),t.next=8;break;case 7:E();case 8:return w(!0),t.abrupt("return",!0);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(i.useEffect)((function(){W(v,e).then((function(e){o(e)})).catch((function(e){return alert("error fetching observer log",e)}))}),[]),Object(i.useEffect)((function(){r&&q(v,r.scenarioID,"V2").then((function(e){console.log("retrieve scenario:",e),f(e)}))}),[r]),Object(i.useEffect)((function(){b&&function(){T.apply(this,arguments)}()}),[b]),Object(i.useEffect)((function(){g&&H(v,e).then((function(e){l(e)})).catch((function(e){return alert("error fetching debriefing log",e)}))}),[g]),Object(i.useEffect)((function(){c&&S(!0)}),[c]),x?Object(V.jsx)(lt,{log:c,actions:c.events,scenario:b,context:"initial-analysis"}):Object(V.jsx)("h3",{children:"Loading"})},pt=function(){var e=Object(d.m)().logID,t=Object(i.useState)(null),n=Object(u.a)(t,2),r=n[0],o=n[1],s=Object(i.useState)(null),a=Object(u.a)(s,2),c=a[0],l=a[1],p=Object(i.useState)(!1),h=Object(u.a)(p,2),b=h[0],f=h[1];return Object(i.useEffect)((function(){W(v,e).then((function(e){o(e)}))}),[e]),Object(i.useEffect)((function(){r&&q(v,r.scenarioID).then((function(e){l(e),console.log("scenario",e)}))}),[r]),Object(i.useEffect)((function(){c&&f(!0)}),[c]),b?Object(V.jsx)(ut,{log:e}):Object(V.jsx)("h3",{children:"Loading"})};var ht=function(){var e=Object(d.m)().logID,t=Object(i.useState)(void 0),n=Object(u.a)(t,2),r=n[0],o=n[1],s=Object(i.useState)(void 0),a=Object(u.a)(s,2),c=a[0],l=a[1],p=Object(i.useState)(void 0),h=Object(u.a)(p,2),b=h[0],f=h[1],m=Object(i.useState)(!1),O=Object(u.a)(m,2),g=O[0],w=O[1],P=Object(i.useState)(!1),D=Object(u.a)(P,2),x=D[0],S=D[1];function E(){return(E=Object(y.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_(v,"debriefing-feedback-logs",e);case 2:if(t.sent){t.next=4;break}rt(b,r);case 4:return w(!0),t.abrupt("return",!0);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(i.useEffect)((function(){W(v,e).then((function(e){o(e)})).catch((function(e){return alert("error fetching observer log",e)}))}),[e]),Object(i.useEffect)((function(){r&&q(v,r.scenarioID,"V2").then((function(e){console.log("scenario:",e),f(e)}))}),[r]),Object(i.useEffect)((function(){b&&function(){E.apply(this,arguments)}()}),[b]),Object(i.useEffect)((function(){g&&H(v,e).then((function(e){l(e)})).catch((function(e){return alert("error fetching debriefing log",e)}))}),[g]),Object(i.useEffect)((function(){c&&S(!0)}),[c]),x?Object(V.jsx)(lt,{log:c,actions:c.events,scenario:b,context:"review"}):Object(V.jsx)("h3",{children:"Loading"})},bt=function(e){return Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(dt,{title:"MedDBriefer Authentication"}),e.children]})},ft=function(e){return Object(V.jsx)(l.AuthProvider,{children:Object(V.jsx)(c.HashRouter,{children:Object(V.jsxs)(d.g,{children:[Object(V.jsx)(l.PrivateRoute,{exact:!0,path:"/logs/:logID",authFlowLayout:bt,component:pt}),Object(V.jsx)(l.PrivateRoute,{exact:!0,path:"/debriefing-feedback-logs/:logID",authFlowLayout:bt,component:ht}),Object(V.jsx)(l.PrivateRoute,{exact:!0,match:"/",authFlowLayout:bt,component:z})]})})})},mt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,68)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,o=t.getLCP,s=t.getTTFB;n(e),r(e),i(e),o(e),s(e)}))};a.a.render(Object(V.jsx)(o.a.StrictMode,{children:Object(V.jsx)(ft,{})}),document.getElementById("root")),mt()}},[[61,1,2]]]);
//# sourceMappingURL=main.0c24f93c.chunk.js.map
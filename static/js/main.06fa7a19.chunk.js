/*! For license information please see main.06fa7a19.chunk.js.LICENSE.txt */
(this["webpackJsonp@meddbriefer/debriefer"]=this["webpackJsonp@meddbriefer/debriefer"]||[]).push([[0],{50:function(e,t,i){},58:function(e,t,i){},65:function(e,t,i){"use strict";i.r(t);var n,a=i(2),r=i.n(a),s=i(43),o=i.n(s),c=(i(50),i(25)),d=i(10),l=i(26),u=(i(57),i(58),i(7)),p=i(31),b=(i(40),i(42),function(e,t){var i=function(e){var t=p.default.apps.filter((function(t){return t.options.appId===e}));return 1===t.length?t[0]:null}(e.appId);return i||p.default.initializeApp(e,t)});"pam"===Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_APP_ENV?(console.log("using pjordan config"),n=b({apiKey:"AIzaSyB9eVT-fu4TOjxHoPAXqsnz9tCcbTJkTOw",authDomain:"pamdev-ea800.firebaseapp.com",projectId:"pamdev-ea800",storageBucket:"pamdev-ea800.appspot.com",messagingSenderId:"366450927885",appId:"1:366450927885:web:caa5f022ef1de182a0e844",measurementId:"G-JC5XZEPYT1"},"pam")):"scott"===Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_APP_ENV?(console.log("using scott config"),n=b({apiKey:"AIzaSyBEhbIdVW2F2vvvfvpNb2SsCDP9Yoc__z8",authDomain:"scottdev-f6528.firebaseapp.com",projectId:"scottdev-f6528",storageBucket:"scottdev-f6528.appspot.com",messagingSenderId:"447730403122",appId:"1:447730403122:web:1727020dbac4ad4cf6f92b"})):(console.log("using production config"),n=b({apiKey:"AIzaSyBOgWAbXUGckpad2sk0IUo00hZsV4WxG0E",authDomain:"meddbriefer-68cd4.firebaseapp.com",projectId:"meddbriefer-68cd4",storageBucket:"meddbriefer-68cd4.appspot.com",messagingSenderId:"1087114796018",appId:"1:1087114796018:web:679fbab38dbf78af0ce96b",measurementId:"G-Q7QZKC9KHW"},"production"));var h,f,m,v,y=n,O=(y.auth(),y.firestore()),g=i(6),w=i.n(g),k=i(11),j=i(24),A=(i(34),i(45),"assessment"),x="assessment-option",E="assessment-with-options",C="decision",P="decision-option",I="intervention",N="phase",S="required-action",D="sub-phase",R=Object.freeze({PHASE:N,SUB_PHASE:D,ASSESS:A,AWO:E,ASSESS_OPTION:x,ASSESSO:x,CL_HEADING:"checklist-heading",CL_PROMPT:"checklist-prompt",DECISION:C,DECISION_OPTION:P,DIST_PROMPT:"distinguishing-prompt",NESTED_CHECKLIST:"nested-checklist",REQUIRED:S,REQURED:S,INTERV:I,PROMPT_SET:"prompt-set",PROMPT:"prompt",ANSWER:"answer"}),q=Object.freeze({ONE:"one",OOM:"one-or-more",NONE:"none"}),T=(Object.freeze({ONE:"One",OOM:"One or more",NONE:"None"}),Object.freeze({PHASE:"",SUB_PHASE:"",ANSWER:"answer-",ASSESS:"assess-",AWO:"assessment-with-options-",ASSESS_OPTION:"assess-option-",CL_PROMPT:"cl-prompt-",DECISION:"decision-",DECISION_OPTION:"decision-option-",INTERV:"intv-",PROMPT_SET:"prompt-set-",PROMPT:"prompt-",REQUIRED:"required-action-"}),Object.freeze({AW:"airway",BR:"breathing",BL:"bleeding",SH:"shock"}),Object.freeze({AW:"Airway",BR:"Breathing",BL:"Bleeding",SH:"Shock"}),[A,E,C,S]),B=[x,P],F=[A,E,C,S,I,N,D],L=(Object.freeze({NONE:"",MIN:"minimal",OPT:"optional",REQ:"required",CONTRA:"contraindicated",UNN:"unnecessary",IR:"irrelevant"}),i(9)),M=(i(17),i(37),i(38),i(16)),Y=(R.DIST_PROMPT,q.ONE,R.DIST_PROMPT,q.OOM,R.PROMPT,q.ONE,R.PROMPT,q.ONE,R.PROMPT,R.PROMPT,q.ONE,R.PROMPT,q.ONE,R.PROMPT,q.ONE,R.PROMPT,q.ONE,R.PROMPT,q.ONE,R.PROMPT,q.ONE,R.PROMPT,q.ONE,R.PROMPT,q.ONE,R.PROMPT,q.ONE,R.PROMPT,q.ONE,R.PROMPT,q.ONE,R.PROMPT,q.ONE,R.PROMPT,q.ONE,R.PROMPT,q.ONE,R.PROMPT,q.ONE,R.PROMPT,q.ONE,R.PROMPT,q.ONE,R.PROMPT,q.ONE,R.PROMPT,q.ONE,R.PROMPT,q.ONE,R.PROMPT,q.ONE,R.PROMPT,q.ONE,h={depth:3,type:"intervention",id:"menu-item-nasotracheal-intubation",interventionID:"intv-nasotracheal-intubation"},Object(M.a)(h,"interventionID","intv-nasotracheal-intubation"),Object(M.a)(h,"interventionID","intv-nasotracheal-intubation"),Object(M.a)(h,"intvCategoryID","intv-cat-airway"),f={depth:4,type:"intervention",id:"menu-item-rapid-sequence-intubation",interventionID:"intv-rapid-sequence-intubation"},Object(M.a)(f,"interventionID","intv-rapid-sequence-intubation"),Object(M.a)(f,"interventionID","intv-rapid-sequence-intubation"),Object(M.a)(f,"intvCategoryID","intv-cat-airway"),function(e,t){return e.collection("published-scenarios").doc(t).get().then((function(e){return e.data()}))}),z=function(){var e=Object(k.a)(w.a.mark((function e(t,i,n){var a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.collection(i).where("id","==","".concat(n)).get();case 2:return a=e.sent,e.abrupt("return",a.empty);case 4:case"end":return e.stop()}}),e)})));return function(t,i,n){return e.apply(this,arguments)}}(),W=function(e,t){return e.collection("logs").doc(t).get().then((function(e){var t=e.data();return t.id=e.id,t}))},_=function(e,t){return e.collection("debriefing-feedback-logs").doc(t).get().then((function(e){var t=e.data();return t.id=e.id,t}))},V=i(66),H=i(1),U=function(){var e=Object(a.useState)([]),t=Object(u.a)(e,2),i=t[0],n=t[1],r=Object(a.useState)(!1),s=Object(u.a)(r,2),o=s[0],d=s[1];return Object(a.useEffect)((function(){var e;(e=O,e.collection("logs").get().then((function(e){return e.docs.map((function(e){var t=e.data();return{id:e.id,label:t.label,scenario:t.scenarioName,userName:t.userName,timestamp:t.timestamp}}))}))).then((function(e){n(e),d(!0)})).catch((function(e){return console.log("error fetching logs",e)}))}),[]),o?Object(H.jsxs)(V.a,{striped:!0,borderless:!0,size:"sm",hover:!0,children:[Object(H.jsx)("thead",{children:Object(H.jsxs)("tr",{children:[Object(H.jsx)("th",{children:"Label"}),Object(H.jsx)("th",{children:"Scenario"}),Object(H.jsx)("th",{children:"Username"}),Object(H.jsx)("th",{children:"Timestamp"})]})}),Object(H.jsx)("tbody",{children:i.map((function(e){return Object(H.jsxs)("tr",{children:[Object(H.jsx)("td",{children:e.label}),Object(H.jsx)("td",{children:e.scenario}),Object(H.jsx)("td",{children:e.userName}),Object(H.jsx)("td",{children:e.timestamp}),Object(H.jsxs)("td",{children:[Object(H.jsx)(c.Link,{to:"/logs/".concat(e.id),children:"Analyze"}),"\xa0\xa0\xa0\xa0",Object(H.jsx)(c.Link,{to:"/debriefing-feedback-logs/".concat(e.id),children:"Review"})]})]},e.id)}))})]}):Object(H.jsx)("h4",{children:"fetching log data"})},G=i(12),K={Good:"text-success",Caution:"text-warning",Problem:"text-danger","Not implemented":"text-muted"},Q={Good:"sentiment_satisfied",Caution:"report_problem",Problem:"highlight_off","Not implemented":"sentiment_neutral"},J={contraindicated:["Problem","You should not have done this action because it is contraindicated in this case +bos ?contraindicatedWhy ?why +eos"],irrelevant:["Problem","You should not have done this action because it is irrelevant in this case +bos ?why +eos"],unnecessary:["Problem","You should not have done this action because it is unnecessary in this case +bos ?why +eos"],missingMinimal:["Problem","You did not do this action +bos ?why +eos"],missingOptional:["Caution","You did not do this action +bos but it was optional in this case +bos ?why +eos"],missingRequired:["Problem","You did not do this action +bos ?why +eos"],missingRequiredAssessment:["Problem","You did not do this action +bos ?assessmentFB +eos"],notNecessary:["Caution","You should not have done this action because it was unnecessary +bos ?why +eos"],assessment:["Good",""],"assessment-option":["Good",""],"decision-option":["Good",""],"required-action":["Good",""],goodIntv:["Good","?intvStatusFB +eos "],"misOrdered-assessment":["Problem","Doing this action was correct but it was done out of the recommended order +bos @orderingFB +eos"],"misOrdered-assessment-option":["Problem","Doing this action was correct but it was done out of the recommended order +bos @orderingFB +eos"],"misOrdered-decision-option":["Problem","Doing this action was correct but it was done out of the recommeded order +bos @orderingFB"],"misOrdered-required-action":["Problem","Doing this action was correct but it was done out of the recommeded order +bos @orderingFB"],"misOrdered-goodIntv":["Problem","Doing this action was correct but it was done out of the recommeded order +bos @orderingFB"],"misOrdered-phase-assessment":["Problem","Doing this action was correct but this section was not completed in the recommended order +bos @orderingFB +eos"],"misOrdered-phase-assessment-option":["Good","Doing this action was correct but this section was not completed in the recommended order +bos @orderingFB +eos"],"misOrdered-phase-decision-option":["Problem","Doing this action was correct but this section was not completed in the recommended order +bos @orderingFB"],"misOrdered-phase-required-action":["Problem","Doing this action was correct but this section was not completed in the recommended order +bos @orderingFB"],"misOrdered-phase-goodintv":["Problem","Doing this action was correct but this section was not completed in the recommended order +bos @orderingFB"],intvCheckWNoIntvFound:["Caution","You didn't do this intervention so it doesn't make sense to check the status of it at this point."],unexpectedPatientIntvCheck:["Caution","This status check is not likely to reveal any useful information."],patientIntvCheck:["Good",""],patientVitalCheck:["Good",""],"assessment-option-incorrect":["Problem","Doing this action was correct but there is a problem with how you planned to do it +bos @incorrectAnswerFB +eos "],"decision-option-incorrect":["Problem","Doing this action was correct but there is a problem with how you planned to do it +bos @incorrectAnswerFB +eos "],"incorrect-answers":["Problem","Doing this action is correct but there is a problem with how you planned to do it +bos @incorrectAnswersFB +bos ?intvStatusFB +eos"],"minimal-incorrect-answers":["Problem","Doing this action was correct and would solve the problem but you did not follow protocol +bos ?minimalWhy +bos also there is a problem with how you planned to do this intervention +bos @incorrectAnswersFB +bos ?intvStatusFB +eos"],minimal:["Caution","Doing this action is correct and solves the problem but you did not follow protocol +bos @minimalWhy +bos ?intvStatusFB +eos "],"misOrdered-assessment-option-incorrect":["Problem","Doing this action was correct but it was done out of the recommended order +bos @orderingFB +bos Also there is a problem with how you planned to do it +bos @incorrectAnswerFB +eos "],"misOrdered-decision-option-incorrect":["Problem","Doing this action was correct but it was done out of the recommended order +bos @orderingFB +bos Also there is a problem with how you planned to do it +bos @incorrectAnswerFB +eos "],"misOrdered-incorrect-answers":["Problem","Doing this action is correct but it was done out of the recommended order +bos @orderingFB +bos also there is a problem with how you planned to do it +bos @incorrectAnswersFB +bos ?intvStatusFB +eos"],"misOrdered-minimal-incorrect-answers":["Problem","Doing this action is correct but it was done out of the recommended order +bos @orderingFB +bos And while this would solve the problem, you did not follow protocol +bos @minimalWhy +bos also there is a problem with how you planned to do it +bos @incorrectAnswersFB +bos ?intvStatusFB +eos"],"misOrdered-minimal":["Problem","Doing this action is correct but it was done out of the recommended order +bos @orderingFB +bos And while this would solve the problem, you did not follow protocol +bos @minimalWhy +bos ?intvStatusFB +eos"],"misOrdered-phase-assessment-option-incorrect":["Problem","Doing this action was correct but this section was not completed in the recommended order +bos @orderingFB +bos Also there is a problem with how you planned to do it +bos @incorrectAnswerFB +eos "],"misOrdered-phase-decision-option-incorrect":["Problem","Doing this action was correct but this section was not completed in the recommended order +bos @orderingFB +bos Also there is a problem with how you planned to do it +bos @incorrectAnswerFB +eos "],"misOrdered-phase-incorrect-answers":["Problem","Doing this action is correct but this section was not completed in the recommended order +bos @orderingFB +bos also there is a problem with how you planned to do it +bos @incorrectAnswersFB +bos ?intvStatusFB +eos"],"misOrdered-phase-minimal-incorrect-answers":["Problem","Doing this action is correct but this section was not completed in the recommended order +bos @orderingFB +bos And while this would solve the problem, you did not follow protocol +bos ?minimalWhy +bos also there is a problem with how you planned to do it +bos @incorrectAnswersFB +bos ?intvStatusFB +eos"],"misOrdered-phase-minimal":["Problem","Doing this action is correct but this section was not completed in the recommended order +bos @orderingFB +bos And while this would solve the problem, you did not follow protocol +bos ?minimalWhy +bos ?intvStatusFB +eos"],green:["Good",""],red:["Problem",""],yellow:["Caution",""],default:["Not implemented","This action was not expected.  There could be an issue with how this scenario is represented within the system."]},X={absent:["absent","missingMinimal","missingRequired","missingRequiredAssessment"],errors:["misOrdered-assessment","misOrdered-assessment-option","misOrdered-decision-option","misOrdered-required-action","misOrdered-goodIntv","assessment-option-incorrect","decision-option-incorrect","incorrect-answers","minimal-incorrect-answers","misOrdered-assessment-option-incorrect","misOrdered-decision-option-incorrect","misOrdered-incorrect-answers","misOrdered-minimal-incorrect-answers","misOrdered-minimal","irrelevant","unnecessary","contraindicated","errors","misordered-irrelevant","misOrdered-unnecessary","midOrdered-contraindicated","error","misordered","misordered-error","misOrdered-phase-assessment-option-incorrect","misOrdered-phase-decision-option-incorrect","misOrdered-phase-incorrect-answers","misOrdered-phase-minimal-incorrect-answers"],good:["good","assessment","assessment-option","decision-option","required-action","goodIntv","patientIntvCheck","patientVitalCheck","notNecessary","intvCheckWNoIntvFound","unexpectedPatientIntvCheck","default","minimal","misOrdered-phase-minimal","misOrdered-phase-assessment","misOrdered-phase-assessment-option","misOrdered-phase-decision-option","misOrdered-phase-required-action","misOrdered-phase-goodIntv"]},Z={absent:["missingMinimal","missingRequired","missingRequiredAssessment","absent"],misordered:["misOrdered-assessment","misOrdered-assessment-option","misOrdered-decision-option","misOrdered-required-action","misOrdered-goodIntv","misOrdered-minimal"],misorderedError:["misOrdered-assessment-option-incorrect","misOrdered-decision-option-incorrect","misOrdered-incorrect-answers","misOrdered-minimal-incorrect-answers","misOrdered-phase-assessment-option-incorrect","misOrdered-phase-decision-option-incorrect","misOrdered-phase-incorrect-answers","misOrdered-phase-minimal-incorrect-answers"],error:["assessment-option-incorrect","decision-option-incorrect","incorrect-answers","minimal-incorrect-answers","contraindicated","irrelevant","unnecessary"],good:["assessment","assessment-option","decision-option","required-action","goodIntv","patientIntvCheck","patientVitalCheck","notNecessary","intvCheckWNoIntvFound","unexpectedPatientIntvCheck","default","minimal","misOrdered-phase-minimal","misOrdered-phase-assessment","misOrdered-phase-assessment-option","misOrdered-phase-decision-option","misOrdered-phase-required-action","misOrdered-phase-goodIntv"]},$=[{scenarioName:"M2CA",exceptions:[["required-action-obtain-OPQRST","This cannot be assessed when GCS < 15"],["assess-opqrst-info","This cannot be assessed when GCS < 15"]]}],ee=(m={"scene-size-up":{id:"T1",before:["primary-survey"],beforeOp:"",after:[],afterOp:"",type:"policy"},"primary-survey":{id:"T2a",before:["secondary-assessment"],beforeOp:"",after:[],afterOp:"",type:"policy"},"intv-control-severe-bleeding-technique-direct-pressure":{id:"T2b",before:["secondary-assessment"],beforeOp:"",after:[],afterOp:"",type:"policy"},"intv-control-severe-bleeding-technique-2nd-tourniquet":{id:"T2c",before:["secondary-assessment"],beforeOp:"",after:[],afterOp:"",type:"policy"},"intv-control-severe-bleeding-technique-tourniquet":{id:"T2d",before:["secondary-assessment"],beforeOp:"",after:[],afterOp:"",type:"policy"},"ints-call-for-helicopter":{id:"T3",before:["secondary-assessment"],beforeOp:"",after:[],afterOp:"",type:"policy"},"required-action-obtains-vitals":{id:"T4",before:["secondary-assessment"],beforeOp:"",after:[],afterOp:"",type:"policy"},"required-action-attempt-obtain-sample":{id:"T5a",before:["secondary-assessment"],beforeOp:"",after:[],afterOp:"",type:"policy"},"required-action-obtain-OPQRST":{id:"T5b",before:["secondary-assessment"],beforeOp:"",after:[],afterOp:"",type:"policy"},"intv-transfer":{id:"T7",before:["secondary-assessment"],beforeOp:"",after:["airway","breathing","circulation"],afterOp:"",type:"policy"},"trauma-expose":{id:"T8",before:["chest"],beforeOp:"or",after:[],afterOp:"",type:"policy"},"general-impression":{id:"T9",before:["airway","breathing","circulation"],beforeOp:"and",after:[],afterOp:"",type:"policy"},"intv-spinal-immobilization-technique-manual-c-spine":{id:"T10a",before:["airway"],beforeOp:"",after:[],afterOp:"",type:"policy"},"intv-spinal-immobilization-technique-cervical-collar":{id:"T10b",before:["airway"],beforeOp:"",after:[],afterOp:"",type:"policy"},"intv-airway-patency-technique-suction-airway":{id:"T13",before:["secondary-assessment"],beforeOp:"",after:["airway"],afterOp:"",type:"policy"}},Object(M.a)(m,"intv-airway-patency-technique-suction-airway",{id:"T14",before:["intv-oropharyngeal-airway","intv-nasopharyngeal-airway"],beforeOp:"or",after:[],afterOp:"",type:"policy"}),Object(M.a)(m,"intv-oropharyngeal-airway",{id:"T15a",before:["intv-nasotracheal-intubation","intv-orotracheal-intubation","intv-sedation-assisted-intubation","intv-rapid-sequence-intubation"],beforeOp:"or",after:[],afterOp:"",type:"policy"}),Object(M.a)(m,"intv-nasopharyngeal-airway",{id:"T15b",before:["intv-nasotracheal-intubation","intv-orotracheal-intubation","intv-sedation-assisted-intubation","intv-rapid-sequence-intubation"],beforeOp:"or",after:[],afterOp:"",type:"policy"}),Object(M.a)(m,"intv-ventilation-technique-bag-valve-mask",{id:"T17",before:["secondary-assessment"],beforeOp:"",after:[],afterOp:"",type:"policy"}),m),te={"assess-major-bleeding":{id:"c1",before:["airway","breathing"],beforeOp:"",after:[],afterOp:"",type:"policy"},"intv-transport":{id:"T2-c1",before:["into-establish-IV","intv-control-shock-technique-administer-iv-boluses"],beforeOp:"and",after:[],afterOp:"",type:"policy"},"secondary-assessment":{id:"T6-c1",before:["intv-transfer","ongoing-mgmt-plan"],beforeOp:"",after:[],afterOp:"",type:"policy"},"pulse-checks":{id:"T12-c1",before:["airway"],beforeOp:"or",after:[],afterOp:"",type:"policy"}},ie={M2CA:["c1","T6-c1"],B4CA:[],B7CA:[],SC8CP:["T2-c1","T6-c1","T12-c1"]},ne={"intv-nasopharyngeal-airway":{intvStatusNeeded:!0,vitalsNeeded:[]},"intv-oropharyngeal-airway":{intvStatusNeeded:!0,vitalsNeeded:[]},"intv-orotracheal-intubation":{intvStatusNeeded:!0,vitalsNeeded:[]},"intv-ventilation-technique-bag-valve-mask":{intvStatusNeeded:!1,vitalsNeeded:["R","Spo2","BP","Skin"]},"intv-sedation-assisted-intubation":{intvStatusNeeded:!1,vitalsNeeded:["R","Spo2","BP","Skin"]},"intv-control-severe-bleeding-technique-direct-pressure":{intvStatusNeeded:!0,vitalsNeeded:[]},"intv-control-severe-bleeding-technique-tourniquet":{intvStatusNeeded:!0,vitalsNeeded:[]},"intv-control-severe-bleeding-technique-2nd-tourniquet":{intvStatusNeeded:!0,vitalsNeeded:[]}};function ae(e,t){var i,n,a,r=[],s=[],o=[],c={id:t.id[0],status:""};if(0===t.subActions.length)return 0!==(n=Ce(v,"id",t.id[0])).length?(a=function(e){var t={};return e.labelID?t.id=e.labelID:t.id=e.id,["label","status","phaseOrderStatus","phase","subPhase","labelID","phaseID","probLabel","answerCorrect","answerDetails","timestamp","type"].forEach((function(i){e[i]&&(t[i]=e[i])})),Z.good.includes(t.status)&&(t.status="good"),Z.absent.includes(t.status)&&(t.status="absent"),t}(n[0]),o=[a.status],s.push(a.id),r.push(a)):(o=["absent"],c.status="absent",s.push(t.id[0]),r.push(c)),[r,s,o];var d={id:t.id[0],childIDs:[],children:[],status:"",phaseOrderStatus:"good",type:"header"};return t.subActions.forEach((function(t){i=ae(e,t),d.children=d.children.concat(i[0]),d.childIDs=d.childIDs.concat(i[1]),o=o.concat(i[2])})),d.status=le(o),e[t.id]=[d].concat(d.children),delete d.children,[[d],[d.id],[d.status]]}var re=["id","feedbackAbsent","feedbackOutOfOrder","feedbackErrors"],se={},oe={M2CA:{Action:{id:"top",label:"Top most node -level 0",feedbackAbsent:"Nothing done. Start scenario again.",feedbackOutOfOrder:"",feedbackError:"All wrong. Please start scenario again.",subActions:[{id:"scene-size-up",label:"Child1 -level1",feedbackAbsent:"absent -Child1 level 1",feedbackOutOfOrder:"late -Child1 level 1",feedbackErrors:"wrong -Child1 level 1",subActions:[{id:"assess-scene-safety",label:"Child1 of Child1 -level 2",feedbackAbsent:"absent -Child1 of Child1 -level2",feedbackOutOfOrder:"late -Child1 of Child1 -level2",feedbackErrors:"wrong -Child1 of Child1 -level2",subActions:[],examine:"N",prompts:""},{id:"required-action-BSI",label:"Child2 of Child1 -level 2",feedbackAbsent:"absent -Child2 of Child1 -level 2",feedbackOutOfOrder:"late -Child2 of Child1 -level 2",feedbackErrors:"wrong -Child2 of Child1 -level 2",subActions:[],examine:"Y",prompts:"prompts -Child2 of Child1 -level2"}],examine:"Y",prompts:"prompts -Child1 level 1"},{id:"primary-survey",label:"Child 2 -level1",feedbackAbsent:"absent -Child 2 level1",feedbackOutOfOrder:"late -Child 2 level1",feedbackErrors:"wrong -Child 2 level1",subActions:[{id:"general-impression",label:"Child1 of Child2 -level2",feedbackAbsent:"absent -Child1 of Child2 -level2",feedbackOutOfOrder:"late -Child1 of Child2 -level2",feedbackErrors:"wrong -Child1 of Child2 -level2",subActions:[],examine:"N",prompts:""},{id:"airway",label:"Child2 of child2 -level2",feedbackAbsent:"absent -Child2 of Child2 -level2",feedbackOutOfOrder:"late -Child2 of Child2 -level2",feedbackErrors:"wrong -Child2 of Child2 -level2",subActions:[{id:"airway-is-open",label:"Child1 of (Child2 of Child2) -level3",feedbackAbsent:"absent -Child1 of (Child2 of Child2) -level3",feedbackOutOfOrder:"late -Child1 of (Child2 of Child2) -level3",feedbackErrors:"wrong -Child1 of (Child2 of Child2) -level3",subActions:[],examine:"N",prompts:""},{id:"airway-is-clear-substances",label:"Child2 of (Child2 of Child2) -level3",feedbackAbsent:"absent -Child2 of (Child2 of Child2) -level3",feedbackOutOfOrder:"late -Child2 of (Child2 of Child2) -level3",feedbackErrors:"wrong -Child2 of (Child2 of Child2) -level3",subActions:[],examine:"Y",prompts:"prompts -Child2 of (Child2 of Child2) -level3"}],examine:"N",prompts:""},{id:"breathing",label:"Child3 of Child2 -level2",feedbackAbsent:"absent -Child3 of Child2 -level2",feedbackOutOfOrder:"late -Child3 of Child2 -level2",feedbackErrors:"wrong -Child3 of Child2 -level2",subActions:[],examine:"N",prompts:""}],examine:"N",prompts:""},{id:"Manage a potential head and/or spinal injury",label:"Child 3 -level1",feedbackAbsent:"absent -Child 3 level1",feedbackOutOfOrder:"late -Child 3 level1",feedbackErrors:"wrong -Child 3 level1",subActions:[{id:"intv-spinal-immobilization-technique-cervical-collar",label:"Cervical Collar",feedbackAbsent:"absent - cervical collar",feedbackOutOfOrder:"late - cervical collar",feedbackErrors:"wrong - cervical collar",subActions:[],examine:"Y",prompts:"prompts - cervical collar"}],examine:"N",prompts:""},{id:"ongoing-mgmt-plan",label:"Child 4 -level1",feedbackAbsent:"absent -Child 4 level1",feedbackOutOfOrder:"late -Child 4 level1",feedbackErrors:"wrong -Child 4 level1",subActions:[{id:"reassess-vital-signs",label:"Child1 of Child4 -level 2",feedbackAbsent:"absent -Child1 of Child4 -level2",feedbackOutOfOrder:"late -Child1 of Child4 -level2",feedbackErrors:"wrong -Child1 of Child4 -level2",subActions:[],examine:"Y",prompts:"prompts -Child1 of Child4 -level2"},{id:"repeat-primary-survey",label:"Child2 of Child4 -level 2",feedbackAbsent:"absent -Child2 of Child4 -level 2",feedbackOutOfOrder:"late -Child2 of Child4 -level 2",feedbackErrors:"wrong -Child2 of Child4 -level 2",subActions:[],examine:"N",prompts:""}],examine:"Y",prompts:"prompts -Child4 level1"}],examine:"N",prompts:""}},SC8CP:{Action:{id:["top"],label:"fully assess and manage the patient in this scenario",type:"Required",feedbackAbsent:"Your log indicates you didn't complete any of these assessment or managment goal. Please restart the scenario and try again",feedbackOutOfOrder:"",feedbackError:"",examine:"N",prompts:"",subActions:[{id:["scene-size-up"],label:"Put on BSI and do a complete Scene Size-up before entering the scene",type:"Required",feedbackAbsent:"Your first steps should have been to don your protective wear, including eye protection, and to ensure the scene is safe. You cannot assist a patient if you are not safe yourself.  *Your scene size up gives you a big-picture view of what is going on before you even begin examining the patient and includes determining the mechanism of injury and number of patients, requesting additional help if necessary, and considering stabilization of the spine.  *In this case, you would have learned that this is a near drowning incident, which should have prompted you to think about potential head or spinal injury, and the need for rescue breaths",feedbackOutOfOrder:"Your first steps should have been to don your protective wear, including eye protection, and to ensure the scene is safe. You cannot assist a patient if you are not safe yourself. Your scene size up also gives you a big-picture view of what is going on before you even begin examining the patient. This includes determining the mechanism of injury and number of patients, requesting additional help if necessary, and considering stabilization of spine.",feedbackErrors:"",examine:"N",prompts:"",subActions:[{id:["required-action-BSI"],label:"Apply BSI",type:"Required",feedbackAbsent:"Your first steps should have been to don your protective wear, including eye protection, and to ensure the scene is safe. You cannot assist a patient if you are not safe yourself.",feedbackOutOfOrder:"",feedbackErrors:"",examine:"",prompts:"",subActions:[]},{id:["assess-scene-safety"],label:"Determine the scene/situation is safe",type:"Required",feedbackAbsent:"Your first steps should have been to don your protective wear, including eye protection, and to ensure the scene is safe. You cannot assist a patient if you are not safe yourself.",feedbackOutOfOrder:"",feedbackErrors:"",examine:"N",prompts:"",subActions:[]},{id:["assess-injury-mechanism"],label:"Determine the mechanism of injury (MOI) or nature of illness (NOI)",type:"Required",feedbackAbsent:"Knowing what caused the patient's injury or illness can allow you to start developing a plan of action before you even assess your patient. *By determining the mechanism of injury, you would have learned that this is a near drowning incident, which should have prompted you to think about potential head or spinal injury, and the need for rescue breaths and/or CPR.",feedbackOutOfOrder:"",feedbackErrors:"",examine:"N",prompts:"",subActions:[]},{id:["assess-num-patients"],label:"Determine the number of patients",type:"Required",feedbackAbsent:"Usually you will have one patient, but if there is more than one you will need to plan accordingly.",feedbackOutOfOrder:"",feedbackErrors:"",examine:"N",prompts:"",subActions:[]},{id:["required-action-requests-additional-help"],label:"Request additional help if necessary",type:"Required",feedbackAbsent:"Consider the need for extra help based on number of patients, mechanism of injury, and your patient's status. *Although police and fire personnel were already on scene, you should have considered the need for additional ALS support.",feedbackOutOfOrder:"",feedbackErrors:"",examine:"N",prompts:"",subActions:[]},{id:["required-action-considers-stabilize-spine"],label:"Consider stabilization of spine",type:"Required",feedbackAbsent:"All trauma patients are at risk for spinal injury, including drowning or near drowning patients, which could be caused by a diving accident. Take this into consideration before initial contact with the patient to prevent unintentional injury.",feedbackOutOfOrder:"",feedbackErrors:"",examine:"N",prompts:"",subActions:[]}]},{id:["primary-survey"],label:"Perform a Primary Survey and manage all identified life threats",type:"Required",feedbackAbsent:"The primary survey is an assessment of mental status, life-threats, and the patient's ABCs. It is where you will identify and address the patient's most serious injuries. *In this case, the Primary Survey would have revealed an unconscious patient with respiratory failure and a weak and slow pulse.",feedbackOutOfOrder:"You should have started your Primary Survey after the Scene Size-up and completed it before starting the Secondary Survey. Only interrupt your assessment to control these life-threats: (1) compromised airway, (2) tension pneumothorax, (3) severe hemorrhage, and (4) cardiac arrest. Problems identifed during the primary survey can be life threatening, and if they are not adequately addressed, your patient may deteriorate as you continue on with your examination.",feedbackErrors:"",examine:"N",prompts:"",subActions:[{id:["general-impression"],label:"Conduct an Initial Assessment",type:"Required",feedbackAbsent:"You should have performed an Initial Assessment: gathered a general impression, identified any apparent life threats, and determined your patient's level of consciousness.  Your Initial Assessment  would have revealed a patient who is unconscious.",feedbackOutOfOrder:"While you may be tempted to jump straight into your ABCs, apparent life threats (ie. uncontrolled bleeding) should be addressed first, as they can cause a patient to deteriorate quickly. Also, be sure to assess the patient's mental status, as an unconscious patient will need a pulse check first, to ensure he or she does not require CPR.",feedbackErrors:"",examine:"N",prompts:"",subActions:[{id:["assess-patient-condition"],label:"State or request a general impression",type:"Required",feedbackAbsent:"Your general impression allows you to start developing a plan of action before you even assess your patient. *In this case, your general impression would have been of a child who nearly drowned.",feedbackOutOfOrder:"",feedbackErrors:"",examine:"N",prompts:"",subActions:[]},{id:["assess-loc"],label:"Assess the patient's level of consciousness",type:"Required",feedbackAbsent:"The patient's level of consciousness alters how you progress through your assessment. *This patient was unresponsive with sluggish pupils.  This should have prompted you to consider him a critical patient, check his pulse prior to airway and breathing, and plan for urgent transfer to a nearby trauma center.",feedbackOutOfOrder:"",feedbackErrors:"",examine:"N",prompts:"",subActions:[]},{id:["assess-life-threats"],label:"Determine the chief complaint/apparent life-threats",type:"Required",feedbackAbsent:"If you had determined apparent life threats, you would have noticed that the patient was unresponsive, indicating a critical patient.",feedbackOutOfOrder:"",feedbackErrors:"",examine:"N",prompts:"",subActions:[]}]},{id:["Manage a potential head or spinal injury"],label:"Manage a potential head or spinal injury",type:"Required",feedbackAbsent:"Although the exact MOI is unknown, you should suspect possible head and/or spinal injury with any near drowning incident as diving may have been involved. You should have taken manual c-spine stabilization before performing your ABC assessment and maintained it throughout, and applied an appropriately sized cervical collar.",feedbackOutOfOrder:"Managing the cervical spine is one of the first things you should do for any trauma patient, as you must ensure you do not cause any further injury during the remainder of your assessment and management.",feedbackErrors:"",examine:"Y",prompts:"didn't recall that spinal injury should be considered in every near drowning incident; did not consider risk for cervical spine injury based on provided information",subActions:[{id:["intv-spinal-immobilization-technique-manual-c-spine"],label:"Apply (or direct a partner to apply) manual c-spine stabilization",type:"Required",feedbackAbsent:"Part of managing a head and/or spinal injury includes manual stabilization of the cervical spine before beginning your assessment, as movement may further injure the patient.",feedbackOutOfOrder:"",feedbackErrors:"",examine:"N",prompts:"",subActions:[]},{id:["intv-spinal-immobilization-technique-cervical-collar"],label:"Apply an appropriately sized cervical collar",type:"Required",feedbackAbsent:"A cervical collar will help you maintain stability while you continue with your exam.",feedbackOutOfOrder:"",feedbackErrors:"",examine:"N",prompts:"",subActions:[]}]},{id:["airway"],label:"Assess the patient's airway",type:"Required",feedbackAbsent:"Be sure to assess the airway for patency and intact physical structures. *You would have found this patient's airway to be partially obstructed with vomit and water, indicating the need for suctioning.",feedbackOutOfOrder:"If your patient is conscious, you should examine the airway before breathing and circulation. If a patient is unconscious, you should assess the pulse first to evaluate for possible cardiac arrest, then go through your ABCs.",feedbackErrors:"",examine:"N",prompts:"",subActions:[{id:["intv-open-airway-method-modified-jaw-thrust"],label:"Open the patient's airway with a jaw thrust maneuver",type:"Required",feedbackAbsent:"The patient is at risk for a cervical spine injury, so opening the airway via head tilt can compromise spinal stability. Instead, you use the jaw-thrust technique to open the airway while maintaining the cervical spine.",feedbackOutOfOrder:"",feedbackErrors:"",examine:"N",prompts:"",subActions:[]},{id:["airway-is-open"],label:"Check if the airway is patent",type:"Required",feedbackAbsent:"The first step of your airway assessment is to see if the patient's airway is open. If the patient is speaking normally, it is open. Signs like stridor or gasping may indicate an airway obstruction. *This patient's airway was partially obstructed with vomit and water, which should have been suctioned.",feedbackOutOfOrder:"",feedbackErrors:"",examine:"N",prompts:"",subActions:[]},{id:["airway-has-intact-physical-structures"],label:"Check if the airway has intact physical structures",type:"Required",feedbackAbsent:"Be sure to look for injuries such as gun-shot wounds or facial fractures, as these may affect what basic or advanced airways you can use.",feedbackOutOfOrder:"",feedbackErrors:"",examine:"N",prompts:"",subActions:[]}]},{id:["Manage a compromised airway"],label:"Manage the patient\u2019s compromised airway",type:"Required",feedbackAbsent:"This patient was unable to protect his airway, as evidenced by his being unconscious and having an obstructed airway. You should have managed this airway with suctioning, ventilating with a BVM, and ultimately intubating him.",feedbackOutOfOrder:"You should identify any airway obstructions, including blood, vomiting, and secretions while checking the patency of your patient's airway. Any obstruction should be addressed at that time.",feedbackErrors:"",examine:"Y",prompts:"didn't recognize that being unconscious was an indication for intubation; didn't recognize that the patient's airway was obstructed and needed suctioning",subActions:[{id:["intv-airway-patency-technique-suction-airway"],label:"Suction the patient's mouth using a Yankauer (rigid)  or Long multi-use catheter",type:"Required",feedbackAbsent:"This patient had water and vomit in his airway, which should have been suctioned to establish a patent airway.",feedbackOutOfOrder:"",feedbackErrors:"Both Yankauer and Long multi-use catheters are appropriate for oral suctioning; however, Yankauer would be more effective for suctioning large volumes of blood, vomit, etc. ",examine:"Y",prompts:"didn't ensure the airway was clear; did not think the vomit or water needed to be suctioned prior to intubation",subActions:[]},{id:["intv-oropharyngeal-airway","ntv-nasopharyngeal-airway "],label:"Insert a basic airway adjunct",type:"Required",feedbackAbsent:'Remember: "basic before advanced". This patient is unconscious and therefore unable to maintain his airway.   Insert a basic airway adjunct to maintain airway patency and allow you to pre-oxygenate the patient prior to intubation.',feedbackOutOfOrder:"",feedbackErrors:"",examine:"N",prompts:"",subActions:[]},{id:["intv-orotracheal-intubation"],label:"Perform orotracheal intubation using an appropriately sized tube, inserted at the correct depth",type:"Required",feedbackAbsent:"Utlimately, this patient should be intubated.  Since he is unconscious, you need a reliable way to oxygenate and venilate this patient. While use of an oral adjunct and BVM ventilation is a good start, a more secure airway would be preferred. Orotracheal intubation would be most appropriate because he lacks a gag reflex.",feedbackOutOfOrder:"",feedbackErrors:"Under review",examine:"Y",prompts:"didn't realize the patient needed to be intubated; didn't recall how to calculate the size of an ET tube for a child; didn't recall how to calculate the depth of an ET tube for a child",subActions:[]}]},{id:["breathing"],label:"Assess the patient's breathing",type:"Required",feedbackAbsent:"After assessing the patient's airway, assess their breathing by listening for breath sounds and observing their respiratory rate, rhythm, and effort. *You would have found bradypnea and heard gurgling.  This should have prompted you to apply BVM ventilation or other ventilatory support.",feedbackOutOfOrder:"",feedbackErrors:"",examine:"N",prompts:"",subActions:[{id:["breathing-rate-rhythm-quality"],label:"Rate, rhythm, and quality",type:"Required",feedbackAbsent:"A significantly elevated or depressed respiratory rate can suggest impending respiratory failure. *This patient's bradypnea suggests the need for ventilatory support, not just oxygenation.",feedbackOutOfOrder:"",feedbackErrors:"",examine:"N",prompts:"",subActions:[]}]},{id:["Manage inadequate breathing"],label:"Manage inadequate breathing",type:"Required",feedbackAbsent:"The patient's respiratory rate is 6 with rhonchi appreciable on exam and no SpO2 capture. This patient needs both oxygen and ventilatory support, so O2 via nasal canula or ventimask would be inadequate.",feedbackOutOfOrder:"Problems with ventilation and oxygenation are life threatening and should be addressed before you move on to your secondary survey. Repeat your exam and check vitals to ensure your interventions have worked as you expected. If not, your patient may deteriorate as you continue on with your examination.",feedbackErrors:"",examine:"Y",prompts:"didn't realize that the patient's respiratory status was threatened ",subActions:[{id:["intv-ventilation-technique-bag-valve-mask"],label:"Ventilate the patient at a rate of 20 BPM",type:"",feedbackAbsent:"The patient's respiratory rate is 6 with rhonchi appreciable on exam and no SpO2 capture. This patient needs both oxygen and ventilatory support, so O2 via nasal canula or ventimask would be inadequate.",feedbackOutOfOrder:"",feedbackErrors:"This patient should have been ventilated at a rate of 20 breaths per minute, which is the recommended rate for a child aged 2-12. When performing BVM ventilation, you use 15LPM O2 in order to both oxygenate and ventilate the patient.",examine:"N",prompts:"",subActions:[]},{id:["***"],label:"Titrate oxygen at a flow rate of 15 L/min to a target SpO2 > 90%",type:"",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"",examine:"N",prompts:"",subActions:[]}]},{id:["circulation"],label:"Assess the patient's circulation",type:"Required",feedbackAbsent:"Evaluate the patient's pulse and skin to assess the patient for shock.  Be sure to also perform a gross blood sweep. *You would have noticed that your patient had weak slow pulses and dry cyanotic skin, indicating impending respiratory failure.",feedbackOutOfOrder:"All unconscious patients should have a pulse check before starting the ABCs. If the patient is pulseless, you will start high-quality CPR immediately.",feedbackErrors:"",examine:"N",prompts:"",subActions:[{id:["pulse-checks"],label:"Pulse rate, rhythm, and quality",type:"Required",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"",examine:"N",prompts:"",subActions:[]},{id:["checks-skin"],label:"Skin color, temperature, and condition",type:"Required",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"",examine:"N",prompts:"",subActions:[]},{id:["assess-major-bleeding"],label:"Perform a gross blood sweep",type:"Required",feedbackAbsent:"A gross blood sweep will help you identify any life-threatening bleeding you may have missed earlier when forming your general impression.",feedbackOutOfOrder:"",feedbackErrors:"",examine:"N",prompts:"",subActions:[]}]},{id:["transport-decision"],label:"Make appropriate initial transport decisions",type:"Required",feedbackAbsent:"Your ABCs and evaluation for life threats and level of consciousness will dictate where you transfer your patient. *This patient was critically ill so you should have decided to transport him to the level 1 pediatric  trauma center.",feedbackOutOfOrder:"Transport decisions should be made before beginning your secondary survey based on the information you have gathered thus far. This is especially important if you are calling for an air ambulance to account for the time it takes for them to arrive.",feedbackErrors:"",examine:"N",prompts:"",subActions:[{id:["decision-is-load-and-go"],label:"Determine that this is a critical patient",type:"Required",feedbackAbsent:"This patient is unconscious and needs ventilatory support. This patient should be considered critical.",feedbackOutOfOrder:"",feedbackErrors:"",examine:"Y",prompts:"didn't realize this was a critically ill patient; felt this patient should be further stabilized on site prior to transfer",subActions:[]},{id:["intv-transport"],label:"Decide where and how to transport the patient to definitive care",type:"Required",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"This patient requires a pediatric trauma center because of age and physiological criteria. The physiological criteria indicating that the patient requires this type of facility are respiratory rate of less than 10 and GCS <5 (not following commands). *The level 1 pediatric trauma center is 16 minutes away by air in this scenario; transport to this facility would only be contraindicated by a transport time > 45 minutes.",examine:"Y",prompts:"did not realize patient requires higher level of service than level II adult facility",subActions:[]}]},{id:["ints-call-for-helicopter"],label:"Call for an air ambulance (if chosen transport method)",type:"Required",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"",examine:"N",prompts:"",subActions:[]},{id:["exposes-body-parts"],label:"Trauma expose the patient",type:"Required",feedbackAbsent:"Without exposing your patient, your head-to-toe exam may be hindered and you could miss an important exam finding.",feedbackOutOfOrder:"It is important to trauma expose your patient to ensure that your secondary survey can be performed efficiently.",feedbackErrors:"",examine:"N",prompts:"",subActions:[]}]},{id:["history-taking"],label:"Obtain or direct a partner to obtain a patient history",type:"Required",feedbackAbsent:"",feedbackOutOfOrder:"You should have obtained a set of vitals or directed a partner to do so before beginning your Secondary Survey. A patient's vital signs may prompt you to repeat parts of your Primary Assessment before moving onto the Secondary Survey.",feedbackErrors:"",examine:"N",prompts:"",subActions:[{id:["required-action-obtains-vitals"],label:"Baseline vital signs",type:"Required",feedbackAbsent:"Baseline vitals are critical; they will help you assess, manage, and continue to monitor your patient. *You would have found that this patient was bradycardic, bradypnic, hypoxic, and hypotensive, alerting you to a critical patient who needed prompt intervention.",feedbackOutOfOrder:"",feedbackErrors:"",examine:"N",prompts:"",subActions:[]},{id:["required-action-attempt-obtain-sample"],label:"SAMPLE (if possible)",type:"Required",feedbackAbsent:"Take an efficient but thorough history from the baby sitter: symptoms, allergies, medications, past medical history, last oral intake, events preceding. *You would have learned that the child was left unattended on a floating mattress in the pool for 5 minutes, found underwater, and then pulled out of the pool.",feedbackOutOfOrder:"",feedbackErrors:"",examine:"N",prompts:"",subActions:[]},{id:["required-action-obtain-OPQRST"],label:"OPQRST (if possible)",type:"Required",feedbackAbsent:"Assess the patient's pain: onset, provocation/palliation, quality, region/radiation, severity, and time. If the patient cannot tell you his or herself, you should ask a family member or other bystander for whatever information they may have.",feedbackOutOfOrder:"",feedbackErrors:"",examine:"N",prompts:"",subActions:[]}]},{id:["secondary-assessment"],label:"Perform a Secondary Survey (rapid trauma assessment)",type:"Required",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"",examine:"N",prompts:"",subActions:[{id:["head"],label:"examine the patient's head",type:"Required",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"",examine:"N",prompts:"",subActions:[{id:["inspects-and-palpates-skull"],label:"Inspect and palpate the scalp and skull",type:"Required",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"",examine:"N",prompts:"",subActions:[]},{id:["assessment-inspects-facial-bones"],label:"Inspect and palpate the facial bones",type:"Required",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"",examine:"N",prompts:"",subActions:[]},{id:["inspects-eyes"],label:'Inspect the eyes for PERRLA and bruising ("raccoon eyes")',type:"Required",feedbackAbsent:"Checking for PERRLA would have revealed that  the patient's pupils were equal but sluggish, suggesting possible intracranial injury and a critically ill patient who needed rapid transfer to a trauma center. *Additionally, bruising around the eyes may be caused by basilar skull fracture.",feedbackOutOfOrder:"",feedbackErrors:"",examine:"N",prompts:"",subActions:[{id:["inspects-eyes-PERRLA"],subActions:[]},{id:["inspects-eyes-racoon"],subActions:[]}]},{id:["inspects-ears"],label:'Inspect the ears for blood, other fluids, and bruising ("battle signs")',type:"Required",feedbackAbsent:"Bleeding from the ear may be indicative of a basilar skull fracture. Bruising behind the ear suggests a basilar skull fracture (Battle's sign).",feedbackOutOfOrder:"",feedbackErrors:"",examine:"N",prompts:"",subActions:[]},{id:["inspects-nose"],label:"Inspect the nose for blood and other fluids",type:"Required",feedbackAbsent:"Clear drainage may be CSF from a basilar skull fracture.",feedbackOutOfOrder:"",feedbackErrors:"",examine:"N",prompts:"",subActions:[]},{id:["inspects-mouth"],label:"Inspect the mouth for blood, other secretions, and obstructions",type:"Required",feedbackAbsent:"During your primary survey, you should have noticed water and vomit in the patient's mouth; you should have suctioned the patient's airway.  If you had done this, at this stage the patient's airway would be clear of secretions. If you had not suctioned the airway, there would still be vomit and water in the mouth.",feedbackOutOfOrder:"",feedbackErrors:"",examine:"N",prompts:"",subActions:[]}]},{id:["neck"],label:"examine the patient's neck",type:"Required",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"",examine:"N",prompts:"",subActions:[{id:["inspects-palpates-neck"],label:"inspect and palpate the patient's neck for tracheal deviation, JVD, step-offs and other injury",type:"Required",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"",examine:"N",prompts:"",subActions:[]}]},{id:["chest"],label:"examine the patient's chest",type:"Required",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"",examine:"N",prompts:"",subActions:[{id:["assessment-shoulders"],label:"Inspect and palpate shoulders",type:"Required",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"",examine:"N",prompts:"",subActions:[]},{id:["assessment-clavicles"],label:"Inspect and palpates clavicles",type:"Required",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"",examine:"N",prompts:"",subActions:[]},{id:["inspects-palpates-anterior-thorax"],label:"Inspect and palpate anterior thorax for injury, crepitation, and paradoxial motion or flail segments",type:"Required",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"",examine:"N",prompts:"",subActions:[]}]},{id:["abdomen-pelvis"],label:"examine the patient's abdomen",type:"Required",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"",examine:"N",prompts:"",subActions:[{id:["inspects-palpates-abdomen"],label:"Inspect and palpate the abdomen for injury,  distension and rigidity",type:"Required",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"",examine:"N",prompts:"",subActions:[]}]},{id:["assess-pelvis"],label:"examine the patient's pelvis",type:"Required",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"",examine:"N",prompts:"",subActions:[{id:["assessment-checks-pelvis"],label:"Inspect and compress the pelvis",type:"Required",feedbackAbsent:"Be sure to do a thorough exam of the pevis as the pelvis can be a source of life-threatening bleeding.",feedbackOutOfOrder:"",feedbackErrors:"",examine:"N",prompts:"",subActions:[]},{id:["inspects-genitalia-perineum"],label:"Inspect the genitalia/perineum for blood, other fluids, and priapism (male)",type:"Required",feedbackAbsent:"In a male patient priaprism can indicate injury to either the spinal cord or the genitals themselves.",feedbackOutOfOrder:"",feedbackErrors:"",examine:"N",prompts:"",subActions:[]}]},{id:["extremities"],label:"examine the patient's upper and lower extremities",type:"Required",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"",examine:"N",prompts:"",subActions:[{id:["inspects-palpates-right-arm","inspects-palpates-left-arm","inspects-palpates-right-leg","inspects-palpates-left-leg"],label:"Inspect and palpate each extremity for injury, pulse, motor, and sensory function",type:"Required",feedbackAbsent:"If you had checked this patient's extremity pulses, you would have noticed weak extremity pulses, due to inadequate cardiac output.",feedbackOutOfOrder:"",feedbackErrors:"",examine:"N",prompts:"",subActions:[]}]},{id:["posterior"],label:"examine the patient's posterior thorax, lumbar, and buttocks",type:"Required",feedbackAbsent:"You will need a partner to help you roll the patient safely in order to do a thorough exam of the posterior thorax, lumbar, and buttocks.",feedbackOutOfOrder:"",feedbackErrors:"",examine:"N",prompts:"",subActions:[{id:["inspects-palpates-posterior"],label:"inspect and palpate the posterior for injury, crepitation and step-offs",type:"Required",feedbackAbsent:"Crepitation suggests underlying injury. A palpable step-off suggests a fracture.",feedbackOutOfOrder:"",feedbackErrors:"",examine:"N",prompts:"",subActions:[]}]}]},{id:["ongoing-mgmt"],label:"Continue to reassess and manage the patient until arriving at the care facility",type:"Required",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"",examine:"N",prompts:"",subActions:[{id:["Perform ongoing patient assessment and management"],label:"Perform ongoing management",type:"Required",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"",examine:"N",prompts:"",subActions:[{id:["intv-transfer"],label:"Make appropriate transfer decisions, that is, transfer the patient to the air ambulance with a LBB on a stretcher",type:"Required",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"How to transfer your patient to the stretcher depends on your level of concern for spinal injury but you should do so with minimal movement to the spine. You may use a backboard, scoop stretcher, vacuum mattress or other device. *If the patient is not immobilzed, be sure to maintain him in supine position.",examine:"N",prompts:"",subActions:[]},{id:["intv-control-shock-technique-keep-patient-warm"],label:"Keep the patient warm using heat packs and/or blankets",type:"Required",feedbackAbsent:"It is important to keep this patient warm because hypothermia can cause additional problems or worsening of the patient's current problems, including hypotension, arrhythmias, or even cardiac arrest.",feedbackOutOfOrder:"",feedbackErrors:"You could keep the patient warm by removing his wet swimsuit, applying blankets, applying heatpacks to his armpits or groin, and turning up the heat in the air ambulance.",examine:"N",prompts:"",subActions:[]},{id:["intv-contact-receiving-facility"],label:"Inform the air crew about the patient's condition to assist with providing the receiving facility with a patient report and ETA",type:"Required",feedbackAbsent:"The hospital requires noticiation for all incoming patients 5 -15 prior to arrival, which is especially important for critical patients as the receiving team needs time to prepare equipment and space.  During patient handover to the flight crew, you should relay the information that they need to convey to the receiving facility about the patient. ",feedbackOutOfOrder:"",feedbackErrors:"",examine:"N",prompts:"",subActions:[]},{id:["into-establish-IV"],label:"Establish at least one appropriately sized IV en route",type:"Required",feedbackAbsent:"All trauma patient should have at least one, ideally two, large-bore IVs placed, even if they do not require fluid resuscitation.",feedbackOutOfOrder:"",feedbackErrors:"With a criticial patient, you should ideally estabish two large bore IV's while en route to the receiving facility, so as not to delay transfer to definitive care.  Establish as large an IV as possible. With pediatric patients, this will likely be 18, 20, or 22 gauge IVs.",examine:"N",prompts:"",subActions:[]}]},{id:["Reassess the patient"],label:"Reassess the patient",type:"Required",feedbackAbsent:"",feedbackOutOfOrder:"",feedbackErrors:"",examine:"N",prompts:"",subActions:[{id:["reassess-vital-signs"],label:"Recheck vital signs every 5 minutes",type:"Required",feedbackAbsent:"Vitals should be reassessed after every intervention and every clinical change, and a critically ill patient should be reassessed more frequently to ensure he or she is still stable. *If you had reassessed the patient's vitals after intubating the patient, you would have seen an improvement in all of his vital signs.",feedbackOutOfOrder:"",feedbackErrors:"",examine:"N",prompts:"",subActions:[]},{id:["repeat-primary-survey"],label:"Repeat the Primary Survey",type:"Required",feedbackAbsent:"It is important to reassess your patient after every intervention and every clinical change, which includes the primary survey. For example a patient with a neck injury whose breathing was initially non-labored may develop stridor as the airway becomes swollen.",feedbackOutOfOrder:"",feedbackErrors:"",examine:"N",prompts:"",subActions:[]},{id:["repeat-secondary-survey"],label:"Repeat the Secondary Survey",type:"Required",feedbackAbsent:"It is important to reassess your patient after every intervention and every clinical change, which includes your secondary survey. For example, a patient may lose their pulses if you initally failed to notice and treat a source of hemorrhage.",feedbackOutOfOrder:"",feedbackErrors:"",examine:"N",prompts:"",subActions:[]}]}]}]}}};function ce(e,t){e.forEach((function(e){if(0===e.subActions.length){var t={};re.forEach((function(i){e[i]&&(t[i]=e[i])})),se[e.id]=t}}))}var de=function(e,t){t.includes(e)||t.push(e)},le=function(e){var t=[],i=[];if(0===e.length)return"absent";e.forEach((function(e){de(e,t)}));for(var n=0,a=Object.entries(X);n<a.length;n++){var r=Object(u.a)(a[n],2),s=r[0];0!==r[1].filter((function(e){return t.includes(e)})).length&&de(s,i)}return 1===i.length?i[0]:"errors"},ue=function(e){for(var t=[],i=0,n=Object.entries(J);i<n.length;i++){var a=Object(u.a)(n[i],2),r=a[0];a[1][0]===e&&t.push(r)}return t},pe=function(e,t){var i="";if("header"===e.type?(i=J[e.displayColor])||(i=J[e.status]):i=J[e.status]?J[e.status]:J.default,i)return i[t]},be=function(e){return K[pe(e,0)]},he=function(e){if(e){var t,i=e.split(" "),n=i.length;i.forEach((function(e,t){var a=e.trim();"."===a[e.length-1]&&t<n-1&&(a+="\xa0\xa0"),i[t]=a}));var a,r=Object(G.a)(i);try{for(r.s();!(a=r.n()).done;){var s=a.value;t=t?t+" "+s:s}}catch(o){r.e(o)}finally{r.f()}return t}return""};function fe(e,t){var i,n;switch(t){case"assessmentFB":(n=se[e.id])&&(i=n.feedbackAbsent);break;case"incorrectAnswersFB":(n=se[e.id])&&(i=n.feedbackError);break;default:e[t]&&(i=he(e[t]))}return i}var me,ve,ye,Oe,ge,we,ke,je,Ae,xe=function(e){e.intvStatus&&e.intvStatus.length>0&&(e.intvStatusFB=function(e){var t,i,n=[],a=[],r=Object(G.a)(e.intvStatus);try{for(r.s();!(i=r.n()).done;){var s=i.value;s.foundCk?n.push(s.label):a.push(s.label)}}catch(o){r.e(o)}finally{r.f()}return a.length>0&&(t="Remember to check the effect of this action by asking for: "+a+".",n.length>0&&(t=t+" That is in addition to what you did ask for: "+n+".")),t}(e));var t,i,n=he(pe(e,1)).trim().split(" ");n.forEach((function(i,a){var r=i.charAt(0),s=i.substring(1);switch(n[a]=n[a].trim(),r){case"@":t=fe(e,s),n[a]=t||"[missing: "+s+"]";break;case"?":(t=fe(e,s))?n[a]=t:(n[a]="","+bos"===n[a-1]&&(n[a-1]="","."!==n[a-2][n[a-2].length-1]&&(n[a-2]=n[a-2]+".\xa0")),"+eos"===n[a+1]&&(n[a+1]=""))}})),n.forEach((function(e,t){var i="";switch(e.charAt(0)){case"+":switch(e.substring(1)){case"eos":"."===(i=n[t-1].trim())[i.length-1]&&(i=i.slice(0,-1)),n[t-1]=i+".\xa0",n[t]="";break;case"bos":"."===(i=n[t-1].trim())[i.length-1]&&(i=i.slice(0,-1)),n[t-1]=i+".\xa0",n[t]="";var a=n[t+1].trim();n[t+1]=a.charAt(0).toUpperCase()+a.slice(1)}}}));var a,r=Object(G.a)(n);try{for(r.s();!(a=r.n()).done;){var s=a.value;i?""!==s&&(i=i+"\xa0"+s):""!==s&&(i=s)}}catch(o){r.e(o)}finally{r.f()}return i},Ee={},Ce=function(e,t,i){return e.filter((function(e){return e[t]===i}))},Pe=function(e,t,i){return Ce(Ce(e,"timestamp",i),"id",t)},Ie=i(34),Ne=function(e,t,i,n){console.log("In savingDebriefingLog");var a=O.collection("debriefing-feedback-logs").doc(e.id),r={userName:e.userName,ObserverFileCreater:e.userName,label:e.label,ObserverFileName:e.label,commenter:"",scenarioID:e.scenarioID,scenarioName:e.scenarioName,schemaVersion:e.schemaVersion,timestamp:Date().toLocaleString(),summary:i,constraintsViolated:n},s=[],o={},c=!1;t.forEach((function(e,t){for(var i=0,n=Object.entries(e);i<n.length;i++){var a=Object(u.a)(n[i],2),r=a[0],s=a[1];void 0===s&&(console.log("filtered out from events; index: ",t," key: ",r," value: ",s),c=!0)}})),c?(t.forEach((function(e,t){o=Ie.pickBy(e,(function(e,t){return!(void 0===e)})),s.push(o)})),r.events=s):r.events=t,a.set(r)},Se=function(e){return"criticalActionHeader"===e.status?"":-1===e.timestamp?"\xa0\xa0":(t=e.timestamp,new Date(1e3*t).toISOString().substr(14,5));var t},De=function(e,t){return e.reduce((function(e,i){return Object(j.a)(Object(j.a)({},e),{},Object(M.a)({},i[t],(e[i[t]]||[]).concat(i)))}),{})},Re=function(e,t){return e.checkListMetaData.filter((function(e){return e.type===t}))},qe=ue("Problem"),Te=ue("Caution"),Be=[],Fe={},Le={},Me={};function Ye(e){ge=e,function(e){var t=ie[e];Ee=ee;for(var i=0,n=Object.entries(te);i<n.length;i++){var a=Object(u.a)(n[i],2),r=a[0],s=a[1];t.includes(s.id)&&(Ee[r]=s)}}(e.name),function(e){var t,i=oe[e.name].Action,n=Object(G.a)(i.subActions);try{for(n.s();!(t=n.n()).done;){var a=t.value;ce(a.subActions);var r,s=Object(G.a)(a.subActions);try{for(s.s();!(r=s.n()).done;){var o=r.value.subActions;0!==o.length&&ce(o)}}catch(c){s.e(c)}finally{s.f()}}}catch(c){n.e(c)}finally{n.f()}}(e),function(e){if(e.interventionPromptAnswers){e.interventionPromptAnswers.forEach((function(e){Le[e.id]=e.label}))}}(e),function(e){if(e.interventionPrompts){e.interventionPrompts.forEach((function(e){Me[e.id]=e.label}))}}(e),ke=ze(e),je=We(e),ye=Re(e,R.PHASE).map((function(e){return e.id})).concat(["Unknown"]),ve=Re(e,R.SUB_PHASE).map((function(e){return e.id})),Ae=function(e){var t=Re(e,R.PHASE),i=Re(e,R.SUB_PHASE),n=e.checkListMetaData.filter((function(e){return T.includes(e.type)})),a=e.checkListMetaData.filter((function(e){return B.includes(e.type)})),r=De(a,"parentID");n.forEach((function(e){e.id in r&&(e.options=r[e.id])}));var s=De(n.filter((function(e){return void 0===e.subPhase})),"phase"),o=De(n.filter((function(e){return!!e.subPhase})),"subPhase");i.forEach((function(e){e.items=o[e.id]}));var c=De(i,"phase");return t.forEach((function(e){e.id in s?e.items=s[e.id]:e.subPhases=c[e.id]})),t}(e),Oe=_e(Ae),Ae.forEach((function(e){void 0===e.subPhases?Fe[e.id]=e.label:e.subPhases.forEach((function(t){Fe[t.id]=e.label}))})),Fe.Unknown="Unknown",me=[]}var ze=function(e){var t,i=De(e.checkListMetaData.filter((function(e){return F.includes(e.type)})),"id");return t=e.interventions?De(e.interventions,"id"):De(e.intvMetaData.filter((function(e){return F.includes(e.type)})),"id"),Object.assign(i,t)},We=function(e){var t,i=De(e.checkListMetaData.filter((function(e){return F.includes(e.type)})),"label");return t=e.interventions?De(e.interventions,"label"):De(e.intvMetaData.filter((function(e){return F.includes(e.type)})),"label"),Object.assign(i,t)},_e=function(e){var t=[];return e.forEach((function(e){if(e.subPhases){var i=e.subPhases.map((function(e){return e.id}));t=t.concat(i)}else t=t.concat(e.id)})),t},Ve=function(e,t){var i=[];return e.forEach((function(e){e.timestamp<t&&(e.foundCk=!0),i.push(e)})),i},He=function(e,t){var i=[],n=[],a=[],r=[],s=[],o={},c="",d="",l=0,u=0,p=!0,b=["assessment","required-action","decision-option","assessment-option"];return e.forEach((function(e,h){var f={comment:"",numericalID:h,status:"",intvStatus:[],contraindicatedWhy:"",minimalWhy:"",why:"",answerCorrect:!0,answerDetails:{},expertPhase:"",workingPhase:"",suggestedPhase:"",protocol:"",protocolRelationship:"",probLabel:"",solutionIds:[],assessments:"",required:!1,actionDescription:"",assessmentFB:"",incorrectAnswersFB:"",orderingFB:"",processingState:"good"};["id","label","finding","phase","subPhase","vitalType","vital","value","type","prompt","promptID","intervention","timestamp","probLabel"].forEach((function(t){e[t]&&(f[t]=e[t])})),e.label&&(f.actionDescription=e.label),e.type&&(f.status=e.type),e.subPhase?f.workingPhase=e.subPhase:e.phase&&(f.workingPhase=e.phase),f.expertPhase=f.workingPhase,c===f.workingPhase&&d===f.phase||(""!==c&&b.includes(f.type)?(p=!0,r[u]=s,u!==l&&(r[l]=r[l].concat(s)),u++,f.phase!==d&&(d=f.phase,l=u,f.phase!==f.workingPhase&&(r[l]=[],a[l]=d,u++))):""===c&&b.includes(f.type)?(d=f.phase)!==f.workingPhase&&(d=f.phase,r[l]=[],a[l]=d,u++):""===c?(d="Unknown",f.workingPhase=d,f.phase=d,f.subPhase=""):p=!1,p?(c=f.workingPhase,s=[],a[u]=c,r[u]=[]):p=!0);var m=f.type;["assessment","required-action","intervention","answer","obtain-vital-sign","decision-option","assessment-option"].includes(m)||(f.processingState="bad");var v=[];if("answer"===m){var y=ct(e.promptID,!0),O=dt(e.id,!0);if(y){var g=ot(e.promptID,e.id,!0),w={correctAnswer:y,givenAnswer:O,correct:!g};i.includes(f.intervention)?(v=s.pop(),i.pop(),f.answerCorrect=v.answerCorrect,f.answerDetails=v.answerDetails,g?(f.answerCorrect=!1,""===v.incorrectAnswersFB?f.incorrectAnswersFB="You should have responded: "+y:f.incorrectAnswersFB=v.incorrectAnswersFB+", and "+y):(f.incorrectAnswersFB=v.incorrectAnswersFB,f.answerCorrect=v.answerCorrect)):(g?(f.answerCorrect=!1,f.incorrectAnswersFB="You should have responded: "+y):f.incorrectAnswersFB="",i.push(f.intervention)),f.answerDetails[e.promptID]=w}else f.processingState="bad"}if("intervention"===m&&(v=s.slice(-1)[0])&&"answer"===v.type&&(v.intervention===f.id?(v=s.pop(),i.pop(),i.pop(),f.answerCorrect=v.answerCorrect,f.answerDetails=v.answerDetails,f.incorrectAnswersFB=v.incorrectAnswersFB):(v=s.pop(),i.pop(),i.pop())),"good"===f.processingState){if("obtain-vital-sign"===f.type){var k=f.vital,j="";j="intervention-status"===f.vitalType?n.includes(k)?"intv":"noIntv":"vital";var A=o[k];switch(j){case"intv":f.status="patientIntvCheck",A&&A.timestamp<f.timestamp&&(A.foundCk=!0,o[k]=A);break;case"noIntv":f.status="intvCheckWNoIntvFound";break;case"vital":f.status="patientVitalCheck",A&&(A=Ve(A,f.timestamp),o[k]=A);break;default:f.status="unexpectedPatientIntvCheck"}}if("intervention"===f.type&&t.forEach((function(e,t){var i,n,a=["why","probLabel","protocolRelationship","probLabel"];null===(i=e.allActions)||void 0===i||i.forEach((function(t,i){if(t.id===f.id){var n,r=f.id;if((n=ne[f.label])||(n=ne[f.id]),n){var s={intervention:r,timestamp:f.timestamp,foundCk:!1};n.intvStatusNeeded&&(o[r]=Object.assign({},s)),n.vitalsNeeded.forEach((function(e){o[e]?o[e].push(Object.assign({},s)):o[e]=[Object.assign({},s)]}))}t.assessments&&(f.assessmentsNeeded=t.assessments),t.phase&&(f.when=t.phase,f.suggestedPhase=t.phase),e.protocols&&(f.protocol=e.protocols),f.answerCorrect?f.status="goodIntv":f.status="incorrect-answers",a.forEach((function(e){t[e]&&(f[e]=t[e])})),t["id-label"]&&(f.label=t["id-label"])}})),null===(n=e.allContras)||void 0===n||n.forEach((function(t,i){t.id===f.id&&(f.status=e.protocolRelationship,a.forEach((function(e){t[e]&&(f[e]=t[e])})),e.probLabel&&(f.probLabel=e.probLabel))}))})),"decision-option"===f.type)ot(e.promptID,e.id,!1)&&(f.status="decision-option-incorrect",f.answerCorrect=!1,f.incorrectAnswerFB="You should have responded "+ct(e.promptID,!1));if("assessment-option"===f.type)ot(e.promptID,e.id,!1)&&(f.status="assessment-option-incorrect",f.answerCorrect=!1,f.incorrectAnswerFB="You should have responded "+ct(e.promptID,!1));"intervention"===f.type?(i.push(f.id+"+"+f.probLabel),n.push(f.id)):i.push(f.id),s.push(f)}})),r[u]=s,u!==l&&(r[l]=r[l].concat(s)),[r,a,i,o]};var Ue=function(e,t){var i=[],n=[],a=[],r=[],s=[],o={},c="",d="",l=0,p=0,b=!0,h=["assessment","required-action","decision-option","assessment-option"];return e.forEach((function(e,f){var m={comment:"",numericalID:f,status:"",intvStatus:[],contraindicatedWhy:"",minimalWhy:"",why:"",answerCorrect:!0,answerDetails:{},expertPhase:"",workingPhase:"",suggestedPhase:"",protocol:"",protocolRelationship:"",probLabel:"",solutionIds:[],assessments:"",required:!1,actionDescription:"",assessmentFB:"",incorrectAnswersFB:"",orderingFB:"",processingState:"good"};["id","interventionID","label","finding","phase","subPhase","vitalType","vital","value","type","prompt","promptID","intervention","timestamp","probLabel"].forEach((function(t){e[t]&&(m[t]=e[t])})),"intervention"===e.type&&(e.interventionID&&(m.id=e.interventionID),m.label=m.id.label),m.label&&(m.actionDescription=m.label),e.type&&(m.status=e.type),e.subPhase?m.workingPhase=e.subPhase:e.phase&&(m.workingPhase=e.phase),m.expertPhase=m.workingPhase,c===m.workingPhase&&d===m.phase||(""!==c&&h.includes(m.type)?(b=!0,r[p]=s,p!==l&&(r[l]=r[l].concat(s)),p++,m.phase!==d&&(d=m.phase,l=p,m.phase!==m.workingPhase&&(r[l]=[],a[l]=d,p++))):""===c&&h.includes(m.type)?(d=m.phase)!==m.workingPhase&&(d=m.phase,a[l]=d,r[l]=[],p++):""===c?(d="Unknown",m.workingPhase=d,m.phase=d,m.subPhase=""):b=!1,b?(c=m.workingPhase,s=[],a[p]=c,r[p]=[]):b=!0);var v=m.type;if(["assessment","required-action","intervention","obtain-vital-sign","decision-option","assessment-option"].includes(v)||(m.processingState="bad"),"good"===m.processingState){if("obtain-vital-sign"===m.type){var y=m.vital,O="";O="intervention-status"===m.vitalType?n.includes(y)?"intv":"noIntv":"vital";var g=o[y];switch(O){case"intv":m.status="patientIntvCheck",g&&g.timestamp<m.timestamp&&(g.foundCk=!0,o[y]=g);break;case"noIntv":m.status="intvCheckWNoIntvFound";break;case"vital":m.status="patientVitalCheck",g&&(g=Ve(g,m.timestamp),o[y]=g);break;default:m.status="unexpectedPatientIntvCheck"}}if("intervention"===m.type&&(m.label=Qe(m.id).label,m.actionDescription=m.label,i.push(m.id),n.push(m.id),t.forEach((function(e,t){var i,n,a=["why","probLabel","protocolRelationship","probLabel"];null===(i=e.allActions)||void 0===i||i.forEach((function(t,i){if(t.id===m.id){var n,r=m.id;if((n=ne[m.label])||(n=ne[m.id]),n){var s={intervention:r,timestamp:m.timestamp,foundCk:!1};n.intvStatusNeeded&&(o[r]=Object.assign({},s)),n.vitalsNeeded.forEach((function(e){o[e]?o[e].push(Object.assign({},s)):o[e]=[Object.assign({},s)]}))}t.assessments&&(m.assessmentsNeeded=t.assessments),t.phase&&(m.when=t.phase,m.suggestedPhase=t.phase),e.protocols&&(m.protocol=e.protocols),m.answerCorrect?m.status="goodIntv":m.status="incorrect-answers",a.forEach((function(e){t[e]&&(m[e]=t[e])})),t["id-label"]&&(m.label=t["id-label"])}})),null===(n=e.allContras)||void 0===n||n.forEach((function(t,i){t.id===m.id&&(m.status=t.protocolRelationship,a.forEach((function(e){t[e]&&(m[e]=t[e])})),e.probLabel&&(m.probLabel=e.probLabel))}))})),function(e,t){if("intervention"===e.type&&e.answers)for(var i,n=0,a=Object.entries(e.answers);n<a.length;n++){var r=Object(u.a)(a[n],2),s=r[0],o=r[1],c="TBD";i={correctAnswer:c,givenAnswer:dt(o,!0),correct:!1},t.answerDetails[s]=i,t.answerCorrect=!1,t.incorrectAnswersFB=t.incorrectAnswersFB+", and "+c}}(e,m),"intervention"===m.status&&(m.status="irrelevant")),"decision-option"===m.type)ot(e.promptID,e.id,!1)&&(m.status="decision-option-incorrect",m.answerCorrect=!1,m.incorrectAnswerFB="You should have responded "+ct(e.promptID,!1));if("assessment-option"===m.type)ot(e.promptID,e.id,!1)&&(m.status="assessment-option-incorrect",m.answerCorrect=!1,m.incorrectAnswerFB="You should have responded "+ct(e.promptID,!1));"intervention"===m.type?(i.push(m.id+"+"+m.probLabel),n.push(m.id)):i.push(m.id),s.push(m)}})),r[p]=s,p!==l&&(r[l]=r[l].concat(s)),[r,a,i,o]},Ge=function(e,t,i,n){for(var a=void 0,r=void 0,s=0;s<e.length&&(i.id!==e[s]||(a=t[s],"start"!==n));s++);return a&&(r=-1===a.numericalID?"start"===n?a.numericalIDStart:a.numericalIDEnd:a.numericalID),r},Ke={id:"Unknown",label:"Unknown"},Qe=function(e){if("Unknown"===e)return Ke;var t=ke[e];return t||(t=je[e]),t?t[0]:void 0},Je=function(e,t,i){for(var n=0;n<i.length;n++){var a=t[n],r=i[n];if(a.length>0&&!rt(r)){var s,o=Object(G.a)(a);try{for(o.s();!(s=o.n()).done;){var c=s.value;if(c.numericalID===e)return c}}catch(d){o.e(d)}finally{o.f()}}}},Xe=function(e,t,i,n){var a=Je(e,i,n);a?a.arg2?a.arg2=a.arg2.concat([t.id]):a.arg2=[t.id]:console.log("no object found for numericalID = ",e)},Ze=function(e,t,i){var n;return n=["phase","sub-phase"].includes(e.type)?"phase":"item",me.push({constraintID:i,arg1:e,op:"before",arg2:t,type:n}),n},$e=function(e,t,i,n){return n&&(e+=t?" and ":", "),e+=i.toLowerCase()},et=function(e,t,i,n,a,r,s,o,c){var d,l=Ge(r,s,e,"end"),u=Ge(r,s,e,"start"),p=e.label,b="",h="",f="";if(t.length>0){var m,v=0,y=0,O=Object(G.a)(t);try{for(O.s();!(m=O.n()).done;){var g=m.value,w=!1,k=Qe(g);if(k){++v===t.length&&(w=!0);var j=k.label,A=Ge(r,s,k,"start"),x=Ge(r,s,k,"end");switch(n){case"before":if(l&&A)if(l<A){if("or"===i)return}else y++,""===h&&(h=$e(h=u===l?"You should have done ":"You should have completed ",w,p,!1)),A===x?(""===f&&(f+=" before you did "),f=$e(f,w,j,y>1)):(""===f&&(f+=" before starting "),f=$e(f,w,j,y>1)),Xe(u,k,o,c),d=Ze(e,k,a);break;case"after":if(u&&x)if(u>x){if("or"===i)return}else y++,u===l?(""===h&&(h="You should have done "),h=$e(h,w,j,y>1)):(""===h&&(h="You should have completed "),h=$e(h,w,j,y>1)),""===f&&(f=$e(f+=A===x?" before you did ":" before starting ",w,p,!1)),Xe(A,e,o,c),d=Ze(k,e,a)}}}}catch(E){O.e(E)}finally{O.f()}""!==(b=h+f)&&function(e,t,i,n,a){var r=Je(e,n,a);if(r){var s;""!==r.orderingFB?r.orderingFB=r.orderingFB+".\xa0\xa0"+t:r.orderingFB=t;var o="";"phase"===i&&(o="misOrdered-phase-"),"item"===i&&(o="misOrdered-"),r.status.includes(o)||(s=o+r.status,r.status=s)}else console.log("no object found for numericalID = ",e)}(u,b,d,o,c)}},tt=function(e,t){var i=function(e,t){for(var i=[],n=[],a=[],r=0;r<t.length;r++){var s=e[r],o=t[r],c=s[0].numericalID,d=s[s.length-1].numericalID;if((ye.includes(o)||ve.includes(o))&&(n.push({id:o,numericalID:-1,numericalIDStart:c,numericalIDEnd:d}),i.push(o),a.includes(o)||a.push(o)),s.length>0&&!rt(o)){var l=s.map((function(e){return e.id}));n=n.concat(s),a=a.concat(l),i=i.concat(l)}}return[i,a,n]}(e,t),n=i[0],a=i[1],r=i[2];return a.forEach((function(i){var a=Qe(i);if(a){var s=function(e){var t=e.id,i=e.label,n=Ee[t];return n||(n=Ee[i]),n}(a);s&&function(e,t,i,n,a,r){var s=t.before,o=t.beforeOp;et(e,s,o,"before",t.id,a,r,i,n),s=t.after,o=t.afterOp,et(e,s,o,"after",t.id,a,r,i,n)}(a,s,e,t,n,r)}})),[e,t]},it=function(e,t,i,n){var a;a=i.when;var r=e.lastIndexOf(a),s=t[r];s||(s=[]),s.splice(n-1,0,i),t[r]=s},nt=function(e,t){var i=function(e,t){var i,n,a=at(e),r=Object(L.a)(a).reverse(),s=Object(G.a)(r);try{var o=function(){var e=n.value;if(i=t.find((function(t){return t===e.id})))return"break"};for(s.s();!(n=s.n()).done&&"break"!==o(););}catch(c){s.e(c)}finally{s.f()}return i}(e,t);return t.lastIndexOf(i)},at=function(e){return Ae.find((function(t){return t.id===e})).subPhases},rt=function(e){var t=Ae.find((function(t){return t.id===e}));return!(!t||!t.subPhases)},st=function(e,t){var i=t;return"red"===e&&(i="red"),"yellow"===e&&"red"!==i&&(i="yellow"),i},ot=function(e,t,i){var n=void 0;return void 0===(n=i?ge.associations[e]:ge.checkListCorrectness[e])?(console.log("didn't find answers for ",e),!1):Array.isArray(n)?!n.find((function(e){return e===t})):!(n===t)},ct=function(e,t){var i,n;t?(i=ge.associations[e],n=ge.intvMetaData):(i=ge.checkListCorrectness[e],n=ge.checkListMetaData);var a=!1;return Array.isArray(i)?i.forEach((function(e,t){n.forEach((function(t,i){t.id!==e||(!1===a?a=t.label:a+=", ")}))})):n.forEach((function(e,t){e.id===i&&(a=e.label)})),a},dt=function(e,t){var i="";switch(we){case"pre 5/1/22":(t?ge.intvMetaData:ge.checkListMetaData).forEach((function(t,n){t.id===e&&(i=t.label)}));break;case"post 5/1/22":i=Le[e]}return i||!1};var lt=function(e,t,i,n,a){return e.forEach((function(e){var r=function(e,t){e.bestFittingSol=[];var i=-1,n=-1,a=-1,r=-1,s=e.solutions;return s.forEach((function(s,o){var c;s.found=[],s.notFound=[],s.actions.forEach((function(i,n){t.includes(i.id+"+"+e.probLabel)?s.found.push(i.id):s.notFound.push(i)}));var d=s.actions.length,l=s.found.length;1===(c=0===l?0:l/d)&&l>r?(r=l,i=o,n=o):c>=a&&l>r&&(r=l,i=o,a=c)})),-1===n&&(n=i),s[n]}(e,t);e.bestFittingSol=r;var s=r.notFound;s.forEach((function(o,c){t.push(o.id+"+"+e.probLabel);var d={comment:"",numericalID:i,status:"",intvStatus:[],required:!0,when:"",suggestedPhase:"",expertPhase:"",probLabel:"",minimalWhy:"",assessmentsNeeded:"",protocol:"",protocolRelationship:"",actionDescription:"",type:"intervention",timestamp:-1};["id","phase","why","protocolRelationship"].forEach((function(e){o[e]&&(d[e]=o[e])}));["minimalWhy","protocols","strictActionOrdering"].forEach((function(e){r[e]&&(d[e]=r[e])}));var l,u;["probLabel"].forEach((function(t){e[t]&&(d[t]=e[t])})),e.assessments&&(d.assessmentsNeeded=e.assessments),e.protocols&&(d.protocol=e.protocols),o["id-label"]&&(d.label=o["id-label"]),o["id-label"]&&(d.actionDescription=o["id-label"]),o.subPhase&&(l=o.subPhase),o.phase&&!l&&(l=o.phase),l&&(d.when=l,d.expertPhase=l,d.suggestedPhase=l),d.status="missing"+((u=d.protocolRelationship).charAt(0).toUpperCase()+u.slice(1)),["optional","unnecessary","irrelevant"].includes(d.protocolRelationship)||(!function(e,t,i,n,a){var r=-1;""===i.expertPhase&&(i.expertPhase=ye[ye.length-2]),r=ve.includes(i.expertPhase)||!at(i.expertPhase)?e.lastIndexOf(i.expertPhase):nt(i.expertPhase,e),i.when=e[r];var s=n.slice(0,a-1),o=n[a-1],c=Object(L.a)(s).reverse().find((function(e){return e.required})),d=n[a+1],l=n.slice(a+1).find((function(e){return e.required})),u=Object(L.a)(t[r]),p=-1,b=-1,h=-1,f=-1,m=!1;o&&(p=u.findIndex((function(e){return e.id===o.id}))),d&&(b=u.findIndex((function(e){return e.id===d.id}))),c&&(h=u.findIndex((function(e){return e.id===c.id}))),l&&(f=u.findIndex((function(e){return e.id===l.id}))),d&&(b=u.findIndex((function(e){return e.id===d.id}))),-1!==h&&(m=h+2,p>h&&(m=p+2)),m||-1===f||(m=f+1,b<f&&(m=b+1)),m||-1===p||(m=p+2),m||-1===b||(m=b+1),m||(m=u.length+2),it(e,t,i,m)}(n,a,d,s,c),i++)}))})),[i,n,a]};function ut(e,t){var i=t.events;console.log("in analyzeEvents"),Ye(e);var n=ge.problems,a=ge.actions,r=function(e,t,i){var n,a=[],r=Object(G.a)(e);try{var s=function(){var e=n.value,r={};if(t&&i){we="post 5/1/22";var s=e.solutions,o=t.filter((function(t){return t.problemID===e.id}));r.probLabel=e.label,r.id=e.id,r.lifeThreat=e.lifeThreat,r.vitals=e.vitals,r.allActions=[],r.allContras=[];var c=e.assessments;r.assessments=c.map((function(e){return e.assessmentID})),r.solutions=[];var d,l=Object(G.a)(s);try{var u=function(){var e=d.value,t=o.filter((function(t){return t.id===e}))[0],n=Object.assign({},t);n.actions=[],n.otherActions=[];var a,s=t.actions;a=i.filter((function(e){return s.includes(e.id)}));var c,l=Object(G.a)(a);try{for(l.s();!(c=l.n()).done;){var u=c.value,p=Object.assign({},u);p.id=p.interventionID;var b=ke[p.id];switch(p.probLabel=r.probLabel,p["id-label"]=b?b[0].label:p.id,p.protocolRelationship){case"contraindicated":case"irrelevant":case"unnecessary":n.otherActions.push(p),de(p,r.allContras);break;case"required":case"minimal":case"optional":n.actions.push(p),de(p,r.allActions)}}}catch(h){l.e(h)}finally{l.f()}r.solutions.push(n)};for(l.s();!(d=l.n()).done;)u()}catch(h){l.e(h)}finally{l.f()}}else{we="pre 5/1/22";var p=e.solutions[0],b=Object.assign({});r.probLabel=e.problem,r.lifeThreat=e.lifeThreat,r.allActions=[],r.allContras=[],b.actions=p.actions,b.minimalWhy=p.minimalWhy,b.protocols=p.protocols,r.assessments=e.assessments,r.solutions=[],b.otherActions=p.contraindications,b.actions.forEach((function(e){de(e,r.allActions),e.probLabel=r.probLabel,e.minimal&&(e.protocolRelationship="minimal"),e.optional&&(e.protocolRelationship="optional"),e.minimal||e.optional||(e.protocolRelationship="required")})),b.otherActions.forEach((function(e){de(e,r.allContras),e.protocolRelationship="contraindicated"})),r.solutions.push(b),r.allProblemProtocols=e.protocol}a.push(r)};for(r.s();!(n=r.n()).done;)s()}catch(o){r.e(o)}finally{r.f()}return a}(n,ge.solutions,a),s=[],o=function(e,t){var i;switch(we){case"pre 5/1/22":i=He(e,t);break;case"post 5/1/22":i=Ue(e,t);break;default:i=He(e,t)}return i}(i,r),c=o[0],d=o[1],l=o[2],p=o[3],b=tt(c,d),h=function(e,t){var i;return Oe.forEach((function(n,a){if(!t.includes(n)){var r=0;(i=0===a?Oe[0]:Oe[a-1])!==n&&(r=t.lastIndexOf(i),r+=1),t.splice(r,0,n),e.splice(r,0,[])}})),[e,t]}(c=b[0],d=b[1]);c=h[0],d=h[1];var f=function(e,t,i,n,a){var r,s=function(e){var t=[];return e.forEach((function(e){""!==e.assessments&&(t=t.concat(e.assessments))})),t}(e),o=t.length,c=ge.checkListMetaData.filter((function(e){return[R.ASSESS,R.REQUIRED].includes(e.type)})),d=[],l=Object(G.a)($);try{for(l.s();!(r=l.n()).done;){var u=r.value;if(u.scenarioName===ge.name){d=u.exceptions;break}}}catch(p){l.e(p)}finally{l.f()}return d.forEach((function(e,t){c=c.filter((function(t){return t.id!==e[0]})),i.includes(e[0])&&a.forEach((function(t,i){t.forEach((function(t,i){t.id===e[0]&&(t.why=e[1],t.status="notNecessary")}))}))})),c.forEach((function(e,t){if(!i.includes(e.id)){i.push(e.id);var r={comment:"",numericalID:o,status:"missingRequiredAssessment",intvStatus:[],expertPhase:"",workingPhase:"",contraindicatedWhy:"",minimalWhy:"",why:"",probLabel:"",protocol:"",actionDescription:"",assessmentFB:"",timestamp:-1};["id","label","finding","phase","subPhase","type","prompt"].forEach((function(t){e[t]&&(r[t]=e[t])})),e.subPhase?r.workingPhase=e.subPhase:e.phase&&(r.workingPhase=e.phase),r.when=r.workingPhase,r.expertPhase=r.workingPhase,r.label&&(r.actionDescription=r.label),s.includes(e.id)&&(r.assessmentFB="Thus you missed finding: "+ge.assessmentFindings[e.id]),"required-action"===r.type&&(r.status="missingRequiredAssessment"),it(n,a,r,t),o++}})),[i,n,a,o]}(r,i,l,d,c);l=f[0],d=f[1],c=f[2];var m=f[3],y=lt(r,l,m,d,c);m=y[0],d=y[1],c=y[2],s=function(e,t){for(var i,n=0,a=Object.entries(t);n<a.length;n++){var r=Object(u.a)(a[n],2),s=r[0],o=r[1];if(Array.isArray(o)){var c,d=Object(G.a)(o);try{for(d.s();!(c=d.n()).done;){var l=c.value,p={label:s,foundCk:l.foundCk};i=Pe(e,l.intervention,l.timestamp);var b,h=Object(G.a)(i);try{for(h.s();!(b=h.n()).done;){var f=b.value;f.intvStatus.includes(p)||f.intvStatus.push(p)}}catch(m){h.e(m)}finally{h.f()}}}catch(m){d.e(m)}finally{d.f()}}else!function(){var t={label:"intervention status",foundCk:o.foundCk};(i=Pe(e,s,o.timestamp)).forEach((function(e){e.intvStatus.includes(t)||e.intvStatus.push(t)}))}()}return e}(s=function(e,t){for(var i=[],n=1,a=1,r="green",s="green",o=[],c=[],d=[],l={id:"assessmentHeader",status:"",phaseOrderStatus:"good",type:"header",numericalID:1,displayColor:"",why:"",label:"",labelID:"",protocol:""},u={id:"assessmentSubHeader",status:"",phaseOrderStatus:"good",type:"header",numericalID:1,displayColor:"",why:"",label:"",labelID:"",phaseID:"",protocol:""},p="",b=!1,h=0;h<e.length;h++){var f=t[h],m=e[h],v=!0;if(ye.includes(m)&&rt(m)&&(v=!1),f.length>0&&v){var y=t[h];s="green";var O,g=Object(G.a)(y);try{for(g.s();!(O=g.n()).done;){var w=O.value;"intervention"!==w.type&&o.push(w.status),qe.includes(w.status)&&(s="red"),Te.includes(w.status)&&"red"!==s&&(s="yellow"),w.numericalID=n++}}catch(q){g.e(q)}finally{g.f()}var k=Object.assign({},u),j=e[h],A=Qe(j);k.label=A.label,k.labelID=A.id,k.status=le(o),k.displayColor=s;var x=Fe[j],E=Qe(x);if(k.phaseID=E.id,""===p&&(p=E,r=st(s,r)),h===e.length-1){var C=Object.assign({},l);x!==p.label&&(C.label=p.label,C.labelID=p.id,C.status=le(c),C.displayColor=r,C.numericalID=a++/1e3,i.push(C),i.push.apply(i,Object(L.a)(d)),d=[]),(C=Object.assign({},k)).label=E.label,C.labelID=E.id,C.id="assessmentHeader",C.numericalID=a++/1e3,i.push(C),x===k.label?(i.push.apply(i,Object(L.a)(d)),i.push.apply(i,Object(L.a)(y))):(k.numericalID=a++/1e3,i.push.apply(i,Object(L.a)(d)),i.push(k),i.push.apply(i,Object(L.a)(y))),b=!0}if(!b)if(x!==p.label){var P,I,N=Object.assign({},l);N.label=p.label,N.labelID=p.id,N.status=le(c),c=[],N.displayColor=r,N.numericalID=a++/1e3,i.push(N),i.push.apply(i,Object(L.a)(d)),(P=c).push.apply(P,Object(L.a)(o)),o=[],x===k.label?d=Object(L.a)(y):(k.numericalID=a++/1e3,(I=d=[k]).push.apply(I,Object(L.a)(y))),p=E,r=st(s,"green")}else{var S,D,R;r=st(s,r),(S=c).push.apply(S,Object(L.a)(o)),o=[],x===k.label?(D=d).push.apply(D,Object(L.a)(y)):(k.numericalID=a++/1e3,d.push(k),(R=d).push.apply(R,Object(L.a)(y)))}}}return i}(d,c),p);var O=[];s.forEach((function(e,t){O.push(e)}));var g=[],w=[],k=0,j=-1;O.forEach((function(e,t){if("intervention"===e.type&&e.status&&e.status.includes("goodintv","incorrect-answers","minimal","misOrdered-goodintv","misOrdered-incorrect-answers","misOrdered-incorrect-answers","minimal","misOrdered-minimal","misOrdered-minimal-incorrect-answers","misOrdered-phase-incorrect-answers","misOrdered-phase-minimal-incorrect-answers","misOrdered-phase-minimal")){w.includes(e.probLabel)?j=w.indexOf(e.probLabel):(w[j=k]=e.probLabel,k++);var i=g[j];i||(i=[]),i.push(e),g[j]=i}}));var A=s.map((function(e){return e.id})),x=r.map((function(e){return e.probLabel}));return w.forEach((function(e,t){var i=x.indexOf(e),n=r[i],a=n.actions.filter((function(e){return"required"===e.protocolRelationship})).map((function(e){return e.id})),o=n.actions.filter((function(e){return"minimal"===e.protocolRelationship})).map((function(e){return e.id}));if(o){var c,d=g[t].map((function(e){return e.id})),l=!0,u=!0,p=Object(G.a)(a);try{for(p.s();!(c=p.n()).done;){var b=c.value;if(!d.includes(b)){l=!1;break}}}catch(O){p.e(O)}finally{p.f()}var h,f=Object(G.a)(o);try{for(f.s();!(h=f.n()).done;){var m=h.value;if(!d.includes(m)){u=!1;break}}}catch(O){f.e(O)}finally{f.f()}var v=[];if(!l&&u){o.forEach((function(e,t){var i=A.indexOf(e),a=s[i];switch(a.minimalWhy=n.minimalWhy,a.status){case"incorrect-answers":a.status="minimal-incorrect-answers";break;case"goodintv":a.status="minimal";break;case"misOrdered-goodintv":a.status="misOrdered-minimal";break;case"misOrdered-incorrect-answers":a.status="misOrdered-minimal-incorrect-answers";break;case"misOrdered-phase-goodintv":a.status="misOrdered-phase-minimal";break;case"misOrdered-phase-incorrect-answers":a.status="misOrdered-phase-minimal-incorrect-answers"}v.push(a.numericalID),s[i]=a}));var y={};v.forEach((function(e,t){(y=function(e,t){var i,n={},a={},r=Object(G.a)(t);try{for(r.s();!(i=r.n()).done;){var s=i.value;if("problemHeader"===s.id)n=s;else if(s.numericalID===e){a=n;break}}}catch(O){r.e(O)}finally{r.f()}return a}(e,s))&&"green"===y.displayColor&&(y.displayColor="yellow")}))}}n.actions=[]})),"pre 5/1/22"!==we&&(Be=function(e,t,i){var n={};v=e;var a,r,s,o=oe[t.name].Action;return ae(n,o),i.forEach((function(t){"header"===(r=e.filter((function(e){return!!e.labelID&&e.labelID===t.arg1.id||e.id===t.arg1.id}))[0]).type?(s=n[r.labelID],a=s[0]):("intervention"===r.type&&(s=n[r.probLabel]),s||(s=n[r.workingPhase]),a=s.filter((function(e){return e.id===t.arg1.id}))[0]),a&&("phase"===t.type?(a.phaseOrderStatus="misOrdered",a.arg2?a.arg2=a.arg2.concat([t.arg2.id]):a.arg2=[t.arg2.id]):a.arg2?a.arg2=a.arg2.concat([t.arg2.id]):a.arg2=[t.arg2.id])})),n}(O,ge,me),console.log("Condition2 Analysis",Be)),console.log("Constraint Violation Results",me),Ne(t,O,Be,me),O}var pt=i(71),bt=i(67),ht=i(68),ft=i(69),mt=i(70),vt=function(e){var t=e.title,i=e.leftNav,n=void 0===i?null:i,r=e.rightNav,s=void 0===r?null:r,o=Object(a.useContext)(l.AuthContext),c=o.isAuthenticated,d=o.userName,u=o.signOutUser;return Object(H.jsxs)(bt.a,{color:"dark",dark:!0,children:[Object(H.jsx)(ht.a,{href:"#",children:"MedDBriefer"}),!!n&&Object(H.jsx)(ft.a,{children:n}),!!t&&Object(H.jsx)(mt.a,{tag:"h3",children:t}),Object(H.jsxs)(ft.a,{children:[c&&Object(H.jsxs)(H.Fragment,{children:[Object(H.jsxs)(mt.a,{children:["Welcome, ",d," \xa0"]}),Object(H.jsx)(pt.a,{color:"danger",onClick:u,children:"Sign Out"})]}),!!s&&s]})]})},yt=function(e){var t=e.log,i=e.actions,n=e.scenario,r=e.context,s=Object(a.useState)(!1),o=Object(u.a)(s,2),c=o[0],d=o[1],l=Object(a.useState)(void 0),p=Object(u.a)(l,2),b=p[0],h=p[1],f=function(e){for(var t=[],i=[],n=0,a=Object.entries(e.answerDetails);n<a.length;n++){var r=Object(u.a)(a[n],2),s=r[0],o=r[1];2===(i=String(o.givenAnswer).split(":")).length?t.push({ID:i[0],answer:i[1]}):t.push({ID:Me[s],answer:o.givenAnswer})}return Object(H.jsx)(H.Fragment,{children:t.map((function(e){return Object(H.jsxs)("p",{children:[Object(H.jsxs)("b",{children:[e.ID,":"]})," ",e.answer]})}))})};function m(e){return Object(H.jsx)(H.Fragment,{children:"obtain-vital-sign"===e.type?y(e):O(e)})}function v(e){var t=n.intvMetaData.find((function(t){return e.vital===t.id}));return Object(H.jsx)(H.Fragment,{children:t.label})}function y(e){return Object(H.jsx)(H.Fragment,{children:"intervention-status"===e.vitalType?Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)("b",{children:"Requested intervention status for:"})," ",v(e),", ",Object(H.jsx)("td",{className:"text-muted",children:Object(H.jsxs)("p",{children:[Object(H.jsx)("b",{children:"Found:"}),"\xa0",Object(H.jsx)("i",{children:e.value})]})})]}):Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)("b",{children:"Requested vital:"})," ",e.vital,", ",Object(H.jsx)("td",{className:"text-muted",children:Object(H.jsxs)("p",{children:[Object(H.jsx)("b",{children:"Found:"}),"\xa0",Object(H.jsx)("i",{children:e.value})]})})]})})}function O(e){return Object(H.jsx)(H.Fragment,{children:e.subPhase&&"intervention"!==e.type?Object(H.jsxs)(H.Fragment,{children:[Object(H.jsxs)("b",{children:[e.subPhase,":"]})," ",e.actionDescription,".  ",j(e)]}):Object(H.jsx)(H.Fragment,{children:g(e)})})}function g(e){return Object(H.jsx)(H.Fragment,{children:"intervention"===e.type?Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)("b",{children:"Intervention:"})," ",e.actionDescription,". ",A(e)," "]}):Object(H.jsxs)(H.Fragment,{children:[e.actionDescription,".  ",j(e)]})})}function j(e){return Object(H.jsx)(H.Fragment,{children:e.finding?Object(H.jsx)("td",{className:"text-muted",children:Object(H.jsxs)("p",{children:[Object(H.jsx)("b",{children:"Findings:"})," ",Object(H.jsx)("i",{children:e.finding})]})}):Object(H.jsx)(H.Fragment,{})})}function A(e){return Object(H.jsx)(H.Fragment,{children:e.answerDetails?Object(H.jsx)("td",{className:"text-muted",children:f(e)}):Object(H.jsx)(H.Fragment,{})})}function x(e){var t=e.target.defaultValue,i=e.target.value,n=e.target.id;if(t!==i){var a=b.find((function(e){return e.id===n})),r=Object.assign({},a,{comment:i});C(r)}}var E=function(e){return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)("td",{children:e.numericalID}),Object(H.jsx)("td",{children:Se(e)}),Object(H.jsxs)("td",{className:be(e),children:[Object(H.jsx)("span",{className:"material-icons-outlined",children:(t=e,Q[pe(t,0)])}),m(e)]}),Object(H.jsx)("td",{children:xe(e)}),c&&Object(H.jsx)("td",{children:Object(H.jsx)("textarea",{rows:"2",cols:"50",defaultValue:e.comment,onBlur:x,id:"".concat(e.id)})})]});var t},C=function(e){var t=b.findIndex((function(t){return t.id===e.id}));h([].concat(Object(L.a)(b.slice(0,t)),[e],Object(L.a)(b.slice(t+1))))};function P(){return(P=Object(k.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d("review"===r),h(i);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){!function(){P.apply(this,arguments)}()}),[]),void 0===b?Object(H.jsx)("h3",{children:"processing"}):Object(H.jsxs)(H.Fragment,{children:["review"===r?Object(H.jsx)(H.Fragment,{children:Object(H.jsx)(vt,{title:"Review of: ".concat(t.label),leftNav:Object(H.jsx)(pt.a,{color:"primary",onClick:function(){Ne(t,b)},children:"Save Debriefing Log"}),rightNav:Object(H.jsx)(pt.a,{color:"primary",onClick:function(){d(!c)},children:"Toggle Comments"})})}):Object(H.jsx)(H.Fragment,{children:Object(H.jsx)(vt,{title:"Analysis for: ".concat(t.label)})}),Object(H.jsx)("form",{children:Object(H.jsx)("div",{style:{overflowY:"auto",maxHeight:"700px"},children:Object(H.jsxs)(V.a,{borderless:!0,size:"sm",children:[Object(H.jsx)("thead",{children:Object(H.jsxs)("tr",{children:[Object(H.jsx)("th",{className:"table-header",children:" ID "}),Object(H.jsx)("th",{className:"table-header",children:" Timestamp "}),Object(H.jsx)("th",{className:"table-header",children:" Action Description "}),Object(H.jsx)("th",{className:"table-header",children:" Feedback "}),c&&Object(H.jsx)("th",{className:"table-header",children:" Comments "})]})}),Object(H.jsx)("tbody",{className:"scrolling",children:b.map((function(e,t){return Object(H.jsx)("tr",{children:"header"===e.type?(i=e,Object(H.jsx)(H.Fragment,{children:"assessmentHeader"===i.id||"assessmentSubHeader"===i.id?Object(H.jsx)("td",{colSpan:"4",className:be(i),children:Object(H.jsx)("b",{children:i.label})}):Object(H.jsx)("td",{colSpan:"10",className:"black",children:Object(H.jsx)("div",{children:Object(H.jsxs)("em",{children:["\xa0\xa0\xa0Intervention Group: ",i.probLabel]})})})})):E(e)},t);var i}))})]})})})]})};var Ot=function(){var e=Object(d.m)().logID,t=Object(a.useState)(void 0),i=Object(u.a)(t,2),n=i[0],r=i[1],s=Object(a.useState)(void 0),o=Object(u.a)(s,2),c=o[0],l=o[1],p=Object(a.useState)(void 0),b=Object(u.a)(p,2),h=b[0],f=b[1],m=Object(a.useState)(!1),v=Object(u.a)(m,2),y=v[0],g=v[1],j=Object(a.useState)(!1),A=Object(u.a)(j,2),x=A[0],E=A[1];function C(){window.confirm("Are you sure you want to overwrite the existing analysis?  Any prior comments previously added will be lost.")&&P(h,n)}function P(e,t){return I.apply(this,arguments)}function I(){return(I=Object(k.a)(w.a.mark((function e(t,i){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ut(t,i);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(){return(N=Object(k.a)(w.a.mark((function t(){return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,z(O,"debriefing-feedback-logs",e);case 2:if(t.sent){t.next=7;break}P(h,n),g(!0),t.next=8;break;case 7:C();case 8:return g(!0),t.abrupt("return",!0);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(a.useEffect)((function(){W(O,e).then((function(e){r(e)})).catch((function(e){return alert("error fetching observer log",e)}))}),[]),Object(a.useEffect)((function(){n&&Y(O,n.scenarioID,"V2").then((function(e){console.log("retrieve scenario:",e),f(e)}))}),[n]),Object(a.useEffect)((function(){h&&function(){N.apply(this,arguments)}()}),[h]),Object(a.useEffect)((function(){y&&_(O,e).then((function(e){l(e)})).catch((function(e){return alert("error fetching debriefing log",e)}))}),[y]),Object(a.useEffect)((function(){c&&E(!0)}),[c]),x?Object(H.jsx)(yt,{log:c,actions:c.events,scenario:h,context:"initial-analysis"}):Object(H.jsx)("h3",{children:"Loading"})},gt=function(){var e=Object(d.m)().logID,t=Object(a.useState)(null),i=Object(u.a)(t,2),n=i[0],r=i[1],s=Object(a.useState)(null),o=Object(u.a)(s,2),c=o[0],l=o[1],p=Object(a.useState)(!1),b=Object(u.a)(p,2),h=b[0],f=b[1];return Object(a.useEffect)((function(){W(O,e).then((function(e){r(e)}))}),[e]),Object(a.useEffect)((function(){n&&Y(O,n.scenarioID).then((function(e){l(e),console.log("scenario",e)}))}),[n]),Object(a.useEffect)((function(){c&&f(!0)}),[c]),h?Object(H.jsx)(Ot,{log:e}):Object(H.jsx)("h3",{children:"Loading"})};var wt=function(){var e=Object(d.m)().logID,t=Object(a.useState)(void 0),i=Object(u.a)(t,2),n=i[0],r=i[1],s=Object(a.useState)(void 0),o=Object(u.a)(s,2),c=o[0],l=o[1],p=Object(a.useState)(void 0),b=Object(u.a)(p,2),h=b[0],f=b[1],m=Object(a.useState)(!1),v=Object(u.a)(m,2),y=v[0],g=v[1],j=Object(a.useState)(!1),A=Object(u.a)(j,2),x=A[0],E=A[1];function C(){return(C=Object(k.a)(w.a.mark((function t(){return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,z(O,"debriefing-feedback-logs",e);case 2:if(t.sent){t.next=4;break}ut(h,n);case 4:return g(!0),t.abrupt("return",!0);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(a.useEffect)((function(){W(O,e).then((function(e){r(e)})).catch((function(e){return alert("error fetching observer log",e)}))}),[e]),Object(a.useEffect)((function(){n&&Y(O,n.scenarioID,"V2").then((function(e){console.log("scenario:",e),f(e)}))}),[n]),Object(a.useEffect)((function(){h&&function(){C.apply(this,arguments)}()}),[h]),Object(a.useEffect)((function(){y&&_(O,e).then((function(e){l(e)})).catch((function(e){return alert("error fetching debriefing log",e)}))}),[y]),Object(a.useEffect)((function(){c&&E(!0)}),[c]),x?Object(H.jsx)(yt,{log:c,actions:c.events,scenario:h,context:"review"}):Object(H.jsx)("h3",{children:"Loading"})},kt=function(e){return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)(vt,{title:"MedDBriefer Authentication"}),e.children]})},jt=function(e){return Object(H.jsx)(l.AuthProvider,{children:Object(H.jsx)(c.HashRouter,{children:Object(H.jsxs)(d.g,{children:[Object(H.jsx)(l.PrivateRoute,{exact:!0,path:"/logs/:logID",authFlowLayout:kt,component:gt}),Object(H.jsx)(l.PrivateRoute,{exact:!0,path:"/debriefing-feedback-logs/:logID",authFlowLayout:kt,component:wt}),Object(H.jsx)(l.PrivateRoute,{exact:!0,match:"/",authFlowLayout:kt,component:U})]})})})},At=function(e){e&&e instanceof Function&&i.e(3).then(i.bind(null,72)).then((function(t){var i=t.getCLS,n=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;i(e),n(e),a(e),r(e),s(e)}))};o.a.render(Object(H.jsx)(r.a.StrictMode,{children:Object(H.jsx)(jt,{})}),document.getElementById("root")),At()}},[[65,1,2]]]);
//# sourceMappingURL=main.06fa7a19.chunk.js.map
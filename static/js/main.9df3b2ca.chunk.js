/*! For license information please see main.9df3b2ca.chunk.js.LICENSE.txt */
(this["webpackJsonp@meddbriefer/debriefer"]=this["webpackJsonp@meddbriefer/debriefer"]||[]).push([[0],{49:function(e,t,n){},57:function(e,t,n){},61:function(e,t,n){"use strict";n.r(t);var r,i=n(2),o=n.n(i),s=n(43),a=n.n(s),c=(n(49),n(25)),d=n(10),u=n(26),l=(n(56),n(57),n(8)),h=n(31),b=(n(40),n(42),function(e,t){var n=function(e){var t=h.default.apps.filter((function(t){return t.options.appId===e}));return 1===t.length?t[0]:null}(e.appId);return n||h.default.initializeApp(e,t)});"pam"===Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_APP_ENV?(console.log("using pjordan config"),r=b({apiKey:"AIzaSyB9eVT-fu4TOjxHoPAXqsnz9tCcbTJkTOw",authDomain:"pamdev-ea800.firebaseapp.com",projectId:"pamdev-ea800",storageBucket:"pamdev-ea800.appspot.com",messagingSenderId:"366450927885",appId:"1:366450927885:web:caa5f022ef1de182a0e844",measurementId:"G-JC5XZEPYT1"},"pam")):"scott"===Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_APP_ENV?(console.log("using scott config"),r=b({apiKey:"AIzaSyBEhbIdVW2F2vvvfvpNb2SsCDP9Yoc__z8",authDomain:"scottdev-f6528.firebaseapp.com",projectId:"scottdev-f6528",storageBucket:"scottdev-f6528.appspot.com",messagingSenderId:"447730403122",appId:"1:447730403122:web:1727020dbac4ad4cf6f92b"})):(console.log("using production config"),r=b({apiKey:"AIzaSyBOgWAbXUGckpad2sk0IUo00hZsV4WxG0E",authDomain:"meddbriefer-68cd4.firebaseapp.com",projectId:"meddbriefer-68cd4",storageBucket:"meddbriefer-68cd4.appspot.com",messagingSenderId:"1087114796018",appId:"1:1087114796018:web:679fbab38dbf78af0ce96b",measurementId:"G-Q7QZKC9KHW"},"production"));var f,p,m=r,O=(m.auth(),m.firestore()),v=n(6),g=n.n(v),j=n(11),y=n(24),w=(n(34),"assessment"),P="assessment-option",D="assessment-with-options",x="decision",S="decision-option",E="intervention",I="phase",k="required-action",N="sub-phase",F=Object.freeze({PHASE:I,SUB_PHASE:N,ASSESS:w,AWO:D,ASSESS_OPTION:P,ASSESSO:P,CL_HEADING:"checklist-heading",CL_PROMPT:"checklist-prompt",DECISION:x,DECISION_OPTION:S,DIST_PROMPT:"distinguishing-prompt",NESTED_CHECKLIST:"nested-checklist",REQUIRED:k,REQURED:k,INTERV:E,PROMPT_SET:"prompt-set",PROMPT:"prompt",ANSWER:"answer"}),A=Object.freeze({ONE:"one",OOM:"one-or-more",NONE:"none"}),C=(Object.freeze({ONE:"One",OOM:"One or more",NONE:"None"}),Object.freeze({PHASE:"",SUB_PHASE:"",ANSWER:"answer-",ASSESS:"assess-",AWO:"assessment-with-options-",ASSESS_OPTION:"assess-option-",CL_PROMPT:"cl-prompt-",DECISION:"decision-",DECISION_OPTION:"decision-option-",INTERV:"intv-",PROMPT_SET:"prompt-set-",PROMPT:"prompt-",REQUIRED:"required-action-"}),Object.freeze({AW:"airway",BR:"breathing",BL:"bleeding",SH:"shock"}),Object.freeze({AW:"Airway",BR:"Breathing",BL:"Bleeding",SH:"Shock"}),[w,D,x,k]),T=[P,S],B=[w,D,x,k,E,I,N],R=(Object.freeze({NONE:"",MIN:"mimimal",OPT:"optional",CONTRA:"contraindicated"}),n(9)),M=(n(16),n(37),n(38),n(19)),L=(F.DIST_PROMPT,A.ONE,F.DIST_PROMPT,A.OOM,F.PROMPT,A.ONE,F.PROMPT,A.ONE,F.PROMPT,F.PROMPT,A.ONE,F.PROMPT,A.ONE,F.PROMPT,A.ONE,F.PROMPT,A.ONE,F.PROMPT,A.ONE,F.PROMPT,A.ONE,F.PROMPT,A.ONE,F.PROMPT,A.ONE,F.PROMPT,A.ONE,F.PROMPT,A.ONE,F.PROMPT,A.ONE,F.PROMPT,A.ONE,F.PROMPT,A.ONE,F.PROMPT,A.ONE,F.PROMPT,A.ONE,F.PROMPT,A.ONE,F.PROMPT,A.ONE,F.PROMPT,A.ONE,F.PROMPT,A.ONE,F.PROMPT,A.ONE,F.PROMPT,A.ONE,F.PROMPT,A.ONE,f={depth:3,type:"intervention",id:"menu-item-nasotracheal-intubation",interventionID:"intv-nasotracheal-intubation"},Object(M.a)(f,"interventionID","intv-nasotracheal-intubation"),Object(M.a)(f,"interventionID","intv-nasotracheal-intubation"),Object(M.a)(f,"intvCategoryID","intv-cat-airway"),p={depth:4,type:"intervention",id:"menu-item-rapid-sequence-intubation",interventionID:"intv-rapid-sequence-intubation"},Object(M.a)(p,"interventionID","intv-rapid-sequence-intubation"),Object(M.a)(p,"interventionID","intv-rapid-sequence-intubation"),Object(M.a)(p,"intvCategoryID","intv-cat-airway"),function(e,t){return e.collection("published-scenarios").doc(t).get().then((function(e){return e.data()}))}),_=function(){var e=Object(j.a)(g.a.mark((function e(t,n,r){var i;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.collection(n).where("id","==","".concat(r)).get();case 2:return i=e.sent,e.abrupt("return",i.empty);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),q=function(e,t){return e.collection("logs").doc(t).get().then((function(e){var t=e.data();return t.id=e.id,t}))},W=function(e,t){return e.collection("debriefing-feedback-logs").doc(t).get().then((function(e){var t=e.data();return t.id=e.id,t}))},H=n(62),U=n(1),V=function(){var e=Object(i.useState)([]),t=Object(l.a)(e,2),n=t[0],r=t[1],o=Object(i.useState)(!1),s=Object(l.a)(o,2),a=s[0],d=s[1];return Object(i.useEffect)((function(){var e;(e=O,e.collection("logs").get().then((function(e){return e.docs.map((function(e){var t=e.data();return{id:e.id,label:t.label,scenario:t.scenarioName,userName:t.userName,timestamp:t.timestamp}}))}))).then((function(e){r(e),d(!0)})).catch((function(e){return console.log("error fetching logs",e)}))}),[]),a?Object(U.jsxs)(H.a,{striped:!0,borderless:!0,size:"sm",hover:!0,children:[Object(U.jsx)("thead",{children:Object(U.jsxs)("tr",{children:[Object(U.jsx)("th",{children:"Label"}),Object(U.jsx)("th",{children:"Scenario"}),Object(U.jsx)("th",{children:"Username"}),Object(U.jsx)("th",{children:"Timestamp"})]})}),Object(U.jsx)("tbody",{children:n.map((function(e){return Object(U.jsxs)("tr",{children:[Object(U.jsx)("td",{children:e.label}),Object(U.jsx)("td",{children:e.scenario}),Object(U.jsx)("td",{children:e.userName}),Object(U.jsx)("td",{children:e.timestamp}),Object(U.jsxs)("td",{children:[Object(U.jsx)(c.Link,{to:"/logs/".concat(e.id),children:"Analyze"}),"\xa0\xa0\xa0\xa0",Object(U.jsx)(c.Link,{to:"/debriefing-feedback-logs/".concat(e.id),children:"Review"})]})]},e.id)}))})]}):Object(U.jsx)("h4",{children:"fetching log data"})},z=n(15),G={Good:"text-success",Caution:"text-warning",Problem:"text-danger","Not implemented":"text-muted"},Y={Good:"sentiment_satisfied",Caution:"report_problem",Problem:"highlight_off","Not implemented":"sentiment_neutral"},K={contraindicated:["Problem","You should not have done this action because it is contraindicated in this case +bos ?contraindicatedWhy +eos"],missingMinimal:["Problem","You did not do this action, which is recommended by protocol ?protocol +bos @why +eos"],missingOptional:["Caution","You did not do this action +bos but it was optional in this case according to protocol ?protocol @bos @why +eos"],missingRequired:["Problem","You did not do this action, which is recommended by protocol ?protocol +bos @why +eos"],missingRequiredAssessment:["Problem","You did not do this action. +bos ?assessmentFB +eos"],notNecessary:["Caution","You should not have done this action because it was unnecessary +bos @why +eos"],assessment:["Good",""],"assessment-option":["Good",""],"decision-option":["Good",""],"required-action":["Good",""],standard:["Good","?intvStatusFB +eos "],"misOrdered-assessment":["Problem","Doing this action was correct but it was done out of the recommended order +bos @orderingFB +eos"],"misOrdered-assessment-option":["Problem","Doing this action was correct but it was done out of the recommended order +bos @orderingFB +eos"],"misOrdered-decision-option":["Problem","Doing this action was correct but it was done out of the recommeded order +bos @orderingFB"],"misOrdered-required-action":["Problem","Doing this action was correct but it was done out of the recommeded order +bos @orderingFB"],"misOrdered-standard":["Problem","Doing this action was correct but it was done out of the recommeded order +bos @orderingFB"],"misOrdered-phase-assessment":["Problem","Doing this action was correct but it was done out of the recommended order +bos @orderingFB +eos"],"misOrdered-phase-assessment-option":["Good","Doing this action was correct but it was done out of the recommended order +bos @orderingFB +eos"],"misOrdered-phase-decision-option":["Problem","Doing this action was correct but it was done out of the recommeded order +bos @orderingFB"],"misOrdered-phase-required-action":["Problem","Doing this action was correct but it was done out of the recommeded order +bos @orderingFB"],"misOrdered-phase-standard":["Problem","Doing this action was correct but it was done out of the recommeded order +bos @orderingFB"],intvCheckWNoIntvFound:["Caution","You didn't do this intervention so it doesn't make sense to check the status of it at this point."],unexpectedPatientIntvCheck:["Caution","This status check is not likely to reveal any useful information."],patientIntvCheck:["Good",""],patientVitalCheck:["Good",""],"assessment-option-incorrect":["Problem","Doing this action was correct but there is a problem with how you planned to do it +bos @incorrectAnswerFB +eos "],"decision-option-incorrect":["Problem","Doing this action was correct but there is a problem with how you planned to do it +bos @incorrectAnswerFB +eos "],"incorrect-answers":["Problem","Doing this action is correct but there is a problem with how you planned to do it +bos @incorrectAnswersFB +bos ?intvStatusFB +eos"],"minimal-incorrect-answers":["Problem","Doing this action was correct and would solve the problem but you did not follow protocol @protocol +bos @minimalWhy +bos also there is a problem with how you planned to do this intervention +bos @incorrectAnswersFB +bos ?intvStatusFB +eos"],minimal:["Caution","Doing this action is correct and solves the problem but you did not follow protocol @protocol +bos @minimalWhy +bos ?intvStatusFB +eos "],"misOrdered-assessment-option-incorrect":["Problem","Doing this action was correct but it was done out of the recommended order +bos @orderingFB +bos Also there is a problem with how you planned to do it +bos @incorrectAnswerFB +eos "],"misOrdered-decision-option-incorrect":["Problem","Doing this action was correct but it was done out of the recommended order +bos @orderingFB +bos Also there is a problem with how you planned to do it +bos @incorrectAnswerFB +eos "],"misOrdered-incorrect-answers":["Problem","Doing this action is correct but it was done out of the recommended order +bos @orderingFB +bos also there is a problem with how you planned to do it +bos @incorrectAnswersFB +bos ?intvStatusFB +eos"],"misOrdered-minimal-incorrect-answers":["Problem","Doing this action is correct but it was done out of the recommended order +bos @orderingFB +bos And while this would solve the problem, you did not follow protocol @protocol +bos @minimalWhy +bos also there is a problem with how you planned to do it +bos @incorrectAnswersFB +bos ?intvStatusFB +eos"],"misOrdered-minimal":["Problem","Doing this action is correct but it was done out of the recommended order +bos @orderingFB +bos And while this would solve the problem, you did not follow protocol @protocol +bos @minimalWhy +bos ?intvStatusFB +eos"],"misOrdered-phase-assessment-option-incorrect":["Problem","Doing this action was correct but it was done out of the recommended order +bos @orderingFB +bos Also there is a problem with how you planned to do it +bos @incorrectAnswerFB +eos "],"misOrdered-phase-decision-option-incorrect":["Problem","Doing this action was correct but it was done out of the recommended order +bos @orderingFB +bos Also there is a problem with how you planned to do it +bos @incorrectAnswerFB +eos "],"misOrdered-phase-incorrect-answers":["Problem","Doing this action is correct but it was done out of the recommended order +bos @orderingFB +bos also there is a problem with how you planned to do it +bos @incorrectAnswersFB +bos ?intvStatusFB +eos"],"misOrdered-phase-minimal-incorrect-answers":["Problem","Doing this action is correct but it was done out of the recommended order +bos @orderingFB +bos And while this would solve the problem, you did not follow protocol @protocol +bos @minimalWhy +bos also there is a problem with how you planned to do it +bos @incorrectAnswersFB +bos ?intvStatusFB +eos"],"misOrdered-phase-minimal":["Problem","Doing this action is correct but it was done out of the recommended order +bos @orderingFB +bos And while this would solve the problem, you did not follow protocol @protocol +bos @minimalWhy +bos ?intvStatusFB +eos"],green:["Good",""],red:["Problem",""],yellow:["Caution",""],default:["Not implemented","This action was not expected.  There could be an issue with how this scenario is represented within the system."]},Q={absent:["missingMinimal","missingOptional","missingRequired","missingRequiredAssessment"],errors:["misOrdered-assessment","misOrdered-assessment-option","misOrdered-decision-option","misOrdered-required-action","misOrdered-standard","contraindicated","intvCheckWNoIntvFound","unexpectedPatientIntvCheck","assessment-option-incorrect","decision-option-incorrect","incorrect-answers","minimal-incorrect-answers","misOrdered-assessment-option-incorrect","misOrdered-decision-option-incorrect","misOrdered-incorrect-answers","misOrdered-minimal-incorrect-answers","misOrdered-minimal","notNecessary","default","misOrdered-phase-assessment-option-incorrect","misOrdered-phase-decision-option-incorrect","misOrdered-phase-incorrect-answers","misOrdered-phase-minimal-incorrect-answers"],good:["assessment","assessment-option","decision-option","required-action","standard","patientIntvCheck","patientVitalCheck","minimal","misOrdered-phase-minimal","misOrdered-phase-assessment","misOrdered-phase-assessment-option","misOrdered-phase-decision-option","misOrdered-phase-required-action","misOrdered-phase-standard"]},J=[{scenarioName:"M2CA",exceptions:[["required-action-obtain-OPQRST","This cannot be assessed when GCS < 15"],["assess-opqrst-info","This cannot be assessed when GCS < 15"]]}],X={"scene-size-up":{id:"T1",before:["primary-survey"],beforeOp:"",after:[],afterOp:"",type:"policy"},"primary-survey":{id:"T2",before:["secondary-assessment"],beforeOp:"",after:[],afterOp:"",type:"policy"},"Call for air ambulance":{id:"T3",before:["secondary-assessment"],beforeOp:"",after:[],afterOp:"",type:"policy"},"required-action-obtains-vitals":{id:"T4",before:["secondary-assessment"],beforeOp:"",after:[],afterOp:"",type:"policy"},"secondary-assessment":{id:"T5-6",before:["intv-transfer","ongoing-mgmt-plan"],beforeOp:"",after:[],afterOp:"",type:"policy"},"transport-decision":{id:"T7",before:["secondary-assessment"],beforeOp:"",after:["airway","breathing","circulation"],afterOp:"",type:"policy"},"trauma-expose":{id:"T8",before:["chest","secondary-assessment"],beforeOp:"or",after:[],afterOp:"",type:"policy"},"general-impression":{id:"T9",before:["airway","breathing","circulation"],beforeOp:"and",after:[],afterOp:"",type:"policy"},"intv-spinal-immobilization-technique-manual-c-spine":{id:"T10",before:["airway","breathing","circulation"],beforeOp:"and",after:[],afterOp:"",type:"policy"},"intv-airway-patency-technique-suction-airway":{id:"T14",before:["intv-oropharyngeal-airway","intv-nasopharyngeal-airway"],beforeOp:"or",after:[],afterOp:"",type:"policy"},"intv-oropharyngeal-airway":{id:"T15a",before:["intv-nasotracheal-intubation","intv-orotracheal-intubation","intv-sedation-assisted-intubation","intv-rapid-sequence-intubation"],beforeOp:"or",after:[],afterOp:"",type:"policy"},"intv-nasopharyngeal-airway":{id:"T15b",before:["intv-nasotracheal-intubation","intv-orotracheal-intubation","intv-sedation-assisted-intubation","intv-rapid-sequence-intubation"],beforeOp:"or",after:[],afterOp:"",type:"policy"}},Z={"assess-major-bleeding":{id:"c1",before:["airway","breathing"],beforeOp:"and",after:[],afterOp:"",type:"policy"}},$={M2CA:["c1"],B4CA:[],B7CA:[],SC8CP:[]},ee={"intv-nasopharyngeal-airway":{intvStatusNeeded:!0,vitalsNeeded:[]},"intv-oropharyngeal-airway":{intvStatusNeeded:!0,vitalsNeeded:[]},"intv-orotracheal-intubation":{intvStatusNeeded:!0,vitalsNeeded:[]},"intv-ventilation-technique-bag-valve-mask":{intvStatusNeeded:!1,vitalsNeeded:["R","Spo2","BP","Skin"]},"intv-sedation-assisted-intubation":{intvStatusNeeded:!1,vitalsNeeded:["R","Spo2","BP","Skin"]},"intv-control-severe-bleeding-technique-direct-pressure":{intvStatusNeeded:!0,vitalsNeeded:[]},"intv-control-severe-bleeding-technique-tourniquet":{intvStatusNeeded:!0,vitalsNeeded:[]},"intv-control-severe-bleeding-technique-2nd-tourniquet":{intvStatusNeeded:!0,vitalsNeeded:[]}};var te,ne,re,ie,oe,se,ae,ce=function(e,t){t.includes(e)||t.push(e)},de=function(e){var t=[],n=[];e.forEach((function(e){ce(e,t)}));for(var r=0,i=Object.entries(Q);r<i.length;r++){var o=Object(l.a)(i[r],2),s=o[0];0!==o[1].filter((function(e){return t.includes(e)})).length&&ce(s,n)}return 1===n.length?n[0]:"errors"},ue=function(e){for(var t=[],n=0,r=Object.entries(K);n<r.length;n++){var i=Object(l.a)(r[n],2),o=i[0];i[1][0]===e&&t.push(o)}return t},le=function(e,t){var n="";if("header"===e.type?(n=K[e.displayColor])||(n=K[e.status]):n=K[e.status]?K[e.status]:K.default,n)return n[t]},he=function(e){return G[le(e,0)]},be=function(e){if(e){var t,n=e.split(" "),r=n.length;n.forEach((function(e,t){var i=e.trim();"."===i[e.length-1]&&t<r-1&&(i+="\xa0\xa0"),n[t]=i}));var i,o=Object(z.a)(n);try{for(o.s();!(i=o.n()).done;){var s=i.value;t=t?t+" "+s:s}}catch(a){o.e(a)}finally{o.f()}return t}return""},fe=function(e){e.intvStatus&&e.intvStatus.length>0&&(e.intvStatusFB=function(e){var t,n,r=[],i=[],o=Object(z.a)(e.intvStatus);try{for(o.s();!(n=o.n()).done;){var s=n.value;s.foundCk?r.push(s.label):i.push(s.label)}}catch(a){o.e(a)}finally{o.f()}return i.length>0&&(t="Remember to check the effect of this action by asking for: "+i+".",r.length>0&&(t=t+" That is in addition to what you did ask for: "+r+".")),t}(e));var t,n=be(le(e,1)).trim().split(" ");n.forEach((function(t,r){var i=t.charAt(0),o=t.substring(1);switch(n[r]=n[r].trim(),i){case"@":e[o]?n[r]=be(e[o]):n[r]="[value for "+o+" is missing]";break;case"?":e[o]?n[r]=be(e[o]):(n[r]="","+bos"===n[r-1]&&(n[r-1]=""),"+eos"===n[r+1]&&(n[r+1]=""))}})),n.forEach((function(e,t){var r="";switch(e.charAt(0)){case"+":switch(e.substring(1)){case"eos":"."===(r=n[t-1].trim())[r.length-1]&&(r=r.slice(0,-1)),n[t-1]=r+".\xa0",n[t]="";break;case"bos":"."===(r=n[t-1].trim())[r.length-1]&&(r=r.slice(0,-1)),n[t-1]=r+".\xa0",n[t]="";var i=n[t+1].trim();n[t+1]=i.charAt(0).toUpperCase()+i.slice(1)}}}));var r,i=Object(z.a)(n);try{for(i.s();!(r=i.n()).done;){var o=r.value;t?""!==o&&(t=t+"\xa0"+o):""!==o&&(t=o)}}catch(s){i.e(s)}finally{i.f()}return t},pe={},me=function(e,t,n){return e.filter((function(e){return e[t]===n}))},Oe=function(e,t,n){return me(me(e,"timestamp",n),"id",t)},ve=n(34),ge=function(e,t,n,r,i){console.log("In savingDebriefingLog");var o=O.collection("debriefing-feedback-logs").doc(e.id),s={userName:e.userName,ObserverFileCreater:e.userName,label:e.label,ObserverFileName:e.label,commenter:"",scenarioID:e.scenarioID,scenarioName:e.scenarioName,schemaVersion:e.schemaVersion,timestamp:Date().toLocaleString(),hierAssessResults:n,hierProblemResults:r,constraintsViolated:i},a=[],c={},d=!1;t.forEach((function(e,t){for(var n=0,r=Object.entries(e);n<r.length;n++){var i=Object(l.a)(r[n],2),o=i[0],s=i[1];void 0===s&&(console.log("filtered out from events; index: ",t," key: ",o," value: ",s),d=!0)}})),d?(t.forEach((function(e,t){c=ve.pickBy(e,(function(e,t){return!(void 0===e)})),a.push(c)})),s.events=a):s.events=t,o.set(s)},je=function(e){return"criticalActionHeader"===e.status?"":-1===e.timestamp?"\xa0\xa0":(t=e.timestamp,new Date(1e3*t).toISOString().substr(14,5));var t},ye=function(e,t){return e.reduce((function(e,n){return Object(y.a)(Object(y.a)({},e),{},Object(M.a)({},n[t],(e[n[t]]||[]).concat(n)))}),{})},we=function(e,t){return e.checkListMetaData.filter((function(e){return e.type===t}))},Pe=[],De=[],xe=function(e,t,n,r){var i=Se(e,t);if(i){var o,s=[i];if(r)2===n&&(o=t.filter((function(t){return t.expertPhase===e&&"header"!==t.type}))),1===n&&(o=t.filter((function(e){return e.phaseID===i.labelID&&"header"===e.type&&"assessmentSubHeader"===e.id}))),s=s.concat(o);return s}return!1},Se=function(e,t){var n,r="unk",i=[],o=t.filter((function(t){return"header"===t.type&&t.labelID===e})),s=o[0],a=Object(z.a)(o);try{for(a.s();!(n=a.n()).done;){var c=n.value;i.includes(c.status)||i.push(c.status)}}catch(d){a.e(d)}finally{a.f()}return i.length>0&&(r=1===i.length?i[0]:"errors"),s&&(s.status=r),s},Ee=function(e,t,n,r,i){var o={},s={};e.forEach((function(e){"intervention"!==e.type&&"answer"!==e.type?Pe.push(e):De.push(e)})),t.forEach((function(e){var t=1,n=De.filter((function(t){return t.probLabel===e.probLabel&&"header"!==t.type})),r=n.map((function(e){return e.status})),i={id:"interventionHeader",status:de(r),phaseOrderStatus:"good",labelID:e.probLabel,type:"header",numericalID:t++/2e3,displayColor:"green"};n&&(s[e.probLabel]=[i].concat(n))}));var a,c=n,d=r.filter((function(e){return!c.includes(e)}));return c.forEach((function(e){var t=xe(e,Pe,2,!0);t&&(o[e]=t)})),d.forEach((function(e){!function(e,t){if("Unknown"!==e){var n,r,i=[],o=t.filter((function(t){return"header"===t.type&&t.labelID===e}))[0],s=t.filter((function(e){return e.phaseID===o.labelID&&"header"===e.type&&"assessmentSubHeader"===e.id})),a=Object(z.a)(s);try{for(a.s();!(r=a.n()).done;){var c=r.value;ce(c.status,i)}}catch(d){a.e(d)}finally{a.f()}n=1===i.length?i[0]:"errors",o.status=n}}(e,Pe);var t=xe(e,Pe,1,!0);t&&(o[e]=t)})),i.forEach((function(t){(a=e.filter((function(e){return e.labelID===t.arg1.id}))[0]).phaseOrderStatus="misOrdered",a.arg2?a.arg2=a.arg2.concat([t.arg2.id]):a.arg2=[t.arg2.id]})),[o,s]},Ie=ue("Problem"),ke=ue("Caution"),Ne={},Fe={},Ae=[],Ce={};function Te(e){ie=e,function(e){var t=$[e];pe=X;for(var n=0,r=Object.entries(Z);n<r.length;n++){var i=Object(l.a)(r[n],2),o=i[0],s=i[1];t.includes(s.id)&&(pe[o]=s)}}(e.name),oe=Be(e),se=Re(e),ne=we(e,F.PHASE).map((function(e){return e.id})).concat(["Unknown"]),te=we(e,F.SUB_PHASE).map((function(e){return e.id})),ae=function(e){var t=we(e,F.PHASE),n=we(e,F.SUB_PHASE),r=e.checkListMetaData.filter((function(e){return C.includes(e.type)})),i=e.checkListMetaData.filter((function(e){return T.includes(e.type)})),o=ye(i,"parentID");r.forEach((function(e){e.id in o&&(e.options=o[e.id])}));var s=ye(r.filter((function(e){return void 0===e.subPhase})),"phase"),a=ye(r.filter((function(e){return!!e.subPhase})),"subPhase");n.forEach((function(e){e.items=a[e.id]}));var c=ye(n,"phase");return t.forEach((function(e){e.id in s?e.items=s[e.id]:e.subPhases=c[e.id]})),t}(e),re=Me(ae),ae.forEach((function(e){void 0===e.subPhases?Ce[e.id]=e.label:e.subPhases.forEach((function(t){Ce[t.id]=e.label}))})),Ce.Unknown="Unknown"}var Be=function(e){var t=ye(e.checkListMetaData.filter((function(e){return B.includes(e.type)})),"id"),n=ye(e.intvMetaData.filter((function(e){return B.includes(e.type)})),"id");return Object.assign(t,n)},Re=function(e){var t=ye(e.checkListMetaData.filter((function(e){return B.includes(e.type)})),"label"),n=ye(e.intvMetaData.filter((function(e){return B.includes(e.type)})),"label");return Object.assign(t,n)},Me=function(e){var t=[];return e.forEach((function(e){if(e.subPhases){var n=e.subPhases.map((function(e){return e.id}));t=t.concat(n)}else t=t.concat(e.id)})),t},Le=function(e,t,n,r){for(var i=void 0,o=void 0,s=0;s<e.length&&(n.id!==e[s]||(i=t[s],"start"!==r));s++);return i&&(o=-1===i.numericalID?"start"===r?i.numericalIDStart:i.numericalIDEnd:i.numericalID),o},_e={id:"Unknown",label:"Unknown"},qe=function(e){if("Unknown"===e)return _e;var t=oe[e];return t||(t=se[e]),t?t[0]:void 0},We=function(e,t,n,r,i,o){var s,a=function(e,t,n){for(var r=0;r<n.length;r++){var i=t[r],o=n[r];if(i.length>0&&!Ke(o)){var s,a=Object(z.a)(i);try{for(a.s();!(s=a.n()).done;){var c=s.value;if(c.numericalID===e)return c}}catch(d){a.e(d)}finally{a.f()}}}}(e,i,o);if(a){if(a.arg2?a.arg2=a.arg2.concat([t.id]):a.arg2=[t.id],""!==a.orderingFB?a.orderingFB=a.orderingFB+".\xa0\xa0"+n:a.orderingFB=n,!a.status.includes("misOrdered")){var c="misOrdered-phase-";"item"===r&&(c="misOrdered-"),s=c+a.status,a.status=s}}else console.log("no object found for numericalID = ",e)},He=function(e,t,n,r){"phase"===n&&Ae.push({constraintID:r,arg1:e,op:"before",arg2:t})},Ue=function(e,t,n,r,i,o,s,a,c){var d=Le(o,s,e,"end"),u=Le(o,s,e,"start"),l=e.label,h="";if(t.length>0){var b,f=Object(z.a)(t);try{for(f.s();!(b=f.n()).done;){var p=b.value,m=qe(p);if(m){var O=m.label,v=Le(o,s,m,"start"),g=Le(o,s,m,"end"),j="item";switch(r){case"before":if(d&&v)if(d<v){if("or"===n)return}else u===d?h="You should have done "+l:(h="You should have completed "+l,j="phase"),We(u,m,h=v===g?h+" before you did "+O:h+" before starting "+O,j,a,c),He(e,m,j,i);break;case"after":if(u&&g)if(u>g){if("or"===n)return}else u===d?h="You should have done "+O:(h="You should have completed "+O,j="phase"),We(v,e,h=v===g?h+" before you did "+l:h+" before starting "+l,j,a,c),He(m,e,j,i)}}}}catch(y){f.e(y)}finally{f.f()}}},Ve=function(e,t){var n=function(e,t){for(var n=[],r=[],i=[],o=0;o<t.length;o++){var s=e[o],a=t[o],c=s[0].numericalID,d=s[s.length-1].numericalID;if((ne.includes(a)||te.includes(a))&&(r.push({id:a,numericalID:-1,numericalIDStart:c,numericalIDEnd:d}),n.push(a),i.includes(a)||i.push(a)),s.length>0&&!Ke(a)){var u=s.map((function(e){return e.id}));r=r.concat(s),i=i.concat(u),n=n.concat(u)}}return[n,i,r]}(e,t),r=n[0],i=n[1],o=n[2];return i.forEach((function(n){var i=qe(n);if(i){var s=function(e){var t=e.id,n=e.label,r=pe[t];return r||(r=pe[n]),r}(i);s&&function(e,t,n,r,i,o){var s=t.before,a=t.beforeOp;Ue(e,s,a,"before",t.id,i,o,n,r),s=t.after,a=t.afterOp,Ue(e,s,a,"after",t.id,i,o,n,r)}(i,s,e,t,r,o)}})),[e,t]},ze=function(e,t,n,r){var i;i=n.when;var o=e.lastIndexOf(i),s=t[o];s||(s=[]),s.splice(r-1,0,n),t[o]=s},Ge=function(e,t){var n=function(e,t){var n,r,i=Ye(e),o=Object(R.a)(i).reverse(),s=Object(z.a)(o);try{var a=function(){var e=r.value;if(n=t.find((function(t){return t===e.id})))return"break"};for(s.s();!(r=s.n()).done&&"break"!==a(););}catch(c){s.e(c)}finally{s.f()}return n}(e,t);return t.lastIndexOf(n)},Ye=function(e){return ae.find((function(t){return t.id===e})).subPhases},Ke=function(e){var t=ae.find((function(t){return t.id===e}));return!(!t||!t.subPhases)},Qe=function(e,t){var n=t;return"red"===e&&(n="red"),"yellow"===e&&"red"!==n&&(n="yellow"),n},Je=function(e,t,n){var r=void 0;return void 0===(r=n?ie.associations[e]:ie.checkListCorrectness[e])?(console.log("didn't find answers for ",e),!1):Array.isArray(r)?!r.find((function(e){return e===t})):!(r===t)},Xe=function(e,t){var n,r;t?(n=ie.associations[e],r=ie.intvMetaData):(n=ie.checkListCorrectness[e],r=ie.checkListMetaData);var i=!1;return Array.isArray(n)?n.forEach((function(e,t){r.forEach((function(t,n){t.id!==e||(!1===i?i=t.label:i+=", ")}))})):r.forEach((function(e,t){e.id===n&&(i=e.label)})),i},Ze=function(e,t){var n;n=t?ie.intvMetaData:ie.checkListMetaData;var r="";return n.forEach((function(t,n){t.id===e&&(r=t.label)})),r||!1},$e=function(e,t,n,r,i){return e.forEach((function(e){var o=e.actions;o.forEach((function(s,a){if(!t.includes(s.id+"+"+e.probLabel)){t.push(s.id+"+"+e.probLabel);var c={comment:"",numericalID:n,status:"",intvStatus:[],required:!0,when:"",suggestedPhase:"",expertPhase:"",probLabel:"",minimalWhy:"",assessmentsNeeded:"",protocol:"",actionDescription:"",type:"intervention",timestamp:-1};["id","phase","why","optional","minimal"].forEach((function(e){s[e]&&(c[e]=s[e])}));["probLabel","minimalWhy"].forEach((function(t){e[t]&&(c[t]=e[t])})),e.assessments&&(c.assessmentsNeeded=e.assessments),e.protocols&&(c.protocol=e.protocols),s.optional&&(c.required=!s.optional),s["id-label"]&&(c.label=s["id-label"]),s["id-label"]&&(c.actionDescription=s["id-label"]),s.phase&&(c.when=s.phase,c.expertPhase=s.phase,c.suggestedPhase=s.phase),c.required?c.status="missingRequired":c.optional?c.status="missingOptional":c.status="missingRequired","missingOptional"!==c.status&&(!function(e,t,n,r,i){var o=-1;""===n.expertPhase&&(n.expertPhase=ne[ne.length-2]),o=te.includes(n.expertPhase)||!Ye(n.expertPhase)?e.lastIndexOf(n.expertPhase):Ge(n.expertPhase,e),n.when=e[o];var s=r.slice(0,i-1),a=r[i-1],c=Object(R.a)(s).reverse().find((function(e){return e.required})),d=r[i+1],u=r.slice(i+1).find((function(e){return e.required})),l=Object(R.a)(t[o]),h=-1,b=-1,f=-1,p=-1,m=!1;a&&(h=l.findIndex((function(e){return e.id===a.id}))),d&&(b=l.findIndex((function(e){return e.id===d.id}))),c&&(f=l.findIndex((function(e){return e.id===c.id}))),u&&(p=l.findIndex((function(e){return e.id===u.id}))),d&&(b=l.findIndex((function(e){return e.id===d.id}))),-1!==f&&(m=f+2,h>f&&(m=h+2)),m||-1===p||(m=p+1,b<p&&(m=b+1)),m||-1===h||(m=h+2),m||-1===b||(m=b+1),m||(m=l.length+2),ze(e,t,n,m)}(r,i,c,o,a),n++)}}))})),[n,r,i]};function et(e,t){var n=t.events;console.log("in analyzeEvents"),Te(e);var r=function(e){var t,n=[],r=Object(z.a)(e);try{for(r.s();!(t=r.n()).done;){var i=t.value,o={};o.assessments=i.assessments,o.allProblemProtocols=i.protocol,o.probLabel=i.problem,o.lifeThreat=i.lifeThreat;var s=i.solutions[0];o.actions=s.actions,o.contraindications=s.contraindications,o.minimalWhy=s.minimalWhy,o.protocols=s.protocols,n.push(o)}}catch(a){r.e(a)}finally{r.f()}return n}(ie.problems),i=[],o=function(e,t){var n=[],r=[],i=[],o=[],s=[],a={},c="",d="",u=0,l=0,h=!0,b=["assessment","required-action","decision-option","assessment-option"];return e.forEach((function(e,f){var p={comment:"",numericalID:f,status:"",intvStatus:[],contraindicatedWhy:"",minimalWhy:"",why:"",answerCorrect:!0,answerDetails:{},expertPhase:"",workingPhase:"",suggestedPhase:"",protocol:"",probLabel:"",assessments:"",required:!1,actionDescription:"",assessmentFB:"",incorrectAnswersFB:"",orderingFB:"",processingState:"good"};["id","label","finding","phase","subPhase","vitalType","vital","value","type","prompt","promptID","intervention","timestamp"].forEach((function(t){e[t]&&(p[t]=e[t])})),e.label&&(p.actionDescription=e.label),e.type&&(p.status=e.type),e.subPhase?p.workingPhase=e.subPhase:e.phase&&(p.workingPhase=e.phase),p.expertPhase=p.workingPhase,c===p.workingPhase&&d===p.phase||(""!==c&&b.includes(p.type)?(h=!0,o[l]=s,l!==u&&(o[u]=o[u].concat(s)),l++,p.phase!==d&&(d=p.phase,u=l,p.phase!==p.workingPhase&&(o[u]=[],i[u]=d,l++))):""===c&&b.includes(p.type)?(d=p.phase)!==p.workingPhase&&(d=p.phase,i[u]=d,l++):""===c?(d="Unknown",p.workingPhase=d,p.phase=d,p.subPhase=""):h=!1,h?(c=p.workingPhase,s=[],i[l]=c,o[l]=[]):h=!0);var m=p.type;["assessment","required-action","intervention","answer","obtain-vital-sign","decision-option","assessment-option"].includes(m)||(p.processingState="bad");var O=[];if("answer"===m){var v=Xe(e.promptID,!0),g=Ze(e.id,!0);if(v){var j=Je(e.promptID,e.id,!0),y={correctAnswer:v,givenAnswer:g,correct:!j};n.includes(p.intervention)?(O=s.pop(),n.pop(),p.answerCorrect=O.answerCorrect,p.answerDetails=O.answerDetails,p.actionDescription=O.actionDescription+", "+g,j?(p.answerCorrect=!1,""===O.incorrectAnswersFB?p.incorrectAnswersFB="You should have responded: "+v:p.incorrectAnswersFB=O.incorrectAnswersFB+", and "+v):(p.incorrectAnswersFB=O.incorrectAnswersFB,p.answerCorrect=O.answerCorrect)):(j?(p.answerCorrect=!1,p.incorrectAnswersFB="You should have responded: "+v):p.incorrectAnswersFB="",n.push(p.intervention)),p.answerDetails[e.promptID]=y}else p.processingState="bad"}if("intervention"===m&&(O=s.slice(-1)[0])&&"answer"===O.type&&(O.intervention===p.id?(O=s.pop(),n.pop(),n.pop(),p.answerCorrect=O.answerCorrect,p.answerDetails=O.answerDetails,p.incorrectAnswersFB=O.incorrectAnswersFB,p.actionDescription=p.actionDescription+".\xa0\xa0"+O.actionDescription):(O=s.pop(),n.pop(),n.pop())),"good"===p.processingState){if("obtain-vital-sign"===p.type){var w=p.vital,P="";P="intervention-status"===p.vitalType?r.includes(w)?"intv":"noIntv":"vital";var D=a[w];switch(P){case"intv":p.status="patientIntvCheck",D&&D.timestamp<p.timestamp&&(D.foundCk=!0,a[w]=D);break;case"noIntv":p.status="intvCheckWNoIntvFound";break;case"vital":p.status="patientVitalCheck",D&&(D=function(e,t){var n=[];return e.forEach((function(e){e.timestamp<t&&(e.foundCk=!0),n.push(e)})),n}(D,p.timestamp),a[w]=D);break;default:p.status="unexpectedPatientIntvCheck"}}"intervention"===p.type&&t.forEach((function(e,t){var n,r,i=["why","probLabel"];null===(n=e.actions)||void 0===n||n.forEach((function(t,n){if(t.id===p.id){var r,o=p.id;if((r=ee[p.label])||(r=ee[p.id]),r){var s={intervention:o,timestamp:p.timestamp,foundCk:!1};r.intvStatusNeeded&&(a[o]=Object.assign({},s)),r.vitalsNeeded.forEach((function(e){a[e]?a[e].push(Object.assign({},s)):a[e]=[Object.assign({},s)]}))}t.assessments&&(p.assessmentsNeeded=t.assessments),t.phase&&(p.when=t.phase),t.optional||(p.required=!0),e.protocols&&(p.protocol=e.protocols),p.answerCorrect?p.status="standard":p.status="incorrect-answers",t.phase&&(p.suggestedPhase=t.phase),p.probLabel=e.probLabel,i.forEach((function(e){t[e]&&(p[e]=t[e])})),t["id-label"]&&(p.label=t["id-label"])}})),null===(r=e.contraindications)||void 0===r||r.forEach((function(t,n){t.id===p.id&&(p.status="contraindicated",t.why&&(p.contraindicatedWhy=t.why),t["id-label"]&&(p.label=t["id-label"]),t.protocol&&(p.protocol=t.protocol),e.probLabel&&(p.probLabel=e.probLabel))}))})),"decision-option"===p.type&&Je(e.promptID,e.id,!1)&&(p.status="decision-option-incorrect",p.answerCorrect=!1,p.incorrectAnswerFB="You should have responded "+Xe(e.promptID,!1)),"assessment-option"===p.type&&Je(e.promptID,e.id,!1)&&(p.status="assessment-option-incorrect",p.answerCorrect=!1,p.incorrectAnswerFB="You should have responded "+Xe(e.promptID,!1)),"intervention"===p.type?(n.push(p.id+"+"+p.probLabel),r.push(p.id)):n.push(p.id),s.push(p)}})),o[l]=s,l!==u&&(o[u]=o[u].concat(s)),[o,i,n,a]}(n,r),s=o[0],a=o[1],c=o[2],d=o[3],u=Ve(s,a),h=function(e,t){var n;return re.forEach((function(r,i){if(!t.includes(r)){var o=0;(n=0===i?re[0]:re[i-1])!==r&&(o=t.lastIndexOf(n),o+=1),t.splice(o,0,r),e.splice(o,0,[])}})),[e,t]}(s=u[0],a=u[1]);s=h[0],a=h[1];var b=function(e,t,n,r,i){var o,s=function(e){var t=[];return e.forEach((function(e){""!==e.assessments&&(t=t.concat(e.assessments))})),t}(e),a=t.length,c=ie.checkListMetaData.filter((function(e){return[F.ASSESS,F.REQUIRED].includes(e.type)})),d=[],u=Object(z.a)(J);try{for(u.s();!(o=u.n()).done;){var l=o.value;if(l.scenarioName===ie.name){d=l.exceptions;break}}}catch(h){u.e(h)}finally{u.f()}return d.forEach((function(e,t){c=c.filter((function(t){return t.id!==e[0]})),n.includes(e[0])&&i.forEach((function(t,n){t.forEach((function(t,n){t.id===e[0]&&(t.why=e[1],t.status="notNecessary")}))}))})),c.forEach((function(e,t){if(!n.includes(e.id)){n.push(e.id);var o={comment:"",numericalID:a,status:"missingRequiredAssessment",intvStatus:[],expertPhase:"",workingPhase:"",contraindicatedWhy:"",minimalWhy:"",why:"",probLabel:"",protocol:"",actionDescription:"",assessmentFB:"",timestamp:-1};["id","label","finding","phase","subPhase","type","prompt"].forEach((function(t){e[t]&&(o[t]=e[t])})),e.subPhase?o.workingPhase=e.subPhase:e.phase&&(o.workingPhase=e.phase),o.when=o.workingPhase,o.expertPhase=o.workingPhase,o.label&&(o.actionDescription=o.label),s.includes(e.id)&&(o.assessmentFB="Thus you missed finding: "+ie.assessmentFindings[e.id]),"required-action"===o.type&&(o.status="missingRequiredAssessment"),ze(r,i,o,t),a++}})),[n,r,i,a]}(r,n,c,a,s);c=b[0],a=b[1],s=b[2];var f=b[3],p=$e(r,c,f,a,s);f=p[0],a=p[1],s=p[2],i=function(e,t){for(var n,r=0,i=Object.entries(t);r<i.length;r++){var o=Object(l.a)(i[r],2),s=o[0],a=o[1];if(Array.isArray(a)){var c,d=Object(z.a)(a);try{for(d.s();!(c=d.n()).done;){var u=c.value,h={label:s,foundCk:u.foundCk};n=Oe(e,u.intervention,u.timestamp);var b,f=Object(z.a)(n);try{for(f.s();!(b=f.n()).done;){var p=b.value;p.intvStatus.includes(h)||p.intvStatus.push(h)}}catch(m){f.e(m)}finally{f.f()}}}catch(m){d.e(m)}finally{d.f()}}else!function(){var t={label:"intervention status",foundCk:a.foundCk};(n=Oe(e,s,a.timestamp)).forEach((function(e){e.intvStatus.includes(t)||e.intvStatus.push(t)}))}()}return e}(i=function(e,t){for(var n=[],r=1,i=1,o="green",s="green",a=[],c=[],d=[],u={id:"assessmentHeader",status:"",phaseOrderStatus:"good",type:"header",numericalID:1,displayColor:"",why:"",label:"",labelID:"",protocol:""},l={id:"assessmentSubHeader",status:"",phaseOrderStatus:"good",type:"header",numericalID:1,displayColor:"",why:"",label:"",labelID:"",phaseID:"",protocol:""},h="",b=!1,f=0;f<e.length;f++){var p=t[f],m=e[f],O=!0;if(ne.includes(m)&&Ke(m)&&(O=!1),p.length>0&&O){var v=t[f];s="green";var g,j=Object(z.a)(v);try{for(j.s();!(g=j.n()).done;){var y=g.value;"intervention"!==y.type&&a.push(y.status),Ie.includes(y.status)&&(s="red"),ke.includes(y.status)&&"red"!==s&&(s="yellow"),y.numericalID=r++}}catch(T){j.e(T)}finally{j.f()}var w=Object.assign({},l),P=e[f],D=qe(P);w.label=D.label,w.labelID=D.id,w.status=de(a),w.displayColor=s;var x=Ce[P],S=qe(x);if(w.phaseID=S.id,""===h&&(h=S,o=Qe(s,o)),f===e.length-1){var E=Object.assign({},u);x!==h.label&&(E.label=h.label,E.labelID=h.id,E.status=de(c),E.displayColor=o,E.numericalID=i++/1e3,n.push(E),n.push.apply(n,Object(R.a)(d)),d=[]),(E=Object.assign({},w)).label=S.label,E.labelID=S.id,E.id="assessmentHeader",E.numericalID=i++/1e3,n.push(E),x===w.label?(n.push.apply(n,Object(R.a)(d)),n.push.apply(n,Object(R.a)(v))):(w.numericalID=i++/1e3,n.push.apply(n,Object(R.a)(d)),n.push(w),n.push.apply(n,Object(R.a)(v))),b=!0}if(!b)if(x!==h.label){var I,k,N=Object.assign({},u);N.label=h.label,N.labelID=h.id,N.status=de(c),c=[],N.displayColor=o,N.numericalID=i++/1e3,n.push(N),n.push.apply(n,Object(R.a)(d)),(I=c).push.apply(I,Object(R.a)(a)),a=[],x===w.label?d=Object(R.a)(v):(w.numericalID=i++/1e3,(k=d=[w]).push.apply(k,Object(R.a)(v))),h=S,o=Qe(s,"green")}else{var F,A,C;o=Qe(s,o),(F=c).push.apply(F,Object(R.a)(a)),a=[],x===w.label?(A=d).push.apply(A,Object(R.a)(v)):(w.numericalID=i++/1e3,d.push(w),(C=d).push.apply(C,Object(R.a)(v)))}}}return n}(a,s),d);var m=[];i.forEach((function(e,t){m.push(e)}));var O=[],v=[],g=0,j=-1;m.forEach((function(e,t){if("intervention"===e.type&&e.status&&e.status.includes("standard","incorrect-answers","minimal","misOrdered-standard","misOrdered-incorrect-answers","misOrdered-incorrect-answers","minimal","misOrdered-minimal","misOrdered-minimal-incorrect-answers","misOrdered-phase-incorrect-answers","misOrdered-phase-minimal-incorrect-answers","misOrdered-phase-minimal")){v.includes(e.probLabel)?j=v.indexOf(e.probLabel):(v[j=g]=e.probLabel,g++);var n=O[j];n||(n=[]),n.push(e),O[j]=n}}));var y=i.map((function(e){return e.id})),w=r.map((function(e){return e.probLabel}));v.forEach((function(e,t){var n=w.indexOf(e),o=r[n],s=o.actions.filter((function(e){return!e.optional})).map((function(e){return e.id})),a=o.actions.filter((function(e){return e.minimal})).map((function(e){return e.id}));if(a){var c,d=O[t].map((function(e){return e.id})),u=!0,l=!0,h=Object(z.a)(s);try{for(h.s();!(c=h.n()).done;){var b=c.value;if(!d.includes(b)){u=!1;break}}}catch(j){h.e(j)}finally{h.f()}var f,p=Object(z.a)(a);try{for(p.s();!(f=p.n()).done;){var m=f.value;if(!d.includes(m)){l=!1;break}}}catch(j){p.e(j)}finally{p.f()}var v=[];if(!u&&l){a.forEach((function(e,t){var n=y.indexOf(e),r=i[n];switch(r.minimalWhy=o.minimalWhy,r.status){case"incorrect-answers":r.status="minimal-incorrect-answers";break;case"standard":r.status="minimal";break;case"misOrdered-standard":r.status="misOrdered-minimal";break;case"misOrdered-incorrect-answers":r.status="misOrdered-minimal-incorrect-answers";break;case"misOrdered-phase-standard":r.status="misOrdered-phase-minimal";break;case"misOrdered-phase-incorrect-answers":r.status="misOrdered-phase-minimal-incorrect-answers"}v.push(r.numericalID),i[n]=r}));var g={};v.forEach((function(e,t){(g=function(e,t){var n,r={},i={},o=Object(z.a)(t);try{for(o.s();!(n=o.n()).done;){var s=n.value;if("problemHeader"===s.id)r=s;else if(s.numericalID===e){i=r;break}}}catch(j){o.e(j)}finally{o.f()}return i}(e,i))&&"green"===g.displayColor&&(g.displayColor="yellow")}))}}}));var P=Ee(m,r,re,ne,Ae);return Ne=P[0],Fe=P[1],console.log("Phase Assessment Status Results",Ne),console.log("Intervention Status Results",Fe),console.log("Constraint Violation Results",Ae),ge(t,m,Ne,Fe,Ae),m}var tt=n(67),nt=n(63),rt=n(64),it=n(65),ot=n(66),st=function(e){var t=e.title,n=e.leftNav,r=void 0===n?null:n,o=e.rightNav,s=void 0===o?null:o,a=Object(i.useContext)(u.AuthContext),c=a.isAuthenticated,d=a.userName,l=a.signOutUser;return Object(U.jsxs)(nt.a,{color:"dark",dark:!0,children:[Object(U.jsx)(rt.a,{href:"#",children:"MedDBriefer"}),!!r&&Object(U.jsx)(it.a,{children:r}),!!t&&Object(U.jsx)(ot.a,{tag:"h3",children:t}),Object(U.jsxs)(it.a,{children:[c&&Object(U.jsxs)(U.Fragment,{children:[Object(U.jsxs)(ot.a,{children:["Welcome, ",d," \xa0"]}),Object(U.jsx)(tt.a,{color:"danger",onClick:l,children:"Sign Out"})]}),!!s&&s]})]})},at=function(e){var t=e.log,n=e.actions,r=e.scenario,o=e.context,s=Object(i.useState)(!1),a=Object(l.a)(s,2),c=a[0],d=a[1],u=Object(i.useState)(void 0),h=Object(l.a)(u,2),b=h[0],f=h[1];function p(e){return Object(U.jsx)(U.Fragment,{children:"obtain-vital-sign"===e.type?O(e):v(e)})}function m(e){var t=r.intvMetaData.find((function(t){return e.vital===t.id}));return Object(U.jsx)(U.Fragment,{children:t.label})}function O(e){return Object(U.jsx)(U.Fragment,{children:"intervention-status"===e.vitalType?Object(U.jsxs)(U.Fragment,{children:["Requested intervention status for: ",m(e),", ",Object(U.jsxs)("p",{children:["Found: ",Object(U.jsx)("i",{children:e.value})]})]}):Object(U.jsxs)(U.Fragment,{children:["Requested vital: ",e.vital,", ",Object(U.jsxs)("p",{children:["Found: ",Object(U.jsx)("i",{children:e.value})]})]})})}function v(e){return Object(U.jsx)(U.Fragment,{children:e.subPhase&&"intervention"!==e.type?Object(U.jsxs)(U.Fragment,{children:[Object(U.jsxs)("b",{children:[e.subPhase,":"]})," ",e.actionDescription,".  ",w(e)]}):Object(U.jsx)(U.Fragment,{children:y(e)})})}function y(e){return Object(U.jsx)(U.Fragment,{children:"intervention"===e.type?Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)("b",{children:"Intervention:"})," ",e.actionDescription,". ",w(e)," "]}):Object(U.jsxs)(U.Fragment,{children:[e.actionDescription,".  ",w(e)]})})}function w(e){return Object(U.jsx)(U.Fragment,{children:e.finding?Object(U.jsxs)("p",{children:["\xa0\xa0\xa0\xa0\xa0Findings: ",Object(U.jsx)("i",{children:e.finding})]}):Object(U.jsx)(U.Fragment,{})})}function P(e){var t=e.target.defaultValue,n=e.target.value,r=e.target.id;if(t!==n){var i=b.find((function(e){return e.id===r})),o=Object.assign({},i,{comment:n});x(o)}}var D=function(e){return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)("td",{children:e.numericalID}),Object(U.jsx)("td",{children:je(e)}),Object(U.jsxs)("td",{className:he(e),children:[Object(U.jsx)("span",{className:"material-icons-outlined",children:(t=e,Y[le(t,0)])}),p(e)]}),Object(U.jsx)("td",{children:fe(e)}),c&&Object(U.jsx)("td",{children:Object(U.jsx)("textarea",{rows:"2",cols:"50",defaultValue:e.comment,onBlur:P,id:"".concat(e.id)})})]});var t},x=function(e){var t=b.findIndex((function(t){return t.id===e.id}));f([].concat(Object(R.a)(b.slice(0,t)),[e],Object(R.a)(b.slice(t+1))))};function S(){return(S=Object(j.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d("review"===o),f(n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(i.useEffect)((function(){!function(){S.apply(this,arguments)}()}),[]),void 0===b?Object(U.jsx)("h3",{children:"processing"}):Object(U.jsxs)(U.Fragment,{children:["review"===o?Object(U.jsx)(U.Fragment,{children:Object(U.jsx)(st,{title:"Review of: ".concat(t.label),leftNav:Object(U.jsx)(tt.a,{color:"primary",onClick:function(){ge(t,b)},children:"Save Debriefing Log"}),rightNav:Object(U.jsx)(tt.a,{color:"primary",onClick:function(){d(!c)},children:"Toggle Comments"})})}):Object(U.jsx)(U.Fragment,{children:Object(U.jsx)(st,{title:"Analysis for: ".concat(t.label)})}),Object(U.jsx)("form",{children:Object(U.jsx)("div",{style:{overflowY:"auto",maxHeight:"700px"},children:Object(U.jsxs)(H.a,{borderless:!0,size:"sm",children:[Object(U.jsx)("thead",{children:Object(U.jsxs)("tr",{children:[Object(U.jsx)("th",{className:"table-header",children:" ID "}),Object(U.jsx)("th",{className:"table-header",children:" Timestamp "}),Object(U.jsx)("th",{className:"table-header",children:" Action Description "}),Object(U.jsx)("th",{className:"table-header",children:" Feedback "}),c&&Object(U.jsx)("th",{className:"table-header",children:" Comments "})]})}),Object(U.jsx)("tbody",{className:"scrolling",children:b.map((function(e,t){return Object(U.jsx)("tr",{children:"header"===e.type?(n=e,Object(U.jsx)(U.Fragment,{children:"assessmentHeader"===n.id||"assessmentSubHeader"===n.id?Object(U.jsx)("td",{colSpan:"4",className:he(n),children:Object(U.jsx)("b",{children:n.label})}):Object(U.jsx)("td",{colSpan:"10",className:"black",children:Object(U.jsx)("div",{children:Object(U.jsxs)("em",{children:["\xa0\xa0\xa0Intervention Group: ",n.probLabel]})})})})):D(e)},t);var n}))})]})})})]})};var ct=function(){var e=Object(d.m)().logID,t=Object(i.useState)(void 0),n=Object(l.a)(t,2),r=n[0],o=n[1],s=Object(i.useState)(void 0),a=Object(l.a)(s,2),c=a[0],u=a[1],h=Object(i.useState)(void 0),b=Object(l.a)(h,2),f=b[0],p=b[1],m=Object(i.useState)(!1),v=Object(l.a)(m,2),y=v[0],w=v[1],P=Object(i.useState)(!1),D=Object(l.a)(P,2),x=D[0],S=D[1];function E(){window.confirm("Are you sure you want to overwrite the existing analysis?  Any prior comments previously added will be lost.")&&I(f,r)}function I(e,t){return k.apply(this,arguments)}function k(){return(k=Object(j.a)(g.a.mark((function e(t,n){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:et(t,n);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(){return(N=Object(j.a)(g.a.mark((function t(){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_(O,"debriefing-feedback-logs",e);case 2:if(t.sent){t.next=7;break}I(f,r),w(!0),t.next=8;break;case 7:E();case 8:return w(!0),t.abrupt("return",!0);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(i.useEffect)((function(){q(O,e).then((function(e){o(e)})).catch((function(e){return alert("error fetching observer log",e)}))}),[]),Object(i.useEffect)((function(){r&&L(O,r.scenarioID,"V2").then((function(e){console.log("retrieve scenario:",e),p(e)}))}),[r]),Object(i.useEffect)((function(){f&&function(){N.apply(this,arguments)}()}),[f]),Object(i.useEffect)((function(){y&&W(O,e).then((function(e){u(e)})).catch((function(e){return alert("error fetching debriefing log",e)}))}),[y]),Object(i.useEffect)((function(){c&&S(!0)}),[c]),x?Object(U.jsx)(at,{log:c,actions:c.events,scenario:f,context:"initial-analysis"}):Object(U.jsx)("h3",{children:"Loading"})},dt=function(){var e=Object(d.m)().logID,t=Object(i.useState)(null),n=Object(l.a)(t,2),r=n[0],o=n[1],s=Object(i.useState)(null),a=Object(l.a)(s,2),c=a[0],u=a[1],h=Object(i.useState)(!1),b=Object(l.a)(h,2),f=b[0],p=b[1];return Object(i.useEffect)((function(){q(O,e).then((function(e){o(e)}))}),[e]),Object(i.useEffect)((function(){r&&L(O,r.scenarioID).then((function(e){u(e),console.log("scenario",e)}))}),[r]),Object(i.useEffect)((function(){c&&p(!0)}),[c]),f?Object(U.jsx)(ct,{log:e}):Object(U.jsx)("h3",{children:"Loading"})};var ut=function(){var e=Object(d.m)().logID,t=Object(i.useState)(void 0),n=Object(l.a)(t,2),r=n[0],o=n[1],s=Object(i.useState)(void 0),a=Object(l.a)(s,2),c=a[0],u=a[1],h=Object(i.useState)(void 0),b=Object(l.a)(h,2),f=b[0],p=b[1],m=Object(i.useState)(!1),v=Object(l.a)(m,2),y=v[0],w=v[1],P=Object(i.useState)(!1),D=Object(l.a)(P,2),x=D[0],S=D[1];function E(){return(E=Object(j.a)(g.a.mark((function t(){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_(O,"debriefing-feedback-logs",e);case 2:if(t.sent){t.next=4;break}et(f,r);case 4:return w(!0),t.abrupt("return",!0);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(i.useEffect)((function(){q(O,e).then((function(e){o(e)})).catch((function(e){return alert("error fetching observer log",e)}))}),[e]),Object(i.useEffect)((function(){r&&L(O,r.scenarioID,"V2").then((function(e){console.log("scenario:",e),p(e)}))}),[r]),Object(i.useEffect)((function(){f&&function(){E.apply(this,arguments)}()}),[f]),Object(i.useEffect)((function(){y&&W(O,e).then((function(e){u(e)})).catch((function(e){return alert("error fetching debriefing log",e)}))}),[y]),Object(i.useEffect)((function(){c&&S(!0)}),[c]),x?Object(U.jsx)(at,{log:c,actions:c.events,scenario:f,context:"review"}):Object(U.jsx)("h3",{children:"Loading"})},lt=function(e){return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(st,{title:"MedDBriefer Authentication"}),e.children]})},ht=function(e){return Object(U.jsx)(u.AuthProvider,{children:Object(U.jsx)(c.HashRouter,{children:Object(U.jsxs)(d.g,{children:[Object(U.jsx)(u.PrivateRoute,{exact:!0,path:"/logs/:logID",authFlowLayout:lt,component:dt}),Object(U.jsx)(u.PrivateRoute,{exact:!0,path:"/debriefing-feedback-logs/:logID",authFlowLayout:lt,component:ut}),Object(U.jsx)(u.PrivateRoute,{exact:!0,match:"/",authFlowLayout:lt,component:V})]})})})},bt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,68)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,o=t.getLCP,s=t.getTTFB;n(e),r(e),i(e),o(e),s(e)}))};a.a.render(Object(U.jsx)(o.a.StrictMode,{children:Object(U.jsx)(ht,{})}),document.getElementById("root")),bt()}},[[61,1,2]]]);
//# sourceMappingURL=main.9df3b2ca.chunk.js.map
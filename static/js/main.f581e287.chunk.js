/*! For license information please see main.f581e287.chunk.js.LICENSE.txt */
(this["webpackJsonp@meddbriefer/debriefer"]=this["webpackJsonp@meddbriefer/debriefer"]||[]).push([[0],{48:function(e,t,n){},56:function(e,t,n){},61:function(e,t,n){"use strict";n.r(t);var r,i=n(2),a=n.n(i),o=n(42),s=n.n(o),c=(n(48),n(25)),u=n(9),d=n(26),l=(n(55),n(56),n(8)),f=n(31),h=(n(39),n(41),function(e,t){var n=function(e){var t=f.default.apps.filter((function(t){return t.options.appId===e}));return 1===t.length?t[0]:null}(e.appId);return n||f.default.initializeApp(e,t)});"pam"===Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_APP_ENV?(console.log("using pjordan config"),r=h({apiKey:"AIzaSyB9eVT-fu4TOjxHoPAXqsnz9tCcbTJkTOw",authDomain:"pamdev-ea800.firebaseapp.com",projectId:"pamdev-ea800",storageBucket:"pamdev-ea800.appspot.com",messagingSenderId:"366450927885",appId:"1:366450927885:web:caa5f022ef1de182a0e844",measurementId:"G-JC5XZEPYT1"},"pam")):"scott"===Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_APP_ENV?(console.log("using scott config"),r=h({apiKey:"AIzaSyBEhbIdVW2F2vvvfvpNb2SsCDP9Yoc__z8",authDomain:"scottdev-f6528.firebaseapp.com",projectId:"scottdev-f6528",storageBucket:"scottdev-f6528.appspot.com",messagingSenderId:"447730403122",appId:"1:447730403122:web:1727020dbac4ad4cf6f92b"})):(console.log("using production config"),r=h({apiKey:"AIzaSyBOgWAbXUGckpad2sk0IUo00hZsV4WxG0E",authDomain:"meddbriefer-68cd4.firebaseapp.com",projectId:"meddbriefer-68cd4",storageBucket:"meddbriefer-68cd4.appspot.com",messagingSenderId:"1087114796018",appId:"1:1087114796018:web:679fbab38dbf78af0ce96b",measurementId:"G-Q7QZKC9KHW"},"production"));var b,p,m,v,O,j,g,y,w,P=r,x=(P.auth(),P.firestore()),E=n(6),S=n.n(E),D=n(10),I=n(24),N="assessment",k="assessment-option",A="assessment-with-options",T="decision",C="decision-option",F="intervention",R="phase",B="required-action",M="sub-phase",L=Object.freeze({PHASE:R,SUB_PHASE:M,ASSESS:N,AWO:A,ASSESS_OPTION:k,ASSESSO:k,CL_HEADING:"checklist-heading",CL_PROMPT:"checklist-prompt",DECISION:T,DECISION_OPTION:C,DIST_PROMPT:"distinguishing-prompt",NESTED_CHECKLIST:"nested-checklist",REQUIRED:B,REQURED:B,INTERV:F,PROMPT_SET:"prompt-set",PROMPT:"prompt",ANSWER:"answer"}),_=Object.freeze({ONE:"one",OOM:"one-or-more",NONE:"none"}),q=(Object.freeze({ONE:"One",OOM:"One or more",NONE:"None"}),Object.freeze({PHASE:"",SUB_PHASE:"",ANSWER:"answer-",ASSESS:"assess-",AWO:"assessment-with-options-",ASSESS_OPTION:"assess-option-",CL_PROMPT:"cl-prompt-",DECISION:"decision-",DECISION_OPTION:"decision-option-",INTERV:"intv-",PROMPT_SET:"prompt-set-",PROMPT:"prompt-",REQUIRED:"required-action-"}),Object.freeze({AW:"airway",BR:"breathing",BL:"bleeding",SH:"shock"}),Object.freeze({AW:"Airway",BR:"Breathing",BL:"Bleeding",SH:"Shock"}),[N,A,T,B]),W=[k,C],H=[N,A,T,B,F,R,M],z=(Object.freeze({NONE:"",MIN:"mimimal",OPT:"optional",CONTRA:"contraindicated"}),n(15)),V=(n(14),n(36),n(37),n(19)),G=(L.DIST_PROMPT,_.ONE,L.DIST_PROMPT,_.OOM,L.PROMPT,_.ONE,L.PROMPT,_.ONE,L.PROMPT,L.PROMPT,_.ONE,L.PROMPT,_.ONE,L.PROMPT,_.ONE,L.PROMPT,_.ONE,L.PROMPT,_.ONE,L.PROMPT,_.ONE,L.PROMPT,_.ONE,L.PROMPT,_.ONE,L.PROMPT,_.ONE,L.PROMPT,_.ONE,L.PROMPT,_.ONE,L.PROMPT,_.ONE,L.PROMPT,_.ONE,L.PROMPT,_.ONE,L.PROMPT,_.ONE,L.PROMPT,_.ONE,L.PROMPT,_.ONE,L.PROMPT,_.ONE,L.PROMPT,_.ONE,L.PROMPT,_.ONE,L.PROMPT,_.ONE,L.PROMPT,_.ONE,b={depth:3,type:"intervention",id:"menu-item-nasotracheal-intubation",interventionID:"intv-nasotracheal-intubation"},Object(V.a)(b,"interventionID","intv-nasotracheal-intubation"),Object(V.a)(b,"interventionID","intv-nasotracheal-intubation"),Object(V.a)(b,"intvCategoryID","intv-cat-airway"),p={depth:4,type:"intervention",id:"menu-item-rapid-sequence-intubation",interventionID:"intv-rapid-sequence-intubation"},Object(V.a)(p,"interventionID","intv-rapid-sequence-intubation"),Object(V.a)(p,"interventionID","intv-rapid-sequence-intubation"),Object(V.a)(p,"intvCategoryID","intv-cat-airway"),function(e,t){return e.collection("published-scenarios").doc(t).get().then((function(e){return e.data()}))}),U=function(){var e=Object(D.a)(S.a.mark((function e(t,n,r){var i;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.collection(n).where("id","==","".concat(r)).get();case 2:return i=e.sent,e.abrupt("return",i.empty);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Y=function(e,t){return e.collection("logs").doc(t).get().then((function(e){var t=e.data();return t.id=e.id,t}))},K=function(e,t){return e.collection("debriefing-feedback-logs").doc(t).get().then((function(e){var t=e.data();return t.id=e.id,t}))},Q=n(62),J=n(1),X=function(){var e=Object(i.useState)([]),t=Object(l.a)(e,2),n=t[0],r=t[1],a=Object(i.useState)(!1),o=Object(l.a)(a,2),s=o[0],u=o[1];return Object(i.useEffect)((function(){var e;(e=x,e.collection("logs").get().then((function(e){return e.docs.map((function(e){var t=e.data();return{id:e.id,label:t.label,scenario:t.scenarioName,userName:t.userName,timestamp:t.timestamp}}))}))).then((function(e){r(e),u(!0)})).catch((function(e){return console.log("error fetching logs",e)}))}),[]),s?Object(J.jsxs)(Q.a,{striped:!0,borderless:!0,size:"sm",hover:!0,children:[Object(J.jsx)("thead",{children:Object(J.jsxs)("tr",{children:[Object(J.jsx)("th",{children:"Label"}),Object(J.jsx)("th",{children:"Scenario"}),Object(J.jsx)("th",{children:"Username"}),Object(J.jsx)("th",{children:"Timestamp"})]})}),Object(J.jsx)("tbody",{children:n.map((function(e){return Object(J.jsxs)("tr",{children:[Object(J.jsx)("td",{children:e.label}),Object(J.jsx)("td",{children:e.scenario}),Object(J.jsx)("td",{children:e.userName}),Object(J.jsx)("td",{children:e.timestamp}),Object(J.jsxs)("td",{children:[Object(J.jsx)(c.Link,{to:"/logs/".concat(e.id),children:"Analyze"}),"\xa0\xa0\xa0\xa0",Object(J.jsx)(c.Link,{to:"/debriefing-feedback-logs/".concat(e.id),children:"Review"})]})]},e.id)}))})]}):Object(J.jsx)("h4",{children:"fetching log data"})},Z=n(17),$=[{scenarioName:"M2CA",exceptions:[["required-action-obtain-OPQRST","This cannot be assessed when GCS < 15"],["assess-opqrst-info","This cannot be assessed when GCS < 15"]]}],ee={Good:"text-success",Caution:"text-warning",Problem:"text-danger","Not implemented":"text-muted"},te={Good:"sentiment_satisfied",Caution:"report_problem",Problem:"highlight_off","Not implemented":"sentiment_neutral"},ne={contraindicated:["Problem","You should not have done this action because it is contraindicated in this case +bos ?contraindicatedWhy +eos"],misOrdered:["Problem","Doing this action is correct but it was done out of the recommended order +bos @orderingFB +bos ?intvStatusFB +eos"],missingMinimal:["Problem","You did not do this action, which is recommended by protocol ?protocol +bos @why +eos"],missingOptional:["Caution","You did not do this action +bos but it was optional in this case according to protocol ?protocol @bos @why +eos"],missingRequired:["Problem","You did not do this action, which is recommended by protocol ?protocol +bos @why +eos"],missingRequiredAssessment:["Problem","You did not do this action. +bos ?assessmentFB +eos"],notNecessary:["Caution","You should not have done this action because it was unnecessary +bos @why +eos"],assessment:["Good",""],"assessment-option":["Good",""],"decision-option":["Good",""],"required-action":["Good",""],"assessment-option-incorrect":["Problem","Doing this action was correct but there is a problem with how you planned to do it +bos @incorrectAnswerFB +eos "],"decision-option-incorrect":["Problem","Doing this action was correct but there is a problem with how you planned to do it +bos @incorrectAnswerFB +eos "],"misOrdered-assessment-option-incorrect":["Problem","Doing this action was correct but it was done out of the recommended order +bos @orderingFB +bos Also there is a problem with how you planned to do it +bos @incorrectAnswerFB +eos "],"misOrdered-decision-option-incorrect":["Problem","Doing this action was correct but it was done out of the recommended order +bos @orderingFB +bos Also there is a problem with how you planned to do it +bos @incorrectAnswerFB +eos "],standard:["Good","?intvStatusFB +eos "],intvCheckWNoIntvFound:["Caution","You didn't do this intervention so it doesn't make sense to check the status of it at this point."],unexpectedPatientIntvCheck:["Caution","This status check is not likely to reveal any useful information."],patientIntvCheck:["Good",""],patientVitalCheck:["Good",""],"standard-incorrect-answers":["Problem","Doing this action is correct but there is a problem with how you planned to do it +bos @incorrectAnswersFB +eos"],"minimal-incorrect-answers":["Problem","Doing this action was correct and would solve the problem but you did not follow protocol @protocol +bos @minimalWhy +bos also there is a problem with how you planned to do this intervention +bos @incorrectAnswersFB +eos"],"misOrdered-incorrect-answers":["Problem","Doing this action is correct but it was done out of the recommended order +bos @orderingFB +bos also there is a problem with how you planned to do it +bos @incorrectAnswersFB +eos"],"misOrdered-minimal-incorrect-answers":["Problem","Doing this action is correct but it was done out of the recommended order +bos @orderingFB +bos And while this would solve the problem, you did not follow protocol @protocol +bos @minimalWhy +bos also there is a problem with how you planned to do it +bos @incorrectAnswersFB +eos"],minimal:["Caution","Doing this action is correct and solves the problem but you did not follow protocol @protocol +bos @minimalWhy +bos ?intvStatusFB +eos "],green:["Good",""],red:["Problem",""],yellow:["Caution",""],default:["Not implemented","This action was not expected.  There could be an issue with how this scenario is represented within the system."]},re=function(e){for(var t=[],n=0,r=Object.entries(ne);n<r.length;n++){var i=Object(l.a)(r[n],2),a=i[0];i[1][0]===e&&t.push(a)}return t},ie=function(e,t){return(ne[e.status]?ne[e.status]:ne.default)[t]},ae=function(e){return ee[ie(e,0)]},oe=function(e){var t,n=e.split(" "),r=n.length;n.forEach((function(e,t){var i=e.trim();"."===i[e.length-1]&&t<r-1&&(i+="\xa0\xa0"),n[t]=i}));var i,a=Object(Z.a)(n);try{for(a.s();!(i=a.n()).done;){var o=i.value;t=t?t+" "+o:o}}catch(s){a.e(s)}finally{a.f()}return t},se=function(e){e.intvStatus&&e.intvStatus.length>0&&(e.intvStatusFB=function(e){var t,n,r=[],i=[],a=Object(Z.a)(e.intvStatus);try{for(a.s();!(n=a.n()).done;){var o=n.value;o.foundCk?r.push(o.label):i.push(o.label)}}catch(s){a.e(s)}finally{a.f()}return i.length>0&&(t="Remember to check the effect of this action by asking for: "+i+".",r.length>0&&(t=t+" That is in addition to what you did ask for: "+r+".")),t}(e));var t,n=oe(ie(e,1)).trim().split(" ");n.forEach((function(t,r){var i=t.charAt(0),a=t.substring(1);switch(n[r]=n[r].trim(),i){case"@":e[a]?n[r]=oe(e[a]):n[r]="[value for "+a+" is missing]";break;case"?":e[a]?n[r]=oe(e[a]):(n[r]="","+bos"===n[r-1]&&(n[r-1]=""),"+eos"===n[r+1]&&(n[r+1]=""))}})),n.forEach((function(e,t){var r="";switch(e.charAt(0)){case"+":switch(e.substring(1)){case"eos":"."===(r=n[t-1].trim())[r.length-1]&&(r=r.slice(0,-1)),n[t-1]=r+".\xa0",n[t]="";break;case"bos":"."===(r=n[t-1].trim())[r.length-1]&&(r=r.slice(0,-1)),n[t-1]=r+".\xa0",n[t]="";var i=n[t+1].trim();n[t+1]=i.charAt(0).toUpperCase()+i.slice(1)}}}));var r,i=Object(Z.a)(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;t?""!==a&&(t=t+"\xa0"+a):""!==a&&(t=a)}}catch(o){i.e(o)}finally{i.f()}return t},ce={"primary-survey":{id:"c1",before:["secondary-assessment"],beforeOp:"",after:[],afterOp:"",type:"policy"},"ongoing-mgmt-plan":{id:"c2",before:[],beforeOp:"",after:["bsi","scene-size-up","primary-survey","history-taking","secondary-assessment"],afterOp:"and",type:"commonSense"},bsi:{id:"c3",before:["scene-size-up"],beforeOp:"",after:[],afterOp:"",type:"policy"},"scene-size-up":{id:"c4",before:["primary-survey"],beforeOp:"",after:[],afterOp:"",type:"policy"},"assess-major-bleeding":{id:"c5",before:["airway","breathing"],beforeOp:"and",after:[],afterOp:"",type:"policy"},airway:{id:"c6",before:["breathing"],beforeOp:"",after:[],afterOp:"",type:"policy"},"assess-injury-mechanism":{id:"c7",before:["required-action-consider-stabilization-of-spine","required-action-considers-stabilize-spine"],beforeOp:"or",after:[],afterOp:"",type:"commonSense"},"intv-control-severe-bleeding-technique-direct-pressure":{id:"c8",before:["intv-control-severe-bleeding-technique-tourniquet"],beforeOp:"",after:[],afterOp:"",type:"both"},"intv-control-severe-bleeding-technique-tourniquet":{id:"c9",before:["intv-control-severe-bleeding-technique-2nd-tourniquet"],beforeOp:"",after:[],afterOp:"",type:"both"},"Administer IV fluid resuscitation":{id:"c10",before:[],beforeOp:"",after:["Establish IVs"],afterOp:"",type:"commonSense"},"Nasal cannula":{id:"c11",before:["Administer high concentation of oxygen"],beforeOp:"",after:[],afterOp:"",type:"commonSense"},"Non-rebreather mask":{id:"c12",before:["Administer high concentation of oxygen"],beforeOp:"",after:[],afterOp:"",type:"commonSense"},"Sedation-assisted intubation":{id:"c13",before:[],beforeOp:"",after:["Nasopharyngeal adjunct","Oropharyngeal adjunct"],afterOp:"or",type:"policy"},"Checks for major bleeding":{id:"c14",before:["intv-control-severe-bleeding-technique-tourniquet"],beforeOp:"",after:[],afterOp:"",type:"commonSense"},"Manual c-spine stabilization":{id:"c15",before:["Cervical collar","Place on long back board(LBB)","Place on short board(e.g., KED)"],beforeOp:"or",after:[],afterOp:"",type:"both"},"Cervical collar":{id:"c16",before:["Attach cervical immoblization device (CID)"],beforeOp:"",after:[],afterOp:"or",type:"commonSense"},"Administer high concentration of oxygen":{id:"c17",before:[],beforeOp:"",after:["Bag-valve mask","Nasal cannula","Non-rebreather mask"],afterOp:"or",type:"commonSense"}},ue={"Apply direct pressure":{intvStatusNeeded:!0,vitalsNeeded:[]},"Nasopharyngeal adjunct":{intvStatusNeeded:!0,vitalsNeeded:[]},"Apply tourniquet":{intvStatusNeeded:!0,vitalsNeeded:[]},"Administer IV fluid resuscitation":{intvStatusNeeded:!1,vitalsNeeded:["BP"]},"Sedation-assisted intubation":{intvStatusNeeded:!0,vitalsNeeded:[]},"Administer high concentration of oxygen":{intvStatusNeeded:!0,vitalsNeeded:["R","Spo2","P"]},"Bag-valve mask":{intvStatusNeeded:!1,vitalsNeeded:["R","Spo2","P"]}},de=function(e,t,n){return e.filter((function(e){return e[t]===n}))},le=function(e,t,n){return de(de(e,"timestamp",n),"id",t)},fe=n(59),he=function(e,t){console.log("In savingDebriefingLog");var n=x.collection("debriefing-feedback-logs").doc(e.id),r={userName:e.userName,ObserverFileCreater:e.userName,label:e.label,ObserverFileName:e.label,commenter:"",scenarioID:e.scenarioID,scenarioName:e.scenarioName,schemaVersion:e.schemaVersion,timestamp:Date().toLocaleString()},i=[],a={},o=!1;t.forEach((function(e,t){for(var n=0,r=Object.entries(e);n<r.length;n++){var i=Object(l.a)(r[n],2),a=i[0],s=i[1];void 0===s&&(console.log("filtered out from events; index: ",t," key: ",a," value: ",s),o=!0)}})),o?(t.forEach((function(e,t){a=fe.pickBy(e,(function(e,t){return!(void 0===e)})),i.push(a)})),r.events=i):r.events=t,n.set(r)},be=function(e){return"criticalActionHeader"===e.status?"":-1===e.timestamp?"\xa0\xa0":(t=e.timestamp,new Date(1e3*t).toISOString().substr(14,5));var t},pe=function(e,t){return e.reduce((function(e,n){return Object(I.a)(Object(I.a)({},e),{},Object(V.a)({},n[t],(e[n[t]]||[]).concat(n)))}),{})},me=function(e,t){return e.checkListMetaData.filter((function(e){return e.type===t}))},ve=re("Problem"),Oe=re("Caution"),je={};function ge(e){j=e,g=ye(e),y=we(e),v=me(e,L.PHASE).map((function(e){return e.id})),m=me(e,L.SUB_PHASE).map((function(e){return e.id})),w=function(e){var t=me(e,L.PHASE),n=me(e,L.SUB_PHASE),r=e.checkListMetaData.filter((function(e){return q.includes(e.type)})),i=e.checkListMetaData.filter((function(e){return W.includes(e.type)})),a=pe(i,"parentID");r.forEach((function(e){e.id in a&&(e.options=a[e.id])}));var o=pe(r.filter((function(e){return void 0===e.subPhase})),"phase"),s=pe(r.filter((function(e){return!!e.subPhase})),"subPhase");n.forEach((function(e){e.items=s[e.id]}));var c=pe(n,"phase");return t.forEach((function(e){e.id in o?e.items=o[e.id]:e.subPhases=c[e.id]})),t}(e),O=Pe(w),w.forEach((function(e){void 0===e.subPhases?je[e.id]=e.label:e.subPhases.forEach((function(t){je[t.id]=e.label}))}))}var ye=function(e){var t=pe(e.checkListMetaData.filter((function(e){return H.includes(e.type)})),"id"),n=pe(e.intvMetaData.filter((function(e){return H.includes(e.type)})),"id");return Object.assign(t,n)},we=function(e){var t=pe(e.checkListMetaData.filter((function(e){return H.includes(e.type)})),"label"),n=pe(e.intvMetaData.filter((function(e){return H.includes(e.type)})),"label");return Object.assign(t,n)},Pe=function(e){var t=[];return e.forEach((function(e){if(e.subPhases){var n=e.subPhases.map((function(e){return e.id}));t=t.concat(n)}else t=t.concat(e.id)})),t},xe=function(e,t,n,r){for(var i=void 0,a=void 0,o=0;o<e.length&&(n.id!==e[o]||(i=t[o],"start"!==r));o++);return i&&(a=-1===i.numericalID?"start"===r?i.numericalIDStart:i.numericalIDEnd:i.numericalID),a},Ee=function(e){var t=g[e];if(t||(t=y[e]),t)return t[0]},Se=function(e,t,n,r){var i=function(e,t,n){for(var r=0;r<n.length;r++){var i=t[r],a=n[r];if(i.length>0&&!Te(a)){var o,s=Object(Z.a)(i);try{for(s.s();!(o=s.n()).done;){var c=o.value;if(c.numericalID===e)return c}}catch(u){s.e(u)}finally{s.f()}}}}(e,n,r);if(i){""!==i.orderingFB?i.orderingFB=i.orderingFB+".\xa0\xa0"+t:i.orderingFB=t;var a="misOrdered";switch(i.status){case"assessment-option-incorrect":a="misOrdered-assessment-option-incorrect";break;case"decision-option-incorrect":a="misOrdered-decision-option-incorrect";break;case"standard-incorrect-answers":a="misOrdered-incorrect-answers"}i.status=a}else console.log("")},De=function(e,t,n,r,i,a,o,s){var c=xe(i,a,e,"end"),u=xe(i,a,e,"start"),d=e.label,l="";if(t.length>0){var f,h=Object(Z.a)(t);try{for(h.s();!(f=h.n()).done;){var b=f.value,p=Ee(b);if(p){var m=p.label,v=xe(i,a,p,"start"),O=xe(i,a,p,"end");switch(r){case"before":if(c&&v)if(c>v)l=u===c?"You should have done "+d:"You should have completed "+d,Se(v,l=v===O?l+" before you did "+m:l+" before starting "+m,o,s);else if("or"===n)return;break;case"after":if(u&&O)if(u<O)l=u===c?"You should have done "+d:"You should have waited to start "+d,Se(u,l=v===O?l+" after you did "+m:l+" until after you finished "+m,o,s);else if("or"===n)return}}}}catch(j){h.e(j)}finally{h.f()}}},Ie=function(e,t){var n=function(e,t){for(var n=[],r=[],i=[],a=0;a<t.length;a++){var o=e[a],s=t[a],c=o[0].numericalID,u=o[o.length-1].numericalID;if((v.includes(s)||m.includes(s))&&(r.push({id:s,numericalID:-1,numericalIDStart:c,numericalIDEnd:u}),n.push(s),i.includes(s)||i.push(s)),o.length>0&&!Te(s)){var d=o.map((function(e){return e.id}));r=r.concat(o),i=i.concat(d),n=n.concat(d)}}return[n,i,r]}(e,t),r=n[0],i=n[1],a=n[2];return i.forEach((function(n){var i=Ee(n);if(i){var o=function(e){var t=e.id,n=e.label,r=ce[t];return r||(r=ce[n]),r}(i);o&&function(e,t,n,r,i,a){var o=t.before,s=t.beforeOp;De(e,o,s,"before",i,a,n,r),o=t.after,s=t.afterOp,De(e,o,s,"after",i,a,n,r)}(i,o,e,t,r,a)}})),[e,t]},Ne=function(e,t,n,r){var i;i=n.when;var a=e.lastIndexOf(i),o=t[a];o||(o=[]),o.splice(r-1,0,n),t[a]=o},ke=function(e,t){var n=function(e,t){var n,r,i=Ae(e),a=Object(z.a)(i).reverse(),o=Object(Z.a)(a);try{var s=function(){var e=r.value;if(n=t.find((function(t){return t===e.id})))return"break"};for(o.s();!(r=o.n()).done&&"break"!==s(););}catch(c){o.e(c)}finally{o.f()}return n}(e,t);return t.lastIndexOf(n)},Ae=function(e){return w.find((function(t){return t.id===e})).subPhases},Te=function(e){var t=w.find((function(t){return t.id===e}));return!(!t||!t.subPhases)},Ce=function(e,t){var n=t;return"red"===e&&(n="red"),"yellow"===e&&"red"!==n&&(n="yellow"),n},Fe=function(e,t,n){var r=void 0;return void 0===(r=n?j.associations[e]:j.checkListCorrectness[e])?(console.log("didn't find answers for ",e),!1):Array.isArray(r)?!r.find((function(e){return e===t})):!(r===t)},Re=function(e,t){var n,r;t?(n=j.associations[e],r=j.intvMetaData):(n=j.checkListCorrectness[e],r=j.checkListMetaData);var i=!1;return Array.isArray(n)?n.forEach((function(e,t){r.forEach((function(t,n){t.id!==e||(!1===i?i=t.label:i+=", ")}))})):r.forEach((function(e,t){e.id===n&&(i=e.label)})),i},Be=function(e,t){var n;n=t?j.intvMetaData:j.checkListMetaData;var r="";return n.forEach((function(t,n){t.id===e&&(r=t.label)})),r||!1};function Me(e,t){var n=t.events;console.log("in analyzeEvents"),ge(e);var r=function(e){var t,n=[],r=Object(Z.a)(e);try{for(r.s();!(t=r.n()).done;){var i=t.value,a={};a.assessments=i.assessments,a.allProblemProtocols=i.protocol,a.probLabel=i.problem,a.lifeThreat=i.lifeThreat;var o=i.solutions[0];a.actions=o.actions,a.contraindications=o.contraindications,a.minimalWhy=o.minimalWhy,a.protocols=o.protocols,n.push(a)}}catch(s){r.e(s)}finally{r.f()}return n}(j.problems),i=[],a=function(e,t){var n=[],r=[],i=[],a=[],o={},s="",c="",u=0,d=0;return e.forEach((function(e,l){var f={comment:"",numericalID:l,status:"",intvStatus:[],contraindicatedWhy:"",minimalWhy:"",why:"",answerCorrect:!0,answerDetails:{},expertPhase:"",workingPhase:"",suggestedPhase:"",protocol:"",probLabel:"",assessments:"",required:!1,actionDescription:"",assessmentFB:"",incorrectAnswersFB:"",orderingFB:"",processingState:"good"};["id","label","finding","phase","subPhase","vitalType","vital","value","type","prompt","promptID","intervention","timestamp"].forEach((function(t){e[t]&&(f[t]=e[t])})),e.label&&(f.actionDescription=e.label),e.type&&(f.status=e.type),e.subPhase?f.workingPhase=e.subPhase:e.phase&&(f.workingPhase=e.phase),f.expertPhase=f.workingPhase,s===f.workingPhase&&c===f.phase||(""!==s?(i[d]=a,d!==u&&(i[u]=i[u].concat(a)),d++,f.phase!==c&&(c=f.phase,u=d,f.phase!==f.workingPhase&&(i[u]=[],r[u]=c,d++))):(c=f.phase)!==f.phase&&(c=f.phase,r[u]=c,d++),s=f.workingPhase,a=[],r[d]=s,i[d]=[]);var h=f.type;["assessment","required-action","intervention","answer","obtain-vital-sign","decision-option","assessment-option"].includes(h)||(f.processingState="bad");var b=[];if("answer"===h){var p=Re(e.promptID,!0),m=Be(e.id,!0);if(p){var v=Fe(e.promptID,e.id,!0),O={correctAnswer:p,givenAnswer:m,correct:!v};n.includes(f.intervention)?(b=a.pop(),f.answerCorrect=b.answerCorrect,f.answerDetails=b.answerDetails,f.actionDescription=b.actionDescription+", "+m,v?(f.answerCorrect=!1,""===b.incorrectAnswersFB?f.incorrectAnswersFB="should have responded "+p:f.incorrectAnswersFB=b.incorrectAnswersFB+", and "+p):(f.incorrectAnswersFB=b.incorrectAnswersFB,f.answerCorrect=b.answerCorrect)):(v?(f.answerCorrect=!1,f.incorrectAnswersFB="should have responded "+p):f.incorrectAnswersFB="",n.push(f.intervention)),f.answerDetails[e.promptID]=O}else f.processingState="bad"}if("intervention"===h&&(b=a.slice(-1)[0])&&"answer"===b.type&&b.intervention===f.id&&(b=a.pop(),f.answerCorrect=b.answerCorrect,f.answerDetails=b.answerDetails,f.incorrectAnswersFB=b.incorrectAnswersFB,f.actionDescription=f.actionDescription+".\xa0\xa0"+b.actionDescription),"good"===f.processingState){if("obtain-vital-sign"===f.type){var j=f.vital,g="";g="intervention-status"===f.vitalType?n.includes(j)?"intv":"noIntv":"vital";var y=o[j];switch(g){case"intv":f.status="patientIntvCheck",y&&y.timestamp<f.timestamp&&(y.foundCk=!0,o[j]=y);break;case"noIntv":f.status="intvCheckWNoIntvFound";break;case"vital":f.status="patientVitalCheck",y&&(y=function(e,t){var n=[];return e.forEach((function(e){e.timestamp<t&&(e.foundCk=!0),n.push(e)})),n}(y,f.timestamp),o[j]=y);break;default:f.status="unexpectedPatientIntvCheck"}}"intervention"===f.type&&t.forEach((function(e,t){var n,r,i=["protocol","why","probLabel"];null===(n=e.actions)||void 0===n||n.forEach((function(t,n){if(t.id===f.id){var r,a=f.id;if((r=ue[f.label])||(r=ue[f.id]),r){var s={intervention:a,timestamp:f.timestamp,foundCk:!1};r.intvStatusNeeded&&(o[a]=Object.assign({},s)),r.vitalsNeeded.forEach((function(e){o[e]?o[e].push(Object.assign({},s)):o[e]=[Object.assign({},s)]}))}f.assessmentsNeeded=t.assessments,f.when=t.phase,t.optional||(f.required=!0),f.answerCorrect?f.status="standard":f.status="standard-incorrect-answers",f.suggestedPhase=t.phase,f.probLabel=e.probLabel,i.forEach((function(e){t[e]&&(f[e]=t[e])})),t["id-label"]&&(f.label=t["id-label"])}})),null===(r=e.contraindications)||void 0===r||r.forEach((function(t,n){t.id===f.id&&(f.status="contraindicated",t.why&&(f.contraindicatedWhy=t.why),t["id-label"]&&(f.label=t["id-label"]),t.protocol&&(f.protocol=t.protocol),e.probLabel&&(f.probLabel=e.probLabel))}))})),"decision-option"===f.type&&Fe(e.promptID,e.id,!1)&&(f.status="decision-option-incorrect",f.answerCorrect=!1,f.incorrectAnswerFB="You should have responded "+Re(e.promptID,!1)),"assessment-option"===f.type&&Fe(e.promptID,e.id,!1)&&(f.status="assessment-option-incorrect",f.answerCorrect=!1,f.incorrectAnswerFB="You should have responded "+Re(e.promptID,!1)),n.push(f.id),a.push(f)}})),i[d]=a,i[u]=i[u].concat(a),[i,r,n,o]}(n,r),o=a[0],s=a[1],c=a[2],u=a[3],d=Ie(o,s);o=d[0],s=d[1];var f=function(e,t){var n;return O.forEach((function(r,i){if(!t.includes(r)){var a=0;(n=0===i?O[0]:O[i-1])!==r&&(a=t.lastIndexOf(n),a+=1),t.splice(a,0,r),e.splice(a,0,[])}})),[e,t]}(o,s);o=f[0],s=f[1];var h=function(e,t,n,r,i){var a,o=function(e){var t=[];return e.forEach((function(e){""!==e.assessments&&(t=t.concat(e.assessments))})),t}(e),s=t.length,c=j.checkListMetaData.filter((function(e){return[L.ASSESS,L.REQUIRED].includes(e.type)})),u=[],d=Object(Z.a)($);try{for(d.s();!(a=d.n()).done;){var l=a.value;if(l.scenarioName===j.name){u=l.exceptions;break}}}catch(f){d.e(f)}finally{d.f()}return u.forEach((function(e,t){c=c.filter((function(t){return t.id!==e[0]})),n.includes(e[0])&&i.forEach((function(t,n){t.forEach((function(t,n){t.id===e[0]&&(t.why=e[1],t.status="notNecessary")}))}))})),c.forEach((function(e,t){if(!n.includes(e.id)){n.push(e.id);var a={comment:"",numericalID:s,status:"missingAssessment",intvStatus:[],expertPhase:"",workingPhase:"",contraindicatedWhy:"",minimalWhy:"",why:"",probLabel:"",protocol:"",actionDescription:"",assessmentFB:"",timestamp:-1};["id","label","finding","phase","subPhase","type","prompt"].forEach((function(t){e[t]&&(a[t]=e[t])})),e.subPhase?a.workingPhase=e.subPhase:e.phase&&(a.workingPhase=e.phase),a.when=a.workingPhase,a.expertPhase=a.workingPhase,a.label&&(a.actionDescription=a.label),o.includes(e.id)&&(a.assessmentFB="Thus you missed finding: "+j.assessmentFindings[e.id]),"required-action"===a.type&&(a.status="missingRequiredAssessment"),Ne(r,i,a,t),s++}})),[n,r,i,s]}(r,n,c,s,o);c=h[0],s=h[1],o=h[2];var b=h[3];r.forEach((function(e){var t=e.actions;t.forEach((function(n,r){if(!c.includes(n.id)){c.push(n.id);var i={comment:"",numericalID:b,status:"",intvStatus:[],required:!0,when:"",suggestedPhase:"",expertPhase:"",probLabel:e.probLabel,minimalWhy:e.minimalWhy,assessmentsNeeded:e.assessments,protocol:e.protocols,actionDescription:"",type:"intervention",timestamp:-1};["id","phase","protocol","why","optional","minimal"].forEach((function(e){n[e]&&(i[e]=n[e])})),n.optional&&(i.required=!n.optional),n["id-label"]&&(i.label=n["id-label"]),n["id-label"]&&(i.actionDescription=n["id-label"]),n.phase&&(i.when=n.phase,i.expertPhase=n.phase,i.suggestedPhase=n.phase),i.required?i.status="missingRequired":i.optional?i.status="missingOptional":i.status="missingRequired","missingOptional"!==i.status&&(!function(e,t,n,r,i){var a=-1;""===n.expertPhase&&(n.expertPhase=v[v.length-2]),a=m.includes(n.expertPhase)||!Ae(n.expertPhase)?e.lastIndexOf(n.expertPhase):ke(n.expertPhase,e),n.when=e[a];var o=r.slice(0,i-1),s=r[i-1],c=Object(z.a)(o).reverse().find((function(e){return e.required})),u=r[i+1],d=r.slice(i+1).find((function(e){return e.required})),l=Object(z.a)(t[a]),f=-1,h=-1,b=-1,p=-1,O=!1;s&&(f=l.findIndex((function(e){return e.id===s.id}))),u&&(h=l.findIndex((function(e){return e.id===u.id}))),c&&(b=l.findIndex((function(e){return e.id===c.id}))),d&&(p=l.findIndex((function(e){return e.id===d.id}))),u&&(h=l.findIndex((function(e){return e.id===u.id}))),-1!==b&&(O=b+2,f>b&&(O=f+2)),O||-1===p||(O=p+1,h<p&&(O=h+1)),O||-1===f||(O=f+2),O||-1===h||(O=h+1),O||(O=l.length+2),Ne(e,t,n,O)}(s,o,i,t,r),b++)}}))})),i=function(e,t){for(var n,r=0,i=Object.entries(t);r<i.length;r++){var a=Object(l.a)(i[r],2),o=a[0],s=a[1];if(Array.isArray(s)){var c,u=Object(Z.a)(s);try{for(u.s();!(c=u.n()).done;){var d=c.value,f={label:o,foundCk:d.foundCk};n=le(e,d.intervention,d.timestamp);var h,b=Object(Z.a)(n);try{for(b.s();!(h=b.n()).done;){var p=h.value;p.intvStatus.includes(f)||p.intvStatus.push(f)}}catch(m){b.e(m)}finally{b.f()}}}catch(m){u.e(m)}finally{u.f()}}else!function(){var t={label:"intervention status",foundCk:s.foundCk};(n=le(e,o,s.timestamp)).forEach((function(e){e.intvStatus.includes(t)||e.intvStatus.push(t)}))}()}return e}(i=function(e,t){for(var n=[],r=1,i=1,a="green",o="green",s=[],c={id:"assessmentHeader",type:"header",numericalID:1,status:"",why:"",label:"",protocol:""},u="",d=!1,l=0;l<e.length;l++){var f=t[l],h=e[l],b=!0;if(v.includes(h)&&Te(h)&&(b=!1),f.length>0&&b){var p=t[l];o="green";var m,O=Object(Z.a)(p);try{for(O.s();!(m=O.n()).done;){var j=m.value;ve.includes(j.status)&&(o="red"),Oe.includes(j.status)&&"red"!==o&&(o="yellow"),j.numericalID=r++}}catch(E){O.e(E)}finally{O.f()}var g=e[l],y=je[g];if(""===u&&(u=y,a=Ce(o,a)),l===e.length-1){if(y!==u){var w=Object.assign({},c);w.label=u,w.status=a,w.numericalID=i++/1e3,n.push(w),n.push.apply(n,Object(z.a)(s))}s=Object.assign([],p),u=y,a=Ce(o,a),d=!0}if(y!==u||d){var P=Object.assign({},c);P.label=u,P.status=a,P.numericalID=i++/1e3,n.push(P),n.push.apply(n,Object(z.a)(s)),s=Object.assign([],p),u=y,a=Ce(o,"green")}else{var x;a=Ce(o,a),(x=s).push.apply(x,Object(z.a)(p))}}}return n}(s,o),u);var p=[];i.forEach((function(e,t){p.push(e)}));var g=[],y=[],w=0,P=-1;p.forEach((function(e,t){if(e.status.includes("standard","standard-incorrect-answers")){y.includes(e.probLabel)?P=y.indexOf(e.probLabel):(y[P=w]=e.probLabel,w++);var n=g[P];n||(n=[]),n.push(e),g[P]=n}}));var x=i.map((function(e){return e.id})),E=r.map((function(e){return e.probLabel}));return y.forEach((function(e,t){var n=E.indexOf(e),a=r[n],o=a.actions.filter((function(e){return!e.optional})).map((function(e){return e.id})),s=a.actions.filter((function(e){return e.minimal})).map((function(e){return e.id}));if(s){var c,u=g[t].map((function(e){return e.id})),d=!0,l=!0,f=Object(Z.a)(o);try{for(f.s();!(c=f.n()).done;){var h=c.value;if(!u.includes(h)){d=!1;break}}}catch(j){f.e(j)}finally{f.f()}var b,p=Object(Z.a)(s);try{for(p.s();!(b=p.n()).done;){var m=b.value;if(!u.includes(m)){l=!1;break}}}catch(j){p.e(j)}finally{p.f()}var v=[];if(!d&&l){s.forEach((function(e,t){var n=x.indexOf(e),r=i[n];r.minimalWhy=a.minimalWhy,"standard-incorrect-answers"===r.status?r.status="minimal-incorrect-answers":r.status="minimal",v.push(r.numericalID),i[n]=r}));var O={};v.forEach((function(e,t){(O=function(e,t){var n,r={},i={},a=Object(Z.a)(t);try{for(a.s();!(n=a.n()).done;){var o=n.value;if("problemHeader"===o.id)r=o;else if(o.numericalID===e){i=r;break}}}catch(j){a.e(j)}finally{a.f()}return i}(e,i))&&"green"===O.status&&(O.status="yellow")}))}}})),console.log("Final Analysis:",p),he(t,p),p}var Le=n(67),_e=n(63),qe=n(64),We=n(65),He=n(66),ze=function(e){var t=e.title,n=e.leftNav,r=void 0===n?null:n,a=e.rightNav,o=void 0===a?null:a,s=Object(i.useContext)(d.AuthContext),c=s.isAuthenticated,u=s.userName,l=s.signOutUser;return Object(J.jsxs)(_e.a,{color:"dark",dark:!0,children:[Object(J.jsx)(qe.a,{href:"#",children:"MedDBriefer"}),!!r&&Object(J.jsx)(We.a,{children:r}),!!t&&Object(J.jsx)(He.a,{tag:"h3",children:t}),Object(J.jsxs)(We.a,{children:[c&&Object(J.jsxs)(J.Fragment,{children:[Object(J.jsxs)(He.a,{children:["Welcome, ",u," \xa0"]}),Object(J.jsx)(Le.a,{color:"danger",onClick:l,children:"Sign Out"})]}),!!o&&o]})]})},Ve=function(e){var t=e.log,n=e.actions,r=e.scenario,a=e.context,o=Object(i.useState)(!1),s=Object(l.a)(o,2),c=s[0],u=s[1],d=Object(i.useState)(void 0),f=Object(l.a)(d,2),h=f[0],b=f[1];function p(e){return Object(J.jsx)(J.Fragment,{children:"obtain-vital-sign"===e.type?v(e):O(e)})}function m(e){var t=r.intvMetaData.find((function(t){return e.vital===t.id}));return Object(J.jsx)(J.Fragment,{children:t.label})}function v(e){return Object(J.jsx)(J.Fragment,{children:"intervention-status"===e.vitalType?Object(J.jsxs)(J.Fragment,{children:["Requested intervention status for: ",m(e),", ",Object(J.jsxs)("p",{children:["Found: ",Object(J.jsx)("i",{children:e.value})]})]}):Object(J.jsxs)(J.Fragment,{children:["Requested vital: ",e.vital,", ",Object(J.jsxs)("p",{children:["Found: ",Object(J.jsx)("i",{children:e.value})]})]})})}function O(e){return Object(J.jsx)(J.Fragment,{children:e.subPhase&&"intervention"!==e.type?Object(J.jsxs)(J.Fragment,{children:[Object(J.jsxs)("b",{children:[e.subPhase,":"]})," ",e.actionDescription,".  ",g(e)]}):Object(J.jsx)(J.Fragment,{children:j(e)})})}function j(e){return Object(J.jsx)(J.Fragment,{children:"intervention"===e.type?Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)("b",{children:"Intervention:"})," ",e.actionDescription,". ",g(e)," "]}):Object(J.jsxs)(J.Fragment,{children:[e.actionDescription,".  ",g(e)]})})}function g(e){return Object(J.jsx)(J.Fragment,{children:e.finding?Object(J.jsxs)("p",{children:["\xa0\xa0\xa0\xa0\xa0Findings: ",Object(J.jsx)("i",{children:e.finding})]}):Object(J.jsx)(J.Fragment,{})})}function y(e){var t=e.target.defaultValue,n=e.target.value,r=e.target.id;if(t!==n){var i=h.find((function(e){return e.id===r})),a=Object.assign({},i,{comment:n});P(a)}}var w=function(e){return Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)("td",{children:e.numericalID}),Object(J.jsx)("td",{children:be(e)}),Object(J.jsxs)("td",{className:ae(e),children:[Object(J.jsx)("span",{className:"material-icons-outlined",children:(t=e,te[ie(t,0)])}),p(e)]}),Object(J.jsx)("td",{children:se(e)}),c&&Object(J.jsx)("td",{children:Object(J.jsx)("textarea",{rows:"2",cols:"50",defaultValue:e.comment,onBlur:y,id:"".concat(e.id)})})]});var t},P=function(e){var t=h.findIndex((function(t){return t.id===e.id}));b([].concat(Object(z.a)(h.slice(0,t)),[e],Object(z.a)(h.slice(t+1))))};function x(){return(x=Object(D.a)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u("review"===a),b(n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(i.useEffect)((function(){!function(){x.apply(this,arguments)}()}),[]),void 0===h?Object(J.jsx)("h3",{children:"processing"}):Object(J.jsxs)(J.Fragment,{children:["review"===a?Object(J.jsx)(J.Fragment,{children:Object(J.jsx)(ze,{title:"Review of: ".concat(t.label),leftNav:Object(J.jsx)(Le.a,{color:"primary",onClick:function(){he(t,h)},children:"Save Debriefing Log"}),rightNav:Object(J.jsx)(Le.a,{color:"primary",onClick:function(){u(!c)},children:"Toggle Comments"})})}):Object(J.jsx)(J.Fragment,{children:Object(J.jsx)(ze,{title:"Analysis for: ".concat(t.label)})}),Object(J.jsx)("form",{children:Object(J.jsx)("div",{style:{overflowY:"auto",maxHeight:"700px"},children:Object(J.jsxs)(Q.a,{borderless:!0,size:"sm",children:[Object(J.jsx)("thead",{children:Object(J.jsxs)("tr",{children:[Object(J.jsx)("th",{className:"table-header",children:" ID "}),Object(J.jsx)("th",{className:"table-header",children:" Timestamp "}),Object(J.jsx)("th",{className:"table-header",children:" Action Description "}),Object(J.jsx)("th",{className:"table-header",children:" Feedback "}),c&&Object(J.jsx)("th",{className:"table-header",children:" Comments "})]})}),Object(J.jsx)("tbody",{className:"scrolling",children:h.map((function(e,t){return Object(J.jsx)("tr",{children:"header"===e.type?(n=e,Object(J.jsx)(J.Fragment,{children:"assessmentHeader"===n.id?Object(J.jsx)("td",{colSpan:"4",className:ae(n),children:Object(J.jsx)("b",{children:n.label})}):Object(J.jsx)("td",{colSpan:"10",className:"black",children:Object(J.jsx)("div",{children:Object(J.jsxs)("em",{children:["\xa0\xa0\xa0Intervention Group: ",n.probLabel]})})})})):w(e)},t);var n}))})]})})})]})};var Ge=function(){var e=Object(u.m)().logID,t=Object(i.useState)(void 0),n=Object(l.a)(t,2),r=n[0],a=n[1],o=Object(i.useState)(void 0),s=Object(l.a)(o,2),c=s[0],d=s[1],f=Object(i.useState)(void 0),h=Object(l.a)(f,2),b=h[0],p=h[1],m=Object(i.useState)(!1),v=Object(l.a)(m,2),O=v[0],j=v[1],g=Object(i.useState)(!1),y=Object(l.a)(g,2),w=y[0],P=y[1];function E(){window.confirm("Are you sure you want to overwrite the existing analysis?  Any prior comments previously added will be lost.")&&I(b,r)}function I(e,t){return N.apply(this,arguments)}function N(){return(N=Object(D.a)(S.a.mark((function e(t,n){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Me(t,n);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(){return(k=Object(D.a)(S.a.mark((function t(){return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,U(x,"debriefing-feedback-logs",e);case 2:if(t.sent){t.next=7;break}I(b,r),j(!0),t.next=8;break;case 7:E();case 8:return j(!0),t.abrupt("return",!0);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(i.useEffect)((function(){Y(x,e).then((function(e){a(e)})).catch((function(e){return alert("error fetching observer log",e)}))}),[]),Object(i.useEffect)((function(){r&&G(x,r.scenarioID,"V2").then((function(e){console.log("retrieve scenario:",e),p(e)}))}),[r]),Object(i.useEffect)((function(){b&&function(){k.apply(this,arguments)}()}),[b]),Object(i.useEffect)((function(){O&&K(x,e).then((function(e){d(e)})).catch((function(e){return alert("error fetching debriefing log",e)}))}),[O]),Object(i.useEffect)((function(){c&&P(!0)}),[c]),w?Object(J.jsx)(Ve,{log:c,actions:c.events,scenario:b,context:"initial-analysis"}):Object(J.jsx)("h3",{children:"Loading"})},Ue=function(){var e=Object(u.m)().logID,t=Object(i.useState)(null),n=Object(l.a)(t,2),r=n[0],a=n[1],o=Object(i.useState)(null),s=Object(l.a)(o,2),c=s[0],d=s[1],f=Object(i.useState)(!1),h=Object(l.a)(f,2),b=h[0],p=h[1];return Object(i.useEffect)((function(){Y(x,e).then((function(e){a(e)}))}),[e]),Object(i.useEffect)((function(){r&&G(x,r.scenarioID).then((function(e){d(e),console.log("scenario",e)}))}),[r]),Object(i.useEffect)((function(){c&&p(!0)}),[c]),b?Object(J.jsx)(Ge,{log:e}):Object(J.jsx)("h3",{children:"Loading"})};var Ye=function(){var e=Object(u.m)().logID,t=Object(i.useState)(void 0),n=Object(l.a)(t,2),r=n[0],a=n[1],o=Object(i.useState)(void 0),s=Object(l.a)(o,2),c=s[0],d=s[1],f=Object(i.useState)(void 0),h=Object(l.a)(f,2),b=h[0],p=h[1],m=Object(i.useState)(!1),v=Object(l.a)(m,2),O=v[0],j=v[1],g=Object(i.useState)(!1),y=Object(l.a)(g,2),w=y[0],P=y[1];function E(){return(E=Object(D.a)(S.a.mark((function t(){return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,U(x,"debriefing-feedback-logs",e);case 2:if(t.sent){t.next=4;break}Me(b,r);case 4:return j(!0),t.abrupt("return",!0);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(i.useEffect)((function(){Y(x,e).then((function(e){a(e)})).catch((function(e){return alert("error fetching observer log",e)}))}),[e]),Object(i.useEffect)((function(){r&&G(x,r.scenarioID,"V2").then((function(e){console.log("scenario:",e),p(e)}))}),[r]),Object(i.useEffect)((function(){b&&function(){E.apply(this,arguments)}()}),[b]),Object(i.useEffect)((function(){O&&K(x,e).then((function(e){d(e)})).catch((function(e){return alert("error fetching debriefing log",e)}))}),[O]),Object(i.useEffect)((function(){c&&P(!0)}),[c]),w?Object(J.jsx)(Ve,{log:c,actions:c.events,scenario:b,context:"review"}):Object(J.jsx)("h3",{children:"Loading"})},Ke=function(e){return Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)(ze,{title:"MedDBriefer Authentication"}),e.children]})},Qe=function(e){return Object(J.jsx)(d.AuthProvider,{children:Object(J.jsx)(c.HashRouter,{children:Object(J.jsxs)(u.g,{children:[Object(J.jsx)(d.PrivateRoute,{exact:!0,path:"/logs/:logID",authFlowLayout:Ke,component:Ue}),Object(J.jsx)(d.PrivateRoute,{exact:!0,path:"/debriefing-feedback-logs/:logID",authFlowLayout:Ke,component:Ye}),Object(J.jsx)(d.PrivateRoute,{exact:!0,match:"/",authFlowLayout:Ke,component:X})]})})})},Je=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,68)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),a(e),o(e)}))};s.a.render(Object(J.jsx)(a.a.StrictMode,{children:Object(J.jsx)(Qe,{})}),document.getElementById("root")),Je()}},[[61,1,2]]]);
//# sourceMappingURL=main.f581e287.chunk.js.map